{
  "header": {
    "program_id": "CICCMP",
    "file_name": "jcl/CICCMP.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-24T18:37:11.796597",
    "iteration_count": 5,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL member compiles and link-edits a CICS COBOL program named by &MEMNAME (default CICSPGMN) using the BUILDONL cataloged procedure, then conditionally issues a CICS CEMT SET PROG NEWCOPY command via SDSF to refresh the program in the CICSAWSA region.",
    "business_context": "Supports the build and deploy phase of the CardDemo CICS application lifecycle by automating compilation of COBOL source into a load module and immediate activation in CICS without region restart.",
    "program_type": "BATCH",
    "citations": [
      1,
      23,
      27,
      41,
      45,
      49
    ]
  },
  "inputs": [
    {
      "name": "SYMBOLIC PARAMETERS (&HLQ, &MEMNAME)",
      "io_type": "PARAMETER",
      "description": "High-level qualifier and COBOL source member name used by BUILDONL procedure to construct input/output dataset names (e.g., SYSIN DSN=&HLQ.SOURCE.PDS(&MEMNAME), DISP=SHR; SYSLMOD DSN=&HLQ.LOADLIB(&MEMNAME), DISP=(MOD,CATLG,DELETE)). Must be defined prior to job submission.",
      "copybook": null,
      "citation": [
        32,
        33,
        41
      ]
    },
    {
      "name": "&HLQ..CARDDEMO.PRC.UTIL",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Procedure library dataset containing BUILDONL cataloged procedure (must exist with DISP=SHR implicit for JCLLIB/PROCLIB). Defines compile (PGM=IGYCRCTL) and link-edit (PGM=IEWL) steps with DD statements including SYSIN (source SHR), SYSLIN (object SHR/MOD), SYSLMOD (load MOD/CATLG/DELETE).",
      "copybook": null,
      "citation": [
        37
      ]
    },
    {
      "name": "COBOL Source PDS Member",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Input dataset &HLQ..SOURCE.PDS(&MEMNAME) (e.g., AWS.M2.SOURCE.PDS(CICSPGMN)) required prior to job (must exist with DISP=SHR for BUILDONL SYSIN DD). Contains CICS COBOL source for compilation into load module.",
      "copybook": null,
      "citation": [
        4,
        33,
        41
      ]
    },
    {
      "name": "ISFIN",
      "io_type": "OTHER",
      "description": "Inline DD * dataset (lines 48-50, DISP=TEMPORARY implicit) containing MVS /MODIFY command for SDSF input.",
      "copybook": null,
      "citation": [
        48,
        49
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSLMOD Load Module Dataset",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Output dataset &HLQ.LOADLIB(&MEMNAME) created/modified by BUILDONL link-edit step (PGM=IEWL, DISP=(MOD,CATLG,DELETE) to replace or catalog new CICS COBOL load module.",
      "copybook": null,
      "citation": [
        41
      ]
    },
    {
      "name": "ISFOUT",
      "io_type": "REPORT",
      "description": "SDSF execution output report (DD SYSOUT=*, no DSN/DISP specified).",
      "copybook": null,
      "citation": [
        46
      ]
    },
    {
      "name": "CMDOUT",
      "io_type": "REPORT",
      "description": "CICS CEMT command response output report (DD SYSOUT=*, no DSN/DISP specified).",
      "copybook": null,
      "citation": [
        47
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "BUILDONL",
      "call_type": "STATIC_CALL",
      "purpose": "Cataloged procedure invoked by CICSCMP EXEC for CICS COBOL compile (IGYCRCTL) and link-edit (IEWL) with symbolic overrides MEM=&MEMNAME, HLQ=&HLQ for dataset construction.",
      "parameters": [
        "MEM=&MEMNAME",
        "HLQ=&HLQ"
      ],
      "citation": 41
    },
    {
      "program_name": "SDSF",
      "call_type": "STATIC_CALL",
      "purpose": "Batch utility invoked by NEWCOPY EXEC to process inline MVS /MODIFY command issuing CICS CEMT SET PROG NEWCOPY.",
      "parameters": [],
      "citation": 45
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "User must manually replace 'CICSPGMN' in inline CEMT command with actual program name before submission, as no symbolic parameter substitution in DD * data.",
      "logic_summary": "Hardcoded literal in ISFIN inline data.",
      "conditions": [
        "Always"
      ],
      "citation": [
        4,
        49
      ]
    },
    {
      "rule_id": "BR002",
      "description": "NEWCOPY SDSF step executes only if prior CICSCMP step returns condition code less than 4.",
      "logic_summary": "COND=(4,LT) parameter on NEWCOPY EXEC statement.",
      "conditions": [
        "IF PREVSTEP-RC < 4"
      ],
      "citation": [
        45
      ]
    },
    {
      "rule_id": "BR003",
      "description": "JCLLIB ORDER reference uses non-standard CCLIBS stepname syntax without EXEC, likely ignored or causes JCL error; system PROCLIB or STEPLIB may be relied upon for BUILDONL resolution.",
      "logic_summary": "//CCLIBS JCLLIB ORDER without preceding EXEC PGM/PROC.",
      "conditions": [
        "Always"
      ],
      "citation": [
        37
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Input dataset &HLQ..SOURCE.PDS(&MEMNAME) must exist with DISP=SHR access prior to job execution for successful compilation.",
      "logic_summary": "Inferred from standard BUILDONL SYSIN DD usage.",
      "conditions": [
        "Job prerequisite"
      ],
      "citation": [
        41
      ]
    },
    {
      "rule_id": "BR005",
      "description": "Output dataset &HLQ.LOADLIB(&MEMNAME) will be modified (DISP=MOD) or cataloged new by link-edit step.",
      "logic_summary": "Inferred from standard BUILDONL SYSLMOD DD usage.",
      "conditions": [
        "Successful link-edit"
      ],
      "citation": [
        41
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYMBOLIC PARAMETERS (&HLQ, &MEMNAME)",
        "fields_used": [
          "&HLQ",
          "&MEMNAME"
        ],
        "citation": [
          32,
          33
        ]
      },
      {
        "source": "&HLQ..CARDDEMO.PRC.UTIL (JCLLIB/PROCLIB)",
        "fields_used": [
          "BUILDONL procedure definition"
        ],
        "citation": [
          37
        ]
      },
      {
        "source": "COBOL Source PDS(&MEMNAME)",
        "fields_used": [
          "COBOL source code"
        ],
        "citation": [
          41
        ]
      },
      {
        "source": "ISFIN inline",
        "fields_used": [
          "/MODIFY CICSAWSA,'CEMT SET PROG(CICSPGMN) NEWCOPY'"
        ],
        "citation": [
          49
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSLMOD &HLQ.LOADLIB(&MEMNAME)",
        "fields_written": [
          "CICS COBOL load module"
        ],
        "citation": [
          41
        ]
      },
      {
        "destination": "ISFOUT",
        "fields_written": [
          "SDSF processing logs"
        ],
        "citation": [
          46
        ]
      },
      {
        "destination": "CMDOUT",
        "fields_written": [
          "CEMT SET PROG NEWCOPY response"
        ],
        "citation": [
          47
        ]
      },
      {
        "destination": "CICS Region CICSAWSA",
        "fields_written": [
          "Program load module refresh"
        ],
        "citation": [
          49
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "COBOL source code (&MEMNAME member)",
        "output_field": "Load module in &HLQ.LOADLIB(&MEMNAME)",
        "transformation_description": "Compilation via IGYCRCTL and link-edit via IEWL in BUILDONL procedure steps.",
        "citation": [
          41
        ]
      },
      {
        "input_field": "ISFIN /MODIFY command",
        "output_field": "CICS program refresh in CICSAWSA",
        "transformation_description": "SDSF batch execution of MVS console command to invoke CEMT SET PROG NEWCOPY.",
        "citation": [
          45,
          49
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "CICSCMP",
      "purpose": "EXEC PROC=BUILDONL with parms MEM=&MEMNAME,HLQ=&HLQ. Compiles (IGYCRCTL) and link-edits (IEWL) CICS COBOL source from SYSIN DD (&HLQ..SOURCE.PDS(&MEMNAME),SHR) to SYSLMOD DD (&HLQ.LOADLIB(&MEMNAME),MOD/CATLG/DELETE). Other DDs: SYSLIN (object,MOD), SYSPRINT/SYSTERM (SYSOUT), etc. per proc.",
      "called_by": [],
      "calls": [
        "BUILDONL"
      ],
      "citation": [
        41,
        41
      ]
    },
    {
      "paragraph_name": "NEWCOPY",
      "purpose": "EXEC PGM=SDSF,COND=(4,LT). Issues CICS CEMT via DDs: ISFIN (inline /MODIFY,DISP=TEMP), ISFOUT/CMDOUT (SYSOUT=* reports). Refreshes program only if compile/link succeeds.",
      "called_by": [],
      "calls": [
        "SDSF"
      ],
      "citation": [
        45,
        50
      ]
    }
  ],
  "error_handling": [
    {
      "condition": "CICSCMP step RC >=4",
      "action": "Bypass NEWCOPY step via COND=(4,LT), preventing deployment of invalid load module to CICS.",
      "citation": [
        45
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "CEMT SET PROG(CICSPGMN) NEWCOPY",
      "resource": "CICSAWSA CICS region",
      "purpose": "Dynamically refresh/reload the CICS program from updated load module without region restart.",
      "citation": 49
    }
  ],
  "open_questions": [
    {
      "question": "Exact DD statements (DSN, DISP) in BUILDONL procedure",
      "context": "Defined externally in &HLQ..CARDDEMO.PRC.UTIL(BUILDONL); inferred from standard CICS compile procs but unconfirmed.",
      "suggestion": "Retrieve and analyze BUILDONL procedure source."
    },
    {
      "question": "Resolution of CCLIBS JCLLIB syntax and BUILDONL proc location",
      "context": "Non-standard //CCLIBS without EXEC likely fails or ignored; impacts whether custom proclib is used.",
      "suggestion": "Review job logs or test submission."
    },
    {
      "question": "Active values for symbolic &HLQ and &MEMNAME",
      "context": "SET statements commented out (lines 32-33); values passed via job submission parms.",
      "suggestion": "Check submission context or defaults."
    }
  ]
}