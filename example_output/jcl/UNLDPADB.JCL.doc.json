{
  "header": {
    "program_id": "UNLDPADB",
    "file_name": "jcl/UNLDPADB.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:10:41.724955",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL job unloads the IMS hierarchical database PAUTDB (root and child segments) into two sequential flat files using the IMS utility DFSRRC00. STEP0 first deletes any existing output files to ensure a clean start. STEP01 performs the actual unload operation under DLI access with specified PSB/DBD names.",
    "business_context": "Supports AWS M2 CARDDEMO application by unloading PAUTDB IMS database, likely for batch processing, migration, or demo data extraction (citation: lines 33-56).",
    "program_type": "BATCH",
    "citations": [
      23,
      25,
      38,
      48,
      53
    ]
  },
  "inputs": [
    {
      "name": "DDPAUTP0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS PAUTHDB dataset (primary database access for unload)",
      "copybook": null,
      "citation": [
        58
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS PAUTHDBX dataset (extended database access for unload)",
      "copybook": null,
      "citation": [
        59
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "OTHER",
      "description": "VSAM MDB definition from IMS PROCLIB(DFSVSMDB) for database control",
      "copybook": null,
      "citation": [
        62
      ]
    },
    {
      "name": "DD1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Existing ROOT.FILEO file targeted for deletion if present",
      "copybook": null,
      "citation": [
        33
      ]
    },
    {
      "name": "DD2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Existing CHILD.FILEO file targeted for deletion if present",
      "copybook": null,
      "citation": [
        35
      ]
    }
  ],
  "outputs": [
    {
      "name": "OUTFIL1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unloaded root segments from PAUTDB (LRECL=100, RECFM=FB)",
      "copybook": null,
      "citation": [
        48
      ]
    },
    {
      "name": "OUTFIL2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unloaded child segments from PAUTDB (LRECL=206, RECFM=FB)",
      "copybook": null,
      "citation": [
        53
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IEFBR14",
      "call_type": "STATIC_CALL",
      "purpose": "Execute no-op to trigger deletion of prior output files via DISP=OLD,DELETE",
      "parameters": [],
      "citation": 25
    },
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS utility to unload PAUTDB root and child segments to sequential files",
      "parameters": [
        "DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N"
      ],
      "citation": 38
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "DDPAUTP0 / DDPAUTX0",
        "fields_used": [
          "PAUTDB root and child segments"
        ],
        "citation": [
          58,
          59
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "OUTFIL1",
        "fields_written": [
          "Unloaded root segment records"
        ],
        "citation": [
          48
        ]
      },
      {
        "destination": "OUTFIL2",
        "fields_written": [
          "Unloaded child segment records"
        ],
        "citation": [
          53
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PAUTDB IMS root segments",
        "output_field": "Sequential root records",
        "transformation_description": "Unloads hierarchical root segments to fixed-block sequential format",
        "citation": [
          38
        ]
      },
      {
        "input_field": "PAUTDB IMS child segments",
        "output_field": "Sequential child records",
        "transformation_description": "Unloads hierarchical child segments to fixed-block sequential format",
        "citation": [
          38
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP0",
      "summary": null,
      "purpose": "This step serves as a cleanup procedure to remove any existing output files from previous runs, ensuring no conflicts or overwrites without explicit deletion. It executes the IBM utility IEFBR14, which performs no computation but activates the DD statements' DISP parameters. Inputs consumed are the potential existence of prior output files referenced by DD1 (AWS.M2.CARDDEMO.PAUTDB.ROOT.FILEO) and DD2 (AWS.M2.CARDDEMO.PAUTDB.CHILD.FILEO), both with DISP=(OLD,DELETE,DELETE) to delete if present or pass if not. Outputs produced are the deletions themselves, with no data files written; SYSPRINT, SYSOUT, and SYSDUMP are directed to SYSOUT for any diagnostic traces. No business logic or conditional decisions are implemented, as it is a simple housekeeping step. Error handling relies on standard JCL disposition failure (e.g., uncataloged files would ABEND STEP0). It calls no other steps or programs, serving only as a prerequisite for STEP01. SYSDUMP is provided for debugging any deletion issues.",
      "called_by": [],
      "calls": [],
      "citation": [
        25,
        37
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the primary processing step that executes the IMS database unload utility DFSRRC00 to extract segments from PAUTDB into flat sequential files. It consumes inputs from multiple library DD statements including STEPLIB (IMS SDFSRESL modules and application LOADLIB), DFSRESLB (IMS RESLIB), IMS (PSBLIB and DBDLIB for PSB/DBD definitions), DDPAUTP0/ DDPAUTX0 (PAUTHDB/PAUTHDBX datasets for database access), and DFSVSAMP (VSAM MDB from PROCLIB). The PARM specifies DLI access, PSB=PAUDBUNL, DBD=PAUTBUNL, and other defaults for unload mode with no restart. Outputs produced are OUTFIL1 (root segments, LRECL=100, SPACE allocated) and OUTFIL2 (child segments, LRECL=206, SPACE allocated), plus SYSOUTs for logs (SYSPRINT, SYSUDUMP, IMSERR). Business logic is encapsulated in the DFSRRC00 utility, which traverses the IMS database hierarchy and unloads segments sequentially without specified conditions. Error handling uses DUMMY DDs (IMSLOGR, IEFRDER) to suppress unnecessary logs and SYSOUTs for diagnostics; failures would ABEND the step per JCL standards. No subordinate paragraphs or programs are called; it is self-contained. The step ensures cataloged outputs with RLSE for space efficiency.",
      "called_by": [],
      "calls": [],
      "citation": [
        38,
        69
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Prior output files exist",
      "action": "Automatically deleted via DISP=(OLD,DELETE,DELETE) in STEP0",
      "citation": [
        33
      ]
    },
    {
      "condition": "IMS unload failure (e.g., DB not accessible)",
      "action": "JCL ABEND with SYSOUT diagnostics to MSGCLASS=H",
      "citation": [
        2
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Exact segment names and layouts in PAUTDB root/child?",
      "context": "JCL references databases generically; no segment details visible",
      "suggestion": "Examine DBDLIB/PSBLIB sources or analyze generated unload files"
    },
    {
      "question": "Precise mapping of PARM fields (e.g., PAUDBUNL as PSB vs DBD)?",
      "context": "IMS DFSRRC00 PARM format inferred but not explicitly documented in JCL",
      "suggestion": "Consult IMS manuals for DFSRRC00 unload PARM syntax or run TRACE"
    }
  ]
}