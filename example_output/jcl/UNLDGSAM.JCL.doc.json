{
  "header": {
    "program_id": "UNLDGSAM",
    "file_name": "jcl/UNLDGSAM.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:13:59.576908",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job UNLDGSAM that executes the IMS utility DFSRRC00 to unload the GSAM database DLIGSAMP using the DBUNLDGS utility in DLI mode. It provides necessary STEPLIB, IMS libraries, input GSAM files (PAUTDB.ROOT.GSAM and PAUTDB.CHILD.GSAM), and shared authorization datasets. Standard output datasets capture print, dumps, and errors.",
    "business_context": "Supports AWS M2 CardDemo application by unloading IMS GSAM databases, likely for backup, migration, or offline processing (inferred from dataset names AWS.M2.CARDDEMO.PAUTDB).",
    "program_type": "BATCH",
    "citations": [
      1,
      26,
      27,
      36,
      39
    ]
  },
  "inputs": [
    {
      "name": "PASFILOP",
      "io_type": "FILE_VSAM",
      "description": "GSAM file for PAUTDB.ROOT, provided as input to IMS utility (DISP=OLD)",
      "copybook": null,
      "citation": [
        36,
        37
      ]
    },
    {
      "name": "PADFILOP",
      "io_type": "FILE_VSAM",
      "description": "GSAM file for PAUTDB.CHILD, provided as input to IMS utility (DISP=OLD)",
      "copybook": null,
      "citation": [
        39,
        40
      ]
    },
    {
      "name": "DDPAUTP0",
      "io_type": "FILE_VSAM",
      "description": "IMS PAUTHDB dataset, shared reference likely for database authorization",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "FILE_VSAM",
      "description": "IMS PAUTHDBX dataset, shared reference likely for extended authorization",
      "copybook": null,
      "citation": [
        43
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "OTHER",
      "description": "IMS proclib member defining VSAM database structure (DFSVSMDB)",
      "copybook": null,
      "citation": [
        46,
        47
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard utility print output",
      "copybook": null,
      "citation": [
        50
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump output for abends",
      "copybook": null,
      "citation": [
        51
      ]
    },
    {
      "name": "IMSERR",
      "io_type": "REPORT",
      "description": "IMS-specific error messages",
      "copybook": null,
      "citation": [
        52
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Unloads specific GSAM database DLIGSAMP using IMS DBUNLDGS utility",
      "logic_summary": "DBUNLDGS utility invoked on DLIGSAMP database name via PARM parameter",
      "conditions": [],
      "citation": [
        27
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "PASFILOP",
        "fields_used": [],
        "citation": [
          36
        ]
      },
      {
        "source": "PADFILOP",
        "fields_used": [],
        "citation": [
          39
        ]
      },
      {
        "source": "DDPAUTP0",
        "fields_used": [],
        "citation": [
          42
        ]
      },
      {
        "source": "DDPAUTX0",
        "fields_used": [],
        "citation": [
          43
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSPRINT",
        "fields_written": [],
        "citation": [
          50
        ]
      },
      {
        "destination": "SYSUDUMP",
        "fields_written": [],
        "citation": [
          51
        ]
      },
      {
        "destination": "IMSERR",
        "fields_written": [],
        "citation": [
          52
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "STEP01 serves as the primary and only execution step in this JCL job, orchestrating the invocation of the IMS database unload utility. Its core purpose is to execute PGM=DFSRRC00 with a specific PARM='DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N' to perform a GSAM database unload operation on DLIGSAMP using the DBUNLDGS utility module in DLI access mode. It consumes IMS libraries from STEPLIB (lines 28-30), IMS macro libraries (lines 33-34), input GSAM datasets PASFILOP and PADFILOP (lines 36-40), authorization datasets DDPAUTP0 and DDPAUTX0 (lines 42-43), and the VSAM database definition from DFSVSAMP (lines 46-47). These inputs provide the runtime environment, database files, and structural definitions required for the unload process. The step produces outputs to SYSPRINT for logs and reports (line 50), SYSUDUMP for any abend diagnostics (line 51), and IMSERR for utility-specific errors (line 52). Business logic is encapsulated in the PARM specifying the exact utility and target database, with no additional conditional processing at the JCL level. Error handling relies on IMS utility defaults, routing failures to SYSUDUMP and IMSERR DDs, while dummy DDs (lines 45,48,49) suppress unnecessary logging for IMSLOGR and IEFRDER. No subordinate paragraphs or programs are called from this step, as it directly EXECs DFSRRC00. The configuration ensures high availability via DISP=SHR for shared datasets and appropriate job parameters like REGION=0M and TIME=1440 (lines 1-2). Overall, this step handles the complete unload workflow from resource setup to output capture.",
      "called_by": [],
      "calls": [
        "DFSRRC00"
      ],
      "citation": [
        26,
        53
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "IMS utility abend or failure",
      "action": "Generates system dump to SYSUDUMP and error messages to IMSERR; dummy DDs suppress log output",
      "citation": [
        48,
        51,
        52
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Role of separate PASFILOP (ROOT.GSAM) and PADFILOP (CHILD.GSAM) files relative to single DLIGSAMP database",
      "context": "PARM specifies one database DLIGSAMP (line 27), but two GSAM input files suggest possible multi-file DB or additional data sources",
      "suggestion": "Review IMS DBD for DLIGSAMP and DFSVSMDB macro (line 47) definitions"
    },
    {
      "question": "Exact mapping of PAUTDB GSAM files to DLIGSAMP database",
      "context": "Dataset names PAUTDB.ROOT/CHILD.GSAM differ from PARM database name DLIGSAMP",
      "suggestion": "Examine IMS database documentation or run job output for clarification"
    }
  ]
}