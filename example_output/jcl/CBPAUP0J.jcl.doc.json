{
  "header": {
    "program_id": "CBPAUP0J",
    "file_name": "jcl/CBPAUP0J.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T02:32:24.666348",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job that executes the IMS region controller DFSRRC00 to run the application program CBPAUP0C as a BMP under PSB PSBPAUTB. The program deletes expired authorizations from an IMS database. Standard IMS libraries and SYSOUT datasets are provided for execution, logging, and dumps.",
    "business_context": "CARDDEMO system authorization management, deleting expired authorizations from IMS database",
    "program_type": "BATCH",
    "citations": [
      1,
      21,
      24,
      25
    ]
  },
  "inputs": [
    {
      "name": "SYSIN",
      "io_type": "PARAMETER",
      "description": "IMS control statement '00,00001,00001,Y' providing parameters such as PCB index, position, length, and flag for the application program",
      "copybook": null,
      "citation": [
        36,
        37
      ]
    },
    {
      "name": "PSBPAUTB",
      "io_type": "IMS_SEGMENT",
      "description": "IMS database segments read by CBPAUP0C to identify expired authorizations",
      "copybook": null,
      "citation": [
        25
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard IMS and program print output",
      "copybook": null,
      "citation": [
        45
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump on abend",
      "copybook": null,
      "citation": [
        46
      ]
    },
    {
      "name": "PSBPAUTB",
      "io_type": "IMS_SEGMENT",
      "description": "IMS database segments updated by deleting expired authorizations",
      "copybook": null,
      "citation": [
        21,
        25
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS region controller to execute CBPAUP0C as BMP for deleting expired authorizations",
      "parameters": [
        "BMP",
        "CBPAUP0C",
        "PSBPAUTB"
      ],
      "citation": 25
    },
    {
      "program_name": "CBPAUP0C",
      "call_type": "STATIC_CALL",
      "purpose": "Application program that performs deletion of expired authorizations",
      "parameters": [
        "PSBPAUTB"
      ],
      "citation": 25
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Delete expired authorizations from IMS database",
      "logic_summary": "Execute IMS BMP program CBPAUP0C under PSB PSBPAUTB via DFSRRC00",
      "conditions": [
        "Authorizations identified as expired by application logic"
      ],
      "citation": [
        21
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYSIN",
        "fields_used": [
          "00,00001,00001,Y"
        ],
        "citation": [
          37
        ]
      },
      {
        "source": "PSBPAUTB IMS segments",
        "fields_used": [
          "UNKNOWN - fields defining authorizations"
        ],
        "citation": [
          25
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSPRINT",
        "fields_written": [
          "Program reports and logs"
        ],
        "citation": [
          45
        ]
      },
      {
        "destination": "PSBPAUTB IMS segments",
        "fields_written": [
          "Deletions of expired records"
        ],
        "citation": [
          21,
          25
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the only step in the JCL job, serving as the primary execution point for the IMS batch processing. It executes PGM=DFSRRC00 with PARM='BMP,CBPAUP0C,PSBPAUTB', consuming IMS libraries from STEPLIB (lines 26-27: IMS.SDFSRESL, XXXXXXXXX.PROD.LOADLIB), DFSRESLB (28), PROCLIB (29), DFSSEL (31), and IMS PSBLIB/DBDLIB (33-34). It reads control data from SYSIN (lines 36-37: '00,00001,00001,Y') to configure the IMS region and PCB for CBPAUP0C. The step produces outputs to multiple SYSOUT datasets including SYSOUX (39), SYSOUT (40), SYSABOUT (41), ABENDAID (42), SYSPRINT (45), SYSUDUMP (46), and IMSERR (47) for reports, logs, and abend diagnostics. Business logic is delegated to CBPAUP0C, which deletes expired authorizations based on PSBPAUTB database access; no decisions are made in JCL itself. Error handling relies on IMS standard mechanisms: abends produce dumps to SYSUDUMP and ABENDAID, with DUMMY DDs for IEFRDER (43) and IMSLOGR (44). It statically calls DFSRRC00, which in turn runs CBPAUP0C to perform the core deletion logic. Upon step completion, the job terminates with the IMS program's return code. No loops or validations occur in the JCL; all processing flow is controlled by the IMS region controller.",
      "called_by": [],
      "calls": [
        "DFSRRC00",
        "CBPAUP0C"
      ],
      "citation": [
        24,
        47
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "IMS program or region abend",
      "action": "Capture dumps and aids in SYSUDUMP, ABENDAID, IMSERR",
      "citation": [
        42,
        46,
        47
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Precise format and meaning of SYSIN '00,00001,00001,Y'",
      "context": "Standard IMS DFSRRC00 control card format not definitively identifiable from JCL alone",
      "suggestion": "Refer to IMS documentation for BMP SYSIN or analyze CBPAUP0C source code"
    },
    {
      "question": "Specific IMS segments and fields in PSBPAUTB accessed by CBPAUP0C",
      "context": "JCL does not specify database details; defined in PSB and application program",
      "suggestion": "Analyze PSBPAUTB definition and CBPAUP0C source"
    }
  ]
}