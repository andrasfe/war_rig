{
  "header": {
    "program_id": "CBPAUP0J",
    "file_name": "CBPAUP0J.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:10:36.568144",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job CBPAUP0J that executes the IMS region controller DFSRRC00 in BMP mode to run the application program CBPAUP0C using PSB PSBPAUTB. The job's purpose is to delete expired authorizations from an IMS database. It configures necessary IMS libraries, provides a control input via SYSIN, and routes outputs to SYSOUT datasets.",
    "business_context": "Authorization system maintenance, purging expired records to ensure data currency and compliance.",
    "program_type": "BATCH",
    "citations": [
      21,
      24,
      25
    ]
  },
  "inputs": [
    {
      "name": "PARM",
      "io_type": "PARAMETER",
      "description": "Execution parameters specifying BMP mode, application program CBPAUP0C, and PSB PSBPAUTB",
      "copybook": null,
      "citation": [
        25
      ]
    },
    {
      "name": "SYSIN",
      "io_type": "OTHER",
      "description": "Single control card '00,00001,00001,Y' providing IMS transaction input parameters",
      "copybook": null,
      "citation": [
        37
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries containing DFSRRC00 and CBPAUP0C",
      "copybook": null,
      "citation": [
        26,
        27
      ]
    },
    {
      "name": "IMS",
      "io_type": "IMS_SEGMENT",
      "description": "PSB and DBD libraries for PSBPAUTB definition and database access",
      "copybook": null,
      "citation": [
        33,
        34
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSOUT*",
      "io_type": "REPORT",
      "description": "Various program outputs including standard print, abend aids, dumps, and IMS errors",
      "copybook": null,
      "citation": [
        39,
        40,
        41,
        42,
        45,
        46,
        47
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS batch region controller to invoke the application program",
      "parameters": [
        "BMP,CBPAUP0C,PSBPAUTB"
      ],
      "citation": 24
    },
    {
      "program_name": "CBPAUP0C",
      "call_type": "DYNAMIC_CALL",
      "purpose": "Performs deletion of expired authorizations using IMS DL/I calls via PSBPAUTB",
      "parameters": [],
      "citation": 25
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Invoke IMS BMP to delete expired authorizations via program CBPAUP0C",
      "logic_summary": "Configured via PARM and SYSIN control card in single JCL step",
      "conditions": [
        "SYSIN control card specifies transaction parameters"
      ],
      "citation": [
        21,
        25,
        37
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYSIN",
        "fields_used": [
          "00",
          "00001",
          "00001",
          "Y"
        ],
        "citation": [
          37
        ]
      },
      {
        "source": "PARM",
        "fields_used": [
          "BMP",
          "CBPAUP0C",
          "PSBPAUTB"
        ],
        "citation": [
          25
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSOUT*",
        "fields_written": [
          "IMS output messages",
          "print records",
          "error logs",
          "dumps"
        ],
        "citation": [
          39,
          40,
          41,
          42,
          45,
          46,
          47
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "STEP01 is the single and primary execution step in this JCL job, serving as the orchestration point for running the IMS batch deletion process. It consumes the PARM parameter from line 25, which instructs DFSRRC00 to operate in BMP mode, load the application program CBPAUP0C, and use the PSB named PSBPAUTB for database access. Additionally, it reads the SYSIN dataset defined on lines 36-38 containing the control card '00,00001,00001,Y', which provides the formatted input transaction data for the IMS application, likely specifying PCB mask, message length, and processing flags. The step relies on input libraries specified in DD statements such as STEPLIB (lines 26-27 for RESLIB and LOADLIB), DFSRESLB (28), PROCLIB (29), DFSSEL (31), and IMS (33-34 for PSBLIB and DBDLIB), which supply the executable modules, procedures, and metadata for IMS databases. It produces outputs directed to multiple SYSOUT-class DD statements including SYSOUX (39), SYSOUT (40), SYSABOUT (41), ABENDAID (42), SYSPRINT (45), SYSUDUMP (46), and IMSERR (47), capturing normal program output, diagnostics, abend details, system dumps, and error information. Dummy datasets IEFRDER (43) and IMSLOGR (44) are used to discard unnecessary reader and log outputs. There is no conditional business logic or decision-making within the JCL step itself, as JCL steps execute unconditionally unless prior steps fail. Error handling is provided implicitly through the SYSOUT DD allocations for abend analysis and dumps, enabling post-execution diagnostics. The step calls DFSRRC00 statically via the EXEC PGM=, which dynamically invokes CBPAUP0C to perform the core logic of identifying and deleting expired authorization records from IMS databases defined in PSBPAUTB.",
      "called_by": [],
      "calls": [
        "DFSRRC00",
        "CBPAUP0C"
      ],
      "citation": [
        24,
        47
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Program or IMS abend",
      "action": "Route abend details, dumps, and errors to SYSOUT via ABENDAID, SYSUDUMP, IMSERR",
      "citation": [
        42,
        46,
        47
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Precise interpretation of SYSIN control card fields '00,00001,00001,Y'",
      "context": "Format specific to IMS DFSRRC00 batch transaction input; exact field meanings (e.g., PCB mask, segment hierarchy, flags) not deducible from JCL alone",
      "suggestion": "Review IMS manuals for DFSRRC00 SYSIN or examine CBPAUP0C source code and PSBPAUTB definition"
    },
    {
      "question": "Specific IMS databases and segments accessed by PSBPAUTB",
      "context": "PSBLIB/DBDLIB referenced but no PCB or DBD details in JCL",
      "suggestion": "Analyze PSBPAUTB listing or CBPAUP0C DL/I calls"
    }
  ]
}