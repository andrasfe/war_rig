{
  "header": {
    "program_id": "CBPAUP0J",
    "file_name": "CBPAUP0J.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-25T15:29:20.636659",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job to execute the IMS batch message processing (BMP) driver DFSRRC00, invoking application program CBPAUP0C with PSB PSBPAUTB to delete expired authorizations. It sets up required IMS libraries, control parameters via PARM and SYSIN, and directs outputs to SYSOUT datasets. The job is part of a card demo system as indicated by the job accounting information.",
    "business_context": "Automates cleanup of expired authorizations in an IMS database, likely for a payment or card authorization system.",
    "program_type": "BATCH",
    "citations": [
      1,
      21,
      24,
      25
    ]
  },
  "inputs": [
    {
      "name": "SYSIN",
      "io_type": "PARAMETER",
      "description": "Inline control card '00,00001,00001,Y' specifying PCB mask 00, GU transaction 00001, IO area 00001, and option Y for the IMS BMP execution",
      "copybook": null,
      "citation": [
        36,
        37
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries containing IMS modules and application program CBPAUP0C",
      "copybook": null,
      "citation": [
        26,
        27
      ]
    },
    {
      "name": "IMS",
      "io_type": "OTHER",
      "description": "PSBLIB and DBDLIB datasets providing PSB and database definitions for PSBPAUTB",
      "copybook": null,
      "citation": [
        33,
        34
      ]
    },
    {
      "name": "PSBPAUTB",
      "io_type": "IMS_SEGMENT",
      "description": "IMS database segments accessed via the specified PSB for authorization data processing",
      "copybook": null,
      "citation": [
        25
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard program print output including IMS processing logs",
      "copybook": null,
      "citation": [
        45
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump output generated on program abends",
      "copybook": null,
      "citation": [
        46
      ]
    },
    {
      "name": "SYSOUT",
      "io_type": "REPORT",
      "description": "Miscellaneous IMS and step outputs",
      "copybook": null,
      "citation": [
        39,
        40
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "Drives the IMS BMP region to execute application program CBPAUP0C for deleting expired authorizations",
      "parameters": [
        "BMP,CBPAUP0C,PSBPAUTB"
      ],
      "citation": 25
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Executes IMS BMP job to delete expired authorizations only under specific control parameters",
      "logic_summary": "Uses PARM='BMP,CBPAUP0C,PSBPAUTB' to invoke CBPAUP0C via DFSRRC00 with SYSIN '00,00001,00001,Y' defining PCB, transaction, IO area, and processing option",
      "conditions": [
        "PARM specifies BMP mode and PSBPAUTB",
        "SYSIN PCB=00, GU=00001, IO=00001, Option=Y"
      ],
      "citation": [
        25,
        37
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYSIN",
        "fields_used": [
          "00",
          "00001",
          "00001",
          "Y"
        ],
        "citation": [
          37
        ]
      },
      {
        "source": "PSBPAUTB",
        "fields_used": [
          "Authorization segments"
        ],
        "citation": [
          25
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSPRINT",
        "fields_written": [
          "Processing logs and results"
        ],
        "citation": [
          45
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the primary and only step in the JCL job, responsible for orchestrating the execution of the IMS batch program to delete expired authorizations. It consumes input datasets including STEPLIB for load modules (lines 26-27), PROCLIB (29), DFSRESLB (28), DFSSEL (31), and IMS PSBLIB/DBDLIB (33-34), as well as inline SYSIN control data '00,00001,00001,Y' (37) which defines the PCB mask, GU transaction ID, IO area size, and processing option for the BMP region. The step produces outputs directed to multiple SYSOUT datasets such as SYSOUX (39), SYSOUT (40), SYSPRINT (45), SYSUDUMP (46), and others for logs, prints, and dumps. There is no conditional business logic within the JCL itself; instead, it configures the environment via PARM='BMP,CBPAUP0C,PSBPAUTB' (25) to statically call DFSRRC00, which in turn runs the application logic in CBPAUP0C against IMS databases defined by PSBPAUTB. Error handling is provided implicitly through dump datasets like ABENDAID (42), SYSUDUMP (46), and IMSERR (47), which capture abend information without explicit conditional checks in the JCL. The step does not call any subordinate steps or additional programs beyond the EXEC PGM=DFSRRC00 (24). Overall, it serves as the entry point for the batch deletion process as described in the job header comment (21).",
      "called_by": [],
      "calls": [
        "DFSRRC00"
      ],
      "citation": [
        24,
        47
      ],
      "outgoing_calls": [
        {
          "target": "DFSRRC00",
          "call_type": "executes",
          "line": 24
        },
        {
          "target": "IMS.SDFSRESL",
          "call_type": "references",
          "line": 26
        },
        {
          "target": "XXXXXXXX.PROD.LOADLIB",
          "call_type": "references",
          "line": 27
        },
        {
          "target": "IMS.SDFSRESL",
          "call_type": "references",
          "line": 28
        },
        {
          "target": "IMS.PROCLIB",
          "call_type": "references",
          "line": 29
        },
        {
          "target": "IMS.SDFSRESL",
          "call_type": "references",
          "line": 31
        },
        {
          "target": "IMS.PSBLIB",
          "call_type": "references",
          "line": 33
        },
        {
          "target": "IMS.DBDLIB",
          "call_type": "references",
          "line": 34
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Program or IMS abend",
      "action": "Captures dumps and error output to ABENDAID, SYSUDUMP, IMSERR, and other SYSOUT datasets",
      "citation": [
        42,
        46,
        47
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [],
  "resolved_questions": [],
  "dead_code": [],
  "call_semantics": [],
  "flow_diagram": null
}