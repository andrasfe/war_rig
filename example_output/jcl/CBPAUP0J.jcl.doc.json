{
  "header": {
    "program_id": "CBPAUP0J",
    "file_name": "jcl/CBPAUP0J.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T17:36:40.120235",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL job CBPAUP0J executes the IMS Batch Message Processing (BMP) program CBPAUP0C using DFSRRC00 to delete expired authorizations from an IMS database. It references necessary IMS libraries and provides inline SYSIN data for processing parameters. Output is directed to multiple SYSOUT datasets for logs and dumps.",
    "business_context": "Purges expired authorizations in a card demo system (CARDDEMO class) using IMS resources under PSBPAUTB.",
    "program_type": "BATCH",
    "citations": [
      1,
      21,
      24,
      25
    ]
  },
  "inputs": [
    {
      "name": "SYSIN",
      "io_type": "PARAMETER",
      "description": "Inline IMS transaction input data: 00,00001,00001,Y specifying processing details like PCB position or message format",
      "copybook": null,
      "citation": [
        36,
        37,
        38
      ]
    },
    {
      "name": "IMS.PSBLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Program Specification Block library containing PSBPAUTB definition",
      "copybook": null,
      "citation": [
        33
      ]
    },
    {
      "name": "IMS.DBDLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Database Definition library for IMS database access",
      "copybook": null,
      "citation": [
        34
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries: IMS.SDFSRESL and XXXXXXXX.PROD.LOADLIB containing DFSRRC00 and CBPAUP0C",
      "copybook": null,
      "citation": [
        26,
        27
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard print output from IMS execution",
      "copybook": null,
      "citation": [
        45
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump output on abend",
      "copybook": null,
      "citation": [
        46
      ]
    },
    {
      "name": "SYSOUT",
      "io_type": "REPORT",
      "description": "General job output",
      "copybook": null,
      "citation": [
        40
      ]
    },
    {
      "name": "ABENDAID",
      "io_type": "REPORT",
      "description": "Abend aid diagnostics",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "IMSERR",
      "io_type": "REPORT",
      "description": "IMS error messages",
      "copybook": null,
      "citation": [
        47
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS region controller to execute BMP region",
      "parameters": [
        "BMP,CBPAUP0C,PSBPAUTB"
      ],
      "citation": 24
    },
    {
      "program_name": "CBPAUP0C",
      "call_type": "DYNAMIC_CALL",
      "purpose": "Application program to delete expired authorizations using PSBPAUTB",
      "parameters": [
        "PSBPAUTB"
      ],
      "citation": 25
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYSIN",
        "fields_used": [
          "00,00001,00001,Y"
        ],
        "citation": [
          37
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSPRINT",
        "fields_written": [
          "execution logs and output"
        ],
        "citation": [
          45
        ]
      },
      {
        "destination": "SYSUDUMP",
        "fields_written": [
          "abend dumps"
        ],
        "citation": [
          46
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the only execution step in the JCL job, named STEP01, serving as the primary orchestration point to run the IMS BMP program for deleting expired authorizations. It consumes inputs from multiple DD statements including STEPLIB for load modules (lines 26-27), DFSRESLB and PROCLIB for IMS resources (28-29), DFSSEL (31), IMS PSBLIB and DBDLIB for control blocks (33-34), and SYSIN inline data (37) which provides IMS-specific parameters like message sequence or PCB details. It produces outputs by allocating several SYSOUT datasets such as SYSOUX (39), SYSOUT (40), SYSABOUT (41), ABENDAID (42), SYSPRINT (45), SYSUDUMP (46), and IMSERR (47) to capture prints, logs, dumps, and errors. There are no business logic decisions implemented directly in the JCL; all processing logic is delegated to the executed programs DFSRRC00 and CBPAUP0C. Error handling is implicit through allocated dump and error DD statements like SYSUDUMP for system dumps and IMSERR for IMS-specific errors, with dummy DDs IEFRDER (43) and IMSLOGR (44) to suppress unnecessary outputs. The step calls DFSRRC00 statically via EXEC PGM= and dynamically invokes CBPAUP0C via PARM to perform the authorization purge under PSBPAUTB. Job parameters like REGION=0M and NOTIFY=&SYSUID (lines 1-2) ensure resource allocation and notification. Overall, STEP01 sets up the complete IMS execution environment without any loops or conditional logic.",
      "called_by": [],
      "calls": [
        "DFSRRC00",
        "CBPAUP0C"
      ],
      "citation": [
        24,
        47
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Program abend or IMS error",
      "action": "Generate dumps to SYSUDUMP, ABENDAID, and error logs to IMSERR",
      "citation": [
        42,
        46,
        47
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Precise format and meaning of SYSIN data '00,00001,00001,Y'",
      "context": "IMS-specific parameters (e.g., PCB number, message number, flags) not self-documenting in JCL",
      "suggestion": "Review CBPAUP0C source code or IMS PSBPAUTB definition"
    },
    {
      "question": "Specific IMS database/segment accessed for deletions",
      "context": "JCL references libraries but not data names; handled in CBPAUP0C",
      "suggestion": "Analyze CBPAUP0C or DBDLIB/PSBLIB contents"
    }
  ]
}