{
  "header": {
    "program_id": "SORTTEST",
    "file_name": "jcl/SORTTEST.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-24T18:30:51.530900",
    "iteration_count": 5,
    "final_status": null
  },
  "purpose": {
    "summary": "JCL job SORTTEST executes a single SORT step (STEP05R) to test filtering and sorting logic on transaction backup data from AWS.M2.CARDDEMO.TRANSACT.BKUP(0). It defines symbolic fields for card number and process date via SYMNAMES, sorts ascending by card number, and includes only records matching a specific date (2022-06-02). Output to daily GDG is commented out, making this a validation test without persistent dataset creation.",
    "business_context": "Test job in AWS.M2.CARDDEMO application's daily transaction processing pipeline; validates SORT utility logic for extracting date-specific transactions from backup GDG(0), sorting by card number, prior to production daily GDG(+1) generation in build/test lifecycle.",
    "program_type": "BATCH",
    "citations": [
      1,
      19,
      20,
      21,
      22,
      23,
      24,
      25,
      26,
      27,
      28
    ]
  },
  "inputs": [
    {
      "name": "SORTIN",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Input dataset DSN=AWS.M2.CARDDEMO.TRANSACT.BKUP(0) with DISP=SHR for shared read access; dependency dataset that must exist prior to job execution, containing raw transaction records for symbolic field extraction, conditional filtering, and sorting.",
      "copybook": null,
      "citation": [
        20,
        21
      ]
    },
    {
      "name": "SYMNAMES",
      "io_type": "OTHER",
      "description": "In-stream DD defining symbolic parameters referenced in SYSIN: TRAN-CARD-NUM (263,16,ZD), TRAN-PROC-DT (305,10,CH), PARM-DATE (C'2022-06-02'); enables position-based field referencing without hardcoding.",
      "copybook": null,
      "citation": [
        22,
        23,
        24,
        25
      ]
    },
    {
      "name": "SYSIN",
      "io_type": "PARAMETER",
      "description": "In-stream SORT control cards specifying sort and include logic.",
      "copybook": null,
      "citation": [
        26,
        27,
        28,
        29
      ]
    }
  ],
  "outputs": [
    {
      "name": "SORTOUT",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Intended output dataset for sorted/filtered records DSN=AWS.M2.CARDDEMO.TRANSACT.DALY(+1) with DISP=(NEW,CATLG,DELETE); would create/modify new GDG generation if uncommented; currently commented out, no output dataset produced.",
      "copybook": null,
      "citation": [
        31,
        35
      ]
    },
    {
      "name": "SYSOUT",
      "io_type": "REPORT",
      "description": "Intended for SORT messages and statistics routed to SYSOUT=*; commented out.",
      "copybook": null,
      "citation": [
        30
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "SORT",
      "call_type": "STATIC_CALL",
      "purpose": "IBM SORT utility to sort transaction records ascending by TRAN-CARD-NUM and filter by process date match.",
      "parameters": [],
      "citation": 19
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Sort transaction records ascending by card number (TRAN-CARD-NUM)",
      "logic_summary": "SORT FIELDS=(TRAN-CARD-NUM,A) referencing symbolic at position 263 length 16 zoned decimal",
      "conditions": [
        "SORT FIELDS=(TRAN-CARD-NUM,A)"
      ],
      "citation": [
        23,
        27
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Include only transactions with process date matching 2022-06-02",
      "logic_summary": "INCLUDE COND=(TRAN-PROC-DT,EQ,PARM-DATE) comparing symbolic field at 305:10 character to constant C'2022-06-02'",
      "conditions": [
        "TRAN-PROC-DT,EQ,PARM-DATE"
      ],
      "citation": [
        24,
        25,
        28
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SORTIN",
        "fields_used": [
          "TRAN-CARD-NUM",
          "TRAN-PROC-DT"
        ],
        "citation": [
          20,
          21,
          23,
          24
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SORTOUT (commented out)",
        "fields_written": [
          "All input fields from matching records, sorted by TRAN-CARD-NUM"
        ],
        "citation": [
          31,
          35
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "TRAN-CARD-NUM",
        "output_field": "TRAN-CARD-NUM",
        "transformation_description": "Sort ascending by field at position 263-278 ZD",
        "citation": [
          23,
          27
        ]
      },
      {
        "input_field": "TRAN-PROC-DT",
        "output_field": null,
        "transformation_description": "Filter retain only where equals PARM-DATE '2022-06-02' at 305-314 CH",
        "citation": [
          24,
          25,
          28
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP05R",
      "purpose": "EXEC PGM=SORT step tests transaction sort/filter: SORTIN DD (input backup GDG SHR), SYMNAMES (symbolics), SYSIN (controls), SORTOUT/SYSOUT DDs commented; standalone JCL step with no COND or IF/THEN for dependencies.",
      "called_by": [],
      "calls": [],
      "citation": [
        19,
        36
      ]
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Dataset attributes (RECFM, LRECL, BLKSIZE, organization) of SORTIN DSN=AWS.M2.CARDDEMO.TRANSACT.BKUP(0)",
      "context": "No DCB subparameters on SORTIN DD; SORTOUT inherits via DCB=(*.SORTIN)",
      "suggestion": "Use TSO LISTDS 'AWS.M2.CARDDEMO.TRANSACT.BKUP(0)' or review creating program"
    },
    {
      "question": "Parent jobstream or context invoking SORTTEST",
      "context": "Standalone JOB with single STEP05R; implies test extraction from multi-step job",
      "suggestion": "Search JCL library for SORTTEST or STEP05R references"
    },
    {
      "question": "IBM SORT behavior without SORTOUT DD",
      "context": "SORTOUT/SYSOUT commented; SORT may abend or default output",
      "suggestion": "Review IBM DFSORT guide or execute test"
    }
  ]
}