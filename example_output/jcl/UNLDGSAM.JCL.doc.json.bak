{
  "header": {
    "program_id": "UNLDGSAM",
    "file_name": "jcl/UNLDGSAM.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T17:39:39.337207",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job that executes the IMS utility DFSRRC00 to perform an unload operation on GSAM databases within the PAUTDB structure. It targets the ROOT.GSAM and CHILD.GSAM datasets using DLI access method, with specific database and DBD names provided in the PARM. The job references IMS libraries and control files for the unload process.",
    "business_context": "Supports the AWS M2 CARDDEMO application by unloading IMS PAUTDB GSAM databases for backup, migration, or analysis purposes.",
    "program_type": "BATCH",
    "citations": [
      1,
      26,
      27,
      36,
      39
    ]
  },
  "inputs": [
    {
      "name": "PASFILOP",
      "io_type": "IMS_SEGMENT",
      "description": "GSAM database file for PAUTDB.ROOT containing root segments to be unloaded",
      "copybook": null,
      "citation": [
        36,
        37
      ]
    },
    {
      "name": "PADFILOP",
      "io_type": "IMS_SEGMENT",
      "description": "GSAM database file for PAUTDB.CHILD containing child segments to be unloaded",
      "copybook": null,
      "citation": [
        39,
        40
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries for IMS SDFSRESL and application LOADLIB",
      "copybook": null,
      "citation": [
        28,
        29,
        30
      ]
    },
    {
      "name": "PARM",
      "io_type": "PARAMETER",
      "description": "Execution parameters for DFSRRC00: 'DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N' specifying DLI access, database DBUNLDGS, DBD DLIGSAMP, and no VSAM output",
      "copybook": null,
      "citation": [
        27
      ]
    },
    {
      "name": "DFSRESLB",
      "io_type": "OTHER",
      "description": "IMS resource library",
      "copybook": null,
      "citation": [
        31
      ]
    },
    {
      "name": "IMS",
      "io_type": "OTHER",
      "description": "IMS PSBLIB and DBDLIB for database definitions",
      "copybook": null,
      "citation": [
        33,
        34
      ]
    },
    {
      "name": "DDPAUTP0",
      "io_type": "OTHER",
      "description": "IMS PAUTHDB for authorization",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "OTHER",
      "description": "IMS PAUTHDBX for extended authorization",
      "copybook": null,
      "citation": [
        43
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "OTHER",
      "description": "IMS proclib member DFSVSMDB for VSAM definitions",
      "copybook": null,
      "citation": [
        46,
        47
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard print output including utility messages and logs",
      "copybook": null,
      "citation": [
        50
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump output for abend diagnostics",
      "copybook": null,
      "citation": [
        51
      ]
    },
    {
      "name": "IMSERR",
      "io_type": "REPORT",
      "description": "IMS error log output",
      "copybook": null,
      "citation": [
        52
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS general utility to unload GSAM database segments from PAUTDB ROOT and CHILD",
      "parameters": [
        "DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N"
      ],
      "citation": 26
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "IMS unload utility uses DLI access method with database name DBUNLDGS and DBD name DLIGSAMP",
      "logic_summary": "Specified in EXEC PARM field",
      "conditions": [
        "PARM='DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N'"
      ],
      "citation": [
        27
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Input GSAM datasets use DISP=(OLD,KEEP,KEEP) to ensure exclusive access while preserving datasets post-job",
      "logic_summary": "Defined in DD statements for PASFILOP and PADFILOP",
      "conditions": [
        "DISP=(OLD,KEEP,KEEP)"
      ],
      "citation": [
        37,
        40
      ]
    },
    {
      "rule_id": "BR003",
      "description": "No VSAM output file generated (indicated by trailing 'N' in PARM)",
      "logic_summary": "PARM parameter controls output format",
      "conditions": [
        "PARM ends with ',N'"
      ],
      "citation": [
        27
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Job uses multiple IMS libraries for resolution and authorization",
      "logic_summary": "STEPLIB and other DDs reference SDFSRESL, PSBLIB, DBDLIB, PAUTHDB",
      "conditions": [
        "Multiple SHR DISP libraries"
      ],
      "citation": [
        28,
        31,
        33,
        42
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "PASFILOP",
        "fields_used": [
          "UNKNOWN (GSAM segments)"
        ],
        "citation": [
          36
        ]
      },
      {
        "source": "PADFILOP",
        "fields_used": [
          "UNKNOWN (GSAM segments)"
        ],
        "citation": [
          39
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSPRINT",
        "fields_written": [
          "Utility logs and messages"
        ],
        "citation": [
          50
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the sole execution step in the JCL job, serving as the primary orchestration point for running the IMS database unload utility. It consumes input from multiple DD datasets including PASFILOP (PAUTDB.ROOT.GSAM), PADFILOP (PAUTDB.CHILD.GSAM), STEPLIB libraries (OEMA.IMS.IMSP.SDFSRESL and AWS.M2.CARDDEMO.LOADLIB), IMS control libraries (PSBLIB, DBDLIB), authorization datasets (PAUTHDB, PAUTHDBX), and DFSVSAMP proclib. The step produces output to SYSPRINT, SYSUDUMP, and IMSERR for logs, dumps, and errors. Business logic is minimal as it is JCL, but it enforces rules via PARM='DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N' specifying DLI access, database unload for DBUNLDGS with DBD DLIGSAMP, and no VSAM output. Dataset dispositions ensure inputs are opened exclusively (OLD) but kept post-execution (KEEP,KEEP). Error handling relies on SYSUDUMP for abends and DUMMY DDs (IMSLOGR, IEFRDER) to suppress unnecessary logging. It statically calls DFSRRC00 to perform the actual unload of GSAM segments from ROOT and CHILD databases. No subordinate paragraphs exist as this is JCL, not COBOL/PL/I. The step runs under job parameters like CLASS=A, REGION=0M, TIME=1440 for resource allocation.",
      "called_by": [],
      "calls": [
        "DFSRRC00"
      ],
      "citation": [
        26,
        53
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Program abend",
      "action": "Dump to SYSUDUMP SYSOUT=*",
      "citation": [
        51
      ]
    },
    {
      "condition": "IMS errors",
      "action": "Log to IMSERR SYSOUT=*",
      "citation": [
        52
      ]
    },
    {
      "condition": "IMS logging suppressed",
      "action": "IMSLOGR and IEFRDER defined as DUMMY",
      "citation": [
        48,
        49
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Exact mapping of DBUNLDGS database to PAUTDB ROOT/CHILD GSAM files",
      "context": "PARM references DBUNLDGS and DLIGSAMP, but DD names suggest PAUTDB; no explicit link in JCL",
      "suggestion": "Review IMS DBD source for DLIGSAMP or database definitions"
    },
    {
      "question": "Presence of output unload file",
      "context": "No explicit DD for unload output; PARM ends with 'N' suggesting no VSAM output, but typical unload produces sequential file",
      "suggestion": "Check IMS DFSRRC00 documentation for DBU utility output handling with this PARM"
    }
  ]
}