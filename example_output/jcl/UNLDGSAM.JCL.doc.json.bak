{
  "header": {
    "program_id": "UNLDGSAM",
    "file_name": "jcl/UNLDGSAM.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T14:25:04.182555",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "JCL to execute the IMS Database Unload utility (DBUNLDGS) via DFSRRC00 program in DLI mode for the DLIGSAMP database. It reads ROOT and CHILD GSAM input files (PASFILOP and PADFILOP) containing database segments. Control statements from DFSVSAMP define the unload process and output datasets.",
    "business_context": "Supports unloading of PAUTDB IMS database segments in the AWS M2 CARDDEMO application, likely for backup, migration, or analysis.",
    "program_type": "BATCH",
    "citations": [
      26,
      27,
      36,
      39,
      46
    ]
  },
  "inputs": [
    {
      "name": "PASFILOP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "GSAM dataset containing ROOT segments of PAUTDB database",
      "copybook": null,
      "citation": [
        36,
        37
      ]
    },
    {
      "name": "PADFILOP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "GSAM dataset containing CHILD segments of PAUTDB database",
      "copybook": null,
      "citation": [
        39,
        40
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Control statements for DBUNLDGS utility from PROCLIB(DFSVSMDB), defining unload parameters and output datasets",
      "copybook": null,
      "citation": [
        46,
        47
      ]
    },
    {
      "name": "PARM",
      "io_type": "PARAMETER",
      "description": "Utility parameters 'DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N' specifying DLI access, DBUNLDGS utility, and DLIGSAMP database",
      "copybook": null,
      "citation": [
        27
      ]
    },
    {
      "name": "DDPAUTP0",
      "io_type": "OTHER",
      "description": "IMS PAUTHDB library for database authorization or definitions",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "OTHER",
      "description": "IMS PAUTHDBX library for extended database authorization or definitions",
      "copybook": null,
      "citation": [
        43
      ]
    }
  ],
  "outputs": [
    {
      "name": "UNLOAD-DATASETS",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential datasets containing unloaded IMS database segments (ROOT and CHILD), as defined in DFSVSAMP control statements",
      "copybook": null,
      "citation": [
        46,
        47
      ]
    },
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard utility print output including messages and reports",
      "copybook": null,
      "citation": [
        50
      ]
    },
    {
      "name": "IMSERR",
      "io_type": "REPORT",
      "description": "IMS-specific error messages",
      "copybook": null,
      "citation": [
        52
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump output on program abend",
      "copybook": null,
      "citation": [
        51
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS general utility driver executing DBUNLDGS for database unload",
      "parameters": [
        "DLI,DBUNLDGS,DLIGSAMP,,,,,,,,,,,N"
      ],
      "citation": 26
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "PASFILOP",
        "fields_used": [
          "ROOT segments"
        ],
        "citation": [
          36
        ]
      },
      {
        "source": "PADFILOP",
        "fields_used": [
          "CHILD segments"
        ],
        "citation": [
          39
        ]
      },
      {
        "source": "DFSVSAMP",
        "fields_used": [
          "control statements"
        ],
        "citation": [
          46
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "UNLOAD-DATASETS",
        "fields_written": [
          "unloaded ROOT and CHILD segments"
        ],
        "citation": [
          46
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the only step in the JCL, serving as the primary execution point for the IMS Database Unload utility. Its main role is to invoke DFSRRC00 with parameters for DBUNLDGS on the DLIGSAMP database in DLI mode, orchestrating the unload process. It consumes input datasets PASFILOP (ROOT GSAM) and PADFILOP (CHILD GSAM) containing the IMS database segments to be unloaded, along with control statements from DFSVSAMP (PROCLIB DFSVSMDB) that specify unload options, segment selection, and output dataset definitions. Additional inputs include IMS libraries (STEPLIB, DFSRESLB, IMS/PSBLIB/DBDLIB) and PAUTHDB libraries for runtime support. It produces output unload sequential files as defined in the control statements, capturing the raw database segments, and directs reports/errors to SYSPRINT, IMSERR, and SYSUDUMP. There are no conditional decisions or business rules in the JCL; all processing logic is delegated to the IMS utility based on PARM and control cards. Error handling relies on standard JCL/IMS mechanisms: abnormal termination keeps input files (DISP=OLD,KEEP,KEEP), dumps to SYSUDUMP, and errors to IMSERR. No subordinate JCL steps or paragraphs are called; it statically executes PGM=DFSRRC00 to perform the unload. The step ensures all required libraries are accessible via concatenated DD statements. Upon completion, the job notifies the submitter (NOTIFY=&SYSUID).",
      "called_by": [],
      "calls": [
        "DFSRRC00"
      ],
      "citation": [
        26,
        53
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Utility or IMS errors",
      "action": "Route to IMSERR SYSOUT=* and SYSUDUMP SYSOUT=*; keep input files",
      "citation": [
        37,
        40,
        51,
        52
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "What are the exact contents of the DFSVSAMP control statements in PROCLIB(DFSVSMDB)?",
      "context": "Referenced as input but source code does not include the member contents; needed for precise output dataset names and unload options",
      "suggestion": "Retrieve and analyze OEMPP.IMS.V15R01MB.PROCLIB(DFSVSMDB)"
    },
    {
      "question": "Relationship between PAUTDB DSNs and DLIGSAMP database name?",
      "context": "PARM specifies DLIGSAMP but inputs are PAUTDB.ROOT/CHILD.GSAM; likely aliases or specific implementation",
      "suggestion": "Check IMS DBD definitions in DBDLIB"
    }
  ]
}