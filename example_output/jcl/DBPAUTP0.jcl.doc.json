{
  "header": {
    "program_id": "DBPAUTP0",
    "file_name": "jcl/DBPAUTP0.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T02:34:53.357855",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "JCL batch job that first deletes any existing unload dataset AWS.M2.CARDDEMO.IMSDATA.DBPAUTP0 using IEFBR14, then executes IMS utility DFSRRC00 to unload database DBPAUTP0 into the new dataset via DFSURGU1 DD. Supports CardDemo application IMS data handling. Includes necessary IMS libraries, control files, and reconciliation datasets.",
    "business_context": "IMS database unload for DBPAUTP0 in CardDemo environment, likely for backup, migration, or offline processing.",
    "program_type": "BATCH",
    "citations": [
      1,
      7,
      15,
      16
    ]
  },
  "inputs": [
    {
      "name": "SYSUT1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Existing dataset targeted for deletion prior to unload",
      "copybook": null,
      "citation": [
        9
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries containing DFSRRC00 and related modules",
      "copybook": null,
      "citation": [
        18
      ]
    },
    {
      "name": "DFSRESLB",
      "io_type": "OTHER",
      "description": "IMS resource library",
      "copybook": null,
      "citation": [
        20
      ]
    },
    {
      "name": "IMS",
      "io_type": "OTHER",
      "description": "IMS PSBLIB and DBDLIB for program specs and database definitions",
      "copybook": null,
      "citation": [
        21
      ]
    },
    {
      "name": "DDPAUTP0",
      "io_type": "FILE_SEQUENTIAL",
      "description": "PAUTHDB dataset used by unload utility",
      "copybook": null,
      "citation": [
        31
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "FILE_SEQUENTIAL",
      "description": "PAUTHDBX dataset used by unload utility",
      "copybook": null,
      "citation": [
        32
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "VSAM sample macro library member DFSVSMDB",
      "copybook": null,
      "citation": [
        33
      ]
    },
    {
      "name": "DFSCTL",
      "io_type": "PARAMETER",
      "description": "Control statements including SBPARM ACTIV=COND",
      "copybook": null,
      "citation": [
        34
      ]
    },
    {
      "name": "RECON1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS reconciliation dataset 1",
      "copybook": null,
      "citation": [
        40
      ]
    },
    {
      "name": "RECON2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS reconciliation dataset 2",
      "copybook": null,
      "citation": [
        41
      ]
    },
    {
      "name": "RECON3",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS reconciliation dataset 3",
      "copybook": null,
      "citation": [
        42
      ]
    }
  ],
  "outputs": [
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Print output for job steps, utility messages, and diagnostics",
      "copybook": null,
      "citation": [
        8,
        23
      ]
    },
    {
      "name": "DFSURGU1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential unload file containing DBPAUTP0 database records (VB format)",
      "copybook": null,
      "citation": [
        25
      ]
    },
    {
      "name": "SYSUDUMP",
      "io_type": "REPORT",
      "description": "System dump on abend",
      "copybook": null,
      "citation": [
        36
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IEFBR14",
      "call_type": "STATIC_CALL",
      "purpose": "Delete existing output dataset before unload",
      "parameters": [],
      "citation": 7
    },
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "Execute IMS unload utility for DBPAUTP0",
      "parameters": [
        "ULU,DFSURGU0,DBPAUTP0"
      ],
      "citation": 15
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Delete existing unload dataset prior to new unload to avoid append or conflicts",
      "logic_summary": "IEFBR14 with DISP=(MOD,DELETE) on SYSUT1",
      "conditions": [
        "Dataset exists"
      ],
      "citation": [
        7,
        9
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Conditional activation for IMS unload utility",
      "logic_summary": "SBPARM ACTIV=COND in DFSCTL",
      "conditions": [
        "IMS control region conditions"
      ],
      "citation": [
        35
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "STEPLIB",
        "fields_used": [],
        "citation": [
          18
        ]
      },
      {
        "source": "DFSRESLB",
        "fields_used": [],
        "citation": [
          20
        ]
      },
      {
        "source": "IMS",
        "fields_used": [],
        "citation": [
          21
        ]
      },
      {
        "source": "DDPAUTP0",
        "fields_used": [],
        "citation": [
          31
        ]
      },
      {
        "source": "DDPAUTX0",
        "fields_used": [],
        "citation": [
          32
        ]
      },
      {
        "source": "DFSVSAMP",
        "fields_used": [],
        "citation": [
          33
        ]
      },
      {
        "source": "DFSCTL",
        "fields_used": [
          "SBPARM ACTIV=COND"
        ],
        "citation": [
          34
        ]
      },
      {
        "source": "RECON1",
        "fields_used": [],
        "citation": [
          40
        ]
      },
      {
        "source": "RECON2",
        "fields_used": [],
        "citation": [
          41
        ]
      },
      {
        "source": "RECON3",
        "fields_used": [],
        "citation": [
          42
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "SYSUT1",
        "fields_written": [],
        "citation": [
          9
        ]
      },
      {
        "destination": "DFSURGU1",
        "fields_written": [
          "Unloaded DBPAUTP0 records"
        ],
        "citation": [
          25
        ]
      },
      {
        "destination": "SYSPRINT",
        "fields_written": [
          "Messages"
        ],
        "citation": [
          23
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEPDEL",
      "summary": null,
      "purpose": "The STEPDEL step serves as the initialization cleanup phase of the job, ensuring no residual output dataset from prior runs interferes with the new unload. It executes IEFBR14, a standard z/OS utility for catalog manipulations without processing data. The sole input is the SYSUT1 DD (line 9), specifying DSN=AWS.M2.CARDDEMO.IMSDATA.DBPAUTP0 with DISP=(MOD,DELETE), which targets the dataset for deletion if present. No data records are read or validated; the operation relies on JCL disposition codes. It produces no persistent data outputs but results in catalog deletion of the dataset and directs any messages to SYSPRINT (line 8). There is no explicit business logic, conditions, or validations implemented in this step. Error handling follows JCL defaults: failure to delete sets return code and may abend the step. This step is unconditionally executed first, preparing the environment for the subsequent UNLOAD step without calling any other paragraphs or programs.",
      "called_by": [],
      "calls": [],
      "citation": [
        7,
        10
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "UNLOAD",
      "summary": null,
      "purpose": "The UNLOAD step is the core processing phase, invoking the IMS offline utility DFSRRC00 to extract all records from database DBPAUTP0 into a sequential file. It receives PARM=(ULU,DFSURGU0,DBPAUTP0) (line 16), where ULU denotes unload, DFSURGU0 the processing module, and DBPAUTP0 the target DBD. Inputs consumed include load libraries (STEPLIB lines 18-19, DFSRESLB 20, IMS 21-22), database-related datasets (DDPAUTP0 31, DDPAUTX0 32), VSAM macros (DFSVSAMP 33), control parameters (DFSCTL 34-35 with SBPARM ACTIV=COND), and reconciliation files (RECON1-3 40-42). The utility internally reads database segments via definitions from DBDLIB/PSBLIB and writes raw unloaded records to DFSURGU1 output dataset (lines 25-29, VB LRECL=27990). SYSPRINT captures utility messages and status (23), while SYSUDUMP handles dumps on failure (36-38). Business logic is encapsulated in the IMS utility: conditional activation per SBPARM, full DB scan until EOF, no user conditions in JCL. Errors from utility set RC via SYSPRINT, trigger abends with SYSUDUMP, or use JCL COND (implicit). Dummy DDs (44-45) indicate optional sort/work not used. This step does not call other programs or paragraphs, completing the job flow.",
      "called_by": [],
      "calls": [],
      "citation": [
        15,
        45
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Step or utility abend",
      "action": "Produce SYSUDUMP and set job RC",
      "citation": [
        36
      ]
    },
    {
      "condition": "IMS utility errors",
      "action": "Messages to SYSPRINT, potential step failure",
      "citation": [
        23
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": []
}