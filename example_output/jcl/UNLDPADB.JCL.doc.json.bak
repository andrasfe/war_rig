{
  "header": {
    "program_id": "UNLDPADB",
    "file_name": "jcl/UNLDPADB.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-25T15:29:52.791147",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL job executes an IMS database unload for the PAUTDB database, producing sequential flat files for root and child segments. STEP0 uses IEFBR14 to delete any existing output files. STEP01 invokes the IMS utility DFSRRC00 to perform the unload using DLI access.",
    "business_context": "Supports AWS M2 Card Demo application by unloading Payment Authorization Test IMS database (PAUTDB) for offline processing, backup, or migration.",
    "program_type": "BATCH",
    "citations": [
      23,
      25,
      38
    ]
  },
  "inputs": [
    {
      "name": "DDPAUTP0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS primary database PAUTHDB containing PAUTDB root and child segments",
      "copybook": null,
      "citation": [
        58
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS secondary database/index PAUTHDBX for PAUTDB",
      "copybook": null,
      "citation": [
        59
      ]
    }
  ],
  "outputs": [
    {
      "name": "OUTFIL1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing unloaded root segments from PAUTDB (LRECL=100, RECFM=FB)",
      "copybook": null,
      "citation": [
        48
      ]
    },
    {
      "name": "OUTFIL2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing unloaded child segments from PAUTDB (LRECL=206, RECFM=FB)",
      "copybook": null,
      "citation": [
        53
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IEFBR14",
      "call_type": "STATIC_CALL",
      "purpose": "Perform dataset deletion for prior output files",
      "parameters": [],
      "citation": 25
    },
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "Execute IMS database unload utility for PAUTDB",
      "parameters": [
        "DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N"
      ],
      "citation": 38
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "DDPAUTP0",
        "fields_used": [
          "All PAUTDB root and child segments"
        ],
        "citation": [
          58
        ]
      },
      {
        "source": "DDPAUTX0",
        "fields_used": [
          "PAUTDB secondary index data"
        ],
        "citation": [
          59
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "OUTFIL1",
        "fields_written": [
          "PAUTDB root segments"
        ],
        "citation": [
          48
        ]
      },
      {
        "destination": "OUTFIL2",
        "fields_written": [
          "PAUTDB child segments"
        ],
        "citation": [
          53
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PAUTDB hierarchical segments",
        "output_field": "Sequential flat file records",
        "transformation_description": "Unloads IMS database segments into fixed-block sequential files preserving record data",
        "citation": [
          39
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "UNLDPADB",
      "summary": null,
      "purpose": "This is the JOB card paragraph defining the overall job execution parameters and context for the IMS database unload. It specifies job class A, message class H, region 0M, notification to SYSUID, and maximum time 1440 minutes. Lines 3-22 contain copyright notices, Apache License 2.0 details, and a high-level comment indicating execution of an IMS program. No data is read or written here; it sets the execution environment. There is no business logic or decisions made. No error handling defined at job level beyond defaults. It orchestrates sequential execution of subordinate STEP0 and STEP01 without COND parameters. Purpose is to provide metadata and scheduling info for the PAUTDB unload job.",
      "called_by": [],
      "calls": [
        "STEP0",
        "STEP01"
      ],
      "citation": [
        1,
        24
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "STEP0",
      "summary": null,
      "purpose": "This preparatory step executes PGM=IEFBR14, a null utility program that performs no computation but enables DD statements for dataset management. It defines DD1 and DD2 pointing to prior versions of output files AWS.M2.CARDDEMO.PAUTDB.ROOT.FILEO and CHILD.FILEO with DISP=(OLD,DELETE,DELETE), ensuring deletion if they exist to prevent conflicts. Additional DDs (SYSPRINT, SYSOUT, SYSDUMP) route output to SYSOUT*. It consumes no runtime data inputs beyond checking for existing files. It produces no new data files, only performs cleanup. No business logic, validations, or conditions are checked; deletion is unconditional via DISP. No error handling beyond JCL defaults (step abend on uncorrectable errors). This step is called first sequentially by the job and prepares for STEP01 by clearing output paths.",
      "called_by": [
        "UNLDPADB"
      ],
      "calls": [
        "IEFBR14"
      ],
      "citation": [
        25,
        37
      ],
      "outgoing_calls": [
        {
          "target": "IEFBR14",
          "call_type": "executes",
          "line": 25
        },
        {
          "target": "AWS.M2.CARDDEMO.PAUTDB.ROOT.FILEO",
          "call_type": "references",
          "line": 33
        },
        {
          "target": "AWS.M2.CARDDEMO.PAUTDB.CHILD.FILEO",
          "call_type": "references",
          "line": 35
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the primary processing step executing PGM=DFSRRC00, the IMS database reorganization utility configured for UNLOAD function via PARM='DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N'. It reads all root and child segments from input IMS databases DDPAUTP0 (PAUTHDB) and DDPAUTX0 (PAUTHDBX) using DLI access. Outputs are written to OUTFIL1 (root segments, LRECL=100, SPACE=(400,(20,20))) and OUTFIL2 (child segments, LRECL=206). Required IMS libraries are provided via STEPLIB (SDFSRESL, LOADLIB), DFSRESLB, and IMS (PSBLIB, DBDLIB). DFsVSAMP references the VSAM definition for PAUTDB, with DUMMY for IMSLOGR, IEFRDER, and SYSOUTs for diagnostics. No explicit business rules or validations beyond IMS utility defaults for unload completeness. Error handling relies on IMS messages to IMSERR/SYSUDUMP/SYSPRINT and JCL defaults. Executed unconditionally after STEP0, it accomplishes the core unload of PAUTDB for the card demo application.",
      "called_by": [
        "UNLDPADB"
      ],
      "calls": [
        "DFSRRC00"
      ],
      "citation": [
        38,
        69
      ],
      "outgoing_calls": [
        {
          "target": "DFSRRC00",
          "call_type": "executes",
          "line": 38
        },
        {
          "target": "OEMA.IMS.IMSP.SDFSRESL",
          "call_type": "references",
          "line": 40
        },
        {
          "target": "OEMA.IMS.IMSP.SDFSRESL.V151",
          "call_type": "references",
          "line": 41
        },
        {
          "target": "AWS.M2.CARDDEMO.LOADLIB",
          "call_type": "references",
          "line": 42
        },
        {
          "target": "OEMA.IMS.IMSP.SDFSRESL",
          "call_type": "references",
          "line": 43
        },
        {
          "target": "OEM.IMS.IMSP.PSBLIB",
          "call_type": "references",
          "line": 45
        },
        {
          "target": "OEM.IMS.IMSP.DBDLIB",
          "call_type": "references",
          "line": 46
        },
        {
          "target": "AWS.M2.CARDDEMO.PAUTDB.ROOT.FILEO",
          "call_type": "references",
          "line": 48
        },
        {
          "target": "AWS.M2.CARDDEMO.PAUTDB.CHILD.FILEO",
          "call_type": "references",
          "line": 53
        },
        {
          "target": "OEM.IMS.IMSP.PAUTHDB",
          "call_type": "references",
          "line": 58
        },
        {
          "target": "OEM.IMS.IMSP.PAUTHDBX",
          "call_type": "references",
          "line": 59
        }
      ],
      "incoming_calls": [],
      "is_dead_code": true,
      "dead_code_reason": "Paragraph 'STEP01' is never PERFORMed or referenced by any other paragraph or program",
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Dataset not found or I/O error in STEP0 deletes",
      "action": "JCL default: continue to next step or abend if severe",
      "citation": [
        33
      ]
    },
    {
      "condition": "IMS utility failure in STEP01 (e.g., DB not accessible)",
      "action": "IMS messages to SYSOUT*/IMSERR; job abends on RC non-zero",
      "citation": [
        66
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Detailed segment layouts and field mappings in PAUTDB",
      "context": "JCL references DBD/PSB but no copybook or DBD source provided",
      "suggestion": "Analyze OEM.IMS.IMSP.PAUTHDB DBD source or unload file samples"
    },
    {
      "question": "Exact role of PAUDBUNL/PAUTBUNL in PARM",
      "context": "Likely PCB/DBD names for unload, but not confirmed without PSB/DBD",
      "suggestion": "Review DFSVSAMP member DFSVSMDB for definitions"
    }
  ],
  "resolved_questions": [],
  "dead_code": [
    {
      "name": "STEP01",
      "artifact_type": "paragraph",
      "line": 38,
      "reason": "Paragraph 'STEP01' is never PERFORMed or referenced by any other paragraph or program"
    }
  ],
  "call_semantics": [],
  "flow_diagram": null
}