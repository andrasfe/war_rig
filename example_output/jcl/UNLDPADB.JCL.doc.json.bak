{
  "header": {
    "program_id": "UNLDPADB",
    "file_name": "jcl/UNLDPADB.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T14:19:42.588457",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL defines a batch job to unload IMS database segments from PAUTDB (via PAUTHDB and PAUTHDBX) into two sequential flat files: ROOT.FILEO for root segments and CHILD.FILEO for child segments. STEP0 uses IEFBR14 to delete any prior versions of the output files. STEP01 executes the IMS utility DFSRRC00 in DLI mode to perform the unload operation.",
    "business_context": "Supports AWS M2 CARDDEMO application by unloading IMS PAUTDB database for offline processing, archiving, or demo purposes",
    "program_type": "BATCH",
    "citations": [
      1,
      23,
      25,
      33,
      34,
      38,
      48,
      53
    ]
  },
  "inputs": [
    {
      "name": "DDPAUTP0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS PAUTHDB database (primary input for PAUTDB unload)",
      "copybook": null,
      "citation": [
        58
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS PAUTHDBX database (secondary input for PAUTDB unload)",
      "copybook": null,
      "citation": [
        59
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "OTHER",
      "description": "IMS proclib member DFSVSMDB providing database definitions",
      "copybook": null,
      "citation": [
        62
      ]
    },
    {
      "name": "STEPLIB",
      "io_type": "OTHER",
      "description": "Load libraries containing IMS utilities and application load modules",
      "copybook": null,
      "citation": [
        40
      ]
    },
    {
      "name": "DD1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Prior version of ROOT.FILEO for deletion",
      "copybook": null,
      "citation": [
        33
      ]
    },
    {
      "name": "DD2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Prior version of CHILD.FILEO for deletion",
      "copybook": null,
      "citation": [
        35
      ]
    }
  ],
  "outputs": [
    {
      "name": "OUTFIL1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unloaded root segments from PAUTDB in fixed-block format (LRECL=100)",
      "copybook": null,
      "citation": [
        48
      ]
    },
    {
      "name": "OUTFIL2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unloaded child segments from PAUTDB in fixed-block format (LRECL=206)",
      "copybook": null,
      "citation": [
        53
      ]
    },
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Utility print output and messages",
      "copybook": null,
      "citation": [
        27
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IEFBR14",
      "call_type": "STATIC_CALL",
      "purpose": "Dummy execution to trigger DD disposition deletes for prior output files",
      "parameters": [],
      "citation": 25
    },
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS database unload utility to extract segments to sequential files",
      "parameters": [
        "DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N"
      ],
      "citation": 38
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Delete any existing output files from prior runs before unloading to prevent accumulation or overwrite issues",
      "logic_summary": "Implemented via DISP=(OLD,DELETE,DELETE) on DD1 and DD2 in STEP0",
      "conditions": [
        "File exists (OLD)"
      ],
      "citation": [
        33,
        35
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Catalog new output files for permanent storage after successful unload",
      "logic_summary": "Implemented via DISP=(NEW,CATLG,DELETE) on OUTFIL1 and OUTFIL2",
      "conditions": [
        "Step succeeds"
      ],
      "citation": [
        49,
        54
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "DDPAUTP0",
        "fields_used": [],
        "citation": [
          58
        ]
      },
      {
        "source": "DDPAUTX0",
        "fields_used": [],
        "citation": [
          59
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "OUTFIL1",
        "fields_written": [
          "ROOT segment data"
        ],
        "citation": [
          48
        ]
      },
      {
        "destination": "OUTFIL2",
        "fields_written": [
          "CHILD segment data"
        ],
        "citation": [
          53
        ]
      }
    ],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP0",
      "summary": null,
      "purpose": "This step serves as a cleanup phase to remove any existing output files from previous job executions, ensuring a fresh start for the unload process and preventing file conflicts or space issues. It consumes references to prior output files via DD1 (AWS.M2.CARDDEMO.PAUTDB.ROOT.FILEO) and DD2 (AWS.M2.CARDDEMO.PAUTDB.CHILD.FILEO), both specified with DISP=(OLD,DELETE,DELETE) to conditionally delete if present. No data is read or processed; the step produces file deletions as its primary output, with no new files created. There is no business logic or decision-making, as IEFBR14 performs no operations beyond establishing the step for DD processing. Error handling is implicit in JCL disposition: if files do not exist, the step succeeds without action; failures would cause job abend via system defaults. It executes PGM=IEFBR14 solely to enable the DD deletes, with no subordinate calls. SYSPRINT, SYSOUT, and SYSDUMP are directed to SYSOUT for any minimal logging. This step runs unconditionally as the first in the job.",
      "called_by": [],
      "calls": [],
      "citation": [
        25,
        37
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This step is the core execution phase that performs the IMS database unload from PAUTDB into sequential files, serving as the primary business function of the job. It consumes IMS database inputs via DDPAUTP0 (PAUTHDB), DDPAUTX0 (PAUTHDBX), and DFSVSAMP (DFSVSMDB for definitions), along with required libraries in STEPLIB, DFSRESLB, and IMS for IMS utilities and metadata. Outputs are produced to OUTFIL1 (root segments, LRECL=100, cataloged) and OUTFIL2 (child segments, LRECL=206, cataloged), with SYSOUT datasets for logs, dumps, and errors. Business logic is driven by PARM='DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N', specifying DLI access method, unload DBD identifiers PAUDBUNL/PAUTBUNL, and no restart (N). No explicit conditions or validations are coded in JCL; all logic is within DFSRRC00 utility, which unloads all segments sequentially. Error handling includes SYSUDUMP, IMSERR, and IMSLOGR (DUMMY) for diagnostics, with job abend on utility failure. It executes PGM=DFSRRC00 with no subordinate paragraph calls, relying on IMS infrastructure DDs. Space allocations (400 tracks, 20/20 extents) ensure sufficient output capacity. This step depends on STEP0 completion implicitly via sequential job flow.",
      "called_by": [],
      "calls": [],
      "citation": [
        38,
        69
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Prior output files not deletable",
      "action": "JCL disposition failure leads to step abend",
      "citation": [
        33
      ]
    },
    {
      "condition": "DFSRRC00 utility failure (e.g., DB not accessible)",
      "action": "Step abend with dumps to SYSUDUMP/IMSERR",
      "citation": [
        67
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Exact segment names and structures in PAUTDB (root/child)",
      "context": "JCL references files but no segment details visible",
      "suggestion": "Review IMS DBD source or unloaded file contents"
    },
    {
      "question": "Relationship between PAUTHDB/PAUTHDBX and PAUTDB/PAUDBUNL/PAUTBUNL",
      "context": "Names similar but not identical; likely aliases or versions",
      "suggestion": "Check IMS system definitions or DFSVSMDB member"
    }
  ]
}