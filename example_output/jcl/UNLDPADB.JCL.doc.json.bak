{
  "header": {
    "program_id": "UNLDPADB",
    "file_name": "jcl/UNLDPADB.JCL",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T17:36:35.171039",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL job unloads the IMS database PAUTDB into two sequential flat files: root segments to PAUTDB.ROOT.FILEO and child segments to PAUTDB.CHILD.FILEO. STEP0 performs cleanup by deleting any existing output files using IEFBR14. STEP01 executes the IMS unload utility DFSRRC00 with parameters specifying DLI access, unload DBDs PAUDBUNL and PAUTBUNL.",
    "business_context": "Supports AWS Mainframe Modernization (M2) CARDDEMO application by unloading IMS PAUTDB database for potential backup, migration, or demo purposes.",
    "program_type": "BATCH",
    "citations": [
      1,
      23,
      25,
      33,
      38,
      48,
      53
    ]
  },
  "inputs": [
    {
      "name": "STEPLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS SDFSRESL libraries and application LOADLIB for executing DFSRRC00",
      "copybook": null,
      "citation": [
        40,
        41,
        42
      ]
    },
    {
      "name": "DFSRESLB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS SDFSRESL library for utility execution",
      "copybook": null,
      "citation": [
        43
      ]
    },
    {
      "name": "IMS",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS PSBLIB and DBDLIB for PSB and DBD definitions",
      "copybook": null,
      "citation": [
        45,
        46
      ]
    },
    {
      "name": "DDPAUTP0",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS PAUTHDB (primary authorization database library)",
      "copybook": null,
      "citation": [
        58
      ]
    },
    {
      "name": "DDPAUTX0",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS PAUTHDBX (extended authorization database library)",
      "copybook": null,
      "citation": [
        59
      ]
    },
    {
      "name": "DFSVSAMP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "IMS proclib containing DFSVSMDB macro for database access",
      "copybook": null,
      "citation": [
        62,
        63
      ]
    }
  ],
  "outputs": [
    {
      "name": "OUTFIL1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unload file for PAUTDB root segments (LRECL=100, RECFM=FB)",
      "copybook": null,
      "citation": [
        48,
        50
      ]
    },
    {
      "name": "OUTFIL2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Unload file for PAUTDB child segments (LRECL=206, RECFM=FB)",
      "copybook": null,
      "citation": [
        53,
        55
      ]
    },
    {
      "name": "SYSPRINT",
      "io_type": "REPORT",
      "description": "Standard print output for job logs",
      "copybook": null,
      "citation": [
        27,
        66
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IEFBR14",
      "call_type": "STATIC_CALL",
      "purpose": "No-op execution to trigger deletion of old output files via DD DISP",
      "parameters": [],
      "citation": 25
    },
    {
      "program_name": "DFSRRC00",
      "call_type": "STATIC_CALL",
      "purpose": "IMS database unload utility to extract PAUTDB segments to flat files",
      "parameters": [
        "DLI,PAUDBUNL,PAUTBUNL,,,,,,,,,,,N"
      ],
      "citation": 38
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Delete existing output files before unload to prevent append or conflicts",
      "logic_summary": "Uses DISP=(OLD,DELETE,DELETE) on DD1 and DD2 in STEP0",
      "conditions": [
        "Existing files present"
      ],
      "citation": [
        33,
        34,
        35,
        36
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Allocate new output files with specific DCB and space parameters",
      "logic_summary": "DISP=(NEW,CATLG,DELETE), custom LRECL/BLKSIZE/RECFM, SPACE=(400,(20,20),RLSE)",
      "conditions": [
        "New cataloged datasets"
      ],
      "citation": [
        48,
        50,
        53,
        55
      ]
    },
    {
      "rule_id": "BR003",
      "description": "Use DLI access mode for unload without checkpointing (N flag)",
      "logic_summary": "PARM specifies DLI and ends with N for no restarts/checkpoints",
      "conditions": [
        "Full database unload"
      ],
      "citation": [
        39
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "PAUTDB (IMS database via PAUDBUNL DBD)",
        "fields_used": [
          "Root segments"
        ],
        "citation": [
          39,
          58
        ]
      },
      {
        "source": "PAUTDB (IMS database via PAUTBUNL DBD)",
        "fields_used": [
          "Child segments"
        ],
        "citation": [
          39,
          58
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "PAUTDB.ROOT.FILEO",
        "fields_written": [
          "Unloaded root segments"
        ],
        "citation": [
          48
        ]
      },
      {
        "destination": "PAUTDB.CHILD.FILEO",
        "fields_written": [
          "Unloaded child segments"
        ],
        "citation": [
          53
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PAUTDB root segments",
        "output_field": "ROOT.FILEO records",
        "transformation_description": "Unloads IMS hierarchical root segments into fixed-block sequential file (LRECL=100)",
        "citation": [
          39,
          48
        ]
      },
      {
        "input_field": "PAUTDB child segments",
        "output_field": "CHILD.FILEO records",
        "transformation_description": "Unloads IMS hierarchical child segments into fixed-block sequential file (LRECL=206)",
        "citation": [
          39,
          53
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "STEP0",
      "summary": null,
      "purpose": "This step serves as a cleanup phase prior to the main unload operation, executing the no-op program IEFBR14 to trigger deletion of any pre-existing output datasets. It consumes the DD1 and DD2 datasets (old versions of ROOT.FILEO and CHILD.FILEO) specified with DISP=(OLD,DELETE,DELETE), ensuring no residual files interfere with new cataloging. No data is read or processed beyond the existence check for deletion; there are no working variables or computations. Outputs are limited to standard SYSOUT datasets like SYSPRINT, SYSOUT, and SYSDUMP for any job logs. No business logic or conditional decisions are implemented, as it is purely a housekeeping step without PERFORM or IF statements typical in COBOL. Error handling relies on standard JCL disposition failure, which would cause job ABEND if files are not deletable. It calls no subordinate steps, programs, or paragraphs, serving only to prepare the environment for STEP01. SYSDUMP is provided for diagnostics if deletion fails.",
      "called_by": [],
      "calls": [],
      "citation": [
        25,
        37
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "STEP01",
      "summary": null,
      "purpose": "This is the primary processing step that executes the IMS database unload utility DFSRRC00 to extract segments from PAUTDB into flat files. It consumes IMS libraries (STEPLIB, DFSRESLB, IMS, DDPAUTP0, DDPAUTX0, DFSVSAMP) for program load, DBD/PSB definitions, and database access macros, plus the target IMS database PAUTDB accessed via DLI mode and unload DBDs PAUDBUNL/PAUTBUNL specified in PARM. Outputs are the newly cataloged sequential files OUTFIL1 (root segments) and OUTFIL2 (child segments) with specific DCB attributes, plus SYSOUT files for logs, dumps, and errors. Business logic is encapsulated in the utility's PARM, specifying dual unloads without checkpointing (N flag) for a complete one-pass extraction. No explicit validations or decisions are coded in JCL, deferring to DFSRRC00's internal handling of database status and segment hierarchies. Error handling uses DUMMY DDs (IMSLOGR, IEFRDER) to suppress unnecessary logs, with SYSUDUMP and IMSERR for capturing failures. It calls no other programs or steps, operating independently after STEP0 cleanup. The REGION=0M and TIME=1440 parameters accommodate potentially large database unloads.",
      "called_by": [],
      "calls": [],
      "citation": [
        38,
        69
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Existing output files not deletable",
      "action": "JCL ABEND due to DISP=(OLD,DELETE,DELETE) failure",
      "citation": [
        33,
        34,
        35,
        36
      ]
    },
    {
      "condition": "IMS utility failure (e.g., DB not accessible)",
      "action": "Capture in SYSUDUMP, IMSERR; DUMMY suppresses non-essential logs",
      "citation": [
        64,
        65,
        67,
        68
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Exact segment structure and field layouts in unloaded files",
      "context": "JCL does not specify; depends on IMS DBD definitions in PAUTHDB",
      "suggestion": "Analyze unload DBDs PAUDBUNL/PAUTBUNL or sample output files"
    },
    {
      "question": "Relationship between PAUTBUNL and child segments",
      "context": "PARM lists PAUDBUNL then PAUTBUNL mapping to OUTFIL1/OUTFIL2",
      "suggestion": "Review IMS DBDLIB source for PAUTDB database"
    }
  ]
}