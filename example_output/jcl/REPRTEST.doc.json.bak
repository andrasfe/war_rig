{
  "header": {
    "program_id": "REPRTEST",
    "file_name": "jcl/REPRTEST.jcl",
    "file_type": "JCL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-24T18:35:51.085506",
    "iteration_count": 5,
    "final_status": null
  },
  "purpose": {
    "summary": "REPRTEST JCL job executes STEP05 invoking the REPROC cataloged procedure to backup the CardDemo transaction VSAM KSDS dataset (AWS.M2.CARDDEMO.TRANSACT.VSAM.KSDS) using IDCAMS REPRO utility. It copies records to a new sequential fixed-block dataset (AWS.M2.CARDDEMO.TRANSACT.BKUP(+1)) with appropriate DCB and space parameters. The job specifies JCLLIB for procedure resolution, CNTLLIB override for control statements, shared input access, and notifies the submitter (&SYSUID) on completion.",
    "business_context": "Part of AWS Mainframe Modernization CardDemo demo (v1.0-57-g40b7caa-110, line 35) build/test lifecycle to create generational backup of VSAM transaction dataset for data recovery, archival, and testing validation in demo environment.",
    "program_type": "BATCH",
    "citations": [
      1,
      2,
      22,
      23,
      24,
      26,
      27,
      29,
      33,
      35
    ]
  },
  "inputs": [
    {
      "name": "PRC001.FILEIN",
      "io_type": "FILE_VSAM",
      "description": "Input VSAM KSDS dataset containing CardDemo transaction data; DSN=AWS.M2.CARDDEMO.TRANSACT.VSAM.KSDS (line 27), DISP=SHR (line 26) for shared read access allowing concurrent usage; used by IDCAMS REPRO utility in REPROC proc to read source records for backup. Dependency: Must exist prior to job execution (DISP=SHR).",
      "copybook": null,
      "citation": [
        26,
        27
      ]
    },
    {
      "name": "CNTLLIB",
      "io_type": "PARAMETER",
      "description": "Symbolic override CNTLLIB=AWS.M2.CARDDEMO.CNTL (line 24) passed to REPROC proc; dataset contains control statements (likely SYSIN DD) for IDCAMS REPRO utility defining repro operation parameters such as INFILE(FILEIN) OUTFILE(FILEOUT). Dependency: Must exist prior to job execution.",
      "copybook": null,
      "citation": [
        24
      ]
    },
    {
      "name": "JCLLIB",
      "io_type": "OTHER",
      "description": "JCL library ORDER=('AWS.M2.CARDDEMO.PROC') (line 22) via JOBLIB JCLLIB; dataset contains cataloged procedure REPROC member required to resolve and execute the PROC. Dependency: Must exist prior to job execution.",
      "copybook": null,
      "citation": [
        22
      ]
    }
  ],
  "outputs": [
    {
      "name": "PRC001.FILEOUT",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Output sequential fixed-block dataset receiving copied transaction records from input VSAM KSDS as generational backup; DSN=AWS.M2.CARDDEMO.TRANSACT.BKUP(+1) (line 33, GDG +1 generation), DISP=(NEW,CATLG,DELETE) (line 29) to create/catalog new generation on success or delete/uncatalog on failure; UNIT=SYSDA (line 30), DCB=(LRECL=350,RECFM=FB,BLKSIZE=0) (line 31), SPACE=(CYL,(1,1),RLSE) (line 32); used by IDCAMS REPRO in REPROC proc. Created by job (DISP=NEW).",
      "copybook": null,
      "citation": [
        29,
        30,
        31,
        32,
        33
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "REPROC",
      "call_type": "STATIC_CALL",
      "purpose": "Cataloged JCL procedure invoked via EXEC PROC=REPROC (line 23) in STEP05 to execute IDCAMS REPRO utility copying VSAM KSDS input records to sequential output backup; overrides: CNTLLIB (line 24), PRC001.FILEIN (lines 26-27), PRC001.FILEOUT (lines 29-33).",
      "parameters": [
        "CNTLLIB=AWS.M2.CARDDEMO.CNTL",
        "PRC001.FILEIN",
        "PRC001.FILEOUT"
      ],
      "citation": 23
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Output dataset cataloged on success (RC=0), deleted/uncataloged on abend or conditional failure",
      "logic_summary": "DISP=(NEW,CATLG,DELETE) parameters control disposition",
      "conditions": [
        "Step RC=0 (success)",
        "Step abend or COND failure"
      ],
      "citation": [
        29
      ]
    },
    {
      "rule_id": "BR002",
      "description": "REPROC procedure resolved from specified JCLLIB dataset only",
      "logic_summary": "JOBLIB JCLLIB ORDER=('AWS.M2.CARDDEMO.PROC') sets exclusive library search order",
      "conditions": [
        "PROC=REPROC invocation"
      ],
      "citation": [
        22,
        23
      ]
    },
    {
      "rule_id": "BR003",
      "description": "STEP05 executes unconditionally as first/only step",
      "logic_summary": "No COND parameter on EXEC PROC statement",
      "conditions": [
        "None"
      ],
      "citation": [
        23
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Job notifies submitter user ID on any completion",
      "logic_summary": "NOTIFY=&SYSUID on JOB card",
      "conditions": [
        "Job end (normal or abnormal)"
      ],
      "citation": [
        2
      ]
    },
    {
      "rule_id": "BR005",
      "description": "Prerequisites: Input datasets must exist prior to execution (dependencies.input_datasets)",
      "logic_summary": "DISP=SHR for FILEIN (line 26), existence required for CNTLLIB (line 24) and JCLLIB (line 22): AWS.M2.CARDDEMO.TRANSACT.VSAM.KSDS, AWS.M2.CARDDEMO.CNTL, AWS.M2.CARDDEMO.PROC",
      "conditions": [
        "Job/step initiation"
      ],
      "citation": [
        22,
        24,
        26,
        27
      ]
    },
    {
      "rule_id": "BR006",
      "description": "Generational backup: Creates new GDG generation (+1) (dependencies.output_datasets)",
      "logic_summary": "DSN=...BKUP(+1) with DISP=NEW",
      "conditions": [
        "Successful step completion"
      ],
      "citation": [
        29,
        33
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "PRC001.FILEIN (AWS.M2.CARDDEMO.TRANSACT.VSAM.KSDS)",
        "fields_used": [
          "ALL RECORDS"
        ],
        "citation": [
          26,
          27
        ]
      },
      {
        "source": "CNTLLIB (AWS.M2.CARDDEMO.CNTL)",
        "fields_used": [
          "REPRO control statements (e.g., REPRO INFILE(FILEIN) OUTFILE(FILEOUT))"
        ],
        "citation": [
          24
        ]
      },
      {
        "source": "JCLLIB (AWS.M2.CARDDEMO.PROC)",
        "fields_used": [
          "REPROC procedure definition"
        ],
        "citation": [
          22
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "PRC001.FILEOUT (AWS.M2.CARDDEMO.TRANSACT.BKUP(+1))",
        "fields_written": [
          "ALL RECORDS (copied)"
        ],
        "citation": [
          29,
          33
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "ALL RECORDS from VSAM KSDS (PRC001.FILEIN)",
        "output_field": "ALL RECORDS to sequential FB dataset (PRC001.FILEOUT)",
        "transformation_description": "IDCAMS REPRO utility (via REPROC proc) copies entire records unchanged from input VSAM KSDS to output sequential GDG backup; DCB parameters ensure compatibility (LRECL=350, RECFM=FB).",
        "citation": [
          23,
          26,
          27,
          29,
          31,
          33
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "JOB-REPRTEST",
      "purpose": "Job card defines execution parameters including ACCOUNT, CLASS=A, MSGCLASS=0, NOTIFY=&SYSUID (lines 1-2); JOBLIB JCLLIB ORDER=('AWS.M2.CARDDEMO.PROC') specifies procedure library (line 22); includes license header and comments (lines 3-21); drives CardDemo backup in build/test flow. Documents JOB-level EXEC/JOBLIB.",
      "called_by": [],
      "calls": [
        "STEP05"
      ],
      "citation": [
        1,
        22
      ]
    },
    {
      "paragraph_name": "STEP05",
      "purpose": "EXEC PROC=REPROC with CNTLLIB override (line 24), documenting EXEC statement and purpose (IDCAMS REPRO backup); defines key DD overrides/statements: PRC001.FILEIN DISP=SHR DSN=VSAM transact (lines 26-27, input dependency), PRC001.FILEOUT DISP=(NEW,CATLG,DELETE) UNIT=SYSDA DCB=... SPACE=... DSN=GDG(+1) sequential backup (lines 29-33, output creation); performs repro backup unconditionally. Documents all DDs with DSN/DISP/purpose.",
      "called_by": [
        "JOB-REPRTEST"
      ],
      "calls": [
        "REPROC"
      ],
      "citation": [
        23,
        33
      ]
    }
  ],
  "error_handling": [
    {
      "condition": "Step abend or conditional termination (non-zero RC)",
      "action": "Delete/uncatalog output dataset PRC001.FILEOUT per DISP=(NEW,CATLG,DELETE); job notify &SYSUID",
      "citation": [
        2,
        29
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Exact contents of REPROC procedure (PGM=, internal steps, DDs)",
      "context": "JCL invokes PROC=REPROC from AWS.M2.CARDDEMO.PROC (line 22) but proc source unavailable; inferred IDCAMS REPRO from DD names (PRC001.FILEIN/OUT), CNTLLIB, job purpose",
      "suggestion": "Analyze REPROC member in AWS.M2.CARDDEMO.PROC dataset"
    },
    {
      "question": "Record layout/copybook for TRANSACT.VSAM.KSDS",
      "context": "No copybook in JCL; output DCB LRECL=350 RECFM=FB (line 31) implies fixed 350-byte records",
      "suggestion": "Locate copybook for AWS.M2.CARDDEMO.TRANSACT.VSAM.KSDS"
    },
    {
      "question": "IDCAMS control statements in AWS.M2.CARDDEMO.CNTL",
      "context": "CNTLLIB=AWS.M2.CARDDEMO.CNTL (line 24) likely provides SYSIN REPRO INFILE/OUTFILE but member/content unknown",
      "suggestion": "Examine members in AWS.M2.CARDDEMO.CNTL dataset"
    }
  ]
}