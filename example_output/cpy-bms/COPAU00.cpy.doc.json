{
  "header": {
    "program_id": "COPAU00",
    "file_name": "cpy-bms/COPAU00.cpy",
    "file_type": "COPYBOOK",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-25T15:28:17.388472",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This COBOL copybook defines the symbolic maps for the COPAU00 BMS screen in a CICS environment. COPAU0AI provides the input map with field lengths (L), format flags (F), attributes (A), and input data (I) for all screen fields. COPAU0AO redefines the area for output with separate attribute bytes (C, P, H, V) and output data (O) to support screen rendering of customer account details, limits, balances, counts, recent transactions, and error messages.",
    "business_context": "CICS online screen for customer account inquiry or maintenance in a financial/banking system, displaying header info (program/transaction names, titles, date/time), customer details (ID, name, address, status, phone), account metrics (approved/declined counts, credit/cash limits and balances), up to 5 recent transactions (ID, date, time, type, approval, status, amount), selectors, and error messages.",
    "program_type": "ONLINE_CICS",
    "citations": [
      17,
      391
    ]
  },
  "inputs": [
    {
      "name": "COPAU0AI",
      "io_type": "CICS_MAP",
      "description": "Input symbolic map area with packed field definitions: length (COMP S9(4)), flag (X), redefined attribute (X), and input data (PIC X(n)) for screen fields including TRNNAMEI, TITLE01I, CURDATEI, PGMNAMEI, TITLE02I, CURTIMEI, ACCTIDI, CNAMEI, CUSTIDI, ADDR001I, ACCSTATI, ADDR002I, PHONE1I, APPRCNTI, DECLCNTI, CREDLIMI, CASHLIMI, APPRAMTI, CREDBALI, CASHBALI, DECLAMTI, multiple transaction fields (SEL000XI/TRNID0XI/PDATE0XI etc.), and ERRMSGI.",
      "copybook": null,
      "citation": [
        17
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU0AO",
      "io_type": "CICS_MAP",
      "description": "Output symbolic map area redefining COPAU0AI, with separate attribute bytes (C/P/H/V PIC X each) and output data (O PIC X(n)) for all screen fields, enabling BMS SEND MAP operations to display formatted account summary and transactions.",
      "copybook": null,
      "citation": [
        391
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "COPAU00",
      "summary": null,
      "purpose": "[Citadel] Paragraph identified by static analysis",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        1
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUS0C.cbl",
          "function": "COPAUS0C",
          "line": 129,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUS0C.cbl",
          "function": "COPAUS0C",
          "line": 1,
          "call_type": "includes"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "COPAU0AI",
      "summary": null,
      "purpose": "[Citadel] Paragraph identified by static analysis",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        1
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": true,
      "dead_code_reason": "Record layout 'COPAU0AI' is never used by any program",
      "metadata": {
        "body_chunks": 8
      }
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [],
  "resolved_questions": [
    {
      "original_question": "Which CICS programs include this copybook and use the COPAU00 map?",
      "original_context": "Copybook does not specify including programs; usage inferred from BMS naming convention but not explicit.",
      "answer": "**COPAUS0C** (in file `cbl/COPAUS0C.cbl`) is the only CICS program that includes the `COPAU00` copybook and uses the `COPAU00` mapset.\n\n### Evidence from Code Searches:\n- **Copybook Inclusion**:\n  - Line 129: `COPY COPAU00.` (exact match for `COPY\\s+COPAU00`; no other files match).\n\n- **Mapset Usage** (via `MAPSET('COPAU00')` with `MAP('COPAU0A')`):\n  | Line | Context | Statement |\n  |------|---------|-----------|\n  | 697  | SEND FROM(COPAU0AO) | `EXEC CICS SEND MAP('COPAU0A') MAPSET('COPAU00') ...` |\n  | 705  | SEND FROM(COPAU0AO) | `EXEC CICS SEND MAP('COPAU0A') MAPSET('COPAU00') ...` |\n  | 717  | RECEIVE INTO(COPAU0AI) | `EXEC CICS RECEIVE MAP('COPAU0A') MAPSET('COPAU00') INTO(COPAU0AI) ...` |\n\nNo other `.cbl` files reference `COPY COPAU00`, `MAPSET('COPAU00')`, `MAP('COPAU00')`, `SEND MAP('COPAU00')`, or `RECEIVE MAP('COPAU00')`. This confirms exclusive usage by COPAUS0C for screen I/O with the symbolic maps (COPAU0AI for input, COPAU0AO for output).",
      "confidence": "HIGH",
      "resolved_by": "CODEWHISPER",
      "cycle_resolved": 1,
      "tool_calls_used": 4
    }
  ],
  "dead_code": [
    {
      "name": "COPAU0AI",
      "artifact_type": "record_layout",
      "line": 1,
      "reason": "Record layout 'COPAU0AI' is never used by any program"
    }
  ],
  "call_semantics": [],
  "flow_diagram": null
}