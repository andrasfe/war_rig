{
  "header": {
    "program_id": "COPAU01",
    "file_name": "cpy-bms/COPAU01.cpy",
    "file_type": "COPYBOOK",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-25T15:28:49.811940",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This COBOL copybook defines the symbolic map structures for the COPAU01 BMS screen used in CICS online transactions. It provides the COPAU1AI group item containing length (L), format (F), attribute (A), and input data (I) fields for screen elements including transaction names, titles, current date/time, card number, authorization details (date, time, response, code, amount), POS entry mode, auth source, MCC code, card expiration, auth type, transaction ID, auth match, auth fraud, merchant details (name, ID, city, state, zip), and error message. The COPAU1AO group redefines COPAU1AI with BMS output attributes (C=constant, P=protected, H=high intensity, V=visible, O=output data) for screen rendering and data transmission.",
    "business_context": "CICS BMS map for payment card authorization transaction screens, displaying and capturing transaction, card, authorization, and merchant information.",
    "program_type": "ONLINE_CICS",
    "citations": [
      17,
      181
    ]
  },
  "inputs": [
    {
      "name": "COPAU1AI",
      "io_type": "CICS_MAP",
      "description": "Input symbolic map structure holding user-entered or received data fields with length, format, and values for screen elements",
      "copybook": null,
      "citation": [
        17,
        18,
        60,
        66,
        72,
        78,
        84,
        90,
        96,
        102,
        108,
        114,
        120,
        126,
        132,
        138,
        144,
        150,
        156,
        162,
        168,
        174,
        180
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU1AO",
      "io_type": "CICS_MAP",
      "description": "Output symbolic map structure redefining input with BMS attributes (C/P/H/V) and output data (O) fields for screen display and transmission",
      "copybook": null,
      "citation": [
        181,
        184,
        188,
        194,
        200,
        206,
        212,
        218,
        224,
        230,
        236,
        242,
        248,
        254,
        260,
        266,
        272,
        278,
        284,
        290,
        296,
        302,
        308,
        314,
        320,
        326,
        332,
        338,
        344
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "COPAU01",
      "summary": null,
      "purpose": "[Citadel] Paragraph identified by static analysis",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        1
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUS1C.cbl",
          "function": "COPAUS1C",
          "line": 122,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUS1C.cbl",
          "function": "COPAUS1C",
          "line": 1,
          "call_type": "includes"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "COPAU1AI",
      "summary": null,
      "purpose": "[Citadel] Paragraph identified by static analysis",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        1
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": true,
      "dead_code_reason": "Record layout 'COPAU1AI' is never used by any program",
      "metadata": {
        "body_chunks": 4
      }
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [],
  "resolved_questions": [
    {
      "original_question": "Which CICS programs include and use this COPY COPAU01 copybook?",
      "original_context": "No including programs or usage context provided in the copybook file itself",
      "answer": "**COPAUS1C** (file: `cbl/COPAUS1C.cbl`) is the only CICS program that includes and uses the `COPY COPAU01` copybook.\n\n### Evidence from Analysis:\n- **Inclusion**: Direct `COPY COPAU01.` statement at line 122 in `COPAUS1C.cbl` (confirmed via multiple `search_code` patterns: `'COPY.*COPAU01'`, `'COPY COPAU01'`, `'^       COPY COPAU01\\.?'`).\n- **Usage**: \n  - Defines/references map fields like `COPAU1AI` (e.g., line 403: `EXEC CICS RECEIVE ... INTO(COPAU1AI)`) and `COPAU1AO` (multiple references, e.g., lines 163, 210, 377, 384, 392, 413–416, 422, 428 for output like `ERRMSGO OF COPAU1AO`, `TRNNAMEO OF COPAU1AO`, etc.).\n  - `citadel_analyze_file` on `COPAUS1C.cbl` lists `COPAU01` under **Preprocessor Includes**.\n  - CICS BMS interactions: `RECEIVE MAP('COPAU1A') MAPSET('COPAU01')` and `SEND ... FROM(COPAU1AO)`.\n- **Exhaustiveness**:\n  - `search_code` for unique fields (`'COPAU1AI'`, `'COPAU1AO'`) returned matches **only** in `COPAUS1C.cbl` and `cpy-bms/COPAU01.cpy` itself—no other files.\n  - `system-overview` skill confirms `COPAUS1C` handles auth views with `COPAU01` BMS map; other programs like `COPAUS0C` use `COPAU00`.\n  - No matches in other COBOL files (e.g., `COPAUS0C`, `COPAUS2C`, batch programs).\n\nNo other CICS programs include or reference it. This copybook is specific to the COPAU1A screen in `COPAUS1C` for authorization detail views.",
      "confidence": "HIGH",
      "resolved_by": "CODEWHISPER",
      "cycle_resolved": 1,
      "tool_calls_used": 14
    }
  ],
  "dead_code": [
    {
      "name": "COPAU1AI",
      "artifact_type": "record_layout",
      "line": 1,
      "reason": "Record layout 'COPAU1AI' is never used by any program"
    }
  ],
  "call_semantics": [],
  "flow_diagram": null
}