[
  {
    "caller": "MAIN-PARA",
    "callee": "1000-INITIALIZE",
    "inputs": [
      "PRM-INFO",
      "P-EXPIRY-DAYS",
      "P-CHKP-FREQ",
      "P-CHKP-DIS-FREQ",
      "P-DEBUG-FLAG"
    ],
    "outputs": [
      "CURRENT-DATE",
      "CURRENT-YYDDD",
      "WS-EXPIRY-DAYS",
      "P-CHKP-FREQ",
      "P-CHKP-DIS-FREQ",
      "P-DEBUG-FLAG"
    ],
    "purpose": "Initializes program variables by accepting current date, parameters, and setting default values for expiry days, checkpoint frequency, and debug flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "2000-FIND-NEXT-AUTH-SUMMARY",
    "inputs": [
      "DEBUG-ON"
    ],
    "outputs": [
      "WS-NO-SUMRY-READ",
      "WS-AUTH-SMRY-PROC-CNT",
      "WS-CURR-APP-ID",
      "END-OF-AUTHDB",
      "NOT-END-OF-AUTHDB"
    ],
    "purpose": "Reads the next pending authorization summary record from the IMS database and updates counters and flags accordingly."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "3000-FIND-NEXT-AUTH-DTL",
    "inputs": [
      "DEBUG-ON"
    ],
    "outputs": [
      "WS-NO-DTL-READ",
      "MORE-AUTHS",
      "NO-MORE-AUTHS"
    ],
    "purpose": "Retrieves the next pending authorization detail record using IMS GNP call and sets flags based on whether more details exist."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "4000-CHECK-IF-EXPIRED",
    "inputs": [
      "PA-AUTH-DATE-9C",
      "CURRENT-YYDDD",
      "WS-EXPIRY-DAYS",
      "PA-AUTH-RESP-CODE",
      "PA-APPROVED-AUTH-CNT",
      "PA-APPROVED-AUTH-AMT",
      "PA-DECLINED-AUTH-CNT",
      "PA-DECLINED-AUTH-AMT"
    ],
    "outputs": [
      "WS-AUTH-DATE",
      "WS-DAY-DIFF",
      "QUALIFIED-FOR-DELETE",
      "NOT-QUALIFIED-FOR-DELETE",
      "PA-APPROVED-AUTH-CNT",
      "PA-APPROVED-AUTH-AMT",
      "PA-DECLINED-AUTH-CNT",
      "PA-DECLINED-AUTH-AMT"
    ],
    "purpose": "Determines if an authorization detail is expired based on date difference and updates summary counts while setting deletion qualification flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "5000-DELETE-AUTH-DTL",
    "inputs": [
      "PA-ACCT-ID",
      "DEBUG-ON"
    ],
    "outputs": [
      "WS-NO-DTL-DELETED"
    ],
    "purpose": "Deletes the current authorization detail segment from the IMS database and increments the deletion counter if successful."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "3000-FIND-NEXT-AUTH-DTL",
    "inputs": [
      "DEBUG-ON",
      "PAUT-PCB-NUM",
      "PENDING-AUTH-DETAILS"
    ],
    "outputs": [
      "WS-NO-DTL-READ",
      "WS-MORE-AUTHS-FLAG"
    ],
    "purpose": "Reads the next pending authorization detail record from the IMS database and updates read count and control flags."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "6000-DELETE-AUTH-SUMMARY",
    "inputs": [
      "DEBUG-ON",
      "PAUT-PCB-NUM",
      "PENDING-AUTH-SUMMARY",
      "PA-ACCT-ID"
    ],
    "outputs": [
      "WS-NO-SUMRY-DELETED"
    ],
    "purpose": "Deletes the current pending authorization summary record from the IMS database and increments the deletion counter."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "9000-TAKE-CHECKPOINT",
    "inputs": [
      "WK-CHKPT-ID",
      "WS-NO-CHKP",
      "P-CHKP-DIS-FREQ",
      "WS-NO-SUMRY-READ",
      "WS-CURR-APP-ID"
    ],
    "outputs": [
      "WS-NO-CHKP"
    ],
    "purpose": "Takes an IMS checkpoint and displays progress information if the checkpoint frequency threshold is reached."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "2000-FIND-NEXT-AUTH-SUMMARY",
    "inputs": [
      "DEBUG-ON",
      "PAUT-PCB-NUM",
      "PENDING-AUTH-SUMMARY"
    ],
    "outputs": [
      "WS-NO-SUMRY-READ",
      "WS-AUTH-SMRY-PROC-CNT",
      "WS-CURR-APP-ID",
      "WS-END-OF-AUTHDB-FLAG"
    ],
    "purpose": "Reads the next pending authorization summary record from the IMS database and updates counters, current app ID, and end-of-file flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "9000-TAKE-CHECKPOINT",
    "inputs": [
      "WK-CHKPT-ID",
      "WS-NO-CHKP",
      "P-CHKP-DIS-FREQ",
      "WS-NO-SUMRY-READ",
      "WS-CURR-APP-ID"
    ],
    "outputs": [
      "WS-NO-CHKP"
    ],
    "purpose": "Takes an IMS checkpoint and displays progress information if the checkpoint frequency threshold is reached."
  },
  {
    "caller": "2000-FIND-NEXT-AUTH-SUMMARY",
    "callee": "9999-ABEND",
    "inputs": [
      "WS-NO-SUMRY-READ",
      "DIBSTAT"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when an unexpected IMS status code is encountered during summary read."
  },
  {
    "caller": "3000-FIND-NEXT-AUTH-DTL",
    "callee": "9999-ABEND",
    "inputs": [
      "WS-NO-DTL-READ",
      "PA-ACCT-ID",
      "DIBSTAT"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when an unexpected IMS status code is encountered during detail read."
  },
  {
    "caller": "5000-DELETE-AUTH-DTL",
    "callee": "9999-ABEND",
    "inputs": [
      "PA-ACCT-ID",
      "DIBSTAT"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when an IMS delete operation on the detail segment fails."
  },
  {
    "caller": "6000-DELETE-AUTH-SUMMARY",
    "callee": "9999-ABEND",
    "inputs": [
      "PA-ACCT-ID",
      "DIBSTAT"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 1\u6e38\u620f\u526f\u672c when an IMS delete operation on the summary segment fails."
  },
  {
    "caller": "9000-TAKE-CHECKPOINT",
    "callee": "9999-ABEND",
    "inputs": [
      "DIBSTAT",
      "WS-NO-SUMRY-READ",
      "WS-CURR-APP-ID"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when an IMS checkpoint operation fails."
  }
]