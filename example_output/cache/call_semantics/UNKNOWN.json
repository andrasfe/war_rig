[
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A map to the screen, optionally erasing it first, after populating header information and moving the current message."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "GATHER-DETAILS",
    "inputs": [
      "WS-ACCT-ID"
    ],
    "outputs": [],
    "purpose": "Gathers account details and initializes authorization data if an account ID is provided, then processes the first page of authorization records."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A map to the screen, optionally erasing it first, after populating header information and moving the current message."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "RECEIVE-PAULST-SCREEN",
    "inputs": [],
    "outputs": [
      "WS-RESP-CD",
      "WS-REAS-CD"
    ],
    "purpose": "Receives input from the COPAU0A map and stores the CICS response and reason codes."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "PROCESS-ENTER-KEY",
    "inputs": [
      "ACCTIDI OF COPAU0AI",
      "SEL0001I OF COPAU0AI",
      "SEL0002I OF COPAU0AI",
      "SEL0003I OF COPAU0AI",
      "SEL0004I OF COPAU0AI",
      "SEL0005I OF COPAU0AI",
      "CDEMO-CPVS-AUTH-KEYS"
    ],
    "outputs": [
      "WS-ACCT-ID",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "ACCTIDL OF COPAU0AI",
      "CDEMO-ACCT-ID",
      "CDEMO-CPVS-PAU-SEL-FLG",
      "CDEMO-CPVS-PAU-SELECTED"
    ],
    "purpose": "Processes the ENTER key by validating the account ID, capturing selected authorization records, and setting up for detail display or error handling."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A map to the screen, optionally erasing the display, based on the current message and erase flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "RETURN-TO-PREV-SCREEN",
    "inputs": [
      "WS-CICS-TRANID",
      "WS-PGM-AUTH-SMRY",
      "CDEMO-TO-PROGRAM"
    ],
    "outputs": [
      "CDEMO-FROM-TRANID",
      "CDEMO-FROM-PROGRAM",
      "CDEMO-PGM-CONTEXT"
    ],
    "purpose": "Sets up and transfers control to a previous program using XCTL, passing context in the commarea."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A map to the screen, optionally erasing the display, based on the current message and erase flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "PROCESS-PF7-KEY",
    "inputs": [
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-PREV-PG"
    ],
    "outputs": [
      "WS-AUTH-KEY-SAVE",
      "SEND-ERASE-NO",
      "NEXT-PAGE-YES",
      "ACCTIDL",
      "WS-MESSAGE"
    ],
    "purpose": "Processes the PF7 (page up) key by navigating to the previous page of authorization data if available."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A map to the screen, optionally erasing the display, based on the current message and erase flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "PROCESS-PF8-KEY",
    "inputs": [
      "CDEMO-CPVS-PAUKEY-LAST",
      "NEXT-PAGE-YES",
      "WS-ACCT-ID"
    ],
    "outputs": [
      "WS-AUTH-KEY-SAVE",
      "ACCTIDL OF COPAU0AI"
    ],
    "purpose": "Processes the PF8 key press to navigate forward through authorization records, reposition data, and prepare for page display."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "IMS-PSB-SCHD",
      "WS-MESSAGE",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A screen map to the terminal, optionally erasing the screen first based on the SEND-ERASE-YES flag."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "IMS-PSB-SCHD",
      "WS-MESSAGE",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [],
    "purpose": "Sends the COPAU0A screen map to the terminal, optionally erasing the screen first based on the SEND-ERASE-YES flag."
  },
  {
    "caller": "PROCESS-ENTER-KEY",
    "callee": "GATHER-DETAILS",
    "inputs": [
      "WS-ACCT-ID"
    ],
    "outputs": [
      "ACCTIDL OF COPAU0AI",
      "CDEMO-CPVS-PAGE-NUM"
    ],
    "purpose": "Retrieves and initializes account and authorization data for the entered account ID when the ENTER key is pressed."
  },
  {
    "caller": "GATHER-DETAILS",
    "callee": "GATHER-ACCOUNT-DETAILS",
    "inputs": [
      "WS-ACCT-ID"
    ],
    "outputs": [
      "CUSTIDO",
      "CNAMEO",
      "ADDR001O",
      "ADDR002O",
      "PHONE1O",
      "CREDLIMO",
      "CASHLIMO",
      "APPRCNTO",
      "DECLCNTO",
      "CREDBALO",
      "CASHBALO",
      "APPRAMTO",
      "DECLAMTO"
    ],
    "purpose": "Retrieves and populates customer, account, and authorization summary data for the current account ID."
  },
  {
    "caller": "GATHER-DETAILS",
    "callee": "INITIALIZE-AUTH-DATA",
    "inputs": [],
    "outputs": [
      "WS-IDX"
    ],
    "purpose": "Initializes authorization detail screen fields by clearing them and setting default values for display."
  },
  {
    "caller": "GATHER-DETAILS",
    "callee": "PROCESS-PAGE-FORWARD",
    "inputs": [
      "ERR-FLG-OFF",
      "FOUND-PAUT-SMRY-SEG",
      "EIBAID",
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-LAST",
      "CDEMO-CPVS-PAUKEY-PREV-PG"
    ],
    "outputs": [
      "WS-IDX",
      "CDEMO-CPVS-PAUKEY-LAST",
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-PREV-PG",
      "NEXT-PAGE-YES",
      "NEXT-PAGE-NO"
    ],
    "purpose": "Retrieves and populates up to five authorization records starting from the last key, incrementing page number and tracking navigation keys."
  },
  {
    "caller": "PROCESS-PF7-KEY",
    "callee": "GET-AUTH-SUMMARY",
    "inputs": [
      "CDEMO-ACCT-ID",
      "WS-AUTH-KEY-SAVE"
    ],
    "outputs": [
      "PA-ACCT-ID",
      "PENDING-AUTH-SUMMARY",
      "IMS-RETURN-CODE",
      "FOUND-PAUT-SMRY-SEG",
      "NFOUND-PAUT-SMRY-SEG",
      "WS-ERR-FLG",
      "ACCTIDL",
      "WS-MESSAGE"
    ],
    "purpose": "Retrieves the pending authorization summary segment from IMS using the account ID and sets status flags based on the result."
  },
  {
    "caller": "PROCESS-PF7-KEY",
    "callee": "INITIALIZE-AUTH-DATA",
    "inputs": [],
    "outputs": [
      "WS-IDX"
    ],
    "purpose": "Clears the authorization list display area by initializing screen fields for five entries to spaces and default values."
  },
  {
    "caller": "PROCESS-PF7-KEY",
    "callee": "PROCESS-PAGE-FORWARD",
    "inputs": [
      "ERR-FLG-OFF",
      "EIBAID",
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-LAST",
      "CDEMO-CPVS-PAUKEY-PREV-PG"
    ],
    "outputs": [
      "WS-IDX",
      "CDEMO-CPVS-PAUKEY-LAST",
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-PREV-PG",
      "NEXT-PAGE-YES",
      "NEXT-PAGE-NO"
    ],
    "purpose": "Fetches and displays the next set of authorization records after navigating back a page, updating navigation state accordingly."
  },
  {
    "caller": "PROCESS-PF8-KEY",
    "callee": "GET-AUTH-SUMMARY",
    "inputs": [
      "CDEMO-ACCT-ID",
      "PA-ACCT-ID"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "ACCTIDL OF COPAU0AI"
    ],
    "purpose": "Retrieves the authorization summary segment from IMS using the account ID as a key."
  },
  {
    "caller": "PROCESS-PF8-KEY",
    "callee": "REPOSITION-AUTHORIZATIONS",
    "inputs": [
      "WS-AUTH-KEY-SAVE"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "ACCTIDL OF COPAU0AI"
    ],
    "purpose": "Repositions the IMS database cursor to the authorization detail segment matching the saved authorization key."
  },
  {
    "caller": "PROCESS-PF8-KEY",
    "callee": "INITIALIZE-AUTH-DATA",
    "inputs": [],
    "outputs": [
      "SEL0001A OF COPAU0AI",
      "TRNID01I OF COPAU0AI",
      "PDATE01I OF COPAU0AI",
      "PTIME01I OF COPAU0AI",
      "PTYPE01I OF COPAU0AI",
      "PAPRV01I OF COPAU0AI",
      "PSTAT01I OF COPAU0AI",
      "PAMT001I OF COPAU0AI",
      "SEL0002A OF COPAU0AI",
      "TRNID02I OF COPAU0AI",
      "PDATE02I OF COPAU0AI",
      "PTIME02I OF COPAU0AI",
      "PTYPE02I OF COPAU0AI",
      "PAPRV02I OF COPAU0AI",
      "PSTAT02I OF COPAU0AI",
      "PAMT002I OF COPAU0AI",
      "SEL0003A OF COPAU0AI",
      "TRNID03I OF COPAU0AI",
      "PDATE03I OF COPAU0AI",
      "PTIME03I OF COPAU0AI",
      "PTYPE03I OF COPAU0AI",
      "PAPRV03I OF COPAU0AI",
      "PSTAT03I OF COPAU0AI",
      "PAMT003I OF COPAU0AI",
      "SEL0004A OF COPAU0AI",
      "TRNID04I OF COPAU0AI",
      "PDATE04I OF COPAU0AI",
      "PTIME04I OF COPAU0AI",
      "PTYPE04I OF COPAU0AI",
      "PAPRV04I OF COPAU0AI",
      "PSTAT04I OF COPAU0AI",
      "PAMT004I OF COPAU0AI",
      "SEL0005A OF COPAU0AI",
      "TRNID05I OF COPAU0AI",
      "PDATE05I OF COPAU0AI",
      "PTIME05I OF COPAU0AI",
      "PTYPE05I OF COPAU0AI",
      "PAPRV05I OF COPAU0AI",
      "PSTAT05I OF COPAU0AI",
      "PAMT005I OF COPAU0AI"
    ],
    "purpose": "Initializes the authorization data screen fields by clearing them and setting default values for all five authorization entries."
  },
  {
    "caller": "PROCESS-PF8-KEY",
    "callee": "PROCESS-PAGE-FORWARD",
    "inputs": [
      "ERR-FLG-OFF",
      "EIBAID",
      "DFHPF7",
      "WS-IDX",
      "AUTHS-EOF",
      "AUTHS-NOT-EOF",
      "ERR-FLG-ON"
    ],
    "outputs": [
      "WS-IDX",
      "CDEMO-CPVS-PAUKEY-LAST",
      "CDEMO-CPVS-PAGE-NUM",
      "CDEMO-CPVS-PAUKEY-PREV-PG",
      "NEXT-PAGE-YES",
      "NEXT-PAGE-NO"
    ],
    "purpose": "Processes forward paging through authorization records by retrieving and populating up to five authorization details starting from the current position."
  },
  {
    "caller": "PROCESS-PAGE-FORWARD",
    "callee": "REPOSITION-AUTHORIZATIONS",
    "inputs": [
      "WS-AUTH-KEY-SAVE"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "ACCTIDL OF COPAU0AI"
    ],
    "purpose": "Repositions the IMS database cursor to the authorization detail segment corresponding to the saved authorization key when navigating backward via PF7."
  },
  {
    "caller": "PROCESS-PAGE-FORWARD",
    "callee": "GET-AUTHORIZATIONS",
    "inputs": [
      "PAUT-PCB-NUM",
      "PENDING-AUTH-DETAILS"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "AUTHS-EOF",
      "AUTHS-NOT-EOF"
    ],
    "purpose": "Retrieves the next authorization detail segment from the IMS database and updates status flags based on the result."
  },
  {
    "caller": "PROCESS-PAGE-FORWARD",
    "callee": "POPULATE-AUTH-LIST",
    "inputs": [
      "PA-APPROVED-AMT",
      "PA-AUTH-ORIG-TIME",
      "PA-AUTH-ORIG-DATE",
      "PA-AUTH-RESP-CODE",
      "WS-IDX",
      "PA-AUTHORIZATION-KEY",
      "PA-TRANSACTION-ID",
      "WS-AUTH-DATE",
      "WS-AUTH-TIME",
      "PA-AUTH-TYPE",
      "WS-AUTH-APRV-STAT",
      "PA-MATCH-STATUS",
      "WS-AUTH-AMT"
    ],
    "outputs": [
      "WS-AUTH-AMT",
      "WS-AUTH-TIME",
      "WS-CURDATE-YY",
      "WS-CURDATE-MM",
      "WS-CURDATE-DD",
      "WS-AUTH-DATE",
      "WS-AUTH-APRV-STAT",
      "CDEMO-CPVS-AUTH-KEYS",
      "TRNID01I",
      "PDATE01I",
      "PTIME01I",
      "PTYPE01I",
      "PAPRV01I",
      "PSTAT01I",
      "PAMT001I",
      "SEL0001A",
      "TRNID02I",
      "PDATE02I",
      "PTIME02I",
      "PTYPE02I",
      "PAPRV02I",
      "PSTAT02I",
      "PAMT002I",
      "SEL0002A",
      "TRNID03I",
      "PDATE03I",
      "PTIME03I",
      "PTYPE03I",
      "PAPRV03I",
      "PSTAT03I",
      "PAMT003I",
      "SEL0003A",
      "TRNID04I",
      "PDATE04I",
      "PTIME04I",
      "PTYPE04I",
      "PAPRV04I",
      "PSTAT04I",
      "PAMT004I",
      "SEL0004A",
      "TRNID05I",
      "PDATE05I",
      "PTIME05I",
      "PTYPE05I",
      "PAPRV05I",
      "PSTAT05I",
      "PAMT005I",
      "SEL0005A"
    ],
    "purpose": "Populates the screen fields and working storage with authorization data for the current record based on the index."
  },
  {
    "caller": "PROCESS-PAGE-FORWARD",
    "callee": "GET-AUTHORIZATIONS",
    "inputs": [
      "PAUT-PCB-NUM",
      "PENDING-AUTH-DETAILS"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE",
      "AUTHS-EOF",
      "AUTHS-NOT-EOF"
    ],
    "purpose": "Attempts to retrieve the next authorization record after processing a page to determine if a next page is available."
  },
  {
    "caller": "GET-AUTHORIZATIONS",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "ACCTIDL",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [
      "IMS-PSB-NOT-SCHD"
    ],
    "purpose": "Sends the authorization list screen with an error message when a system error occurs during IMS data retrieval."
  },
  {
    "caller": "REPOSITION-AUTHORIZATIONS",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "ACCTIDL",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES",
      "COPAU0AO"
    ],
    "outputs": [
      "IMS-PSB-NOT-SCHD"
    ],
    "purpose": "Displays the authorization list screen with an error message if repositioning to a saved authorization key fails."
  },
  {
    "caller": "SEND-PAULST-SCREEN",
    "callee": "POPULATE-HEADER-INFO",
    "inputs": [
      "WS-CICS-TRANID",
      "WS-PGM-AUTH-SMRY"
    ],
    "outputs": [
      "WS-CURDATE-MM",
      "WS-CURDATE-DD",
      "WS-CURDATE-YY",
      "WS-CURDATE-MM-DD-YY",
      "WS-CURTIME-HH",
      "WS-CURTIME-MM",
      "WS-CURTIME-SS",
      "WS-CURTIME-HH-MM-SS"
    ],
    "purpose": "Populates the screen header with current date, time, transaction name, and program name."
  },
  {
    "caller": "GATHER-ACCOUNT-DETAILS",
    "callee": "GETCARDXREF-BYACCT",
    "inputs": [
      "WS-ACCT-ID",
      "WS-CARDXREFNAME-ACCT-PATH"
    ],
    "outputs": [
      "WS-CARD-RID-ACCT-ID-X",
      "WS-RESP-CD",
      "WS-REAS-CD",
      "WS-RESP-CD-DIS",
      "WS-REAS-CD-DIS",
      "WS-MESSAGE"
    ],
    "purpose": "Retrieves card cross-reference data by account ID and handles errors if the record is not found or a system error occurs."
  },
  {
    "caller": "GATHER-ACCOUNT-DETAILS",
    "callee": "GETACCTDATA-BYACCT",
    "inputs": [
      "XREF-ACCT-ID",
      "WS-ACCTFILENAME"
    ],
    "outputs": [
      "WS-CARD-RID-ACCT-ID-X",
      "WS-RESP-CD",
      "WS-REAS-CD",
      "WS-RESP-CD-DIS",
      "WS-REAS-CD-DIS",
      "WS-MESSAGE"
    ],
    "purpose": "Reads account data using the account ID from the cross-reference and displays an error message if the account is not found or a system error occurs."
  },
  {
    "caller": "GATHER-ACCOUNT-DETAILS",
    "callee": "GETCUSTDATA-BYCUST",
    "inputs": [
      "XREF-CUST-ID",
      "WS-CUSTFILENAME"
    ],
    "outputs": [
      "WS-CARD-RID-CUST-ID-X",
      "WS-RESP-CD",
      "WS-REAS-CD",
      "WS-RESP-CD-DIS",
      "WS-REAS-CD-DIS",
      "WS-MESSAGE"
    ],
    "purpose": "Retrieves customer data using the customer ID from the cross-reference and handles errors if the customer is not found or a system error occurs."
  },
  {
    "caller": "GATHER-ACCOUNT-DETAILS",
    "callee": "GET-AUTH-SUMMARY",
    "inputs": [
      "CDEMO-ACCT-ID"
    ],
    "outputs": [
      "PA-ACCT-ID",
      "IMS-RETURN-CODE",
      "WS-ERR-FLG",
      "WS-MESSAGE"
    ],
    "purpose": "Retrieves the pending authorization summary for the account via IMS call and sets status flags based on the result."
  },
  {
    "caller": "GETCARDXREF-BYACCT",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends an error message to the screen when the card XREF record is not found or a system error occurs during file read."
  },
  {
    "caller": "GETCARDXREF-BYACCT",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends an error message to the screen when the card XREF record is not found or a system error occurs during file read."
  },
  {
    "caller": "GETACCTDATA-BYACCT",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Displays an error message on screen when the account record is not found or a system error occurs during file read."
  },
  {
    "caller": "GETACCTDATA-BYACCT",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Displays an error message on screen when the account record is not found or a system error occurs during file read."
  },
  {
    "caller": "GETCUSTDATA-BYCUST",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends an error message to the screen when the customer record is not found or a system error occurs during file read."
  },
  {
    "caller": "GETCUSTDATA-BYCUST",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends an error message to the screen when a customer record is not found or a system error occurs during file read."
  },
  {
    "caller": "GET-AUTH-SUMMARY",
    "callee": "SCHEDULE-PSB",
    "inputs": [
      "PSB-NAME"
    ],
    "outputs": [
      "IMS-RETURN-CODE",
      "IMS-PSB-SCHD"
    ],
    "purpose": "Schedules the PSB for IMS database access and handles rescheduling if it was already scheduled."
  },
  {
    "caller": "GET-AUTH-SUMMARY",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Displays an error message on the screen when a system error occurs while reading the authorization summary segment."
  },
  {
    "caller": "SCHEDULE-PSB",
    "callee": "SEND-PAULST-SCREEN",
    "inputs": [
      "WS-MESSAGE",
      "IMS-PSB-SCHD",
      "SEND-ERASE-YES"
    ],
    "outputs": [],
    "purpose": "Sends an error message to the screen if the PSB scheduling fails with a system error."
  }
]