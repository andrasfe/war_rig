{
  "header": {
    "program_id": "CBACT02C",
    "file_name": "CBACT02C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-18T16:21:02.514977",
    "iteration_count": 2,
    "final_status": "FORCED"
  },
  "purpose": {
    "summary": "This batch COBOL program displays start message, opens VSAM KSDS CARDFILE-FILE for input, loops performing sequential reads into CARD-RECORD until end-of-file status '10' sets END-OF-FILE='Y', displaying CARD-RECORD only if END-OF-FILE='N' after each read, then closes the file and displays end message. It handles I/O errors on open/read/close by displaying error messages and status, then abending via CEE3ABD.",
    "business_context": "CardDemo application: reads card data from VSAM file and prints (displays) records sequentially (lines 3-5)",
    "program_type": "BATCH",
    "citations": [
      2,
      3,
      4,
      5,
      71,
      72,
      74,
      75,
      76,
      77,
      78,
      80,
      83,
      85,
      93
    ]
  },
  "inputs": [
    {
      "name": "CARDFILE-FILE",
      "io_type": "FILE_VSAM",
      "description": "VSAM KSDS (INDEXED ORGANIZATION, SEQUENTIAL ACCESS) file of card data records with RECORD KEY FD-CARD-NUM (defined but unused for positioning in this sequential read from start); record layout FD-CARDFILE-REC: FD-CARD-NUM PIC X(16), FD-CARD-DATA PIC X(134); read INTO CARD-RECORD",
      "copybook": "CVACT02Y",
      "citation": [
        29,
        30,
        31,
        32,
        37,
        38,
        39,
        40,
        93
      ]
    }
  ],
  "outputs": [
    {
      "name": "CONSOLE",
      "io_type": "REPORT",
      "description": "Displays program execution start/end messages, successful CARD-RECORD contents (conditionally), all error messages ('ERROR READING/OPENING/CLOSING CARDFILE', 'ABENDING PROGRAM'), and formatted file I/O status codes",
      "copybook": null,
      "citation": [
        71,
        78,
        85,
        110,
        129,
        147,
        155,
        168,
        172
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "CEE3ABD",
      "call_type": "STATIC_CALL",
      "purpose": "Abends the program with user-specified return code ABCODE and timing information",
      "parameters": [
        "ABCODE",
        "TIMING"
      ],
      "citation": 158
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Treat file status '00' as successful read",
      "logic_summary": "MOVE 0 TO APPL-RESULT if CARDFILE-STATUS = '00'",
      "conditions": [
        "CARDFILE-STATUS = '00'"
      ],
      "citation": [
        94,
        95
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Treat file status '10' as end-of-file: set APPL-RESULT=16 to trigger APPL-EOF condition 88 level, which then sets END-OF-FILE='Y' to exit loop",
      "logic_summary": "MOVE 16 TO APPL-RESULT if CARDFILE-STATUS = '10'; later IF APPL-EOF MOVE 'Y' TO END-OF-FILE",
      "conditions": [
        "CARDFILE-STATUS = '10'",
        "APPL-EOF"
      ],
      "citation": [
        98,
        99,
        107,
        108
      ]
    },
    {
      "rule_id": "BR003",
      "description": "Treat non-'00'/'10' status as read error",
      "logic_summary": "MOVE 12 TO APPL-RESULT, display error, show status, abend if not EOF",
      "conditions": [
        "CARDFILE-STATUS NOT = '00' OR '10'",
        "NOT APPL-EOF"
      ],
      "citation": [
        101,
        110,
        111,
        112,
        113
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Abend on open or close errors similar to read errors",
      "logic_summary": "MOVE 12 TO APPL-RESULT if status not '00', display error, show status, abend",
      "conditions": [
        "CARDFILE-STATUS NOT = '00'"
      ],
      "citation": [
        124,
        129,
        142,
        147
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "CARDFILE-FILE",
        "fields_used": [
          "FD-CARDFILE-REC"
        ],
        "citation": [
          93
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "CONSOLE",
        "fields_written": [
          "CARD-RECORD",
          "'START OF EXECUTION OF PROGRAM CBACT02C'",
          "'END OF EXECUTION OF PROGRAM CBACT02C'",
          "'ERROR READING CARDFILE'",
          "'ERROR OPENING CARDFILE'",
          "'ERROR CLOSING CARDFILE'",
          "'ABENDING PROGRAM'",
          "IO-STATUS-04"
        ],
        "citation": [
          71,
          78,
          85,
          110,
          129,
          147,
          155,
          168,
          172
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "FD-CARDFILE-REC",
        "output_field": "CARD-RECORD",
        "transformation_description": "Implicit move from file record to working storage record on READ",
        "citation": [
          93
        ]
      },
      {
        "input_field": "CARDFILE-STATUS",
        "output_field": "IO-STATUS",
        "transformation_description": "MOVE CARDFILE-STATUS TO IO-STATUS for display formatting",
        "citation": [
          111,
          130,
          148
        ]
      },
      {
        "input_field": "IO-STATUS",
        "output_field": "IO-STATUS-04",
        "transformation_description": "Format IO-STATUS into numeric display field IO-STATUS-04 handling non-numeric cases",
        "citation": [
          162,
          164,
          166,
          170
        ]
      }
    ]
  },
  "copybooks_used": [
    {
      "copybook_name": "CVACT02Y",
      "purpose": "Defines CARD-RECORD working storage item used for reading file records and display",
      "location": "WORKING_STORAGE",
      "citation": 45
    }
  ],
  "paragraphs": [
    {
      "paragraph_name": "MAINLINE",
      "purpose": "Main control flow: display start, open file, loop read/display until EOF (PERFORM UNTIL END-OF-FILE = 'Y'; IF END-OF-FILE = 'N' PERFORM get-next and DISPLAY), close file, display end, GOBACK",
      "called_by": [],
      "calls": [
        "0-CARDFILE-OPEN",
        "0-CARDFILE-GET-NEXT",
        "0-CARDFILE-CLOSE"
      ],
      "citation": [
        70,
        87
      ]
    },
    {
      "paragraph_name": "0-CARDFILE-GET-NEXT",
      "purpose": "Performs sequential READ of CARDFILE-FILE into CARD-RECORD, sets APPL-RESULT based on status ('00'=0, '10'=16, else=12), handles EOF and errors",
      "called_by": [
        "MAINLINE"
      ],
      "calls": [
        "0-DISPLAY-IO-STATUS",
        "9-ABEND-PROGRAM"
      ],
      "citation": [
        92,
        115
      ]
    },
    {
      "paragraph_name": "0-CARDFILE-OPEN",
      "purpose": "Opens CARDFILE-FILE for INPUT, sets APPL-RESULT (8 before, '00'=0 else=12), handles open errors",
      "called_by": [
        "MAINLINE"
      ],
      "calls": [
        "0-DISPLAY-IO-STATUS",
        "9-ABEND-PROGRAM"
      ],
      "citation": [
        118,
        133
      ]
    },
    {
      "paragraph_name": "0-CARDFILE-CLOSE",
      "purpose": "Closes CARDFILE-FILE, sets APPL-RESULT (+8 then adjust to 0 or 12 on status), handles close errors",
      "called_by": [
        "MAINLINE"
      ],
      "calls": [
        "0-DISPLAY-IO-STATUS",
        "9-ABEND-PROGRAM"
      ],
      "citation": [
        136,
        151
      ]
    },
    {
      "paragraph_name": "9-ABEND-PROGRAM",
      "purpose": "Displays abend message and calls CEE3ABD to terminate program abnormally (ABCODE=999, TIMING=0)",
      "called_by": [
        "0-CARDFILE-GET-NEXT",
        "0-CARDFILE-OPEN",
        "0-CARDFILE-CLOSE"
      ],
      "calls": [],
      "citation": [
        154,
        160
      ]
    },
    {
      "paragraph_name": "0-DISPLAY-IO-STATUS",
      "purpose": "Formats and displays file IO-STATUS in IO-STATUS-04 for diagnostics (handles numeric/non-numeric)",
      "called_by": [
        "0-CARDFILE-GET-NEXT",
        "0-CARDFILE-OPEN",
        "0-CARDFILE-CLOSE"
      ],
      "calls": [],
      "citation": [
        161,
        173
      ]
    }
  ],
  "error_handling": [
    {
      "condition": "CARDFILE-STATUS NOT = '00' after READ and not '10'",
      "action": "DISPLAY 'ERROR READING CARDFILE', PERFORM 0-DISPLAY-IO-STATUS, PERFORM 9-ABEND-PROGRAM",
      "citation": [
        110,
        111,
        112,
        113
      ]
    },
    {
      "condition": "CARDFILE-STATUS NOT = '00' after OPEN",
      "action": "DISPLAY 'ERROR OPENING CARDFILE', PERFORM 0-DISPLAY-IO-STATUS, PERFORM 9-ABEND-PROGRAM",
      "citation": [
        129,
        130,
        131,
        132
      ]
    },
    {
      "condition": "CARDFILE-STATUS NOT = '00' after CLOSE",
      "action": "DISPLAY 'ERROR CLOSING CARDFILE', PERFORM 0-DISPLAY-IO-STATUS, PERFORM 9-ABEND-PROGRAM",
      "citation": [
        147,
        148,
        149,
        150
      ]
    },
    {
      "condition": "Program abend invoked",
      "action": "DISPLAY 'ABENDING PROGRAM', CALL 'CEE3ABD' USING ABCODE=999, TIMING=0",
      "citation": [
        155,
        156,
        157,
        158
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "What is the detailed structure and fields of CARD-RECORD defined in copybook CVACT02Y?",
      "context": "Referenced at line 45, used in READ INTO (93) and DISPLAY (78), but copybook content not provided",
      "suggestion": "Obtain and analyze CVACT02Y copybook source"
    },
    {
      "question": "What is the exact function and parameters of CEE3ABD?",
      "context": "Called statically at line 158 with ABCODE and TIMING, appears to be abend routine but not defined in source",
      "suggestion": "Consult mainframe Language Environment (LE) documentation or runtime library details"
    }
  ]
}