{
  "header": {
    "program_id": "BLDBAT",
    "file_name": "proc/BUILDBAT.prc",
    "file_type": "PROC",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-24T18:29:43.494501",
    "iteration_count": 5,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL procedure (PROC) compiles a specified COBOL batch program member using IGYCRCTL compiler (COMPILE step), routes the listing to SYSOUT using IEBGENER (CBLPRINT step), and conditionally link-edits the object module into a load library using HEWL binder (LKED step) if compilation RC < 8.",
    "business_context": "Compiles, lists, and link-edits batch COBOL source members from the CARDDEMO.CBL PDS (demo application sources) into executable load modules in CARDDEMO.LOADLIB PDS as part of the CARDDEMO batch program build and deployment lifecycle; produces compiler listings in CARDDEMO.LST PDS routed to SYSOUT for review. Serves as standardized build utility PROC for CARDDEMO demo batch programs, invoked by JCL jobs with overrides for MEM (source member), HLQ (dataset qualifier), COBLIB (compiler library), etc.",
    "program_type": "UTILITY",
    "citations": [
      2,
      19,
      20,
      24,
      28,
      29,
      30,
      35,
      64,
      74
    ]
  },
  "inputs": [
    {
      "name": "MEM",
      "io_type": "PARAMETER",
      "description": "Member name of the COBOL source program to compile, referenced as &SOURCE(&MEM) and &LISTING(&MEM)",
      "copybook": null,
      "citation": [
        24
      ]
    },
    {
      "name": "HLQ",
      "io_type": "PARAMETER",
      "description": "High-level qualifier used in dataset names for source (&HLQ..CARDDEMO.CBL), copybooks (&HLQ..CARDDEMO.CPY), listing (&HLQ..CARDDEMO.LST), and loadlib (&HLQ..CARDDEMO.LOADLIB)",
      "copybook": null,
      "citation": [
        25
      ]
    },
    {
      "name": "COBLIB",
      "io_type": "PARAMETER",
      "description": "STEPLIB dataset for COBOL compiler (default IGY.SIGYCOMP.V63), DD DSN=&COBLIB,DISP=SHR",
      "copybook": null,
      "citation": [
        26,
        37
      ]
    },
    {
      "name": "CPYBKS",
      "io_type": "PARAMETER",
      "description": "SYSLIB dataset for COBOL copybooks (default &HLQ..CARDDEMO.CPY), DD DISP=SHR,DSN=&CPYBKS",
      "copybook": null,
      "citation": [
        27,
        39
      ]
    },
    {
      "name": "SOURCE",
      "io_type": "PARAMETER",
      "description": "Dataset containing COBOL source PDS members (default &HLQ..CARDDEMO.CBL), SYSIN DD DISP=SHR,DSN=&SOURCE(&MEM)",
      "copybook": null,
      "citation": [
        28,
        38
      ]
    },
    {
      "name": "CEE.SCEESAMP",
      "io_type": "FILE_SEQUENTIAL",
      "description": "COBOL Language Environment sample library, SYSLIB DD DSN=CEE.SCEESAMP,DISP=SHR",
      "copybook": null,
      "citation": [
        40
      ]
    },
    {
      "name": "&&LOADSET",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary passed dataset containing object module from COMPILE step, input to LKED via SYSLIN DD DSN=&&LOADSET,DISP=(OLD,DELETE),UNIT=3390,SPACE=(80,(10,10))",
      "copybook": null,
      "citation": [
        42,
        81
      ]
    },
    {
      "name": "SYS1.LINKLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "System link library for binder resolution, SYSLIB DD DSN=SYS1.LINKLIB,DISP=SHR",
      "copybook": null,
      "citation": [
        76
      ]
    },
    {
      "name": "CSF.SCSFMOD0",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Site-specific or CICS-related modules library, SYSLIB DD DSN=CSF.SCSFMOD0,DISP=SHR",
      "copybook": null,
      "citation": [
        77
      ]
    },
    {
      "name": "CEE.SCEELKED",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CEE link-edit library, SYSLIB DD DSN=CEE.SCEELKED,DISP=SHR",
      "copybook": null,
      "citation": [
        78
      ]
    },
    {
      "name": "CEE.SCEELKEX",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CEE link-exit library, SYSLIB DD DSN=CEE.SCEELKEX,DISP=SHR",
      "copybook": null,
      "citation": [
        79
      ]
    },
    {
      "name": "LOADLIB",
      "io_type": "PARAMETER",
      "description": "Existing load library for SYSLIB reference and SYSLMOD output (default &HLQ..CARDDEMO.LOADLIB), DD DSN=&LOADLIB,DISP=SHR",
      "copybook": null,
      "citation": [
        29,
        80
      ]
    }
  ],
  "outputs": [
    {
      "name": "LISTING",
      "io_type": "PARAMETER",
      "description": "Dataset PDS for compiler SYSPRINT listing (default &HLQ..CARDDEMO.LST), referenced as &LISTING(&MEM), DD DISP=SHR,DSN=&LISTING(&MEM)",
      "copybook": null,
      "citation": [
        30,
        41
      ]
    },
    {
      "name": "&LISTING(&MEM)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "SYSPRINT output from compilation written to listing member, then copied to SYSOUT=* via CBLPRINT step (IEBGENER) with SYSUT1 DD DISP=SHR,DSN=&LISTING(&MEM); SYSPRINT/SYSUT2 DD SYSOUT=*",
      "copybook": null,
      "citation": [
        41,
        65,
        66,
        67
      ]
    },
    {
      "name": "LOADLIB",
      "io_type": "PARAMETER",
      "description": "Target load library PDS for SYSLMOD output (default &HLQ..CARDDEMO.LOADLIB), referenced as &LOADLIB(&MEM)",
      "copybook": null,
      "citation": [
        29
      ]
    },
    {
      "name": "&LOADLIB(&MEM)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Output load module placed via SYSLMOD DD DISP=SHR,DSN=&LOADLIB(&MEM) in LKED step",
      "copybook": null,
      "citation": [
        82
      ]
    },
    {
      "name": "&&LOADSET",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary object dataset created by COMPILE SYSLIN DD DSN=&&LOADSET,UNIT=3390,DISP=(MOD,PASS),SPACE=(80,(10,10))",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "SYSUT1-SYSUT15, SYSMDECK",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary work files for COBOL compiler phases, each DD SPACE=(80,(10,10),,,ROUND),UNIT=3390",
      "copybook": null,
      "citation": [
        44,
        59
      ]
    },
    {
      "name": "SYSUT1 (LKED)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary work file for binder, DD UNIT=3390,DCB=BLKSIZE=1024,SPACE=(1024,(200,20))",
      "copybook": null,
      "citation": [
        83
      ]
    },
    {
      "name": "SYSPRINT (CBLPRINT)",
      "io_type": "REPORT",
      "description": "Compiler listing routed to SYSOUT=* via IEBGENER",
      "copybook": null,
      "citation": [
        65
      ]
    },
    {
      "name": "SYSPRINT (LKED)",
      "io_type": "REPORT",
      "description": "Link-edit listing routed to SYSOUT=*",
      "copybook": null,
      "citation": [
        75
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "IGYCRCTL",
      "call_type": "STATIC_CALL",
      "purpose": "COBOL compiler invoked in COMPILE EXEC PGM=IGYCRCTL,REGION=0M,PARM=(APOST,LIST,MAP,NUMBER,NOSEQ) to process source into object module in &&LOADSET",
      "parameters": [
        "APOST,LIST,MAP,NUMBER,NOSEQ"
      ],
      "citation": 35
    },
    {
      "program_name": "IEBGENER",
      "call_type": "STATIC_CALL",
      "purpose": "Utility invoked in CBLPRINT EXEC PGM=IEBGENER,REGION=0M to copy compilation listing from &LISTING(&MEM) (SYSUT1 DISP=SHR) to SYSOUT=* (SYSPRINT and SYSUT2)",
      "parameters": [],
      "citation": 64
    },
    {
      "program_name": "HEWL",
      "call_type": "STATIC_CALL",
      "purpose": "Binder/link-editor invoked in LKED EXEC PGM=HEWL,REGION=0M,PARM='LIST,XREF',COND=(8,LT,COMPILE) to process &&LOADSET (SYSLIN DISP=(OLD,DELETE)) into load module in &LOADLIB(&MEM) SYSLMOD DISP=SHR",
      "parameters": [
        "LIST,XREF"
      ],
      "citation": 74
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Link-edit step (LKED) executes only if COBOL compile step (COMPILE) return code is less than 8",
      "logic_summary": "Uses COND=(8,LT,COMPILE) parameter on EXEC statement; CBLPRINT executes unconditionally after COMPILE",
      "conditions": [
        "COMPILE.RC < 8"
      ],
      "citation": [
        74
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Job flow: COMPILE always executes first, followed unconditionally by CBLPRINT, then conditionally by LKED based on COMPILE RC",
      "logic_summary": "Sequential EXEC steps with COND on LKED referencing prior COMPILE step",
      "conditions": [
        "Sequential execution",
        "COND=(8,LT,COMPILE)"
      ],
      "citation": [
        35,
        64,
        74
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "&SOURCE(&MEM)",
        "fields_used": [
          "entire COBOL source member"
        ],
        "citation": [
          38
        ]
      },
      {
        "source": "&CPYBKS",
        "fields_used": [
          "COBOL copybook members"
        ],
        "citation": [
          39
        ]
      },
      {
        "source": "CEE.SCEESAMP",
        "fields_used": [
          "CEE sample library modules"
        ],
        "citation": [
          40
        ]
      },
      {
        "source": "&&LOADSET",
        "fields_used": [
          "object module dataset"
        ],
        "citation": [
          81
        ]
      },
      {
        "source": "&LISTING(&MEM)",
        "fields_used": [
          "compilation listing"
        ],
        "citation": [
          66
        ]
      },
      {
        "source": "SYS1.LINKLIB",
        "fields_used": [
          "system link library modules"
        ],
        "citation": [
          76
        ]
      },
      {
        "source": "CSF.SCSFMOD0",
        "fields_used": [
          "CSF modules"
        ],
        "citation": [
          77
        ]
      },
      {
        "source": "CEE.SCEELKED",
        "fields_used": [
          "CEE link-edit library modules"
        ],
        "citation": [
          78
        ]
      },
      {
        "source": "CEE.SCEELKEX",
        "fields_used": [
          "CEE link-exit library modules"
        ],
        "citation": [
          79
        ]
      },
      {
        "source": "&LOADLIB",
        "fields_used": [
          "existing load modules"
        ],
        "citation": [
          80
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "&LISTING(&MEM)",
        "fields_written": [
          "compiler SYSPRINT listing"
        ],
        "citation": [
          41
        ]
      },
      {
        "destination": "&&LOADSET",
        "fields_written": [
          "COBOL object module"
        ],
        "citation": [
          42
        ]
      },
      {
        "destination": "&LOADLIB(&MEM)",
        "fields_written": [
          "linked load module"
        ],
        "citation": [
          82
        ]
      },
      {
        "destination": "SYSUT1 through SYSUT15, SYSMDECK",
        "fields_written": [
          "temporary compiler work data"
        ],
        "citation": [
          44,
          59
        ]
      },
      {
        "destination": "SYSUT1 (LKED)",
        "fields_written": [
          "binder temporary work data"
        ],
        "citation": [
          83
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "COBOL source from &SOURCE(&MEM) and copybooks from &CPYBKS",
        "output_field": "Object module in &&LOADSET",
        "transformation_description": "Compiles source using IGYCRCTL with PARM=(APOST,LIST,MAP,NUMBER,NOSEQ); STEPLIB=&COBLIB DISP=SHR; SYSLIB=&CPYBKS,CEE.SCEESAMP both DISP=SHR; uses SYSUT1-SYSUT15/SYSMDECK SPACE=(80,(10,10),,,ROUND),UNIT=3390 as work files",
        "citation": [
          35,
          36,
          37,
          39,
          40,
          44,
          59
        ]
      },
      {
        "input_field": "Object module from &&LOADSET",
        "output_field": "Load module in &LOADLIB(&MEM)",
        "transformation_description": "Link-edits object with SYSLIB datasets (SYS1.LINKLIB,CSF.SCSFMOD0,CEE.SCEELKED,CEE.SCEELKEX,&LOADLIB all DISP=SHR) using HEWL PARM='LIST,XREF'; SYSLIN=&&LOADSET DISP=(OLD,DELETE); SYSLMOD=&LOADLIB(&MEM) DISP=SHR; SYSUT1 workfile",
        "citation": [
          74,
          76,
          77,
          78,
          79,
          80,
          81,
          82,
          83
        ]
      },
      {
        "input_field": "SYSPRINT listing in &LISTING(&MEM)",
        "output_field": "SYSOUT=*",
        "transformation_description": "Copies listing dataset to sysout using IEBGENER; SYSUT1=&LISTING(&MEM) DISP=SHR; SYSPRINT/SYSUT2=SYSOUT=*; SYSIN=DUMMY",
        "citation": [
          64,
          65,
          66,
          67,
          68
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "COMPILE",
      "purpose": "COBOL compilation step EXEC PGM=IGYCRCTL,REGION=0M,PARM=(APOST,LIST,MAP,NUMBER,NOSEQ); STEPLIB DD DSN=&COBLIB,DISP=SHR (37); SYSIN DD DISP=SHR,DSN=&SOURCE(&MEM) (38); SYSLIB DD DISP=SHR,DSN=&CPYBKS (39), DD DSN=CEE.SCEESAMP,DISP=SHR (40); SYSPRINT DD DISP=SHR,DSN=&LISTING(&MEM) (41); SYSLIN DD DSN=&&LOADSET,UNIT=3390,DISP=(MOD,PASS),SPACE=(80,(10,10)) (42); SYSUT1-SYSUT15 DD SPACE=(80,(10,10),,,ROUND),UNIT=3390 (44-59); SYSMDECK DD SPACE=(80,(10,10),,,ROUND),UNIT=3390 (59)",
      "called_by": [],
      "calls": [],
      "citation": [
        35,
        60
      ]
    },
    {
      "paragraph_name": "CBLPRINT",
      "purpose": "Listing copy/print step EXEC PGM=IEBGENER,REGION=0M; SYSPRINT DD SYSOUT=* (65); SYSUT1 DD DISP=SHR,DSN=&LISTING(&MEM) (66); SYSUT2 DD SYSOUT=* (67); SYSIN DD DUMMY (68)",
      "called_by": [],
      "calls": [],
      "citation": [
        64,
        69
      ]
    },
    {
      "paragraph_name": "LKED",
      "purpose": "Link-edit/binder step EXEC PGM=HEWL,REGION=0M,PARM='LIST,XREF',COND=(8,LT,COMPILE); SYSPRINT DD SYSOUT=* (75); SYSLIB DD DSN=SYS1.LINKLIB,DISP=SHR (76), DD DSN=CSF.SCSFMOD0,DISP=SHR (77), DD DSN=CEE.SCEELKED,DISP=SHR (78), DD DSN=CEE.SCEELKEX,DISP=SHR (79), DD DSN=&LOADLIB,DISP=SHR (80); SYSLIN DD DSN=&&LOADSET,DISP=(OLD,DELETE) (81); SYSLMOD DD DISP=SHR,DSN=&LOADLIB(&MEM) (82); SYSUT1 DD UNIT=3390,DCB=BLKSIZE=1024,SPACE=(1024,(200,20)) (83)",
      "called_by": [],
      "calls": [],
      "citation": [
        74,
        83
      ]
    }
  ],
  "error_handling": [
    {
      "condition": "COMPILE return code >= 8",
      "action": "Bypass LKED step due to COND=(8,LT,COMPILE); CBLPRINT executes unconditionally after COMPILE",
      "citation": [
        74
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "JCL jobs that invoke this PROC via EXEC PROC=BLDBAT with parameter overrides",
      "context": "No calling JCL provided; cross-reference requires searching other JCL files to identify usage and typical overrides for MEM, HLQ, COBLIB, etc. Addresses Imperator [HIGH] no_cross_reference",
      "suggestion": "Grep/search for 'EXEC PROC=BLDBAT' or 'BLDBAT PROC' in job libraries"
    }
  ]
}