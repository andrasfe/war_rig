{
  "header": {
    "program_id": "BUILDBMS",
    "file_name": "proc/BUILDBMS.prc",
    "file_type": "PROC",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-23T04:47:34.323820",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This JCL procedure compiles a specified BMS map by printing its source, assembling it into a load module, link-editing the module into the target LOADLIB, generating a DSECT copybook into CPYBKS, producing listings, and cleaning up temporaries. It supports CICS BMS map builds for the CARDDEMO application. Parameters control dataset high-level qualifiers and locations.",
    "business_context": "Build process for compiling CICS BMS maps used in CARDDEMO application screens.",
    "program_type": "BATCH",
    "citations": [
      2,
      23,
      25,
      26,
      27,
      31,
      46,
      64,
      75
    ]
  },
  "inputs": [
    {
      "name": "&SRCCODE(&MAPNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Source BMS map member to compile",
      "copybook": null,
      "citation": [
        42
      ]
    },
    {
      "name": "&CICSMAC",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CICS macro library for BMS assembly",
      "copybook": null,
      "citation": [
        52
      ]
    },
    {
      "name": "SYS1.MACLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "System macro library",
      "copybook": null,
      "citation": [
        53
      ]
    },
    {
      "name": "CEE.SCEEMAC",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Enterprise COBOL macro library",
      "copybook": null,
      "citation": [
        54
      ]
    },
    {
      "name": "MAPNAME",
      "io_type": "PARAMETER",
      "description": "Required parameter: BMS map member name",
      "copybook": null,
      "citation": [
        23
      ]
    },
    {
      "name": "HLQ",
      "io_type": "PARAMETER",
      "description": "High-level qualifier for datasets",
      "copybook": null,
      "citation": [
        24
      ]
    }
  ],
  "outputs": [
    {
      "name": "&LOADLIB(&MAPNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Compiled BMS map load module (SYSLMOD; note DISP=SHR may imply special handling by HEWL)",
      "copybook": null,
      "citation": [
        70
      ]
    },
    {
      "name": "&CPYBKS(&MAPNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Generated DSECT copybook for BMS map (SYSPUNCH DISP=OLD)",
      "copybook": null,
      "citation": [
        88
      ]
    },
    {
      "name": "&LISTING(&MAPNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Assembly listing output",
      "copybook": null,
      "citation": [
        81
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "MAPNAME parameter must specify an existing member in the SRCCODE dataset",
      "logic_summary": "Used to construct input dataset reference; failure if member not found",
      "conditions": [
        "Member must exist for PRINT step SYSUT1 to succeed"
      ],
      "citation": [
        23,
        42
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Update access required to LOADLIB PDS for SYSLMOD member and CPYBKS PDS for DSECT member",
      "logic_summary": "LKED targets LOADLIB(&MAPNAME) via SYSLMOD; DSECT uses SYSPUNCH DISP=OLD to CPYBKS(&MAPNAME)",
      "conditions": [
        "Sufficient RACF/permissions for write/replace; SHR on SYSLMOD may require special HEWL access"
      ],
      "citation": [
        70,
        88
      ]
    },
    {
      "rule_id": "BR003",
      "description": "CICSMAC dataset must contain required BMS macros",
      "logic_summary": "Concatenated to SYSLIB for assembly steps",
      "conditions": [
        "Macros like DFHMSD TYPE=MAP must be available"
      ],
      "citation": [
        52,
        82
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "&SRCCODE(&MAPNAME)",
        "fields_used": [
          "Entire BMS source member"
        ],
        "citation": [
          42
        ]
      },
      {
        "source": "&CICSMAC",
        "fields_used": [
          "BMS macros"
        ],
        "citation": [
          52
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "&&TEMPM",
        "fields_written": [
          "Printable map data"
        ],
        "citation": [
          38
        ]
      },
      {
        "destination": "&&MAP",
        "fields_written": [
          "Assembled map deck"
        ],
        "citation": [
          58
        ]
      },
      {
        "destination": "&LOADLIB(&MAPNAME)",
        "fields_written": [
          "Load module"
        ],
        "citation": [
          70
        ]
      },
      {
        "destination": "&CPYBKS(&MAPNAME)",
        "fields_written": [
          "DSECT member"
        ],
        "citation": [
          88
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "BMS source map",
        "output_field": "&&TEMPM printable data",
        "transformation_description": "Copy/print source using IEBGENER",
        "citation": [
          36
        ]
      },
      {
        "input_field": "&&TEMPM",
        "output_field": "&&MAP deck and &LOADLIB load module",
        "transformation_description": "Assemble MAP (SYSPARM(MAP)) then link-edit with HEWL",
        "citation": [
          49,
          68
        ]
      },
      {
        "input_field": "&&TEMPM",
        "output_field": "&CPYBKS DSECT",
        "transformation_description": "Assemble DSECT (SYSPARM(DSECT)) to SYSPUNCH",
        "citation": [
          78
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "PRINT",
      "purpose": "Copy/print BMS source to temporary dataset using IEBGENER",
      "called_by": [],
      "calls": [
        "IEBGENER"
      ],
      "citation": [
        36,
        43
      ]
    },
    {
      "paragraph_name": "MAP",
      "purpose": "Assemble BMS map definition (SYSPARM(MAP)) to deck on SYSPUNCH",
      "called_by": [],
      "calls": [
        "ASMA90"
      ],
      "citation": [
        49,
        62
      ]
    },
    {
      "paragraph_name": "LKED",
      "purpose": "Link-edit map deck into load module using HEWL",
      "called_by": [],
      "calls": [
        "HEWL"
      ],
      "citation": [
        68,
        72
      ]
    },
    {
      "paragraph_name": "DSECT",
      "purpose": "Assemble BMS DSECT (SYSPARM(DSECT)) to copybook on SYSPUNCH",
      "called_by": [],
      "calls": [
        "ASMA90"
      ],
      "citation": [
        78,
        92
      ]
    },
    {
      "paragraph_name": "DISPLIST",
      "purpose": "Copy listing dataset to SYSOUT using IEBGENER",
      "called_by": [],
      "calls": [
        "IEBGENER"
      ],
      "citation": [
        96,
        101
      ]
    },
    {
      "paragraph_name": "DELTEMP",
      "purpose": "Delete temporary dataset using IEFBR14",
      "called_by": [],
      "calls": [
        "IEFBR14"
      ],
      "citation": [
        103,
        104
      ]
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Does the LKED step with HEWL and SYSLMOD DISP=SHR actually replace/create the load module member?",
      "context": "Standard link-edit expects writeable output (e.g., MOD); SHR suggests read/share, unclear if HEWL updates in place",
      "suggestion": "Review HEWL documentation or test execution"
    },
    {
      "question": "What is HEWL program?",
      "context": "Non-standard name (vs. IEWL); used for link-edit",
      "suggestion": "Check site utilities or IBM docs for HEWL"
    }
  ]
}