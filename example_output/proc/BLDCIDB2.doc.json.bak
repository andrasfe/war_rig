{
  "header": {
    "program_id": "BLDONL",
    "file_name": "proc/BLDCIDB2.prc",
    "file_type": "PROC",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-24T18:32:43.795564",
    "iteration_count": 5,
    "final_status": null
  },
  "purpose": {
    "summary": "BLDONL JCL PROC compiles CICS/DB2 COBOL programs in sequential steps: DB2 precompile extracts SQL to DBRM, CICS translator converts EXEC CICS to calls, COBOL compiler generates object, conditional link-edit produces load module, and DB2 binds package/plan for CARDDEMO collection. Configurable via parameters like MEMNAME (source member), HLQ (high-level qualifier), SSID (DB2 subsystem), PLAN (DB2 plan name). Run post-BMS compile for CardDemo demo programs.",
    "business_context": "Essential utility in CardDemo CICS/DB2 demo application build lifecycle: transforms source with embedded SQL/CICS into deployable CICS load modules and bound DB2 packages/plans (CARDDEMO collection, matching DB2ENTRY plan), enabling transactional execution with optimized static SQL.",
    "program_type": "UTILITY",
    "citations": [
      2,
      19,
      20,
      21,
      25,
      46,
      68,
      80,
      114,
      135,
      144,
      168
    ]
  },
  "inputs": [
    {
      "name": "SRCLIB(&MEMNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "COBOL source PDS member with embedded SQL/EXEC CICS (SYSIN PRECMP DSN=&SRCLIB(&MEMNAME) DISP=SHR [50])",
      "copybook": null,
      "citation": [
        38,
        50
      ]
    },
    {
      "name": "CPYBKS",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Copybook PDS (SYSLIB PRECMP/COBOL DISP=SHR [37,57,85])",
      "copybook": null,
      "citation": [
        37,
        57,
        85
      ]
    },
    {
      "name": "DCLLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "DB2 DCLGEN library (SYSLIB PRECMP/COBOL DISP=SHR [55,83])",
      "copybook": null,
      "citation": [
        55,
        83
      ]
    },
    {
      "name": "COPYLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Additional copy/decl library (SYSLIB PRECMP/COBOL DISP=SHR [56,84])",
      "copybook": null,
      "citation": [
        56,
        84
      ]
    },
    {
      "name": "MEMNAME",
      "io_type": "PARAMETER",
      "description": "Symbolic parm for PDS member name (source/DBRM/load/package) [25]",
      "copybook": null,
      "citation": [
        25
      ]
    },
    {
      "name": "SDSNEXIT",
      "io_type": "FILE_SEQUENTIAL",
      "description": "DB2 exit PDS (STEPLIB PRECMP/BINDPK/BINDPL DISP=SHR [29,48,136])",
      "copybook": null,
      "citation": [
        29,
        48,
        136
      ]
    },
    {
      "name": "SDSNLOAD",
      "io_type": "FILE_SEQUENTIAL",
      "description": "DB2 load PDS (STEPLIB PRECMP/LKED/BIND DISP=SHR [30,49,119,137])",
      "copybook": null,
      "citation": [
        30,
        49,
        119,
        137
      ]
    },
    {
      "name": "SDFHLOAD",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CICS load PDS (STEPLIB TRN/LKED DISP=SHR [31,70,117])",
      "copybook": null,
      "citation": [
        31,
        70,
        117
      ]
    },
    {
      "name": "SDFHCOB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CICS COBOL PDS (SYSLIB COBOL/LKED, SYSLIN LKED(DFHEILIC) DISP=SHR [32,86,118,124])",
      "copybook": null,
      "citation": [
        32,
        86,
        118,
        124
      ]
    },
    {
      "name": "SDFHMAC",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CICS macro PDS (SYSLIB COBOL DISP=SHR [33,87])",
      "copybook": null,
      "citation": [
        33,
        87
      ]
    },
    {
      "name": "COBLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "COBOL compiler PDS (STEPLIB COBOL DISP=SHR [36,82])",
      "copybook": null,
      "citation": [
        36,
        82
      ]
    },
    {
      "name": "LIBPRFX=CEE",
      "io_type": "PARAMETER",
      "description": "LE library prefix for SCEELKEX/SCEELKED (SYSLIB LKED DISP=SHR [35,115,116])",
      "copybook": null,
      "citation": [
        35,
        115,
        116
      ]
    },
    {
      "name": "ISP.SISPLOAD",
      "io_type": "FILE_SEQUENTIAL",
      "description": "ISPF load PDS (SYSLIB LKED DISP=SHR [120])",
      "copybook": null,
      "citation": [
        120
      ]
    },
    {
      "name": "GDDM.SADMMOD",
      "io_type": "FILE_SEQUENTIAL",
      "description": "GDDM mod PDS (SYSLIB LKED DISP=SHR [121])",
      "copybook": null,
      "citation": [
        121
      ]
    },
    {
      "name": "LOADLIB",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Target load PDS (SYSLIB LKED DISP=SHR [39,122])",
      "copybook": null,
      "citation": [
        39,
        122
      ]
    }
  ],
  "outputs": [
    {
      "name": "DBRMLIB(&MEMNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "DBRM member output from precompile (DD DBRMLIB PRECMP DISP=OLD [54]), input to BINDs DISP=SHR [138]",
      "copybook": null,
      "citation": [
        34,
        54,
        138
      ]
    },
    {
      "name": "LOADLIB(&MEMNAME)",
      "io_type": "FILE_SEQUENTIAL",
      "description": "CICS/DB2 COBOL load module (SYSLMOD LKED DISP=SHR SPACE=(TRK,(10,10,1)) UNIT=VIO [127-129])",
      "copybook": null,
      "citation": [
        39,
        127
      ]
    },
    {
      "name": "DB2 PACKAGE (CARDDEMO.&MEMNAME)",
      "io_type": "OTHER",
      "description": "Bound DB2 package in CARDDEMO collection from DBRM (BINDPK [144-152])",
      "copybook": null,
      "citation": [
        144
      ]
    },
    {
      "name": "DB2 PLAN (&PLAN)",
      "io_type": "OTHER",
      "description": "Bound DB2 plan with PKLIST(CARDDEMO.*) (BINDPL [168-175])",
      "copybook": null,
      "citation": [
        28,
        168
      ]
    },
    {
      "name": "&&DSNHOUT",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary precompile output (SYSCIN PRECMP DSN=&&DSNHOUT NEW PASS UNIT=VIO [51-53]), SYSIN TRN OLD DELETE [71]",
      "copybook": null,
      "citation": [
        51,
        71
      ]
    },
    {
      "name": "&&SYSCIN",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary translator punch (SYSPUNCH TRN DSN=&&SYSCIN PASS UNIT=SYSDA [73-76]), SYSIN COBOL OLD DELETE [89]",
      "copybook": null,
      "citation": [
        73,
        89
      ]
    },
    {
      "name": "&&LOADSET",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Temporary object set (SYSLIN COBOL DSN=&&LOADSET MOD PASS UNIT=VIO [90-92]), SYSLIN LKED OLD DELETE [125]",
      "copybook": null,
      "citation": [
        90,
        125
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "DSNHPC",
      "call_type": "STATIC_CALL",
      "purpose": "DB2 COBOL precompiler: extracts embedded SQL to DBRM, modifies source for compiler",
      "parameters": [
        "HOST(IBMCOB),XREF,SOURCE,FLAG(I),APOST"
      ],
      "citation": 47
    },
    {
      "program_name": "DFHECP1$",
      "call_type": "STATIC_CALL",
      "purpose": "CICS command translator: replaces EXEC CICS with equivalent CALL statements",
      "parameters": [
        "NOSEQ"
      ],
      "citation": 68
    },
    {
      "program_name": "IGYCRCTL",
      "call_type": "STATIC_CALL",
      "purpose": "COBOL compiler: translates preprocessed source to object module",
      "parameters": [
        "RENT,NODYNAM,NOSEQ"
      ],
      "citation": 81
    },
    {
      "program_name": "HEWL",
      "call_type": "STATIC_CALL",
      "purpose": "High Level Link Editor: links object with CICS/DB2 stubs to load module",
      "parameters": [],
      "citation": 114
    },
    {
      "program_name": "IKJEFT01",
      "call_type": "STATIC_CALL",
      "purpose": "TSO/E batch submitter: executes DB2 BIND PACKAGE/PLAN via inline SYSTSIN",
      "parameters": [],
      "citation": 135
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Step Dependencies via COND Parameters",
      "logic_summary": "Each step executes only if prior step RC <> 0 (success); aborts chain on failure",
      "conditions": [
        "COND=(0,NE,PRECMP)",
        "COND=(0,NE)"
      ],
      "citation": [
        69,
        81,
        114
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Conditional LKED/BIND Execution",
      "logic_summary": "LKED and binds execute only if COBOL RC=0 via COND01 IF RC=0 THEN/ENDIF",
      "conditions": [
        "IF RC = 0 THEN",
        "ENDIF"
      ],
      "citation": [
        109,
        177
      ]
    },
    {
      "rule_id": "BR003",
      "description": "BIND PLAN Conditional",
      "logic_summary": "BINDPL executes only if BINDPK RC < 4",
      "conditions": [
        "COND=(4,LT,BINDPK)"
      ],
      "citation": [
        158
      ]
    },
    {
      "rule_id": "BR004",
      "description": "DB2 Binding Options for CardDemo",
      "logic_summary": "Package/Plan bound with REPLACE, CS isolation, CURRENTDATA(YES), EBCDIC",
      "conditions": [
        "ACTION(REPLACE)",
        "ISOLATION(CS)",
        "CURRENTDATA(YES)",
        "ENCODING(EBCDIC)"
      ],
      "citation": [
        147,
        148,
        149,
        151
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SRCLIB(&MEMNAME)",
        "fields_used": [
          "Embedded SQL statements",
          "EXEC CICS commands",
          "COBOL source code"
        ],
        "citation": [
          50
        ]
      },
      {
        "source": "CPYBKS",
        "fields_used": [
          "Copybook data structures"
        ],
        "citation": [
          57
        ]
      },
      {
        "source": "DCLLIB",
        "fields_used": [
          "DCLGEN SQL declarations"
        ],
        "citation": [
          55
        ]
      },
      {
        "source": "COPYLIB",
        "fields_used": [
          "Additional copy libraries"
        ],
        "citation": [
          56
        ]
      },
      {
        "source": "SDFHCOB(DFHEILIC)",
        "fields_used": [
          "CICS linkage editor stub"
        ],
        "citation": [
          124
        ]
      },
      {
        "source": "DBRMLIB(&MEMNAME)",
        "fields_used": [
          "Extracted SQL DBRM for binding"
        ],
        "citation": [
          138
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "DBRMLIB(&MEMNAME)",
        "fields_written": [
          "DBRM SQL metadata"
        ],
        "citation": [
          54
        ]
      },
      {
        "destination": "LOADLIB(&MEMNAME)",
        "fields_written": [
          "Executable load module"
        ],
        "citation": [
          127
        ]
      },
      {
        "destination": "CARDDEMO package (&MEMNAME)",
        "fields_written": [
          "Bound package access paths"
        ],
        "citation": [
          144
        ]
      },
      {
        "destination": "&PLAN",
        "fields_written": [
          "Bound plan with package list"
        ],
        "citation": [
          168
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "SRCLIB(&MEMNAME) [embedded SQL/COBOL/CICS]",
        "output_field": "&&DSNHOUT [modified COBOL], DBRMLIB(&MEMNAME) [SQL DBRM]",
        "transformation_description": "DB2 precompile extracts SQL statements to DBRM member and modifies source by replacing SQL with host variables",
        "citation": [
          46
        ]
      },
      {
        "input_field": "&&DSNHOUT [precompiled COBOL]",
        "output_field": "&&SYSCIN [CICS-translated COBOL]",
        "transformation_description": "CICS translator replaces EXEC CICS commands with CALL DFH* statements and generates SYSPUNCH",
        "citation": [
          68
        ]
      },
      {
        "input_field": "&&SYSCIN [translated COBOL]",
        "output_field": "&&LOADSET [object module]",
        "transformation_description": "COBOL compiler processes translated source, resolves copybooks/DCLGENs, produces relocatable object deck",
        "citation": [
          80
        ]
      },
      {
        "input_field": "&&LOADSET [object] + SDFHCOB(DFHEILIC) [stub] + libs",
        "output_field": "LOADLIB(&MEMNAME) [load module]",
        "transformation_description": "Link-edit combines object, CICS/DB2/LE stubs and runtime libs into reentrant load module",
        "citation": [
          114
        ]
      },
      {
        "input_field": "DBRMLIB(&MEMNAME) [DBRM]",
        "output_field": "CARDDEMO.&MEMNAME [package]",
        "transformation_description": "DB2 BIND PACKAGE creates optimized access paths from DBRM with CardDemo qualifier, CS isolation",
        "citation": [
          135
        ]
      },
      {
        "input_field": "CARDDEMO.* [packages]",
        "output_field": "&PLAN [plan]",
        "transformation_description": "DB2 BIND PLAN assembles packages into executable plan with RETAIN for CardDemo application",
        "citation": [
          158
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "PRECMP",
      "purpose": "EXEC PGM=DSNHPC: DB2 precompiler, PARM='HOST(IBMCOB),XREF,SOURCE,FLAG(I),APOST' [47]; STEPLIB SDSNEXIT/SDSNLOAD SHR [48-49]; SYSIN SRCLIB(&MEMNAME) SHR [50]; SYSCIN &&DSNHOUT NEW PASS UNIT=VIO [51-53]; DBRMLIB(&MEMNAME) OLD [54]; SYSLIB DCLLIB/COPYLIB/CPYBKS SHR [55-57]; SYSPRINT/STERM/UDUMP SYSOUT=* [58-60]; SYSUT1/2 SPACE VIO [61-62]",
      "called_by": [],
      "calls": [
        "TRN"
      ],
      "citation": [
        46,
        63
      ]
    },
    {
      "paragraph_name": "TRN",
      "purpose": "EXEC PGM=DFHECP1$, PARM='NOSEQ', REGION=2048K, COND=(0,NE,PRECMP) [68-69]; STEPLIB SDFHLOAD SHR [70]; SYSIN &&DSNHOUT OLD DELETE [71]; SYSPRINT SYSOUT=* [72]; SYSPUNCH &&SYSCIN PASS UNIT=SYSDA BLKSIZE=400 SPACE=(400,(400,100)) [73-76]",
      "called_by": [
        "PRECMP"
      ],
      "calls": [
        "COBOL"
      ],
      "citation": [
        68,
        77
      ]
    },
    {
      "paragraph_name": "COBOL",
      "purpose": "EXEC PGM=IGYCRCTL, REGION=2048K, PARM='RENT,NODYNAM,NOSEQ', COND=(0,NE) [80-81]; STEPLIB COBLIB SHR [82]; SYSLIB DCLLIB/COPYLIB/CPYBKS/SDFHCOB/SDFHMAC SHR [83-87]; SYSPRINT SYSOUT=* [88]; SYSIN &&SYSCIN OLD DELETE [89]; SYSLIN &&LOADSET MOD PASS UNIT=VIO [90-92]; SYSUT1-15/SYSMDECK UNIT=VIO/SYSDA SPACE=CYL [93-108]",
      "called_by": [
        "TRN"
      ],
      "calls": [
        "COND01"
      ],
      "citation": [
        80,
        108
      ]
    },
    {
      "paragraph_name": "COND01",
      "purpose": "COND01 IF RC = 0 THEN ... ENDIF: Conditional block enclosing LKED/BINDPK/BINDPL if COBOL succeeds [109,177]",
      "called_by": [
        "COBOL"
      ],
      "calls": [
        "LKED"
      ],
      "citation": [
        109,
        177
      ]
    },
    {
      "paragraph_name": "LKED",
      "purpose": "EXEC PGM=HEWL, COND=(0,NE), REGION=1024K [114]; SYSLIB CEE.SCEELKEX/SCEELKED/SDFHLOAD/SDFHCOB/SDSNLOAD/ISP.SISPLOAD/GDDM.SADMMOD/LOADLIB SHR [115-122]; SYSPRINT SYSOUT=* [123]; SYSLIN SDFHCOB(DFHEILIC) SHR/&&LOADSET OLD DELETE/SYSIN DUMMY [124-131]; SYSLMOD LOADLIB(&MEMNAME) SHR SPACE=TRK UNIT=VIO [127-129]; SYSUT1 VIO [130]",
      "called_by": [
        "COND01"
      ],
      "calls": [
        "BINDPK"
      ],
      "citation": [
        114,
        132
      ]
    },
    {
      "paragraph_name": "BINDPK",
      "purpose": "EXEC PGM=IKJEFT01, COND=(0,NE) [135]; STEPLIB OEM.DB2.DAZ1.SDSNEXIT/OEMA.DB2.VERSIONA.SDSNLOAD SHR [136-137]; DBRMLIB(&MEMNAME) SHR [138]; SYSPRINT/TSPRT/UDUMP SYSOUT=* [139-141]; SYSTSIN inline DSN SYSTEM(&SSID) BIND PACKAGE(CARDDEMO) MEMBER(&MEMNAME) [142-152]",
      "called_by": [
        "LKED"
      ],
      "calls": [
        "BINDPL"
      ],
      "citation": [
        135,
        153
      ]
    },
    {
      "paragraph_name": "BINDPL",
      "purpose": "EXEC PGM=IKJEFT01, COND=(4,LT,BINDPK) [158]; STEPLIB OEM.DB2.DAZ1.SDSNEXIT/OEMA.DB2.VERSIONA.SDSNLOAD SHR [159-160]; DBRMLIB(&MEMNAME) SHR [161]; SYSPRINT/TSPRT/DEBUGLST/UDUMP SYSOUT=* [162-165]; SYSTSIN inline DSN SYSTEM(&SSID) BIND PLAN(&PLAN) PKLIST(CARDDEMO.*) [166-175]",
      "called_by": [
        "BINDPK"
      ],
      "calls": [],
      "citation": [
        158,
        176
      ]
    }
  ],
  "error_handling": [
    {
      "condition": "Any step RC <> 0",
      "action": "Skip subsequent steps via COND=(0,NE) parameters",
      "citation": [
        69,
        81,
        114
      ]
    },
    {
      "condition": "COBOL RC <> 0",
      "action": "Skip LKED/BINDs via COND01 IF RC=0",
      "citation": [
        109
      ]
    },
    {
      "condition": "BINDPK RC >=4",
      "action": "Skip BINDPL via COND=(4,LT,BINDPK)",
      "citation": [
        158
      ]
    }
  ],
  "sql_operations": [
    {
      "operation": "BIND PACKAGE",
      "table": "CARDDEMO",
      "purpose": "Bind DBRM to package CARDDEMO.&MEMNAME with REPLACE, CS, CURRENTDATA",
      "citation": 144
    },
    {
      "operation": "BIND PLAN",
      "table": "&PLAN",
      "purpose": "Bind plan &PLAN with PKLIST(CARDDEMO.*), RETAIN",
      "citation": 168
    }
  ],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Definition of symbolic parameters DCLLIB and COPYLIB",
      "context": "Referenced in SYSLIB DD statements [55,56,83,84] but not defined in PROC parameters [25-39]",
      "suggestion": "Defined in calling JCL or site-specific defaults/procs"
    },
    {
      "question": "Invoking JCL or jobs using this PROC",
      "context": "No cross-references to %BLDONL PROC=BLDONL or EXEC calls",
      "suggestion": "Search JCL library for invocations"
    },
    {
      "question": "Typical parameter values (HLQ, SSID, PLAN) in production",
      "context": "Symbolics like &HLQ [26], &SSID[27], &PLAN[28] customized per environment",
      "suggestion": "Review sample calling JCL"
    }
  ]
}