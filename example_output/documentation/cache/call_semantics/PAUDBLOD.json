[
  {
    "caller": "MAIN-PARA",
    "callee": "1000-INITIALIZE",
    "inputs": [],
    "outputs": [
      "CURRENT-DATE",
      "CURRENT-YYDDD",
      "WS-INFIL1-STATUS",
      "WS-INFIL2-STATUS",
      "END-ROOT-SEG-FILE",
      "END-CHILD-SEG-FILE"
    ],
    "purpose": "Initializes the program by accepting current date values and opening input files INFILE1 and INFILE2, setting status flags accordingly."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "2000-READ-ROOT-SEG-FILE",
    "inputs": [
      "WS-INFIL1-STATUS"
    ],
    "outputs": [
      "PENDING-AUTH-SUMMARY",
      "END-ROOT-SEG-FILE"
    ],
    "purpose": "Reads a record from INFILE1 and moves it to PENDING-AUTH-SUMMARY if successful, or sets END-ROOT-SEG-FILE to 'Y' if end-of-file is reached."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "3000-READ-CHILD-SEG-FILE",
    "inputs": [
      "WS-INFIL2-STATUS",
      "ROOT-SEG-KEY"
    ],
    "outputs": [
      "QUAL-SSA-KEY-VALUE",
      "PENDING-AUTH-DETAILS",
      "END-CHILD-SEG-FILE"
    ],
    "purpose": "Reads a record from INFILE2, populates child segment data and key for IMS insertion if valid, or sets end-of-file flag on EOF."
  },
  {
    "caller": "MAIN-PARA",
    "callee": "4000-FILE-CLOSE",
    "inputs": [
      "WS-INFIL1-STATUS",
      "WS-INFIL2-STATUS"
    ],
    "outputs": [],
    "purpose": "Closes both INFILE1 and INFILE2 and displays error messages if either file fails to close."
  },
  {
    "caller": "1000-INITIALIZE",
    "callee": "9999-ABEND",
    "inputs": [
      "WS-INFIL1-STATUS",
      "WS-INFIL2-STATUS"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Terminates the program with RETURN-CODE set to 16 upon encountering a critical error during file opening."
  },
  {
    "caller": "1000-INITIALIZE",
    "callee": "9999-ABEND",
    "inputs": [
      "WS-INFIL1-STATUS",
      "WS-INFIL2-STATUS"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when an input file fails to open."
  },
  {
    "caller": "2000-READ-ROOT-SEG-FILE",
    "callee": "2100-INSERT-ROOT-SEG",
    "inputs": [
      "INFIL1-REC",
      "PENDING-AUTH-SUMMARY",
      "FUNC-ISRT",
      "PAUTBPCB",
      "ROOT-UNQUAL-SSA"
    ],
    "outputs": [
      "PAUT-PCB-STATUS"
    ],
    "purpose": "Inserts a root segment into the IMS database using the data read from the input file."
  },
  {
    "caller": "2100-INSERT-ROOT-SEG",
    "callee": "9999-ABEND",
    "inputs": [
      "PAUT-PCB-STATUS"
    ],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program if the root segment insertion into the IMS database fails."
  },
  {
    "caller": "3000-READ-CHILD-SEG-FILE",
    "callee": "3100-INSERT-CHILD-SEG",
    "inputs": [
      "ROOT-SEG-KEY",
      "CHILD-SEG-REC",
      "QUAL-SSA-KEY-VALUE",
      "PENDING-AUTH-DETAILS"
    ],
    "outputs": [],
    "purpose": "Processes and inserts a child segment into the IMS database after qualifying the parent root segment."
  },
  {
    "caller": "3100-INSERT-CHILD-SEG",
    "callee": "3200-INSERT-IMS-CALL",
    "inputs": [
      "FUNC-ISRT",
      "PAUTBPCB",
      "PENDING-AUTH-DETAILS",
      "CHILD-UNQUAL-SSA"
    ],
    "outputs": [
      "PAUT-PCB-STATUS"
    ],
    "purpose": "Inserts a child segment into the IMS database after successfully retrieving the parent root segment."
  },
  {
    "caller": "3100-INSERT-CHILD-SEG",
    "callee": "9999-ABEND",
    "inputs": [],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when the GU call to the root segment fails."
  },
  {
    "caller": "3200-INSERT-IMS-CALL",
    "callee": "9999-ABEND",
    "inputs": [],
    "outputs": [
      "RETURN-CODE"
    ],
    "purpose": "Abends the program with return code 16 when the ISRT call for the child segment fails."
  }
]