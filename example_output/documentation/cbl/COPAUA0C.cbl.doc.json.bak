{
  "header": {
    "program_id": "COPAUA0C",
    "file_name": "COPAUA0C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-03T21:08:17.196445",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This is an empty COBOL program. It contains no code and performs no operations.",
    "business_context": null,
    "program_type": "UTILITY",
    "citations": [
      1
    ]
  },
  "inputs": [],
  "outputs": [],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "COPAUA0C",
      "summary": null,
      "purpose": "This is the main program paragraph. It calls other paragraphs to initialize, process authorization requests, and terminate. It does not contain any specific logic but acts as the entry point and orchestrator for the program's execution. It calls MAIN-PARA to perform the core logic.",
      "called_by": [],
      "calls": [
        "CMQODV",
        "CMQMDV",
        "CMQODV",
        "CMQMDV",
        "CMQV"
      ],
      "citation": [
        23,
        23
      ],
      "outgoing_calls": [
        {
          "target": "CMQODV",
          "call_type": "includes",
          "line": 149
        },
        {
          "target": "CMQMDV",
          "call_type": "includes",
          "line": 152
        },
        {
          "target": "CMQODV",
          "call_type": "includes",
          "line": 155
        },
        {
          "target": "CMQMDV",
          "call_type": "includes",
          "line": 158
        },
        {
          "target": "CMQV",
          "call_type": "includes",
          "line": 161
        },
        {
          "target": "CMQTML",
          "call_type": "includes",
          "line": 164
        },
        {
          "target": "CMQPMOV",
          "call_type": "includes",
          "line": 167
        },
        {
          "target": "CMQGMOV",
          "call_type": "includes",
          "line": 170
        },
        {
          "target": "CCPAURQY",
          "call_type": "includes",
          "line": 178
        },
        {
          "target": "CCPAURLY",
          "call_type": "includes",
          "line": 182
        },
        {
          "target": "CCPAUERY",
          "call_type": "includes",
          "line": 185
        },
        {
          "target": "CIPAUSMY",
          "call_type": "includes",
          "line": 193
        },
        {
          "target": "CIPAUDTY",
          "call_type": "includes",
          "line": 197
        },
        {
          "target": "CVACT03Y",
          "call_type": "includes",
          "line": 203
        },
        {
          "target": "CVACT01Y",
          "call_type": "includes",
          "line": 206
        },
        {
          "target": "CVCUS01Y",
          "call_type": "includes",
          "line": 209
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "This paragraph serves as the main control loop for the program. It first calls 1000-INITIALIZE to set up the environment and open the necessary resources. Then, it calls 2000-MAIN-PROCESS to handle the processing of authorization requests from the message queue. Finally, it calls 9000-TERMINATE to close resources and exit the program. After the calls to the initialization, processing, and termination paragraphs, the program executes a CICS RETURN command to terminate the CICS transaction.",
      "called_by": [],
      "calls": [
        "1000-INITIALIZE",
        "2000-MAIN-PROCESS",
        "9000-TERMINATE"
      ],
      "citation": [
        220,
        229
      ],
      "outgoing_calls": [
        {
          "target": "1000-INITIALIZE",
          "call_type": "performs",
          "line": 222
        },
        {
          "target": "2000-MAIN-PROCESS",
          "call_type": "performs",
          "line": 223
        },
        {
          "target": "9000-TERMINATE",
          "call_type": "performs",
          "line": 224
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-INITIALIZE",
      "summary": null,
      "purpose": "This paragraph initializes the program environment. It retrieves the MQTM from CICS, which contains the request queue name and trigger data. It moves the queue name and trigger data to working storage variables. It then sets the wait interval to 5000. It calls 1100-OPEN-REQUEST-QUEUE to open the request queue and 3100-READ-REQUEST-MQ to read the first request message from the queue. If the RETRIEVE command fails, the program continues without setting the queue name or trigger data. The paragraph prepares the program to process messages from the request queue.",
      "called_by": [],
      "calls": [
        "1100-OPEN-REQUEST-QUEUE",
        "3100-READ-REQUEST-MQ"
      ],
      "citation": [
        230,
        248
      ],
      "outgoing_calls": [
        {
          "target": "1100-OPEN-REQUEST-QUEUE",
          "call_type": "performs",
          "line": 244
        },
        {
          "target": "3100-READ-REQUEST-MQ",
          "call_type": "performs",
          "line": 246
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-EXIT",
      "summary": null,
      "purpose": "This paragraph is a simple exit point for the 1000-INITIALIZE paragraph. It does not perform any specific actions but provides a standard exit point for the PERFORM THRU construct.",
      "called_by": [],
      "calls": [],
      "citation": [
        249,
        254
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1100-OPEN-REQUEST-QUEUE",
      "summary": null,
      "purpose": "This paragraph opens the request message queue. It moves MQOT-Q to MQOD-OBJECTTYPE of MQM-OD-REQUEST and WS-REQUEST-QNAME to MQOD-OBJECTNAME of MQM-OD-REQUEST. It computes WS-OPTIONS as MQOO-INPUT-SHARED. It then calls the MQOPEN API to open the queue. If the MQOPEN call is successful (WS-COMPCODE = MQCC-OK), it sets WS-REQUEST-MQ-OPEN to TRUE. Otherwise, it moves error information to error variables, sets error flags, and calls 9500-LOG-ERROR to log the error. The paragraph establishes a connection to the message queue for subsequent message processing.",
      "called_by": [],
      "calls": [
        "MQOPEN",
        "9500-LOG-ERROR"
      ],
      "citation": [
        255,
        285
      ],
      "outgoing_calls": [
        {
          "target": "MQOPEN",
          "call_type": "calls",
          "line": 262
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 282
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "1000-INITIALIZE",
          "line": 244,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1100-EXIT",
      "summary": null,
      "purpose": "This paragraph is a simple exit point for the 1100-OPEN-REQUEST-QUEUE paragraph. It does not perform any specific actions but provides a standard exit point for the PERFORM THRU construct.",
      "called_by": [],
      "calls": [],
      "citation": [
        286,
        291
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1200-SCHEDULE-PSB",
      "summary": null,
      "purpose": "This paragraph schedules a PSB (Program Specification Block) in IMS. It executes a DLI SCHD command to schedule the PSB specified by PSB-NAME. It moves the DIBSTAT value to IMS-RETURN-CODE. If the PSB has been scheduled more than once, it executes a DLI TERM command to terminate the PSB and then executes another DLI SCHD command to schedule it again. If the status is OK, it sets IMS-PSB-SCHD to TRUE. Otherwise, it moves error information to error variables, sets error flags, and calls 9500-LOG-ERROR to log the error. The paragraph prepares the IMS environment for database access.",
      "called_by": [],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        292,
        318
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 316
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 443,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1200-EXIT",
      "summary": null,
      "purpose": "This paragraph is a simple exit point for the 1200-SCHEDULE-PSB paragraph. It does not perform any specific actions but provides a standard exit point for the PERFORM THRU construct.",
      "called_by": [],
      "calls": [],
      "citation": [
        319,
        322
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-MAIN-PROCESS",
      "summary": null,
      "purpose": "This paragraph is the main processing loop of the program. It performs the loop until either NO-MORE-MSG-AVAILABLE is true or WS-LOOP-END is true. Inside the loop, it calls 2100-EXTRACT-REQUEST-MSG to extract the request message, 5000-PROCESS-AUTH to process the authorization request, and adds 1 to WS-MSG-PROCESSED. It then executes a CICS SYNCPOINT command. It sets IMS-PSB-NOT-SCHD to TRUE. If WS-MSG-PROCESSED is greater than WS-REQSTS-PROCESS-LIMIT, it sets WS-LOOP-END to TRUE; otherwise, it calls 3100-READ-REQUEST-MQ to read the next request message. The paragraph orchestrates the processing of authorization requests from the message queue.",
      "called_by": [],
      "calls": [
        "2100-EXTRACT-REQUEST-MSG",
        "5000-PROCESS-AUTH",
        "3100-READ-REQUEST-MQ"
      ],
      "citation": [
        323,
        346
      ],
      "outgoing_calls": [
        {
          "target": "2100-EXTRACT-REQUEST-MSG",
          "call_type": "performs",
          "line": 328
        },
        {
          "target": "5000-PROCESS-AUTH",
          "call_type": "performs",
          "line": 330
        },
        {
          "target": "3100-READ-REQUEST-MQ",
          "call_type": "performs",
          "line": 342
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "MAIN-PARA",
          "line": 223,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-EXIT",
      "summary": null,
      "purpose": "This paragraph is a simple exit point for the 2000-MAIN-PROCESS paragraph. It does not perform any specific actions but provides a standard exit point for the PERFORM THRU construct.",
      "called_by": [],
      "calls": [],
      "citation": [
        347,
        350
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2100-EXTRACT-REQUEST-MSG",
      "summary": null,
      "purpose": "This paragraph extracts data from the MQ message (W01-GET-BUFFER) received from the request queue. It uses the UNSTRING statement to parse the comma-delimited message into individual fields such as authorization date, time, card number, authorization type, card expiry date, message type, message source, processing code, transaction amount, merchant category code, acquirer country code, POS entry mode, merchant ID, merchant name, merchant city, merchant state, merchant zip, and transaction ID. The alphanumeric transaction amount (WS-TRANSACTION-AMT-AN) is converted to a numeric value and stored in PA-RQ-TRANSACTION-AMT. This paragraph prepares the extracted data for subsequent processing by other paragraphs. No error handling is performed within this paragraph. After extracting the data, control passes to the next paragraph.",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        30
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "2000-MAIN-PROCESS",
          "line": 328,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2100-EXIT",
      "summary": null,
      "purpose": "This paragraph simply provides an exit point from the 2100-EXTRACT-REQUEST-MSG paragraph. It contains only the EXIT statement and serves as a standard way to terminate the execution of the paragraph, allowing for a clean return to the calling paragraph or section. It does not perform any data manipulation, error handling, or call any other paragraphs. Its primary purpose is to provide a consistent and predictable exit point.",
      "called_by": [],
      "calls": [],
      "citation": [
        32,
        33
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3100-READ-REQUEST-MQ",
      "summary": null,
      "purpose": "This paragraph reads a request message from the MQ queue. It sets the MQGMO options for no syncpoint, wait, convert, and fail if quiescing. It also sets the MQMD fields for message ID, correlation ID, and format. The MQGET call retrieves the message from the queue specified by W01-HCONN-REQUEST and W01-HOBJ-REQUEST, placing the message in W01-GET-BUFFER. If the MQGET call is successful (WS-COMPCODE = MQCC-OK), the correlation ID and reply-to queue name are saved. If the MQGET call fails and the reason code is MQRC-NO-MSG-AVAILABLE, the NO-MORE-MSG-AVAILABLE flag is set to TRUE. Otherwise, an error is logged using the 9500-LOG-ERROR paragraph, including the component code, reason code, error message, and card number. The paragraph uses the MQGET API to retrieve the message.",
      "called_by": [],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        35,
        81
      ],
      "outgoing_calls": [
        {
          "target": "MQGET",
          "call_type": "calls",
          "line": 400
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 429
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "1000-INITIALIZE",
          "line": 246,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "2000-MAIN-PROCESS",
          "line": 342,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3100-EXIT",
      "summary": null,
      "purpose": "This paragraph provides an exit point from the 3100-READ-REQUEST-MQ paragraph. It contains only the EXIT statement and serves as a standard way to terminate the execution of the paragraph, allowing for a clean return to the calling paragraph or section. It does not perform any data manipulation, error handling, or call any other paragraphs. Its primary purpose is to provide a consistent and predictable exit point.",
      "called_by": [],
      "calls": [],
      "citation": [
        83,
        84
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5000-PROCESS-AUTH",
      "summary": null,
      "purpose": "This paragraph orchestrates the authorization processing. It starts by setting the APPROVE-AUTH flag to TRUE. It then performs 1200-SCHEDULE-PSB. After that, it sets CARD-FOUND-XREF and FOUND-ACCT-IN-MSTR to TRUE. It calls 5100-READ-XREF-RECORD to read the card cross-reference record. If the card is found in the cross-reference file (CARD-FOUND-XREF), it calls 5200-READ-ACCT-RECORD, 5300-READ-CUST-RECORD, 5500-READ-AUTH-SUMMRY, and 5600-READ-PROFILE-DATA. It then calls 6000-MAKE-DECISION and 7100-SEND-RESPONSE. Finally, if the card is found in the cross-reference file, it calls 8000-WRITE-AUTH-TO-DB. This paragraph controls the overall flow of the authorization process, calling various sub-paragraphs to perform specific tasks. The paragraph uses conditional logic to determine which paragraphs to call based on the CARD-FOUND-XREF flag.",
      "called_by": [],
      "calls": [
        "1200-SCHEDULE-PSB",
        "5100-READ-XREF-RECORD",
        "5200-READ-ACCT-RECORD",
        "5300-READ-CUST-RECORD",
        "5500-READ-AUTH-SUMMRY",
        "5600-READ-PROFILE-DATA",
        "6000-MAKE-DECISION",
        "7100-SEND-RESPONSE",
        "8000-WRITE-AUTH-TO-DB"
      ],
      "citation": [
        86,
        114
      ],
      "outgoing_calls": [
        {
          "target": "1200-SCHEDULE-PSB",
          "call_type": "performs",
          "line": 443
        },
        {
          "target": "5100-READ-XREF-RECORD",
          "call_type": "performs",
          "line": 448
        },
        {
          "target": "5200-READ-ACCT-RECORD",
          "call_type": "performs",
          "line": 451
        },
        {
          "target": "5300-READ-CUST-RECORD",
          "call_type": "performs",
          "line": 452
        },
        {
          "target": "5500-READ-AUTH-SUMMRY",
          "call_type": "performs",
          "line": 454
        },
        {
          "target": "5600-READ-PROFILE-DATA",
          "call_type": "performs",
          "line": 456
        },
        {
          "target": "6000-MAKE-DECISION",
          "call_type": "performs",
          "line": 459
        },
        {
          "target": "7100-SEND-RESPONSE",
          "call_type": "performs",
          "line": 461
        },
        {
          "target": "8000-WRITE-AUTH-TO-DB",
          "call_type": "performs",
          "line": 464
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "2000-MAIN-PROCESS",
          "line": 330,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5000-EXIT",
      "summary": null,
      "purpose": "This paragraph provides an exit point from the 5000-PROCESS-AUTH paragraph. It contains only the EXIT statement and serves as a standard way to terminate the execution of the paragraph, allowing for a clean return to the calling paragraph or section. It does not perform any data manipulation, error handling, or call any other paragraphs. Its primary purpose is to provide a consistent and predictable exit point.",
      "called_by": [],
      "calls": [],
      "citation": [
        116,
        117
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5100-READ-XREF-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the card cross-reference record from the CICS VSAM file WS-CCXREF-FILE. It moves the card number (PA-RQ-CARD-NUM) to the XREF-CARD-NUM field, which is used as the RIDFLD for the READ command. The CICS READ command retrieves the CARD-XREF-RECORD from the file. The paragraph then evaluates the WS-RESP-CD to determine the outcome of the READ command. If the record is found (DFHRESP(NORMAL)), CARD-FOUND-XREF is set to TRUE. If the record is not found (DFHRESP(NOTFND)), CARD-NFOUND-XREF and NFOUND-ACCT-IN-MSTR are set to TRUE, and a warning message is logged using 9500-LOG-ERROR. If any other error occurs, a critical error message is logged using 9500-LOG-ERROR. The paragraph uses the CICS READ command to access the VSAM file.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR",
        "9500-LOG-ERROR"
      ],
      "citation": [
        119,
        161
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 500
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 512
        },
        {
          "target": "WS-CCXREF-FILE",
          "call_type": "reads",
          "line": 477
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 448,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5100-EXIT",
      "summary": null,
      "purpose": "This paragraph provides an exit point from the 5100-READ-XREF-RECORD paragraph. It contains only the EXIT statement and serves as a standard way to terminate the execution of the paragraph, allowing for a clean return to the calling paragraph or section. It does not perform any data manipulation, error handling, or call any other paragraphs. Its primary purpose is to provide a consistent and predictable exit point.",
      "called_by": [],
      "calls": [],
      "citation": [
        163,
        164
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5200-READ-ACCT-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the account record from the CICS VSAM file WS-ACCTFILENAME. It moves the account ID (XREF-ACCT-ID) from the cross-reference record to WS-CARD-RID-ACCT-ID, which is then moved to WS-CARD-RID-ACCT-ID-X and used as the RIDFLD for the READ command. The CICS READ command retrieves the ACCOUNT-RECORD from the file. The paragraph then evaluates the WS-RESP-CD to determine the outcome of the READ command. If the record is found (DFHRESP(NORMAL)), FOUND-ACCT-IN-MSTR is set to TRUE. If the record is not found (DFHRESP(NOTFND)), NFOUND-ACCT-IN-MSTR is set to TRUE, and a warning message is logged using 9500-LOG-ERROR. If any other error occurs, a critical error message is logged using 9500-LOG-ERROR. The paragraph uses the CICS READ command to access the VSAM file.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR",
        "9500-LOG-ERROR"
      ],
      "citation": [
        166,
        208
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 547
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 560
        },
        {
          "target": "WS-ACCTFILENAME",
          "call_type": "reads",
          "line": 525
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 451,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5200-EXIT",
      "summary": null,
      "purpose": "This paragraph provides an exit point from the 5200-READ-ACCT-RECORD paragraph. It contains only the EXIT statement and serves as a standard way to terminate the execution of the paragraph, allowing for a clean return to the calling paragraph or section. It does not perform any data manipulation, error handling, or call any other paragraphs. Its primary purpose is to provide a consistent and predictable exit point.",
      "called_by": [],
      "calls": [],
      "citation": [
        210,
        211
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5300-READ-CUST-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the customer record from the VSAM file WS-CUSTFILENAME using the CICS READ command. The customer ID (XREF-CUST-ID) is moved to WS-CARD-RID-CUST-ID and used as the record key. The paragraph checks the CICS response code (WS-RESP-CD). If the record is found (DFHRESP(NORMAL)), FOUND-CUST-IN-MSTR is set to TRUE. If the record is not found (DFHRESP(NOTFND)), NFOUND-CUST-IN-MSTR is set to TRUE, an error message is constructed, and 9500-LOG-ERROR is performed. If any other error occurs during the read, an error message with the CICS response codes is constructed, and 9500-LOG-ERROR is performed. The paragraph uses WS-CUSTFILENAME to determine which VSAM file to read from. The paragraph sets flags FOUND-CUST-IN-MSTR or NFOUND-CUST-IN-MSTR based on whether the customer record was found or not.",
      "called_by": [],
      "calls": [
        "9500-LOG-ERROR",
        "WS-CUSTFILENAME"
      ],
      "citation": [
        568,
        611
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 595
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 608
        },
        {
          "target": "WS-CUSTFILENAME",
          "call_type": "reads",
          "line": 573
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 452,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5300-EXIT",
      "summary": null,
      "purpose": "This paragraph is a standard EXIT paragraph. It simply contains the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        612,
        615
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5500-READ-AUTH-SUMMRY",
      "summary": null,
      "purpose": "This paragraph reads the pending authorization summary from the IMS database using a DL/I GU (Get Unique) call. The account ID (XREF-ACCT-ID) is moved to PA-ACCT-ID and used as the search argument. The paragraph checks the IMS return code (DIBSTAT). If the segment is found (STATUS-OK), FOUND-PAUT-SMRY-SEG is set to TRUE. If the segment is not found (SEGMENT-NOT-FOUND), NFOUND-PAUT-SMRY-SEG is set to TRUE. If any other error occurs, an error message with the IMS return code is constructed, and 9500-LOG-ERROR is performed. The paragraph uses PAUT-PCB-NUM to determine which PCB to use for the IMS call. The paragraph sets flags FOUND-PAUT-SMRY-SEG or NFOUND-PAUT-SMRY-SEG based on whether the pending authorization summary segment was found or not.",
      "called_by": [],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        616,
        642
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 639
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 454,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5500-EXIT",
      "summary": null,
      "purpose": "This paragraph is a standard EXIT paragraph. It simply contains the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        643,
        646
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5600-READ-PROFILE-DATA",
      "summary": null,
      "purpose": "This paragraph currently contains only a CONTINUE statement. It serves as a placeholder and does not perform any data reading or processing. It might be intended for future implementation to read profile data, but currently, it does nothing.",
      "called_by": [],
      "calls": [],
      "citation": [
        647,
        652
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 456,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5600-EXIT",
      "summary": null,
      "purpose": "This paragraph is a standard EXIT paragraph. It simply contains the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        653,
        656
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "6000-MAKE-DECISION",
      "summary": null,
      "purpose": "This paragraph makes the authorization decision based on available credit and other factors. It first moves request data to response fields. If a pending authorization summary is found (FOUND-PAUT-SMRY-SEG), it calculates available credit using PA-CREDIT-LIMIT and PA-CREDIT-BALANCE. If the transaction amount (WS-TRANSACTION-AMT) exceeds the available credit, DECLINE-AUTH is set to TRUE. If no pending authorization summary is found, it checks if the account is found in the master (FOUND-ACCT-IN-MSTR) and uses ACCT-CREDIT-LIMIT and ACCT-CURR-BAL to calculate available credit. If the account is not found in the master, DECLINE-AUTH is set to TRUE. If DECLINE-AUTH is TRUE, AUTH-RESP-DECLINED is set to TRUE, '05' is moved to PA-RL-AUTH-RESP-CODE, and 0 is moved to PA-RL-APPROVED-AMT. Otherwise, AUTH-RESP-APPROVED is set to TRUE, '00' is moved to PA-RL-AUTH-RESP-CODE, and PA-RQ-TRANSACTION-AMT is moved to PA-RL-APPROVED-AMT. Finally, it sets a reason code (PA-RL-AUTH-RESP-REASON) based on various conditions like card not found, insufficient funds, etc. The paragraph constructs the response message in W02-PUT-BUFFER using STRING statement.",
      "called_by": [],
      "calls": [],
      "citation": [
        657,
        733
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 459,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "6000-EXIT",
      "summary": null,
      "purpose": "This paragraph is a standard EXIT paragraph. It simply contains the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        734,
        737
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "7100-SEND-RESPONSE",
      "summary": null,
      "purpose": "This paragraph sends the authorization response message to the reply queue using MQPUT1. It sets the MQ object descriptor (MQM-OD-REPLY) with the reply queue name (WS-REPLY-QNAME) and object type. It sets the MQ message descriptor (MQM-MD-REPLY) with message type, correlation ID, and other properties. It then calls MQPUT1 with the appropriate parameters, including the connection handle, object descriptor, message descriptor, put message options, buffer length, and buffer containing the response message. It checks the completion code (WS-COMPCODE). If the MQPUT1 call fails, an error message is constructed, and 9500-LOG-ERROR is performed. The paragraph uses WS-RESP-LENGTH to determine the length of the message to be sent. The paragraph constructs MQ messages and calls MQPUT1 to send the message.",
      "called_by": [],
      "calls": [
        "MQPUT1",
        "9500-LOG-ERROR"
      ],
      "citation": [
        738,
        781
      ],
      "outgoing_calls": [
        {
          "target": "MQPUT1",
          "call_type": "calls",
          "line": 758
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 778
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 461,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "7100-EXIT",
      "summary": null,
      "purpose": "This paragraph is a standard EXIT paragraph. It simply contains the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        782,
        785
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8000-WRITE-AUTH-TO-DB",
      "summary": null,
      "purpose": "This paragraph serves as a coordinator for writing authorization information to the database. It orchestrates the update of the pending authorization summary and the insertion of authorization details. It does not directly consume any specific input data but relies on data already present in working storage, such as authorization request and response data. It calls 8400-UPDATE-SUMMARY to update the pending authorization summary with the latest authorization counts and amounts. It then calls 8500-INSERT-AUTH to insert the authorization details into the database. There is no explicit business logic or error handling within this paragraph itself; it delegates these responsibilities to the called paragraphs. After the two PERFORM statements, control falls through to the next paragraph.",
      "called_by": [],
      "calls": [
        "8400-UPDATE-SUMMARY",
        "8500-INSERT-AUTH"
      ],
      "citation": [
        1,
        7
      ],
      "outgoing_calls": [
        {
          "target": "8400-UPDATE-SUMMARY",
          "call_type": "performs",
          "line": 790
        },
        {
          "target": "8500-INSERT-AUTH",
          "call_type": "performs",
          "line": 791
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 464,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8000-EXIT",
      "summary": null,
      "purpose": "This paragraph provides a standard exit point for the 8000-WRITE-AUTH-TO-DB paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any data manipulation, business logic, or error handling. Its sole purpose is to provide a consistent and structured way to exit the 8000-WRITE-AUTH-TO-DB process.",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [],
      "citation": [
        9,
        10
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8400-UPDATE-SUMMARY",
      "summary": null,
      "purpose": "This paragraph updates the pending authorization summary in the IMS database. It first checks if a pending authorization summary segment already exists (lines 15, 38). If not (NFOUND-PAUT-SMRY-SEG), it initializes the PENDING-AUTH-SUMMARY, moves the account and customer IDs (XREF-ACCT-ID, XREF-CUST-ID) to the summary segment (PA-ACCT-ID, PA-CUST-ID). It then moves the account credit limits (ACCT-CREDIT-LIMIT, ACCT-CASH-CREDIT-LIMIT) to the summary segment (PA-CREDIT-LIMIT, PA-CASH-LIMIT). Based on whether the authorization was approved (AUTH-RESP-APPROVED), it increments the approved or declined authorization counts (PA-APPROVED-AUTH-CNT, PA-DECLINED-AUTH-CNT) and amounts (PA-APPROVED-AUTH-AMT, PA-DECLINED-AUTH-AMT) in the summary. If the authorization was approved, it also updates the credit balance (PA-CREDIT-BALANCE). Finally, it either updates (REPL) or inserts (ISRT) the PENDING-AUTH-SUMMARY segment into the IMS database using EXEC DLI commands. If the IMS operation fails (STATUS-OK is false), it logs an error using 9500-LOG-ERROR, setting various error fields (ERR-LOCATION, ERR-CRITICAL, ERR-IMS, ERR-CODE-1, ERR-MESSAGE, ERR-EVENT-KEY).",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        12,
        62
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 846
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8000-WRITE-AUTH-TO-DB",
          "line": 790,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8400-EXIT",
      "summary": null,
      "purpose": "This paragraph provides a standard exit point for the 8400-UPDATE-SUMMARY paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any data manipulation, business logic, or error handling. Its sole purpose is to provide a consistent and structured way to exit the 8400-UPDATE-SUMMARY process.",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [],
      "citation": [
        64,
        65
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8500-INSERT-AUTH",
      "summary": null,
      "purpose": "This paragraph inserts authorization details into the IMS database. It first retrieves the current date and time using CICS ASKTIME and FORMATTIME commands, storing them in WS-CUR-DATE-X6, WS-CUR-TIME-X6, and WS-CUR-TIME-MS. It then converts these values into a format suitable for storage in the database (PA-AUTH-DATE-9C, PA-AUTH-TIME-9C) by subtracting them from a large number. It moves various fields from the authorization request (PA-RQ-*) and response (PA-RL-*) into the PENDING-AUTH-DETAILS segment. Based on whether the authorization was approved (AUTH-RESP-APPROVED), it sets either PA-MATCH-PENDING or PA-MATCH-AUTH-DECLINED to TRUE. It initializes PA-AUTH-FRAUD and PA-FRAUD-RPT-DATE to spaces. It moves the account ID (XREF-ACCT-ID) to PA-ACCT-ID. Finally, it inserts the PENDING-AUTH-DETAILS segment into the IMS database using an EXEC DLI ISRT command. If the IMS operation fails (STATUS-OK is false), it logs an error using 9500-LOG-ERROR, setting various error fields (ERR-LOCATION, ERR-CRITICAL, ERR-IMS, ERR-CODE-1, ERR-MESSAGE, ERR-EVENT-KEY).",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        67,
        146
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 931
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8000-WRITE-AUTH-TO-DB",
          "line": 791,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8500-EXIT",
      "summary": null,
      "purpose": "This paragraph provides a standard exit point for the 8500-INSERT-AUTH paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any data manipulation, business logic, or error handling. Its sole purpose is to provide a consistent and structured way to exit the 8500-INSERT-AUTH process.",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [],
      "citation": [
        148,
        149
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9000-TERMINATE",
      "summary": null,
      "purpose": "This paragraph handles the termination logic for the program. It first checks if the IMS PSB has been scheduled (IMS-PSB-SCHD). If so, it terminates the IMS PSB using an EXEC DLI TERM command. It then calls 9100-CLOSE-REQUEST-QUEUE to close the request MQ queue. The paragraph ensures a clean termination of the program by releasing IMS resources and closing MQ connections. There is no specific input or output data handled directly within this paragraph, as it focuses on resource management. Error handling is delegated to the called paragraph 9100-CLOSE-REQUEST-QUEUE.",
      "called_by": [],
      "calls": [
        "9100-CLOSE-REQUEST-QUEUE"
      ],
      "citation": [
        151,
        159
      ],
      "outgoing_calls": [
        {
          "target": "9100-CLOSE-REQUEST-QUEUE",
          "call_type": "performs",
          "line": 947
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "MAIN-PARA",
          "line": 224,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "9990-END-ROUTINE",
          "line": 1019,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9000-EXIT",
      "summary": null,
      "purpose": "This paragraph provides a standard exit point for the 9000-TERMINATE paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any data manipulation, business logic, or error handling. Its sole purpose is to provide a consistent and structured way to exit the 9000-TERMINATE process.",
      "called_by": [
        "9000-TERMINATE"
      ],
      "calls": [],
      "citation": [
        161,
        162
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9100-CLOSE-REQUEST-QUEUE",
      "summary": null,
      "purpose": "This paragraph closes the request MQ queue if it is open. It checks if the request MQ queue is open (WS-REQUEST-MQ-OPEN). If it is, it calls the MQCLOSE API to close the queue, passing the connection handle (W01-HCONN-REQUEST), object handle (W01-HOBJ-REQUEST), and other MQ parameters. The MQCLOSE call returns a completion code (WS-COMPCODE) and a reason code (WS-REASON). If the MQCLOSE call fails (WS-COMPCODE is not MQCC-OK), it logs a warning error using 9500-LOG-ERROR, setting various error fields (ERR-LOCATION, ERR-WARNING, ERR-MQ, ERR-CODE-1, ERR-CODE-2, ERR-MESSAGE). If the MQCLOSE call is successful, it sets WS-REQUEST-MQ-CLSE to TRUE. The paragraph handles potential errors during the MQ queue closure process and logs them appropriately.",
      "called_by": [
        "9000-TERMINATE"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        164,
        188
      ],
      "outgoing_calls": [
        {
          "target": "MQCLOSE",
          "call_type": "calls",
          "line": 956
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 975
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "9000-TERMINATE",
          "line": 947,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9100-EXIT",
      "summary": null,
      "purpose": "This paragraph provides a standard exit point for the 9100-CLOSE-REQUEST-QUEUE paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any data manipulation, business logic, or error handling. Its sole purpose is to provide a consistent and structured way to exit the 9100-CLOSE-REQUEST-QUEUE process.",
      "called_by": [
        "9100-CLOSE-REQUEST-QUEUE"
      ],
      "calls": [],
      "citation": [
        190,
        191
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9500-LOG-ERROR",
      "summary": null,
      "purpose": "This paragraph logs error information to a CICS temporary data queue (TDQ) named CSSL. It first retrieves the current date and time using CICS ASKTIME and FORMATTIME commands (lines 4-12), storing them in WS-CUR-DATE-X6 and WS-CUR-TIME-X6 respectively. It then moves the transaction ID (WS-CICS-TRANID) and program ID (WS-PGM-AUTH) into the ERROR-LOG-RECORD, along with the current date and time (lines 14-17). The ERROR-LOG-RECORD is then written to the CSSL queue using the CICS WRITEQ TD command (lines 19-24). Finally, it checks if the error is critical (ERR-CRITICAL) and, if so, performs 9990-END-ROUTINE to terminate the CICS task (lines 26-28). This paragraph ensures that error information is captured for debugging and analysis.",
      "called_by": [],
      "calls": [
        "9990-END-ROUTINE"
      ],
      "citation": [
        1,
        29
      ],
      "outgoing_calls": [
        {
          "target": "9990-END-ROUTINE",
          "call_type": "performs",
          "line": 1009
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "1100-OPEN-REQUEST-QUEUE",
          "line": 282,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "1200-SCHEDULE-PSB",
          "line": 316,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "3100-READ-REQUEST-MQ",
          "line": 429,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5100-READ-XREF-RECORD",
          "line": 500,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5200-READ-ACCT-RECORD",
          "line": 547,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5300-READ-CUST-RECORD",
          "line": 595,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5500-READ-AUTH-SUMMRY",
          "line": 639,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "7100-SEND-RESPONSE",
          "line": 778,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8400-UPDATE-SUMMARY",
          "line": 846,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8500-INSERT-AUTH",
          "line": 931,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "9100-CLOSE-REQUEST-QUEUE",
          "line": 975,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9500-EXIT",
      "summary": null,
      "purpose": "This paragraph serves as a simple exit point for the 9500-LOG-ERROR paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        31,
        32
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": true,
      "dead_code_reason": "Paragraph '9500-EXIT' is never PERFORMed or referenced by any other paragraph or program",
      "metadata": null
    },
    {
      "paragraph_name": "9990-END-ROUTINE",
      "summary": null,
      "purpose": "This paragraph is responsible for terminating the CICS task. It first performs the 9000-TERMINATE paragraph (line 37), which likely handles resource cleanup and other finalization tasks. After 9000-TERMINATE completes, it issues a CICS RETURN command (lines 39-40) to end the CICS task. This paragraph ensures that the CICS task is properly terminated after a critical error has been logged.",
      "called_by": [
        "9500-LOG-ERROR"
      ],
      "calls": [
        "9000-TERMINATE"
      ],
      "citation": [
        34,
        41
      ],
      "outgoing_calls": [
        {
          "target": "9000-TERMINATE",
          "call_type": "performs",
          "line": 1019
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "9500-LOG-ERROR",
          "line": 1009,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9990-EXIT",
      "summary": null,
      "purpose": "This paragraph serves as a simple exit point for the 9990-END-ROUTINE paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not perform any specific logic or data manipulation.",
      "called_by": [],
      "calls": [],
      "citation": [
        43,
        44
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": true,
      "dead_code_reason": "Paragraph '9990-EXIT' is never PERFORMed or referenced by any other paragraph or program",
      "metadata": null
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "What is the intended purpose of this empty COBOL program?",
      "context": "The program contains no code, so its purpose cannot be determined from the source file.",
      "suggestion": "Consult external documentation or subject matter experts to understand the program's intended functionality."
    }
  ],
  "dead_code": [
    {
      "name": "9500-EXIT",
      "artifact_type": "paragraph",
      "line": 1012,
      "reason": "Paragraph '9500-EXIT' is never PERFORMed or referenced by any other paragraph or program"
    },
    {
      "name": "9990-EXIT",
      "artifact_type": "paragraph",
      "line": 1024,
      "reason": "Paragraph '9990-EXIT' is never PERFORMed or referenced by any other paragraph or program"
    }
  ],
  "call_semantics": [
    {
      "caller": "MAIN-PARA",
      "callee": "1000-INITIALIZE",
      "inputs": [],
      "outputs": [
        "WS-REQUEST-QNAME",
        "WS-TRIGGER-DATA",
        "WS-WAIT-INTERVAL"
      ],
      "purpose": "Initializes the program by retrieving trigger data, setting queue names, and opening the request queue for message processing."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "2000-MAIN-PROCESS",
      "inputs": [
        "WS-REQSTS-PROCESS-LIMIT",
        "WS-MSG-PROCESSED"
      ],
      "outputs": [
        "WS-MSG-PROCESSED"
      ],
      "purpose": "Processes incoming authorization requests in a loop until the message limit is reached or no more messages are available."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "9000-TERMINATE",
      "inputs": [],
      "outputs": [],
      "purpose": "Terminates the IMS PSB if scheduled and closes the request queue before program exit."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "1100-OPEN-REQUEST-QUEUE",
      "inputs": [
        "WS-REQUEST-QNAME",
        "WS-OPTIONS"
      ],
      "outputs": [
        "W01-HOBJ-REQUEST",
        "WS-COMPCODE",
        "WS-REASON"
      ],
      "purpose": "Opens the request queue using MQOPEN with shared input options and sets the object handle for subsequent MQ operations."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "3100-READ-REQUEST-MQ",
      "inputs": [
        "WS-WAIT-INTERVAL",
        "W01-HCONN-REQUEST",
        "W01-HOBJ-REQUEST"
      ],
      "outputs": [
        "WS-SAVE-CORRELID",
        "WS-REPLY-QNAME",
        "WS-COMPCODE",
        "WS-REASON",
        "W01-DATALEN"
      ],
      "purpose": "Reads a message from the request queue using MQGET, setting correlation ID and reply queue name upon success, or detecting no message availability."
    },
    {
      "caller": "1100-OPEN-REQUEST-QUEUE",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-COMPCODE",
        "WS-REASON",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-MQ",
        "ERR-CODE-1",
        "ERR-CODE-2",
        "ERR-MESSAGE"
      ],
      "outputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6"
      ],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when opening the request MQ fails."
    },
    {
      "caller": "1200-SCHEDULE-PSB",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "IMS-RETURN-CODE",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-IMS",
        "ERR-CODE-1",
        "ERR-MESSAGE"
      ],
      "outputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6"
      ],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when IMS PSB scheduling fails."
    },
    {
      "caller": "2000-MAIN-PROCESS",
      "callee": "2100-EXTRACT-REQUEST-MSG",
      "inputs": [
        "W01-GET-BUFFER",
        "W01-DATALEN"
      ],
      "outputs": [
        "PA-RQ-AUTH-DATE",
        "PA-RQ-AUTH-TIME",
        "PA-RQ-CARD-NUM",
        "PA-RQ-AUTH-TYPE",
        "PA-RQ-CARD-EXPIRY-DATE",
        "PA-RQ-MESSAGE-TYPE",
        "PA-RQ-MESSAGE-SOURCE",
        "PA-RQ-PROCESSING-CODE",
        "WS-TRANSACTION-AMT-AN",
        "PA-RQ-MERCHANT-CATAGORY-CODE",
        "PA-RQ-ACQR-COUNTRY-CODE",
        "PA-RQ-POS-ENTRY-MODE",
        "PA-RQ-MERCHANT-ID",
        "PA-RQ-MERCHANT-NAME",
        "PA-RQ-MERCHANT-CITY",
        "PA-RQ-MERCHANT-STATE",
        "PA-RQ-MERCHANT-ZIP",
        "PA-RQ-TRANSACTION-ID",
        "PA-RQ-TRANSACTION-AMT",
        "WS-TRANSACTION-AMT"
      ],
      "purpose": "Extracts and parses fields from the incoming message buffer into individual data items for further processing."
    },
    {
      "caller": "2000-MAIN-PROCESS",
      "callee": "5000-PROCESS-AUTH",
      "inputs": [],
      "outputs": [],
      "purpose": "Processes an authorization request by scheduling IMS, reading related records, making a decision, sending a response, and writing to the database if needed."
    },
    {
      "caller": "2000-MAIN-PROCESS",
      "callee": "3100-READ-REQUEST-MQ",
      "inputs": [
        "WS-WAIT-INTERVAL",
        "MQMI-NONE",
        "MQCI-NONE",
        "MQFMT-STRING",
        "W01-HCONN-REQUEST",
        "W01-HOBJ-REQUEST",
        "W01-BUFFLEN",
        "W01-GET-BUFFER"
      ],
      "outputs": [
        "MQGMO-OPTIONS",
        "MQMD-MSGID OF MQM-MD-REQUEST",
        "MQMD-CORRELID OF MQM-MD-REQUEST",
        "MQMD-FORMAT OF MQM-MD-REQUEST",
        "W01-BUFFLEN",
        "W01-DATALEN",
        "WS-COMPCODE",
        "WS-REASON",
        "WS-SAVE-CORRELID",
        "WS-REPLY-QNAME",
        "NO-MORE-MSG-AVAILABLE",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-CICS",
        "ERR-CODE-1",
        "ERR-CODE-2",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY"
      ],
      "purpose": "Reads a message from the request MQ, sets reply and correlation IDs on success, or logs an error if reading fails."
    },
    {
      "caller": "3100-READ-REQUEST-MQ",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-COMPCODE",
        "WS-CODE-DISPLAY",
        "WS-REASON",
        "ERR-CODE-1",
        "ERR-CODE-2",
        "ERR-MESSAGE",
        "PA-CARD-NUM",
        "ERR-EVENT-KEY"
      ],
      "outputs": [],
      "purpose": "Logs an error message to the CICS TD queue with timestamp, program, transaction, and error details when reading from the request MQ fails."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "1200-SCHEDULE-PSB",
      "inputs": [
        "PSB-NAME"
      ],
      "outputs": [
        "IMS-RETURN-CODE",
        "IMS-PSB-SCHD"
      ],
      "purpose": "Schedules an IMS PSB for processing and logs an error if the scheduling fails."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "5100-READ-XREF-RECORD",
      "inputs": [
        "PA-RQ-CARD-NUM",
        "WS-CCXREF-FILE",
        "WS-RESP-CD",
        "WS-REAS-CD"
      ],
      "outputs": [
        "CARD-FOUND-XREF",
        "CARD-NFOUND-XREF",
        "NFOUND-ACCT-IN-MSTR",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "XREF-CARD-NUM",
        "ERR-EVENT-KEY",
        "ERR-CODE-1",
        "ERR-CODE-2"
      ],
      "purpose": "Reads the card cross-reference record using the card number and logs a warning or error if not found or if another error occurs."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "5200-READ-ACCT-RECORD",
      "inputs": [
        "XREF-ACCT-ID",
        "WS-ACCTFILENAME",
        "WS-CARD-RID-ACCT-ID-X",
        "WS-RESP-CD",
        "WS-REAS-CD"
      ],
      "outputs": [
        "FOUND-ACCT-IN-MSTR",
        "NFOUND-ACCT-IN-MSTR",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CODE-1",
        "ERR-CODE-2"
      ],
      "purpose": "Reads the account record using the account ID from the XREF and logs a warning or error if the account is not found or another error occurs."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "5300-READ-CUST-RECORD",
      "inputs": [
        "XREF-CUST-ID",
        "WS-CUSTFILENAME",
        "WS-CARD-RID-CUST-ID-X",
        "WS-RESP-CD",
        "WS-REAS-CD"
      ],
      "outputs": [
        "FOUND-CUST-IN-MSTR",
        "NFOUND-CUST-IN-MSTR",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CODE-1",
        "ERR-CODE-2"
      ],
      "purpose": "Reads the customer record using the customer ID from the XREF and logs a warning or error if the customer is not found or another error occurs."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "5500-READ-AUTH-SUMMRY",
      "inputs": [
        "XREF-ACCT-ID",
        "PA-ACCT-ID"
      ],
      "outputs": [
        "IMS-RETURN-CODE",
        "FOUND-PAUT-SMRY-SEG",
        "NFOUND-PAUT-SMRY-SEG",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-IMS",
        "ERR-CODE-1",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY"
      ],
      "purpose": "Reads the pending authorization summary segment from IMS using the account ID from the cross-reference record."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "5600-READ-PROFILE-DATA",
      "inputs": [],
      "outputs": [],
      "purpose": "Placeholder paragraph with no logic; intended to read profile data but currently does nothing."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "6000-MAKE-DECISION",
      "inputs": [
        "FOUND-PAUT-SMRY-SEG",
        "PA-CREDIT-LIMIT",
        "PA-CREDIT-BALANCE",
        "WS-TRANSACTION-AMT",
        "FOUND-ACCT-IN-MSTR",
        "ACCT-CREDIT-LIMIT",
        "ACCT-CURR-BAL",
        "DECLINE-AUTH",
        "PA-RQ-CARD-NUM",
        "PA-RQ-TRANSACTION-ID",
        "PA-RQ-AUTH-TIME",
        "PA-RQ-TRANSACTION-AMT",
        "CARD-NFOUND-XREF",
        "NFOUND-ACCT-IN-MSTR",
        "NFOUND-CUST-IN-MSTR",
        "INSUFFICIENT-FUND",
        "CARD-NOT-ACTIVE",
        "ACCOUNT-CLOSED",
        "CARD-FRAUD",
        "MERCHANT-FRAUD",
        "WS-APPROVED-AMT"
      ],
      "outputs": [
        "APPROVE-AUTH",
        "DECLINE-AUTH",
        "INSUFFICIENT-FUND",
        "AUTH-RESP-DECLINED",
        "AUTH-RESP-APPROVED",
        "PA-RL-CARD-NUM",
        "PA-RL-TRANSACTION-ID",
        "PA-RL-AUTH-ID-CODE",
        "PA-RL-AUTH-RESP-CODE",
        "PA-RL-APPROVED-AMT",
        "PA-RL-AUTH-RESP-REASON",
        "WS-APPROVED-AMT-DIS",
        "W02-PUT-BUFFER",
        "WS-RESP-LENGTH"
      ],
      "purpose": "Makes an authorization decision based on account and transaction data, sets response codes and amounts, and formats the response message."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "7100-SEND-RESPONSE",
      "inputs": [
        "MQOT-Q",
        "WS-REPLY-QNAME",
        "MQMT-REPLY",
        "WS-SAVE-CORRELID",
        "MQMI-NONE",
        "MQPER-NOT-PERSISTENT",
        "MQFMT-STRING",
        "MQPMO-NO-SYNCPOINT",
        "MQPMO-DEFAULT-CONTEXT",
        "WS-RESP-LENGTH",
        "W02-HCONN-REPLY",
        "MQM-OD-REPLY",
        "MQM-MD-REPLY",
        "MQM-PUT-MESSAGE-OPTIONS",
        "W02-BUFFLEN",
        "W02-PUT-BUFFER"
      ],
      "outputs": [
        "WS-COMPCODE",
        "WS-REASON",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-MQ",
        "WS-CODE-DISPLAY",
        "ERR-CODE-1",
        "ERR-CODE-2",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY"
      ],
      "purpose": "Sends the authorization response message to the reply queue using MQPUT1 and logs an error if the operation fails."
    },
    {
      "caller": "5000-PROCESS-AUTH",
      "callee": "8000-WRITE-AUTH-TO-DB",
      "inputs": [],
      "outputs": [],
      "purpose": "Updates the authorization summary and inserts a new authorization record into the database via subordinate paragraphs."
    },
    {
      "caller": "5100-READ-XREF-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-RESP-CD",
        "WS-CODE-DISPLAY",
        "WS-REAS-CD"
      ],
      "outputs": [
        "WS-ABS-TIME"
      ],
      "purpose": "Logs an error message with timestamp and program context to the CSSL queue, and terminates the program if the error is critical."
    },
    {
      "caller": "5100-READ-XREF-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-RESP-CD",
        "WS-CODE-DISPLAY",
        "WS-REAS-CD"
      ],
      "outputs": [
        "WS-ABS-TIME"
      ],
      "purpose": "Logs an error message with timestamp and program context to the CSSL queue, and terminates the program if the error is critical."
    },
    {
      "caller": "5200-READ-ACCT-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-RESP-CD",
        "WS-CODE-DISPLAY",
        "WS-REAS-CD"
      ],
      "outputs": [
        "WS-ABS-TIME"
      ],
      "purpose": "Logs an error message with timestamp and program context to the CSSL queue, and terminates the program if the error is critical."
    },
    {
      "caller": "5200-READ-ACCT-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-RESP-CD",
        "WS-CODE-DISPLAY",
        "WS-REAS-CD"
      ],
      "outputs": [
        "WS-ABS-TIME"
      ],
      "purpose": "Logs an error message with timestamp and program context to the CSSL queue, and terminates the program if the error is critical."
    },
    {
      "caller": "5300-READ-CUST-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CRITICAL",
        "ERR-CICS",
        "WS-RESP-CD",
        "WS-CODE-DISPLAY",
        "WS-REAS-CD"
      ],
      "outputs": [
        "WS-ABS-TIME"
      ],
      "purpose": "Logs an error message with timestamp and program context to the CSSL queue, and terminates the program if the error is critical."
    },
    {
      "caller": "5300-READ-CUST-RECORD",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-WARNING",
        "ERR-APP",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY",
        "ERR-CODE-1",
        "ERR-CODE-2"
      ],
      "outputs": [],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when customer record is not found or CICS read fails."
    },
    {
      "caller": "5500-READ-AUTH-SUMMRY",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-IMS",
        "ERR-CODE-1",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY"
      ],
      "outputs": [],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when IMS fails to retrieve the pending authorization summary segment."
    },
    {
      "caller": "7100-SEND-RESPONSE",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-MQ",
        "WS-COMPCODE",
        "WS-CODE-DISPLAY",
        "WS-REASON",
        "ERR-CODE-1",
        "ERR-CODE-2",
        "ERR-MESSAGE",
        "ERR-EVENT-KEY"
      ],
      "outputs": [],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when sending a response to the reply MQ fails."
    },
    {
      "caller": "8000-WRITE-AUTH-TO-DB",
      "callee": "8400-UPDATE-SUMMARY",
      "inputs": [
        "NFOUND-PAUT-SMRY-SEG",
        "XREF-ACCT-ID",
        "XREF-CUST-ID",
        "ACCT-CREDIT-LIMIT",
        "ACCT-CASH-CREDIT-LIMIT",
        "AUTH-RESP-APPROVED",
        "WS-APPROVED-AMT",
        "PA-TRANSACTION-AMT",
        "FOUND-PAUT-SMRY-SEG"
      ],
      "outputs": [
        "PENDING-AUTH-SUMMARY",
        "IMS-RETURN-CODE"
      ],
      "purpose": "Updates or inserts the pending authorization summary segment in IMS based on whether it was previously found, adjusting counts and balances accordingly."
    },
    {
      "caller": "8000-WRITE-AUTH-TO-DB",
      "callee": "8500-INSERT-AUTH",
      "inputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "WS-CUR-TIME-MS",
        "PA-RQ-AUTH-DATE",
        "PA-RQ-AUTH-TIME",
        "PA-RQ-CARD-NUM",
        "PA-RQ-AUTH-TYPE",
        "PA-RQ-CARD-EXPIRY-DATE",
        "PA-RQ-MESSAGE-TYPE",
        "PA-RQ-MESSAGE-SOURCE",
        "PA-RQ-PROCESSING-CODE",
        "PA-RQ-TRANSACTION-AMT",
        "PA-RQ-MERCHANT-CATAGORY-CODE",
        "PA-RQ-ACQR-COUNTRY-CODE",
        "PA-RQ-POS-ENTRY-MODE",
        "PA-RQ-MERCHANT-ID",
        "PA-RQ-MERCHANT-NAME",
        "PA-RQ-MERCHANT-CITY",
        "PA-RQ-MERCHANT-STATE",
        "PA-RQ-MERCHANT-ZIP",
        "PA-RQ-TRANSACTION-ID",
        "PA-RL-AUTH-ID-CODE",
        "PA-RL-AUTH-RESP-CODE",
        "PA-RL-AUTH-RESP-REASON",
        "PA-RL-APPROVED-AMT",
        "AUTH-RESP-APPROVED",
        "XREF-ACCT-ID"
      ],
      "outputs": [
        "WS-YYDDD",
        "WS-CUR-TIME-N6",
        "WS-TIME-WITH-MS",
        "PA-AUTH-DATE-9C",
        "PA-AUTH-TIME-9C",
        "PENDING-AUTH-DETAILS",
        "IMS-RETURN-CODE"
      ],
      "purpose": "Inserts a new pending authorization detail record into IMS with current timestamp and request/response data, setting match status based on approval."
    },
    {
      "caller": "8400-UPDATE-SUMMARY",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-IMS",
        "IMS-RETURN-CODE",
        "ERR-CODE-1",
        "ERR-MESSAGE",
        "PA-CARD-NUM",
        "ERROR-LOG-RECORD"
      ],
      "outputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6"
      ],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when an IMS update fails."
    },
    {
      "caller": "8500-INSERT-AUTH",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-CRITICAL",
        "ERR-IMS",
        "IMS-RETURN-CODE",
        "ERR-CODE-1",
        "ERR-MESSAGE",
        "PA-CARD-NUM",
        "ERROR-LOG-RECORD"
      ],
      "outputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6"
      ],
      "purpose": "Logs an error message to the CSSL queue with timestamp and error details when an IMS insert operation fails."
    },
    {
      "caller": "9000-TERMINATE",
      "callee": "9100-CLOSE-REQUEST-QUEUE",
      "inputs": [
        "WS-REQUEST-MQ-OPEN"
      ],
      "outputs": [],
      "purpose": "Closes the request message queue if it is currently open."
    },
    {
      "caller": "9100-CLOSE-REQUEST-QUEUE",
      "callee": "9500-LOG-ERROR",
      "inputs": [
        "WS-CICS-TRANID",
        "WS-PGM-AUTH",
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6",
        "ERR-LOCATION",
        "ERR-WARNING",
        "ERR-MQ",
        "WS-COMPCODE",
        "WS-CODE-DISPLAY",
        "ERR-CODE-1",
        "WS-REASON",
        "ERR-CODE-2",
        "ERR-MESSAGE",
        "ERROR-LOG-RECORD"
      ],
      "outputs": [
        "WS-ABS-TIME",
        "WS-CUR-DATE-X6",
        "WS-CUR-TIME-X6"
      ],
      "purpose": "Logs a warning message to the CSSL queue when the attempt to close the request MQ fails."
    },
    {
      "caller": "9500-LOG-ERROR",
      "callee": "9990-END-ROUTINE",
      "inputs": [
        "ERR-CRITICAL"
      ],
      "outputs": [],
      "purpose": "Terminates the program by performing cleanup and issuing a CICS RETURN when a critical error occurs."
    },
    {
      "caller": "9990-END-ROUTINE",
      "callee": "9000-TERMINATE",
      "inputs": [],
      "outputs": [],
      "purpose": "Performs termination tasks including IMS termination if applicable and closes the request queue."
    }
  ],
  "flow_diagram": "flowchart TD\n    %% Title: COPAUA0C.cbl\n    1000_EXIT[\"1000-EXIT\"]\n    1000_INITIALIZE[\"1000-INITIALIZE\"]\n    1100_OPEN_REQUEST_QUEUE[\"1100-OPEN-REQUEST-QUEUE\"]\n    3100_READ_REQUEST_MQ[\"3100-READ-REQUEST-MQ\"]\n    1100_EXIT[\"1100-EXIT\"]\n    9500_LOG_ERROR[\"9500-LOG-ERROR\"]\n    MQOPEN__ext([\"MQOPEN\"])\n    1200_EXIT[\"1200-EXIT\"]\n    1200_SCHEDULE_PSB[\"1200-SCHEDULE-PSB\"]\n    2000_EXIT[\"2000-EXIT\"]\n    2000_MAIN_PROCESS[\"2000-MAIN-PROCESS\"]\n    2100_EXTRACT_REQUEST_MSG[\"2100-EXTRACT-REQUEST-MSG\"]\n    5000_PROCESS_AUTH[\"5000-PROCESS-AUTH\"]\n    2100_EXIT[\"2100-EXIT\"]\n    3100_EXIT[\"3100-EXIT\"]\n    MQGET__ext([\"MQGET\"])\n    5000_EXIT[\"5000-EXIT\"]\n    5100_READ_XREF_RECORD[\"5100-READ-XREF-RECORD\"]\n    5200_READ_ACCT_RECORD[\"5200-READ-ACCT-RECORD\"]\n    5300_READ_CUST_RECORD[\"5300-READ-CUST-RECORD\"]\n    5500_READ_AUTH_SUMMRY[\"5500-READ-AUTH-SUMMRY\"]\n    5600_READ_PROFILE_DATA[\"5600-READ-PROFILE-DATA\"]\n    6000_MAKE_DECISION[\"6000-MAKE-DECISION\"]\n    7100_SEND_RESPONSE[\"7100-SEND-RESPONSE\"]\n    8000_WRITE_AUTH_TO_DB[\"8000-WRITE-AUTH-TO-DB\"]\n    5100_EXIT[\"5100-EXIT\"]\n    WS_CCXREF_FILE__ext[(\"WS-CCXREF-FILE\")]\n    5200_EXIT[\"5200-EXIT\"]\n    WS_ACCTFILENAME__ext[(\"WS-ACCTFILENAME\")]\n    5300_EXIT[\"5300-EXIT\"]\n    WS_CUSTFILENAME__ext[(\"WS-CUSTFILENAME\")]\n    5500_EXIT[\"5500-EXIT\"]\n    5600_EXIT[\"5600-EXIT\"]\n    6000_EXIT[\"6000-EXIT\"]\n    7100_EXIT[\"7100-EXIT\"]\n    MQPUT1__ext([\"MQPUT1\"])\n    8000_EXIT[\"8000-EXIT\"]\n    8400_UPDATE_SUMMARY[\"8400-UPDATE-SUMMARY\"]\n    8500_INSERT_AUTH[\"8500-INSERT-AUTH\"]\n    8400_EXIT[\"8400-EXIT\"]\n    8500_EXIT[\"8500-EXIT\"]\n    9000_EXIT[\"9000-EXIT\"]\n    9000_TERMINATE[\"9000-TERMINATE\"]\n    9100_CLOSE_REQUEST_QUEUE[\"9100-CLOSE-REQUEST-QUEUE\"]\n    MQCLOSE__ext([\"MQCLOSE\"])\n    9100_EXIT[\"9100-EXIT\"]\n    9500_EXIT[\"9500-EXIT\"]\n    9990_END_ROUTINE[\"9990-END-ROUTINE\"]\n    9990_EXIT[\"9990-EXIT\"]\n    MAIN_PARA[\"MAIN-PARA\"]\n    1000_INITIALIZE --> 1100_OPEN_REQUEST_QUEUE\n    1000_INITIALIZE --> 3100_READ_REQUEST_MQ\n    1100_OPEN_REQUEST_QUEUE --> 9500_LOG_ERROR\n    1100_OPEN_REQUEST_QUEUE -.->|calls| MQOPEN__ext\n    1200_SCHEDULE_PSB --> 9500_LOG_ERROR\n    2000_MAIN_PROCESS --> 2100_EXTRACT_REQUEST_MSG\n    2000_MAIN_PROCESS --> 3100_READ_REQUEST_MQ\n    2000_MAIN_PROCESS --> 5000_PROCESS_AUTH\n    3100_READ_REQUEST_MQ --> 9500_LOG_ERROR\n    3100_READ_REQUEST_MQ -.->|calls| MQGET__ext\n    5000_PROCESS_AUTH --> 1200_SCHEDULE_PSB\n    5000_PROCESS_AUTH --> 5100_READ_XREF_RECORD\n    5000_PROCESS_AUTH --> 5200_READ_ACCT_RECORD\n    5000_PROCESS_AUTH --> 5300_READ_CUST_RECORD\n    5000_PROCESS_AUTH --> 5500_READ_AUTH_SUMMRY\n    5000_PROCESS_AUTH --> 5600_READ_PROFILE_DATA\n    5000_PROCESS_AUTH --> 6000_MAKE_DECISION\n    5000_PROCESS_AUTH --> 7100_SEND_RESPONSE\n    5000_PROCESS_AUTH --> 8000_WRITE_AUTH_TO_DB\n    5100_READ_XREF_RECORD --> 9500_LOG_ERROR\n    5100_READ_XREF_RECORD -.->|reads| WS_CCXREF_FILE__ext\n    5200_READ_ACCT_RECORD --> 9500_LOG_ERROR\n    5200_READ_ACCT_RECORD -.->|reads| WS_ACCTFILENAME__ext\n    5300_READ_CUST_RECORD --> 9500_LOG_ERROR\n    5300_READ_CUST_RECORD -.->|reads| WS_CUSTFILENAME__ext\n    5500_READ_AUTH_SUMMRY --> 9500_LOG_ERROR\n    7100_SEND_RESPONSE --> 9500_LOG_ERROR\n    7100_SEND_RESPONSE -.->|calls| MQPUT1__ext\n    8000_WRITE_AUTH_TO_DB --> 8400_UPDATE_SUMMARY\n    8000_WRITE_AUTH_TO_DB --> 8500_INSERT_AUTH\n    8400_UPDATE_SUMMARY --> 9500_LOG_ERROR\n    8500_INSERT_AUTH --> 9500_LOG_ERROR\n    9000_TERMINATE --> 9100_CLOSE_REQUEST_QUEUE\n    9100_CLOSE_REQUEST_QUEUE --> 9500_LOG_ERROR\n    9100_CLOSE_REQUEST_QUEUE -.->|calls| MQCLOSE__ext\n    9500_LOG_ERROR --> 9990_END_ROUTINE\n    9990_END_ROUTINE --> 9000_TERMINATE\n    MAIN_PARA --> 1000_INITIALIZE\n    MAIN_PARA --> 2000_MAIN_PROCESS\n    MAIN_PARA --> 9000_TERMINATE"
}