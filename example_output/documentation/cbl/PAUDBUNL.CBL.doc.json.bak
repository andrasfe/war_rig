{
  "header": {
    "program_id": "PAUDBUNL",
    "file_name": "PAUDBUNL.CBL",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-03T21:02:07.147899",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "The COBOL program PAUDBUNL extracts authorization summary and detail information from an IMS database and writes it to two sequential output files. It reads authorization summary records and related detail records, writing each to a separate output file.",
    "business_context": "UNKNOWN",
    "program_type": "BATCH",
    "citations": [
      9,
      70,
      113
    ]
  },
  "inputs": [
    {
      "name": "PAUTBPCB",
      "io_type": "IMS_SEGMENT",
      "description": "IMS PCB used to access the authorization summary and detail segments.",
      "copybook": "UNKNOWN",
      "citation": [
        4,
        57,
        100
      ]
    },
    {
      "name": "PENDING-AUTH-SUMMARY",
      "io_type": "IMS_SEGMENT",
      "description": "Authorization summary segment read from the IMS database.",
      "copybook": "UNKNOWN",
      "citation": [
        58,
        70
      ]
    },
    {
      "name": "PENDING-AUTH-DETAILS",
      "io_type": "IMS_SEGMENT",
      "description": "Authorization detail segment read from the IMS database.",
      "copybook": "UNKNOWN",
      "citation": [
        101,
        112
      ]
    }
  ],
  "outputs": [
    {
      "name": "OPFILE1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing authorization summary records.",
      "copybook": "UNKNOWN",
      "citation": [
        31,
        76
      ]
    },
    {
      "name": "OPFILE2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing authorization detail records.",
      "copybook": "UNKNOWN",
      "citation": [
        39,
        113
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "CBLTDLI",
      "call_type": "STATIC_CALL",
      "purpose": "Issue IMS database calls to retrieve authorization summary and detail segments.",
      "parameters": [
        "FUNC-GN",
        "PAUTBPCB",
        "PENDING-AUTH-SUMMARY",
        "ROOT-UNQUAL-SSA"
      ],
      "citation": 56
    },
    {
      "program_name": "CBLTDLI",
      "call_type": "STATIC_CALL",
      "purpose": "Issue IMS database calls to retrieve authorization summary and detail segments.",
      "parameters": [
        "FUNC-GNP",
        "PAUTBPCB",
        "PENDING-AUTH-DETAILS",
        "CHILD-UNQUAL-SSA"
      ],
      "citation": 99
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [
      "DLITCBL"
    ],
    "linkage_section": [
      "PAUTBPCB"
    ]
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "PENDING-AUTH-SUMMARY",
        "fields_used": [
          "PA-ACCT-ID"
        ],
        "citation": [
          73
        ]
      },
      {
        "source": "PENDING-AUTH-SUMMARY",
        "fields_used": [
          "All fields"
        ],
        "citation": [
          70
        ]
      },
      {
        "source": "PENDING-AUTH-DETAILS",
        "fields_used": [
          "All fields"
        ],
        "citation": [
          112
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "OPFIL1-REC",
        "fields_written": [
          "All fields from PENDING-AUTH-SUMMARY"
        ],
        "citation": [
          70,
          76
        ]
      },
      {
        "destination": "OPFIL2-REC",
        "fields_written": [
          "All fields from PENDING-AUTH-DETAILS"
        ],
        "citation": [
          113
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PA-ACCT-ID",
        "output_field": "ROOT-SEG-KEY",
        "transformation_description": "Moves the account ID from the authorization summary segment to the root segment key.",
        "citation": [
          73
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "PAUDBUNL",
      "summary": null,
      "purpose": "This paragraph serves as the program entry point. It is invoked using the 'DLITCBL' entry point and receives the PAUTBPCB as input via the USING clause. It then calls other subroutines to perform the main logic of the program, namely IMSFUNCS, CIPAUSMY, CIPAUDTY, and PAUTBPCB. The purpose of these calls is currently unknown due to lack of information. The paragraph itself does not directly process any data or perform any business logic, but rather acts as a high-level orchestrator.",
      "called_by": [],
      "calls": [
        "IMSFUNCS",
        "CIPAUSMY",
        "CIPAUDTY",
        "PAUTBPCB"
      ],
      "citation": [
        1,
        1
      ],
      "outgoing_calls": [
        {
          "target": "IMSFUNCS",
          "call_type": "includes",
          "line": 132
        },
        {
          "target": "CIPAUSMY",
          "call_type": "includes",
          "line": 139
        },
        {
          "target": "CIPAUDTY",
          "call_type": "includes",
          "line": 143
        },
        {
          "target": "PAUTBPCB",
          "call_type": "includes",
          "line": 150
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "This paragraph is the main control loop of the program. It is entered via the ENTRY 'DLITCBL' statement, receiving the PAUTBPCB as input. It first calls 1000-INITIALIZE to perform program initialization, such as opening files and accepting the current date. After initialization, it repeatedly calls 2000-FIND-NEXT-AUTH-SUMMARY until WS-END-OF-ROOT-SEG is set to 'Y', indicating that all authorization summary records have been processed. Finally, it calls 4000-FILE-CLOSE to close the output files before terminating the program with a GOBACK statement. This paragraph orchestrates the overall flow of the program, managing initialization, data processing, and termination.",
      "called_by": [],
      "calls": [
        "1000-INITIALIZE",
        "2000-FIND-NEXT-AUTH-SUMMARY",
        "4000-FILE-CLOSE"
      ],
      "citation": [
        157,
        172
      ],
      "outgoing_calls": [
        {
          "target": "1000-INITIALIZE",
          "call_type": "performs",
          "line": 161
        },
        {
          "target": "2000-FIND-NEXT-AUTH-SUMMARY",
          "call_type": "performs",
          "line": 163
        },
        {
          "target": "4000-FILE-CLOSE",
          "call_type": "performs",
          "line": 166
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-INITIALIZE",
      "summary": null,
      "purpose": "This paragraph performs initialization tasks for the program. It accepts the current date and day from the system. It then opens OPFILE1 and OPFILE2 for output. If either OPEN operation fails (WS-OUTFL1-STATUS or WS-OUTFL2-STATUS is not equal to SPACES or '00'), it displays an error message and calls 9999-ABEND to terminate the program. The purpose of accepting PRM-INFO from SYSIN is unknown. This paragraph ensures that the output files are ready for writing and that the program has access to the current date before processing any data.",
      "called_by": [],
      "calls": [
        "9999-ABEND",
        "9999-ABEND"
      ],
      "citation": [
        173,
        202
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 191
        },
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 199
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-EXIT",
      "summary": null,
      "purpose": "This paragraph simply contains an EXIT statement, providing a common exit point for the 1000-INITIALIZE paragraph. It does not perform any data manipulation or business logic. It is used to define the end of the PERFORM THRU range in the calling paragraph.",
      "called_by": [],
      "calls": [],
      "citation": [
        203,
        206
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-FIND-NEXT-AUTH-SUMMARY",
      "summary": null,
      "purpose": "This paragraph retrieves the next authorization summary record from the IMS database. It first initializes PAUT-PCB-STATUS. It then calls CBLTDLI with FUNC-GN to retrieve the next summary segment using the PAUTBPCB and ROOT-UNQUAL-SSA. If the call is successful (PAUT-PCB-STATUS is SPACES), it increments WS-NO-SUMRY-READ and WS-AUTH-SMRY-PROC-CNT, moves the PENDING-AUTH-SUMMARY to OPFIL1-REC, initializes ROOT-SEG-KEY and CHILD-SEG-REC, moves PA-ACCT-ID to ROOT-SEG-KEY, and writes OPFIL1-REC to OPFILE1 if PA-ACCT-ID is numeric. After writing the summary record, it calls 3000-FIND-NEXT-AUTH-DTL repeatedly until WS-END-OF-CHILD-SEG is set to 'Y', indicating that all detail records for the current summary record have been processed. If PAUT-PCB-STATUS is 'GB', it sets WS-END-OF-ROOT-SEG to 'Y' to indicate the end of the authorization database. If PAUT-PCB-STATUS is neither SPACES nor 'GB', it displays an error message and calls 9999-ABEND. This paragraph retrieves and processes authorization summary records and their associated detail records.",
      "called_by": [],
      "calls": [
        "CBLTDLI",
        "3000-FIND-NEXT-AUTH-DTL",
        "9999-ABEND"
      ],
      "citation": [
        207,
        247
      ],
      "outgoing_calls": [
        {
          "target": "CBLTDLI",
          "call_type": "calls",
          "line": 213
        },
        {
          "target": "3000-FIND-NEXT-AUTH-DTL",
          "call_type": "performs",
          "line": 235
        },
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 246
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-EXIT",
      "summary": null,
      "purpose": "This paragraph simply contains an EXIT statement, providing a common exit point for the 2000-FIND-NEXT-AUTH-SUMMARY paragraph. It does not perform any data manipulation or business logic. It is used to define the end of the PERFORM THRU range in the calling paragraph.",
      "called_by": [],
      "calls": [],
      "citation": [
        248,
        252
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3000-FIND-NEXT-AUTH-DTL",
      "summary": null,
      "purpose": "This paragraph retrieves the next authorization detail record from the IMS database for the current authorization summary record. It calls CBLTDLI with FUNC-GNP to retrieve the next detail segment using the PAUTBPCB and CHILD-UNQUAL-SSA. If the call is successful (PAUT-PCB-STATUS is SPACES), it sets MORE-AUTHS to TRUE, increments WS-NO-SUMRY-READ and WS-AUTH-SMRY-PROC-CNT, moves the PENDING-AUTH-DETAILS to CHILD-SEG-REC, and writes CHILD-SEG-REC to OPFILE2. If PAUT-PCB-STATUS is 'GE', it sets WS-END-OF-CHILD-SEG to 'Y' to indicate that there are no more detail records for the current summary record. If PAUT-PCB-STATUS is neither SPACES nor 'GE', it displays an error message and calls 9999-ABEND. Finally, it initializes PAUT-PCB-STATUS. This paragraph retrieves and processes authorization detail records associated with a summary record.",
      "called_by": [],
      "calls": [
        "CBLTDLI",
        "9999-ABEND"
      ],
      "citation": [
        253,
        284
      ],
      "outgoing_calls": [
        {
          "target": "CBLTDLI",
          "call_type": "calls",
          "line": 257
        },
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 282
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3000-EXIT",
      "summary": null,
      "purpose": "This paragraph simply contains an EXIT statement, providing a common exit point for the 3000-FIND-NEXT-AUTH-DTL paragraph. It does not perform any data manipulation or business logic. It is used to define the end of the PERFORM THRU range in the calling paragraph.",
      "called_by": [],
      "calls": [],
      "citation": [
        285,
        288
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "4000-FILE-CLOSE",
      "summary": null,
      "purpose": "This paragraph closes the output files OPFILE1 and OPFILE2. It first displays a message indicating that the files are being closed. It then closes OPFILE1 and checks WS-OUTFL1-STATUS. If the close operation fails (WS-OUTFL1-STATUS is not equal to SPACES or '00'), it displays an error message. It repeats the same process for OPFILE2 and WS-OUTFL2-STATUS. This paragraph ensures that the output files are properly closed after all data has been processed.",
      "called_by": [],
      "calls": [],
      "citation": [
        289,
        304
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "4000-EXIT",
      "summary": null,
      "purpose": "This paragraph simply contains an EXIT statement, providing a common exit point for the 4000-FILE-CLOSE paragraph. It does not perform any data manipulation or business logic. It is used to define the end of the PERFORM THRU range in the calling paragraph.",
      "called_by": [],
      "calls": [],
      "citation": [
        305,
        307
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9999-ABEND",
      "summary": null,
      "purpose": "The 9999-ABEND paragraph is responsible for handling abnormal termination of the program. Its primary purpose is to display a message indicating that the program is abending and then set a non-zero return code before terminating the program. This paragraph does not consume any input files or data directly, but it is likely called from other parts of the program when an unrecoverable error condition is encountered. It produces output by displaying the message 'IMSUNLOD ABENDING ...' to the console (line 4). It sets the RETURN-CODE to 16 (line 6), indicating an error condition to the calling environment. The paragraph then terminates the program using the GOBACK statement (line 7). This paragraph does not call any other paragraphs or programs.",
      "called_by": [],
      "calls": [],
      "citation": [
        1,
        7
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9999-EXIT",
      "summary": null,
      "purpose": "The 9999-EXIT paragraph provides a standard exit point for the program. Its primary purpose is to simply exit the current execution path. It does not consume any input data or files, nor does it produce any output. It is likely called as the final step in a normal program termination sequence. This paragraph does not perform any business logic or error handling. It simply executes the EXIT statement (line 10), which returns control to the calling paragraph or program. This paragraph does not call any other paragraphs or programs.",
      "called_by": [],
      "calls": [],
      "citation": [
        9,
        10
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "WS-OUTFL1-STATUS not equal to SPACES or '00' during OPEN",
      "action": "DISPLAY error message and PERFORM 9999-ABEND",
      "citation": [
        187
      ]
    },
    {
      "condition": "WS-OUTFL2-STATUS not equal to SPACES or '00' during OPEN",
      "action": "DISPLAY error message and PERFORM 9999-ABEND",
      "citation": [
        195
      ]
    },
    {
      "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GB' after reading summary",
      "action": "DISPLAY error message and PERFORM 9999-ABEND",
      "citation": [
        223
      ]
    },
    {
      "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GE' after reading detail",
      "action": "DISPLAY error message and PERFORM 9999-ABEND",
      "citation": [
        266
      ]
    },
    {
      "condition": "WS-OUTFL1-STATUS not equal to SPACES or '00' during CLOSE",
      "action": "DISPLAY error message",
      "citation": [
        273
      ]
    },
    {
      "condition": "WS-OUTFL2-STATUS not equal to SPACES or '00' during CLOSE",
      "action": "DISPLAY error message",
      "citation": [
        279
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "What is the purpose of the IMSFUNCS, CIPAUSMY, CIPAUDTY, and PAUTBPCB calls within the PAUDBUNL paragraph?",
      "context": "The code calls these subroutines, but their functionality cannot be determined from the provided code snippet.",
      "suggestion": "Examine the source code or documentation for these subroutines to understand their purpose."
    },
    {
      "question": "What is the purpose of accepting PRM-INFO from SYSIN?",
      "context": "The code includes a commented-out line that accepts PRM-INFO from SYSIN, but its purpose is unclear.",
      "suggestion": "Review any available documentation or consult with developers familiar with the program to determine the purpose of this input."
    }
  ],
  "dead_code": [],
  "call_semantics": [
    {
      "caller": "MAIN-PARA",
      "callee": "1000-INITIALIZE",
      "inputs": [],
      "outputs": [
        "CURRENT-DATE",
        "CURRENT-YYDDD",
        "WS-OUTFL1-STATUS",
        "WS-OUTFL2-STATUS"
      ],
      "purpose": "Initializes the program by accepting current date and opening output files."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "2000-FIND-NEXT-AUTH-SUMMARY",
      "inputs": [
        "WS-END-OF-ROOT-SEG"
      ],
      "outputs": [
        "WS-NO-SUMRY-READ",
        "WS-AUTH-SMRY-PROC-CNT",
        "OPFIL1-REC",
        "ROOT-SEG-KEY",
        "WS-END-OF-ROOT-SEG"
      ],
      "purpose": "Reads the next authorization summary segment from IMS and processes it if valid."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "4000-FILE-CLOSE",
      "inputs": [
        "WS-OUTFL1-STATUS",
        "WS-OUTFL2-STATUS"
      ],
      "outputs": [],
      "purpose": "Closes the output files and displays error messages if closing fails."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "9999-ABEND",
      "inputs": [
        "WS-OUTFL1-STATUS"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an error occurs during file opening."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "9999-ABEND",
      "inputs": [
        "WS-OUTFL2-STATUS"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an error occurs during file opening."
    },
    {
      "caller": "2000-FIND-NEXT-AUTH-SUMMARY",
      "callee": "3000-FIND-NEXT-AUTH-DTL",
      "inputs": [
        "WS-END-OF-CHILD-SEG"
      ],
      "outputs": [
        "WS-END-OF-CHILD-SEG"
      ],
      "purpose": "Reads and processes child segment details for the current root segment until no more child segments are found."
    },
    {
      "caller": "2000-FIND-NEXT-AUTH-SUMMARY",
      "callee": "9999-ABEND",
      "inputs": [],
      "outputs": [],
      "purpose": "Terminates the program with RETURN-CODE set to 16 when an unexpected IMS status code is encountered during root segment retrieval."
    },
    {
      "caller": "3000-FIND-NEXT-AUTH-DTL",
      "callee": "9999-ABEND",
      "inputs": [],
      "outputs": [],
      "purpose": "Terminates the program with RETURN-CODE set to 16 when an unexpected IMS status code is encountered during child segment retrieval."
    }
  ],
  "flow_diagram": "flowchart TD\n    %% Title: PAUDBUNL.CBL\n    1000_EXIT[\"1000-EXIT\"]\n    1000_INITIALIZE[\"1000-INITIALIZE\"]\n    9999_ABEND[\"9999-ABEND\"]\n    2000_EXIT[\"2000-EXIT\"]\n    2000_FIND_NEXT_AUTH_SUMMARY[\"2000-FIND-NEXT-AUTH-SUMMARY\"]\n    3000_FIND_NEXT_AUTH_DTL[\"3000-FIND-NEXT-AUTH-DTL\"]\n    CBLTDLI__ext([\"CBLTDLI\"])\n    3000_EXIT[\"3000-EXIT\"]\n    4000_EXIT[\"4000-EXIT\"]\n    4000_FILE_CLOSE[\"4000-FILE-CLOSE\"]\n    9999_EXIT[\"9999-EXIT\"]\n    MAIN_PARA[\"MAIN-PARA\"]\n    1000_INITIALIZE --> 9999_ABEND\n    2000_FIND_NEXT_AUTH_SUMMARY --> 3000_FIND_NEXT_AUTH_DTL\n    2000_FIND_NEXT_AUTH_SUMMARY --> 9999_ABEND\n    2000_FIND_NEXT_AUTH_SUMMARY -.->|calls| CBLTDLI__ext\n    3000_FIND_NEXT_AUTH_DTL --> 9999_ABEND\n    3000_FIND_NEXT_AUTH_DTL -.->|calls| CBLTDLI__ext\n    MAIN_PARA --> 1000_INITIALIZE\n    MAIN_PARA --> 2000_FIND_NEXT_AUTH_SUMMARY\n    MAIN_PARA --> 4000_FILE_CLOSE"
}