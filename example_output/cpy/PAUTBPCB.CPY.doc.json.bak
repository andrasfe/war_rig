{
  "header": {
    "program_id": "PAUTBPCB",
    "file_name": "cpy/PAUTBPCB.CPY",
    "file_type": "COPYBOOK",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-25T15:28:48.076025",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This copybook defines the IMS Program Communication Block (PCB) structure PAUTBPCB used for DL/I database access to the PAUTB database. It includes fields for DBD name, segment level, PCB status, processing options, segment name, key feedback length, number of sensitive segments, and the key feedback buffer. The structure matches the standard IMS DB PCB layout for program-IMS communication.",
    "business_context": "IMS DL/I hierarchical database access control block for PAUTB database",
    "program_type": "UTILITY",
    "citations": [
      17
    ]
  },
  "inputs": [
    {
      "name": "PAUT-DBDNAME",
      "io_type": "OTHER",
      "description": "Database DBD name provided by IMS control region",
      "copybook": null,
      "citation": [
        18
      ]
    },
    {
      "name": "PAUT-PCB-PROCOPT",
      "io_type": "OTHER",
      "description": "Processing options from PSB definition, provided by IMS",
      "copybook": null,
      "citation": [
        21
      ]
    },
    {
      "name": "PAUT-KEYFB-NAME",
      "io_type": "OTHER",
      "description": "Key feedback area name/offset provided by IMS",
      "copybook": null,
      "citation": [
        24
      ]
    },
    {
      "name": "PAUT-NUM-SENSEGS",
      "io_type": "OTHER",
      "description": "Number of sensitive segments from PSB, provided by IMS",
      "copybook": null,
      "citation": [
        25
      ]
    }
  ],
  "outputs": [
    {
      "name": "PAUT-SEG-LEVEL",
      "io_type": "OTHER",
      "description": "Segment hierarchical level filled by IMS after retrieval call",
      "copybook": null,
      "citation": [
        19
      ]
    },
    {
      "name": "PAUT-PCB-STATUS",
      "io_type": "OTHER",
      "description": "Status code set by IMS after each DL/I call",
      "copybook": null,
      "citation": [
        20
      ]
    },
    {
      "name": "PAUT-SEG-NAME",
      "io_type": "OTHER",
      "description": "Name of the retrieved segment filled by IMS",
      "copybook": null,
      "citation": [
        23
      ]
    },
    {
      "name": "PAUT-KEYFB",
      "io_type": "OTHER",
      "description": "Key feedback buffer populated by IMS with concatenated keys",
      "copybook": null,
      "citation": [
        26
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": [
      "PAUTBPCB"
    ]
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Fields must conform to defined PIC sizes and types for IMS PCB compatibility",
      "logic_summary": "PIC clauses enforce data formats matching IMS expectations",
      "conditions": [
        "PAUT-DBDNAME PIC X(08)",
        "PAUT-PCB-STATUS PIC X(02)",
        "PAUT-KEYFB PIC X(255)"
      ],
      "citation": [
        18,
        20,
        26
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "IMS",
        "fields_used": [
          "PAUT-DBDNAME",
          "PAUT-PCB-PROCOPT",
          "PAUT-NUM-SENSEGS"
        ],
        "citation": [
          18,
          21,
          25
        ]
      }
    ],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "PAUTBPCB",
      "summary": null,
      "purpose": "This structure defines the complete IMS Database PCB at level 01, serving as the communication interface between the application program and IMS DL/I for the PAUTB database. It is typically referenced in the LINKAGE SECTION and addressed via the PCB pointer provided by IMS upon program entry. The primary purpose is to hold input control information from IMS/PSB and receive output feedback from DL/I calls such as GU, GN, ISRT. Inputs consumed are the pre-filled fields from IMS: PAUT-DBDNAME with the 8-character DBD name (line 18), PAUT-PCB-PROCOPT with 4-character processing options like 'GO  ' or 'GU  ' (line 21), PAUT-KEYFB-NAME as a 5-digit COMP offset to the key feedback area (line 24), and PAUT-NUM-SENSEGS indicating sensitive segment count (line 25). Outputs produced are fields updated by IMS after each DL/I call: PAUT-SEG-LEVEL with the 2-digit segment level (line 19), PAUT-PCB-STATUS with 2-character status codes (line 20), PAUT-SEG-NAME with the 8-character segment name (line 23), and PAUT-KEYFB with up to 255 bytes of key data (line 26). A FILLER field at line 22 reserves space per IMS PCB layout. No business logic, decisions, or validations are implemented here, as this is purely a data definition copybook; logic is in the consuming program. Error handling is not defined in this structure but relies on the program checking PAUT-PCB-STATUS for codes like spaces (success) or 'GE' (end of SSAs). This structure does not call any paragraphs or programs; it is used in EXEC DLI statements by name. The overall role is to enable safe database navigation and error detection in IMS batch or online programs.",
      "called_by": [],
      "calls": [],
      "citation": [
        17,
        26
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "PAUDBLOD",
          "line": 161,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/DBUNLDGS.CBL",
          "function": "DBUNLDGS",
          "line": 154,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "PAUDBUNL",
          "line": 150,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "PAUDBLOD",
          "line": 1,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/DBUNLDGS.CBL",
          "function": "DBUNLDGS",
          "line": 1,
          "call_type": "includes"
        },
        {
          "file": "/Users/andraslferenczi/war_rig/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "PAUDBUNL",
          "line": 1,
          "call_type": "includes"
        }
      ],
      "is_dead_code": true,
      "dead_code_reason": "Record layout 'PAUTBPCB' is never used by any program",
      "metadata": null
    }
  ],
  "error_handling": [],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [],
  "resolved_questions": [],
  "dead_code": [
    {
      "name": "PAUTBPCB",
      "artifact_type": "record_layout",
      "line": 1,
      "reason": "Record layout 'PAUTBPCB' is never used by any program"
    }
  ],
  "call_semantics": [],
  "flow_diagram": null
}