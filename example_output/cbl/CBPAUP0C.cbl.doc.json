{
  "header": {
    "program_id": "CBPAUP0C",
    "file_name": "CBPAUP0C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-24T17:46:08.902712",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This batch COBOL IMS program deletes expired pending authorization messages from the IMS database. It reads pending authorization summary and detail segments, checks if the authorization has expired based on a configurable expiry period, and deletes the detail segment if expired. If all detail segments for a summary are deleted, the summary segment is also deleted.",
    "business_context": "This program is part of the CardDemo application, specifically the authorization module, and is used to maintain the pending authorization database by removing expired records.",
    "program_type": "BATCH",
    "citations": [
      5,
      140,
      156
    ]
  },
  "inputs": [
    {
      "name": "SYSIN",
      "io_type": "PARAMETER",
      "description": "Contains parameters for expiry days, checkpoint frequency, checkpoint display frequency, and debug flag.",
      "copybook": null,
      "citation": [
        189
      ]
    },
    {
      "name": "PENDING-AUTH-SUMMARY",
      "io_type": "IMS_SEGMENT",
      "description": "Pending authorization summary segment (PAUTSUM0) containing summary information about pending authorizations.",
      "copybook": "CIPAUSMY",
      "citation": [
        225
      ]
    },
    {
      "name": "PENDING-AUTH-DETAILS",
      "io_type": "IMS_SEGMENT",
      "description": "Pending authorization detail segment (PAUTDTL1) containing detailed information about individual pending authorizations.",
      "copybook": "CIPAUDTY",
      "citation": [
        257
      ]
    }
  ],
  "outputs": [],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": [
      "IO-PCB-MASK",
      "PGM-PCB-MASK"
    ]
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "An authorization detail is considered expired if the difference between the current date and the authorization date is greater than or equal to the expiry days parameter.",
      "logic_summary": "Calculates the difference between the current date and the authorization date and compares it to the expiry days parameter.",
      "conditions": [
        "WS-DAY-DIFF >= WS-EXPIRY-DAYS"
      ],
      "citation": [
        284
      ]
    },
    {
      "rule_id": "BR002",
      "description": "If an expired authorization detail has an approved authorization response code, the approved authorization count and amount in the summary segment are decremented.",
      "logic_summary": "Checks PA-AUTH-RESP-CODE and decrements PA-APPROVED-AUTH-CNT and PA-APPROVED-AUTH-AMT if the code is '00'.",
      "conditions": [
        "PA-AUTH-RESP-CODE = '00'"
      ],
      "citation": [
        287,
        288,
        289
      ]
    },
    {
      "rule_id": "BR003",
      "description": "If an expired authorization detail has a declined authorization response code, the declined authorization count and amount in the summary segment are decremented.",
      "logic_summary": "Checks PA-AUTH-RESP-CODE and decrements PA-DECLINED-AUTH-CNT and PA-DECLINED-AUTH-AMT if the code is not '00'.",
      "conditions": [
        "PA-AUTH-RESP-CODE not = '00'"
      ],
      "citation": [
        290,
        291,
        292
      ]
    },
    {
      "rule_id": "BR004",
      "description": "A pending authorization summary record is deleted if both the approved and declined authorization counts are zero.",
      "logic_summary": "Checks if PA-APPROVED-AUTH-CNT and PA-DECLINED-AUTH-CNT are both less than or equal to zero.",
      "conditions": [
        "PA-APPROVED-AUTH-CNT <= 0 AND PA-APPROVED-AUTH-CNT <= 0"
      ],
      "citation": [
        156
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "SYSIN",
        "fields_used": [
          "P-EXPIRY-DAYS",
          "P-CHKP-FREQ",
          "P-CHKP-DIS-FREQ",
          "P-DEBUG-FLAG"
        ],
        "citation": [
          189
        ]
      },
      {
        "source": "PENDING-AUTH-SUMMARY",
        "fields_used": [
          "PA-ACCT-ID",
          "PA-APPROVED-AUTH-CNT",
          "PA-APPROVED-AUTH-AMT",
          "PA-DECLINED-AUTH-CNT",
          "PA-DECLINED-AUTH-AMT"
        ],
        "citation": [
          225
        ]
      },
      {
        "source": "PENDING-AUTH-DETAILS",
        "fields_used": [
          "PA-AUTH-DATE-9C",
          "PA-AUTH-RESP-CODE",
          "PA-TRANSACTION-AMT"
        ],
        "citation": [
          257
        ]
      }
    ],
    "writes_to": [],
    "transforms": [
      {
        "input_field": "PA-AUTH-DATE-9C",
        "output_field": "WS-AUTH-DATE",
        "transformation_description": "Calculates the authorization date by subtracting PA-AUTH-DATE-9C from 99999.",
        "citation": [
          280
        ]
      },
      {
        "input_field": "CURRENT-YYDDD, WS-AUTH-DATE",
        "output_field": "WS-DAY-DIFF",
        "transformation_description": "Calculates the difference between the current year/day and the authorization date.",
        "citation": [
          282
        ]
      }
    ]
  },
  "copybooks_used": [
    {
      "copybook_name": "CIPAUSMY",
      "purpose": "Defines the layout of the PENDING-AUTH-SUMMARY segment.",
      "location": "WORKING_STORAGE",
      "citation": 117
    },
    {
      "copybook_name": "CIPAUDTY",
      "purpose": "Defines the layout of the PENDING-AUTH-DETAILS segment.",
      "location": "WORKING_STORAGE",
      "citation": 121
    }
  ],
  "paragraphs": [
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "This is the main control paragraph of the program. It orchestrates the deletion of expired authorization details and summaries. It first calls 1000-INITIALIZE to set up the program environment. Then, it enters a loop that continues until an error occurs or the end of the authorization database is reached. Inside this loop, it retrieves the next authorization summary using 2000-FIND-NEXT-AUTH-SUMMARY. For each summary, it enters another loop to process authorization details, calling 3000-FIND-NEXT-AUTH-DTL to retrieve the next detail. It then calls 4000-CHECK-IF-EXPIRED to determine if the detail has expired. If expired, 5000-DELETE-AUTH-DTL is called to delete the detail. After processing all details for a summary, 6000-DELETE-AUTH-SUMMARY is called if both the approved and declined authorization counts are zero. Finally, 9000-TAKE-CHECKPOINT is called periodically to establish a restart point. The paragraph displays summary statistics before terminating.",
      "called_by": [],
      "calls": [
        "1000-INITIALIZE",
        "2000-FIND-NEXT-AUTH-SUMMARY"
      ],
      "citation": [
        136,
        180
      ],
      "outgoing_calls": [
        {
          "target": "1000-INITIALIZE",
          "call_type": "performs",
          "line": 138
        },
        {
          "target": "2000-FIND-NEXT-AUTH-SUMMARY",
          "call_type": "performs",
          "line": 140
        },
        {
          "target": "3000-FIND-NEXT-AUTH-DTL",
          "call_type": "performs",
          "line": 144
        },
        {
          "target": "4000-CHECK-IF-EXPIRED",
          "call_type": "performs",
          "line": 147
        },
        {
          "target": "5000-DELETE-AUTH-DTL",
          "call_type": "performs",
          "line": 150
        },
        {
          "target": "3000-FIND-NEXT-AUTH-DTL",
          "call_type": "performs",
          "line": 153
        },
        {
          "target": "6000-DELETE-AUTH-SUMMARY",
          "call_type": "performs",
          "line": 157
        },
        {
          "target": "9000-TAKE-CHECKPOINT",
          "call_type": "performs",
          "line": 161
        },
        {
          "target": "2000-FIND-NEXT-AUTH-SUMMARY",
          "call_type": "performs",
          "line": 165
        },
        {
          "target": "9000-TAKE-CHECKPOINT",
          "call_type": "performs",
          "line": 169
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-INITIALIZE",
      "summary": null,
      "purpose": "This paragraph initializes the program. It accepts the current date and day from the system and the program parameters from SYSIN. It then displays the program name, parameters, and current date. It validates the expiry days, checkpoint frequency, checkpoint display frequency, and debug flag parameters. If the expiry days parameter is not numeric, it defaults to 5. If the checkpoint frequency or display frequency parameters are spaces, 0, or low-values, they default to 5 and 10 respectively. If the debug flag is not 'Y', it defaults to 'N'.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        183,
        213
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "MAIN-PARA",
          "line": 161,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-FIND-NEXT-AUTH-SUMMARY",
      "summary": null,
      "purpose": "This paragraph retrieves the next pending authorization summary segment from the IMS database. It uses the EXEC DLI GN command with the PAUTSUM0 segment name. If the read is successful (DIBSTAT = '  '), it sets the NOT-END-OF-AUTHDB flag to TRUE, increments the summary read count (WS-NO-SUMRY-READ), increments the summary processed count (WS-AUTH-SMRY-PROC-CNT), and moves the account ID to WS-CURR-APP-ID. If the end of the database is reached (DIBSTAT = 'GB'), it sets the END-OF-AUTHDB flag to TRUE. If any other error occurs, it displays an error message and abends the program.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        216,
        244
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 240
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "MAIN-PARA",
          "line": 163,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3000-FIND-NEXT-AUTH-DTL",
      "summary": null,
      "purpose": "This paragraph retrieves the next pending authorization detail segment from the IMS database. It uses the EXEC DLI GNP command with the PAUTDTL1 segment name. If the read is successful (DIBSTAT = '  '), it sets the MORE-AUTHS flag to TRUE and increments the detail read count (WS-NO-DTL-READ). If the end of the parent is reached (DIBSTAT = 'GE' or 'GB'), it sets the NO-MORE-AUTHS flag to TRUE. If any other error occurs, it displays an error message and abends the program.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        248,
        274
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 270
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "2000-FIND-NEXT-AUTH-SUMMARY",
          "line": 235,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "MAIN-PARA",
          "line": 144,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "4000-CHECK-IF-EXPIRED",
      "summary": null,
      "purpose": "This paragraph checks if a pending authorization detail has expired. It calculates the authorization date by subtracting the PA-AUTH-DATE-9C field from 99999 and then calculates the difference between the current year/day and the authorization date. If the difference is greater than or equal to the expiry days parameter (WS-EXPIRY-DAYS), it sets the QUALIFIED-FOR-DELETE flag to TRUE. It then checks the authorization response code (PA-AUTH-RESP-CODE). If the code is '00' (approved), it decrements the approved authorization count and amount in the summary segment. Otherwise (declined), it decrements the declined authorization count and amount in the summary segment. If the authorization is not expired, it sets the NOT-QUALIFIED-FOR-DELETE flag to TRUE.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        277,
        300
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "MAIN-PARA",
          "line": 147,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5000-DELETE-AUTH-DTL",
      "summary": null,
      "purpose": "This paragraph deletes a pending authorization detail segment from the IMS database. It uses the EXEC DLI DLET command with the PAUTDTL1 segment name. If the delete is successful (DIBSTAT = SPACES), it increments the detail deleted count (WS-NO-DTL-DELETED). If the delete fails, it displays an error message and abends the program.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        303,
        325
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 320
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "MAIN-PARA",
          "line": 150,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "6000-DELETE-AUTH-SUMMARY",
      "summary": null,
      "purpose": "This paragraph deletes a pending authorization summary segment from the IMS database. It uses the EXEC DLI DLET command with the PAUTSUM0 segment name. If the delete is successful (DIBSTAT = SPACES), it increments the summary deleted count (WS-NO-SUMRY-DELETED). If the delete fails, it displays an error message and abends the program.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        328,
        349
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 345
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "MAIN-PARA",
          "line": 157,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9000-TAKE-CHECKPOINT",
      "summary": null,
      "purpose": "This paragraph takes an IMS checkpoint. It uses the EXEC DLI CHKP command with a checkpoint ID. If the checkpoint is successful (DIBSTAT = SPACES), it increments the checkpoint count (WS-NO-CHKP). If the checkpoint count reaches the checkpoint display frequency (P-CHKP-DIS-FREQ), it resets the checkpoint count and displays a checkpoint success message. If the checkpoint fails, it displays an error message and abends the program.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        352,
        374
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 369
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "MAIN-PARA",
          "line": 161,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "9999-ABEND",
      "summary": null,
      "purpose": "This paragraph handles program abends. It displays an abend message, sets the return code to 16, and terminates the program.",
      "called_by": [
        "2000-FIND-NEXT-AUTH-SUMMARY",
        "3000-FIND-NEXT-AUTH-DTL",
        "5000-DELETE-AUTH-DTL",
        "6000-DELETE-AUTH-SUMMARY",
        "9000-TAKE-CHECKPOINT"
      ],
      "calls": [],
      "citation": [
        377,
        386
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "1000-INITIALIZE",
          "line": 191,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "2000-FIND-NEXT-AUTH-SUMMARY",
          "line": 246,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBUNL.CBL",
          "function": "3000-FIND-NEXT-AUTH-DTL",
          "line": 282,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "2100-INSERT-ROOT-SEG",
          "line": 261,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "3100-INSERT-CHILD-SEG",
          "line": 313,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "3200-INSERT-IMS-CALL",
          "line": 335,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/DBUNLDGS.CBL",
          "function": "3100-INSERT-PARENT-SEG-GSAM",
          "line": 314,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/DBUNLDGS.CBL",
          "function": "3200-INSERT-CHILD-SEG-GSAM",
          "line": 333,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "5000-DELETE-AUTH-DTL",
          "line": 320,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "6000-DELETE-AUTH-SUMMARY",
          "line": 345,
          "call_type": "performs"
        },
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/CBPAUP0C.cbl",
          "function": "9000-TAKE-CHECKPOINT",
          "line": 369,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "AUTH SUMMARY READ FAILED",
      "action": "ABEND with code 16",
      "citation": [
        237,
        240
      ]
    },
    {
      "condition": "AUTH DETAIL READ FAILED",
      "action": "ABEND with code 16",
      "citation": [
        267,
        270
      ]
    },
    {
      "condition": "AUTH DETAIL DELETE FAILED",
      "action": "ABEND with code 16",
      "citation": [
        318,
        320
      ]
    },
    {
      "condition": "AUTH SUMMARY DELETE FAILED",
      "action": "ABEND with code 16",
      "citation": [
        343,
        345
      ]
    },
    {
      "condition": "CHKP FAILED",
      "action": "ABEND with code 16",
      "citation": [
        366,
        369
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [],
  "resolved_questions": [],
  "dead_code": [
    {
      "name": "9999-EXIT",
      "artifact_type": "paragraph",
      "line": 385,
      "reason": "Paragraph '9999-EXIT' is never PERFORMed or referenced by any other paragraph or program"
    }
  ],
  "call_semantics": [
    {
      "caller": "MAIN-PARA",
      "callee": "1000-INITIALIZE",
      "inputs": [
        "P-EXPIRY-DAYS",
        "P-CHKP-FREQ",
        "P-CHKP-DIS-FREQ",
        "P-DEBUG-FLAG"
      ],
      "outputs": [
        "WS-EXPIRY-DAYS",
        "P-CHKP-FREQ",
        "P-CHKP-DIS-FREQ",
        "P-DEBUG-FLAG",
        "CURRENT-DATE",
        "CURRENT-YYDDD"
      ],
      "purpose": "Initializes program variables including current date, expiry days, checkpoint frequency, and debug flag based on input parameters."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "2000-FIND-NEXT-AUTH-SUMMARY",
      "inputs": [
        "DEBUG-ON"
      ],
      "outputs": [
        "WS-NO-SUMRY-READ",
        "WS-AUTH-SMRY-PROC-CNT",
        "WS-CURR-APP-ID",
        "END-OF-AUTHDB",
        "NOT-END-OF-AUTHDB"
      ],
      "purpose": "Reads the next pending authorization summary segment from IMS and updates read counters and end-of-file status."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "3000-FIND-NEXT-AUTH-DTL",
      "inputs": [
        "DEBUG-ON"
      ],
      "outputs": [
        "WS-NO-DTL-READ",
        "MORE-AUTHS",
        "NO-MORE-AUTHS"
      ],
      "purpose": "Retrieves the next authorization detail segment from IMS and sets flags indicating whether more details exist."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "4000-CHECK-IF-EXPIRED",
      "inputs": [
        "PA-AUTH-DATE-9C",
        "CURRENT-YYDDD",
        "WS-EXPIRY-DAYS"
      ],
      "outputs": [
        "WS-AUTH-DATE",
        "WS-DAY-DIFF",
        "QUALIFIED-FOR-DELETE",
        "NOT-QUALIFIED-FOR-DELETE",
        "PA-APPROVED-AUTH-CNT",
        "PA-APPROVED-AUTH-AMT",
        "PA-DECLINED-AUTH-CNT",
        "PA-DECLINED-AUTH-AMT"
      ],
      "purpose": "Determines if an authorization detail is expired based on the current date and configured expiry days, and adjusts summary counts accordingly."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "5000-DELETE-AUTH-DTL",
      "inputs": [
        "DEBUG-ON",
        "PA-ACCT-ID"
      ],
      "outputs": [
        "WS-NO-DTL-DELETED"
      ],
      "purpose": "Deletes the current authorization detail segment from IMS and increments the deletion counter upon success."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "3000-FIND-NEXT-AUTH-DTL",
      "inputs": [
        "DEBUG-ON",
        "WS-NO-DTL-READ"
      ],
      "outputs": [
        "WS-NO-DTL-READ",
        "WS-MORE-AUTHS-FLAG"
      ],
      "purpose": "Reads the next pending authorization detail record from the IMS database and updates read count and flag indicating if more details exist."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "6000-DELETE-AUTH-SUMMARY",
      "inputs": [
        "DEBUG-ON",
        "PA-ACCT-ID"
      ],
      "outputs": [
        "WS-NO-SUMRY-DELETED"
      ],
      "purpose": "Deletes the current pending authorization summary record from the IMS database and increments the deletion counter upon success."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "9000-TAKE-CHECKPOINT",
      "inputs": [
        "WK-CHKPT-ID",
        "WS-NO-SUMRY-READ",
        "WS-CURR-APP-ID",
        "P-CHKP-DIS-FREQ",
        "WS-NO-CHKP"
      ],
      "outputs": [
        "WS-NO-CHKP"
      ],
      "purpose": "Takes an IMS checkpoint and displays progress information if the checkpoint frequency threshold has been reached."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "2000-FIND-NEXT-AUTH-SUMMARY",
      "inputs": [
        "DEBUG-ON",
        "WS-NO-SUMRY-READ",
        "WS-AUTH-SMRY-PROC-CNT"
      ],
      "outputs": [
        "WS-NO-SUMRY-READ",
        "WS-AUTH-SMRY-PROC-CNT",
        "WS-CURR-APP-ID",
        "WS-END-OF-AUTHDB-FLAG"
      ],
      "purpose": "Reads the next pending authorization summary record from the IMS database and updates counters, current app ID, and end-of-file status."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "9000-TAKE-CHECKPOINT",
      "inputs": [
        "WK-CHKPT-ID",
        "WS-NO-SUMRY-READ",
        "WS-CURR-APP-ID",
        "P-CHKP-DIS-FREQ",
        "WS-NO-CHKP"
      ],
      "outputs": [
        "WS-NO-CHKP"
      ],
      "purpose": "Takes an IMS checkpoint and displays progress information if the checkpoint frequency threshold has been reached."
    },
    {
      "caller": "2000-FIND-NEXT-AUTH-SUMMARY",
      "callee": "9999-ABEND",
      "inputs": [
        "WS-NO-SUMRY-READ",
        "DIBSTAT"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an unexpected IMS status code is encountered during authorization summary read."
    },
    {
      "caller": "3000-FIND-NEXT-AUTH-DTL",
      "callee": "9999-ABEND",
      "inputs": [
        "DIBSTAT",
        "PA-ACCT-ID",
        "WS-NO-DTL-READ"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an unexpected IMS status code is encountered during authorization detail read."
    },
    {
      "caller": "5000-DELETE-AUTH-DTL",
      "callee": "9999-ABEND",
      "inputs": [
        "DIBSTAT",
        "PA-ACCT-ID"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an authorization detail deletion fails due to an IMS error."
    },
    {
      "caller": "6000-DELETE-AUTH-SUMMARY",
      "callee": "9999-ABEND",
      "inputs": [
        "DIBSTAT",
        "PA-ACCT-ID"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when an authorization summary deletion fails due to an IMS error."
    },
    {
      "caller": "9000-TAKE-CHECKPOINT",
      "callee": "9999-ABEND",
      "inputs": [
        "DIBSTAT",
        "WS-NO-SUMRY-READ",
        "WS-CURR-APP-ID"
      ],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Abends the program with return code 16 when a checkpoint operation fails in IMS."
    }
  ],
  "flow_diagram": "flowchart TD\n    %% Title: CBPAUP0C.cbl\n    1000_EXIT[\"1000-EXIT\"]\n    1000_INITIALIZE[\"1000-INITIALIZE\"]\n    2000_EXIT[\"2000-EXIT\"]\n    2000_FIND_NEXT_AUTH_SUMMARY[\"2000-FIND-NEXT-AUTH-SUMMARY\"]\n    9999_ABEND[\"9999-ABEND\"]\n    3000_EXIT[\"3000-EXIT\"]\n    3000_FIND_NEXT_AUTH_DTL[\"3000-FIND-NEXT-AUTH-DTL\"]\n    4000_CHECK_IF_EXPIRED[\"4000-CHECK-IF-EXPIRED\"]\n    4000_EXIT[\"4000-EXIT\"]\n    5000_DELETE_AUTH_DTL[\"5000-DELETE-AUTH-DTL\"]\n    5000_EXIT[\"5000-EXIT\"]\n    6000_DELETE_AUTH_SUMMARY[\"6000-DELETE-AUTH-SUMMARY\"]\n    6000_EXIT[\"6000-EXIT\"]\n    9000_EXIT[\"9000-EXIT\"]\n    9000_TAKE_CHECKPOINT[\"9000-TAKE-CHECKPOINT\"]\n    9999_EXIT[\"9999-EXIT\"]\n    MAIN_PARA[\"MAIN-PARA\"]\n    2000_FIND_NEXT_AUTH_SUMMARY --> 9999_ABEND\n    3000_FIND_NEXT_AUTH_DTL --> 9999_ABEND\n    5000_DELETE_AUTH_DTL --> 9999_ABEND\n    6000_DELETE_AUTH_SUMMARY --> 9999_ABEND\n    9000_TAKE_CHECKPOINT --> 9999_ABEND\n    MAIN_PARA --> 1000_INITIALIZE\n    MAIN_PARA --> 2000_FIND_NEXT_AUTH_SUMMARY\n    MAIN_PARA --> 3000_FIND_NEXT_AUTH_DTL\n    MAIN_PARA --> 4000_CHECK_IF_EXPIRED\n    MAIN_PARA --> 5000_DELETE_AUTH_DTL\n    MAIN_PARA --> 6000_DELETE_AUTH_SUMMARY\n    MAIN_PARA --> 9000_TAKE_CHECKPOINT"
}