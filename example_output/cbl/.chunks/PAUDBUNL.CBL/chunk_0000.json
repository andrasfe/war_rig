{
  "batch_idx": 0,
  "total_batches": 2,
  "template": {
    "header": {
      "program_id": "PAUDBUNL",
      "file_name": "PAUDBUNL.CBL",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-24T17:32:19.036768",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "The COBOL program PAUDBUNL extracts authorization summary and detail information from an IMS database and writes it to two sequential output files. It reads authorization summary records and related detail records using IMS calls and writes them to OPFILE1 and OPFILE2 respectively.",
      "business_context": null,
      "program_type": "BATCH",
      "citations": [
        9,
        70,
        113
      ]
    },
    "inputs": [
      {
        "name": "PAUTBPCB",
        "io_type": "IMS_SEGMENT",
        "description": "IMS PCB used for database access. Contains status codes and segment information.",
        "copybook": null,
        "citation": [
          4,
          57,
          100
        ]
      },
      {
        "name": "PENDING-AUTH-SUMMARY",
        "io_type": "IMS_SEGMENT",
        "description": "Authorization summary segment read from the IMS database.",
        "copybook": null,
        "citation": [
          58,
          70
        ]
      },
      {
        "name": "PENDING-AUTH-DETAILS",
        "io_type": "IMS_SEGMENT",
        "description": "Authorization detail segment read from the IMS database.",
        "copybook": null,
        "citation": [
          101,
          112
        ]
      }
    ],
    "outputs": [
      {
        "name": "OPFILE1",
        "io_type": "FILE_SEQUENTIAL",
        "description": "Sequential file containing authorization summary records extracted from the IMS database.",
        "copybook": null,
        "citation": [
          31,
          76
        ]
      },
      {
        "name": "OPFILE2",
        "io_type": "FILE_SEQUENTIAL",
        "description": "Sequential file containing authorization detail records extracted from the IMS database.",
        "copybook": null,
        "citation": [
          39,
          113
        ]
      }
    ],
    "called_programs": [
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Interface to IMS DL/I to retrieve database segments.",
        "parameters": [
          "FUNC-GN",
          "PAUTBPCB",
          "PENDING-AUTH-SUMMARY",
          "ROOT-UNQUAL-SSA"
        ],
        "citation": 56
      },
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Interface to IMS DL/I to retrieve database segments.",
        "parameters": [
          "FUNC-GNP",
          "PAUTBPCB",
          "PENDING-AUTH-DETAILS",
          "CHILD-UNQUAL-SSA"
        ],
        "citation": 99
      },
      {
        "program_name": "IMSFUNCS",
        "call_type": "UNKNOWN",
        "purpose": "UNKNOWN",
        "parameters": [],
        "citation": 18
      },
      {
        "program_name": "CIPAUSMY",
        "call_type": "UNKNOWN",
        "purpose": "UNKNOWN",
        "parameters": [],
        "citation": 18
      },
      {
        "program_name": "CIPAUDTY",
        "call_type": "UNKNOWN",
        "purpose": "UNKNOWN",
        "parameters": [],
        "citation": 18
      },
      {
        "program_name": "PAUTBPCB",
        "call_type": "UNKNOWN",
        "purpose": "UNKNOWN",
        "parameters": [],
        "citation": 18
      }
    ],
    "calling_context": {
      "called_by": [],
      "entry_points": [
        "DLITCBL"
      ],
      "linkage_section": [
        "PAUTBPCB"
      ]
    },
    "business_rules": [],
    "data_flow": {
      "reads_from": [
        {
          "source": "PENDING-AUTH-SUMMARY",
          "fields_used": [
            "PA-ACCT-ID"
          ],
          "citation": [
            73
          ]
        },
        {
          "source": "PENDING-AUTH-DETAILS",
          "fields_used": [],
          "citation": [
            112
          ]
        }
      ],
      "writes_to": [
        {
          "destination": "OPFILE1",
          "fields_written": [
            "OPFIL1-REC"
          ],
          "citation": [
            76
          ]
        },
        {
          "destination": "OPFILE2",
          "fields_written": [
            "OPFIL2-REC"
          ],
          "citation": [
            113
          ]
        }
      ],
      "transforms": [
        {
          "input_field": "PA-ACCT-ID",
          "output_field": "ROOT-SEG-KEY",
          "transformation_description": "Moves the account ID from the pending authorization summary record to the root segment key.",
          "citation": [
            73
          ]
        },
        {
          "input_field": "PENDING-AUTH-SUMMARY",
          "output_field": "OPFIL1-REC",
          "transformation_description": "Moves the pending authorization summary record to the output file 1 record.",
          "citation": [
            70
          ]
        },
        {
          "input_field": "PENDING-AUTH-DETAILS",
          "output_field": "CHILD-SEG-REC",
          "transformation_description": "Moves the pending authorization details record to the child segment record.",
          "citation": [
            112
          ]
        }
      ]
    },
    "copybooks_used": [],
    "paragraphs": [
      {
        "paragraph_name": "PAUDBUNL",
        "summary": null,
        "purpose": "This is the program ID paragraph. It does not contain any executable code. It simply declares the program name as PAUDBUNL. It is the entry point for the program, but the actual processing starts in MAIN-PARA.",
        "called_by": [],
        "calls": [
          "IMSFUNCS",
          "CIPAUSMY",
          "CIPAUDTY",
          "PAUTBPCB"
        ],
        "citation": [
          18,
          18
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "MAIN-PARA",
        "summary": null,
        "purpose": "This paragraph serves as the main control flow for the program. It is the entry point when called via 'DLITCBL' using PAUTBPCB. It first performs 1000-INITIALIZE to set up the program environment, including opening output files and accepting the current date. Then, it enters a loop that continues until WS-END-OF-ROOT-SEG is set to 'Y', indicating the end of the root segment data. Inside the loop, it calls 2000-FIND-NEXT-AUTH-SUMMARY to retrieve and process authorization summary records. After processing all summary records, it calls 4000-FILE-CLOSE to close the output files before terminating the program with a GOBACK statement.",
        "called_by": [],
        "calls": [
          "1000-INITIALIZE",
          "2000-FIND-NEXT-AUTH-SUMMARY",
          "4000-FILE-CLOSE"
        ],
        "citation": [
          157,
          172
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-INITIALIZE",
        "summary": null,
        "purpose": "This paragraph initializes the program environment. It accepts the current date and day from the system. It then opens OPFILE1 and OPFILE2 for output. It checks the file status after each OPEN. If the file status is not spaces or '00', it displays an error message and performs 9999-ABEND to terminate the program. The purpose of this paragraph is to ensure that the output files are successfully opened before the program proceeds with data extraction and processing. The paragraph consumes no input data directly but relies on the system for date and day values. It produces the opened OPFILE1 and OPFILE2, or triggers an abend if the files cannot be opened.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [
          "9999-ABEND",
          "9999-ABEND"
        ],
        "citation": [
          173,
          202
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-EXIT",
        "summary": null,
        "purpose": "This paragraph serves as the exit point for the 1000-INITIALIZE paragraph. It contains a single EXIT statement, which returns control to the calling paragraph (MAIN-PARA). It does not perform any specific actions or modify any data. Its sole purpose is to provide a defined exit point for the 1000-INITIALIZE paragraph.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [],
        "citation": [
          203,
          206
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-FIND-NEXT-AUTH-SUMMARY",
        "summary": null,
        "purpose": "This paragraph retrieves the next authorization summary record from the IMS database. It initializes PAUT-PCB-STATUS and then calls CBLTDLI with FUNC-GN to retrieve the next PENDING-AUTH-SUMMARY segment using the ROOT-UNQUAL-SSA. It checks the PAUT-PCB-STATUS after the call. If the status is spaces, it adds 1 to WS-NO-SUMRY-READ and WS-AUTH-SMRY-PROC-CNT, moves the PENDING-AUTH-SUMMARY to OPFIL1-REC, initializes ROOT-SEG-KEY and CHILD-SEG-REC, moves PA-ACCT-ID to ROOT-SEG-KEY, and writes OPFIL1-REC to OPFILE1 if PA-ACCT-ID is numeric. Then it performs 3000-FIND-NEXT-AUTH-DTL until WS-END-OF-CHILD-SEG is 'Y'. If the PAUT-PCB-STATUS is 'GB', it sets END-OF-AUTHDB to true and moves 'Y' to WS-END-OF-ROOT-SEG. If the PAUT-PCB-STATUS is not spaces or 'GB', it displays an error message and performs 9999-ABEND. This paragraph is responsible for reading the root segment, handling end-of-data conditions, and calling the detail segment processing paragraph. It consumes the PAUTBPCB, PENDING-AUTH-SUMMARY, and ROOT-UNQUAL-SSA as input and produces OPFILE1-REC as output.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [
          "CBLTDLI",
          "3000-FIND-NEXT-AUTH-DTL",
          "9999-ABEND"
        ],
        "citation": [
          207,
          247
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-EXIT",
        "summary": null,
        "purpose": "This paragraph serves as the exit point for the 2000-FIND-NEXT-AUTH-SUMMARY paragraph. It contains a single EXIT statement, which returns control to the calling paragraph (MAIN-PARA). It does not perform any specific actions or modify any data. Its sole purpose is to provide a defined exit point for the 2000-FIND-NEXT-AUTH-SUMMARY paragraph.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [],
        "citation": [
          248,
          252
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-FIND-NEXT-AUTH-DTL",
        "summary": null,
        "purpose": "This paragraph retrieves the next authorization detail record from the IMS database. It calls CBLTDLI with FUNC-GNP to retrieve the next PENDING-AUTH-DETAILS segment using CHILD-UNQUAL-SSA. It checks the PAUT-PCB-STATUS after the call. If the status is spaces, it sets MORE-AUTHS to true, adds 1 to WS-NO-SUMRY-READ and WS-AUTH-SMRY-PROC-CNT, moves PENDING-AUTH-DETAILS to CHILD-SEG-REC, and writes CHILD-SEG-REC to OPFILE2. If the PAUT-PCB-STATUS is 'GE', it moves 'Y' to WS-END-OF-CHILD-SEG. If the PAUT-PCB-STATUS is not spaces or 'GE', it displays an error message and performs 9999-ABEND. Finally, it initializes PAUT-PCB-STATUS. This paragraph is responsible for reading the child segment and handling end-of-data conditions for the child segments. It consumes PAUTBPCB, PENDING-AUTH-DETAILS, and CHILD-UNQUAL-SSA as input and produces OPFILE2-REC as output.",
        "called_by": [
          "2000-FIND-NEXT-AUTH-SUMMARY"
        ],
        "calls": [
          "CBLTDLI",
          "9999-ABEND"
        ],
        "citation": [
          253,
          284
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-EXIT",
        "summary": null,
        "purpose": "This paragraph serves as the exit point for the 3000-FIND-NEXT-AUTH-DTL paragraph. It contains a single EXIT statement, which returns control to the calling paragraph (2000-FIND-NEXT-AUTH-SUMMARY). It does not perform any specific actions or modify any data. Its sole purpose is to provide a defined exit point for the 3000-FIND-NEXT-AUTH-DTL paragraph.",
        "called_by": [
          "2000-FIND-NEXT-AUTH-SUMMARY"
        ],
        "calls": [],
        "citation": [
          285,
          288
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "4000-FILE-CLOSE",
        "summary": null,
        "purpose": "This paragraph closes the output files OPFILE1 and OPFILE2. It displays a message indicating that the files are being closed. It then closes OPFILE1 and checks the WS-OUTFL1-STATUS. If the status is not spaces or '00', it displays an error message. It repeats the same process for OPFILE2 and WS-OUTFL2-STATUS. This paragraph ensures that the output files are properly closed after all data has been processed. It consumes no input data directly but relies on the file status variables. It produces closed OPFILE1 and OPFILE2.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [],
        "citation": [
          289,
          304
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "4000-EXIT",
        "summary": null,
        "purpose": "This paragraph serves as the exit point for the 4000-FILE-CLOSE paragraph. It contains a single EXIT statement, which returns control to the calling paragraph (MAIN-PARA). It does not perform any specific actions or modify any data. Its sole purpose is to provide a defined exit point for the 4000-FILE-CLOSE paragraph.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [],
        "citation": [
          305,
          307
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "WS-OUTFL1-STATUS NOT = SPACES OR '00'",
        "action": "ABEND with PERFORM 9999-ABEND",
        "citation": [
          187
        ]
      },
      {
        "condition": "WS-OUTFL2-STATUS NOT = SPACES OR '00'",
        "action": "ABEND with PERFORM 9999-ABEND",
        "citation": [
          195
        ]
      },
      {
        "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GB'",
        "action": "ABEND with PERFORM 9999-ABEND",
        "citation": [
          223
        ]
      },
      {
        "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GE'",
        "action": "ABEND with PERFORM 9999-ABEND",
        "citation": [
          266
        ]
      },
      {
        "condition": "WS-OUTFL1-STATUS NOT = SPACES OR '00'",
        "action": "DISPLAY ERROR MESSAGE",
        "citation": [
          273
        ]
      },
      {
        "condition": "WS-OUTFL2-STATUS NOT = SPACES OR '00'",
        "action": "DISPLAY ERROR MESSAGE",
        "citation": [
          279
        ]
      },
      {
        "condition": "WS-OUTFL1-STATUS NOT = SPACES OR '00'",
        "action": "DISPLAY ERROR MESSAGE",
        "citation": [
          293
        ]
      },
      {
        "condition": "WS-OUTFL2-STATUS NOT = SPACES OR '00'",
        "action": "DISPLAY ERROR MESSAGE",
        "citation": [
          300
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [],
    "open_questions": [
      {
        "question": "What is the purpose of the IMSFUNCS, CIPAUSMY, CIPAUDTY, and PAUTBPCB programs?",
        "context": "These programs are called in the PAUDBUNL paragraph, but their functionality is unclear from the code.",
        "suggestion": "Review external documentation or other source files to determine their purpose."
      },
      {
        "question": "What is the structure of the IMS segments PENDING-AUTH-SUMMARY and PENDING-AUTH-DETAILS?",
        "context": "The code reads these segments, but the fields within them are not defined in the provided code snippet.",
        "suggestion": "Review the copybooks associated with these segments to understand their structure."
      },
      {
        "question": "What is the purpose of the ROOT-UNQUAL-SSA and CHILD-UNQUAL-SSA?",
        "context": "These are used in the IMS calls, but their structure and content are not defined.",
        "suggestion": "Examine related copybooks or documentation to understand their purpose and structure."
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-24T10:32:19.050598"
}