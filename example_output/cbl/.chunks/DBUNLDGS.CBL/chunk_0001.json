{
  "batch_idx": 1,
  "total_batches": 2,
  "template": {
    "header": {
      "program_id": "DBUNLDGS",
      "file_name": "DBUNLDGS.CBL",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-24T17:36:55.439082",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "This COBOL program contains subroutines related to GSAM database operations, specifically inserting child segments and handling abends. It includes logic to call IMS DL/I functions for database interaction and error handling routines to terminate the program if database operations fail.",
      "business_context": null,
      "program_type": "SUBROUTINE",
      "citations": [
        3,
        12,
        30
      ]
    },
    "inputs": [
      {
        "name": "PADFLPCB",
        "io_type": "IMS_SEGMENT",
        "description": "The PCB (Program Communication Block) used for IMS database calls. It contains status information after a DL/I call.",
        "copybook": null,
        "citation": [
          4,
          12
        ]
      },
      {
        "name": "PENDING-AUTH-DETAILS",
        "io_type": "IMS_SEGMENT",
        "description": "Data structure containing the details of the child segment to be inserted into the GSAM database.",
        "copybook": null,
        "citation": [
          5
        ]
      },
      {
        "name": "FUNC-ISRT",
        "io_type": "PARAMETER",
        "description": "Parameter containing the DL/I function code for inserting a segment.",
        "copybook": null,
        "citation": [
          3
        ]
      }
    ],
    "outputs": [],
    "called_programs": [
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "To perform IMS DL/I database operations, specifically inserting a child segment into a GSAM database.",
        "parameters": [
          "FUNC-ISRT",
          "PADFLPCB",
          "PENDING-AUTH-DETAILS"
        ],
        "citation": 3
      }
    ],
    "calling_context": {
      "called_by": [],
      "entry_points": [],
      "linkage_section": []
    },
    "business_rules": [],
    "data_flow": {
      "reads_from": [
        {
          "source": "PADFLPCB",
          "fields_used": [
            "PADFL-PCB-STATUS"
          ],
          "citation": [
            12
          ]
        }
      ],
      "writes_to": [],
      "transforms": []
    },
    "copybooks_used": [],
    "paragraphs": [
      {
        "paragraph_name": "3200-INSERT-CHILD-SEG-GSAM",
        "summary": null,
        "purpose": "This paragraph is responsible for inserting a child segment into a GSAM database using IMS DL/I calls. It calls the 'CBLTDLI' program with the 'FUNC-ISRT' function code, passing the 'PADFLPCB' and 'PENDING-AUTH-DETAILS' as parameters. The 'PADFLPCB' contains the PCB (Program Communication Block) which holds status information about the DL/I call. After the call, it checks the 'PADFL-PCB-STATUS' field in the PCB to determine if the insertion was successful. If the status is not spaces, indicating an error, it displays error messages including the PCB status and the KFB area, and then performs the '9999-ABEND' paragraph to terminate the program. This paragraph consumes the data in 'PENDING-AUTH-DETAILS' and uses it to populate the new child segment. It does not directly produce any output files, but modifies the GSAM database.",
        "called_by": [],
        "calls": [
          "CBLTDLI",
          "9999-ABEND"
        ],
        "citation": [
          1,
          16
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3200-EXIT",
        "summary": null,
        "purpose": "This paragraph simply provides an exit point from the 3200-INSERT-CHILD-SEG-GSAM paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not consume any inputs or produce any outputs. It serves as a standard subroutine exit point.",
        "called_by": [],
        "calls": [],
        "citation": [
          18,
          19
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "4000-FILE-CLOSE",
        "summary": null,
        "purpose": "This paragraph is responsible for closing files. It displays a message 'CLOSING THE FILE' to the console. It does not specify which file is being closed, so the exact purpose cannot be determined from the code. It does not consume any specific input data, and its output is limited to the display message. It does not perform any error handling or call any other paragraphs.",
        "called_by": [],
        "calls": [],
        "citation": [
          21,
          23
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "4000-EXIT",
        "summary": null,
        "purpose": "This paragraph provides an exit point from the 4000-FILE-CLOSE paragraph. It contains only the EXIT statement, which returns control to the calling paragraph. It does not consume any inputs or produce any outputs. It serves as a standard subroutine exit point.",
        "called_by": [],
        "calls": [],
        "citation": [
          24,
          25
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9999-ABEND",
        "summary": null,
        "purpose": "This paragraph handles abnormal termination of the program. It displays the message 'DBUNLDGS ABENDING ...' to the console. It then sets the RETURN-CODE to 16, indicating an error condition, and executes a GOBACK statement to terminate the program and return control to the operating system. This paragraph is called when a critical error occurs, such as a failed database operation. It consumes no specific input data but sets the program's return code as its output. It does not call any other paragraphs.",
        "called_by": [
          "3200-INSERT-CHILD-SEG-GSAM"
        ],
        "calls": [],
        "citation": [
          27,
          33
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9999-EXIT",
        "summary": null,
        "purpose": "This paragraph provides an exit point from the 9999-ABEND paragraph, although it is not actually called within the 9999-ABEND paragraph itself. It contains only the EXIT statement, which would return control to the calling paragraph, but since 9999-ABEND executes a GOBACK, this paragraph is never reached. It does not consume any inputs or produce any outputs. It serves as a standard subroutine exit point, although it is currently unreachable.",
        "called_by": [],
        "calls": [],
        "citation": [
          35,
          36
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "PADFL-PCB-STATUS NOT EQUAL TO SPACES",
        "action": "DISPLAY error messages and PERFORM 9999-ABEND",
        "citation": [
          12,
          13,
          15
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [],
    "open_questions": [
      {
        "question": "Which file is being closed in 4000-FILE-CLOSE?",
        "context": "The code only displays a message without specifying the file.",
        "suggestion": "Examine calling programs or related documentation to identify the file being closed."
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-24T10:36:55.439932"
}