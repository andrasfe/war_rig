{
  "batch_idx": 0,
  "total_batches": 2,
  "template": {
    "header": {
      "program_id": "DBUNLDGS",
      "file_name": "cbl/DBUNLDGS.CBL",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-24T17:33:21.838435",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "The DBUNLDGS program extracts authorization summary and detail data from an IMS database and inserts it into a GSAM dataset. It reads authorization summaries and details, then inserts them into a GSAM file for reporting or archival purposes.",
      "business_context": "This program likely supports audit or reporting requirements by extracting authorization data from the operational IMS database.",
      "program_type": "BATCH",
      "citations": [
        4,
        11,
        57,
        100
      ]
    },
    "inputs": [
      {
        "name": "PAUTBPCB",
        "io_type": "IMS_SEGMENT",
        "description": "IMS database PCB for authorization data.",
        "copybook": null,
        "citation": [
          4,
          44,
          88
        ]
      },
      {
        "name": "PENDING-AUTH-SUMMARY",
        "io_type": "IMS_SEGMENT",
        "description": "Authorization summary segment from the IMS database.",
        "copybook": null,
        "citation": [
          45,
          57,
          124
        ]
      },
      {
        "name": "PENDING-AUTH-DETAILS",
        "io_type": "IMS_SEGMENT",
        "description": "Authorization detail segment from the IMS database.",
        "copybook": null,
        "citation": [
          89,
          100
        ]
      },
      {
        "name": "SYSIN",
        "io_type": "PARAMETER",
        "description": "Input parameters (commented out in the code).",
        "copybook": null,
        "citation": [
          26
        ]
      }
    ],
    "outputs": [
      {
        "name": "PASFLPCB",
        "io_type": "FILE_SEQUENTIAL",
        "description": "GSAM output file PCB.",
        "copybook": null,
        "citation": [
          5,
          123
        ]
      },
      {
        "name": "OPFIL1-REC",
        "io_type": "FILE_SEQUENTIAL",
        "description": "GSAM output file containing authorization summary records.",
        "copybook": null,
        "citation": [
          57
        ]
      },
      {
        "name": "CHILD-SEG-REC",
        "io_type": "FILE_SEQUENTIAL",
        "description": "GSAM output file containing authorization detail records.",
        "copybook": null,
        "citation": [
          100
        ]
      }
    ],
    "called_programs": [
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Performs IMS database calls to retrieve authorization data.",
        "parameters": [
          "FUNC-GN",
          "PAUTBPCB",
          "PENDING-AUTH-SUMMARY",
          "ROOT-UNQUAL-SSA"
        ],
        "citation": 43
      },
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Performs IMS database calls to retrieve authorization detail data.",
        "parameters": [
          "FUNC-GNP",
          "PAUTBPCB",
          "PENDING-AUTH-DETAILS",
          "CHILD-UNQUAL-SSA"
        ],
        "citation": 87
      },
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Performs IMS database calls to insert authorization summary data into GSAM.",
        "parameters": [
          "FUNC-ISRT",
          "PASFLPCB",
          "PENDING-AUTH-SUMMARY"
        ],
        "citation": 122
      }
    ],
    "calling_context": {
      "called_by": [],
      "entry_points": [
        "DLITCBL"
      ],
      "linkage_section": [
        "PAUTBPCB",
        "PASFLPCB",
        "PADFLPCB"
      ]
    },
    "business_rules": [
      {
        "rule_id": "BR001",
        "description": "Only process authorization summaries if the account ID is numeric.",
        "logic_summary": "Checks if PA-ACCT-ID is numeric before processing the authorization summary.",
        "conditions": [
          "IF PA-ACCT-ID IS NUMERIC"
        ],
        "citation": [
          62
        ]
      },
      {
        "rule_id": "BR002",
        "description": "The program terminates if the PAUT PCB status is not spaces or 'GB'.",
        "logic_summary": "Checks PAUT-PCB-STATUS for non-successful IMS call status.",
        "conditions": [
          "IF PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GB'"
        ],
        "citation": [
          74
        ]
      },
      {
        "rule_id": "BR003",
        "description": "The program terminates if the PAUT PCB status is not spaces or 'GE'.",
        "logic_summary": "Checks PAUT-PCB-STATUS for non-successful IMS call status.",
        "conditions": [
          "IF PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GE'"
        ],
        "citation": [
          110
        ]
      },
      {
        "rule_id": "BR004",
        "description": "The program terminates if the PASFL PCB status is not spaces.",
        "logic_summary": "Checks PASFL-PCB-STATUS for non-successful GSAM call status.",
        "conditions": [
          "IF PASFL-PCB-STATUS NOT EQUAL TO SPACES"
        ],
        "citation": [
          131
        ]
      }
    ],
    "data_flow": {
      "reads_from": [
        {
          "source": "PAUTBPCB",
          "fields_used": [
            "PAUT-PCB-STATUS",
            "PAUT-KEYFB",
            "PAUT-SEG-LEVEL",
            "PAUT-SEG-NAME"
          ],
          "citation": [
            53,
            70,
            75,
            76,
            110,
            111,
            112
          ]
        },
        {
          "source": "PENDING-AUTH-SUMMARY",
          "fields_used": [
            "PA-ACCT-ID"
          ],
          "citation": [
            60
          ]
        },
        {
          "source": "PASFLPCB",
          "fields_used": [
            "PASFL-PCB-STATUS",
            "PASFL-KEYFB",
            "PASFL-DBDNAME",
            "PASFL-PCB-PROCOPT"
          ],
          "citation": [
            131,
            132,
            133
          ]
        }
      ],
      "writes_to": [
        {
          "destination": "OPFIL1-REC",
          "fields_written": [
            "PENDING-AUTH-SUMMARY"
          ],
          "citation": [
            57
          ]
        },
        {
          "destination": "CHILD-SEG-REC",
          "fields_written": [
            "PENDING-AUTH-DETAILS"
          ],
          "citation": [
            100
          ]
        }
      ],
      "transforms": [
        {
          "input_field": "PENDING-AUTH-SUMMARY",
          "output_field": "OPFIL1-REC",
          "transformation_description": "Moves the authorization summary data to the output record.",
          "citation": [
            57
          ]
        },
        {
          "input_field": "PA-ACCT-ID",
          "output_field": "ROOT-SEG-KEY",
          "transformation_description": "Moves the account ID to the root segment key.",
          "citation": [
            60
          ]
        },
        {
          "input_field": "PENDING-AUTH-DETAILS",
          "output_field": "CHILD-SEG-REC",
          "transformation_description": "Moves the authorization detail data to the child segment record.",
          "citation": [
            100
          ]
        }
      ]
    },
    "copybooks_used": [],
    "paragraphs": [
      {
        "paragraph_name": "DBUNLDGS",
        "summary": null,
        "purpose": "This is the program entry point. It does not contain any logic, but rather serves as a container for the program. It calls several IMS functions (IMSFUNCS, CIPAUSMY, CIPAUDTY, PAUTBPCB, PASFLPCB, PADFLPCB) which are not defined in the provided code snippet, suggesting they are external routines or part of the IMS runtime environment. These functions are essential for interacting with the IMS database and managing program execution within the IMS environment. The program then returns control to the calling environment using the GOBACK statement.",
        "called_by": [],
        "calls": [],
        "citation": [
          1,
          18
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "MAIN-PARA",
        "summary": null,
        "purpose": "This paragraph serves as the main control loop of the program. It first performs 1000-INITIALIZE to set up the program environment. Then, it repeatedly performs 2000-FIND-NEXT-AUTH-SUMMARY until WS-END-OF-ROOT-SEG is set to 'Y', indicating the end of the authorization data. After processing all authorization summaries, it performs 4000-FILE-CLOSE to close the output file. The paragraph orchestrates the overall process of extracting and writing authorization data. It reads input from PAUTBPCB, PASFLPCB, and PADFLPCB. It writes output to OPFIL1-REC and CHILD-SEG-REC indirectly through called paragraphs. The main business logic is to iterate through authorization summaries and details, extracting and writing them to an output file.",
        "called_by": [],
        "calls": [
          "1000-INITIALIZE",
          "2000-FIND-NEXT-AUTH-SUMMARY",
          "4000-FILE-CLOSE"
        ],
        "citation": [
          3,
          18
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-INITIALIZE",
        "summary": null,
        "purpose": "This paragraph initializes the program environment. It accepts the current date and day from the system. It then displays messages to the console indicating the program is starting and displaying the current date. The commented out ACCEPT statement suggests that the program was originally intended to accept parameters from SYSIN, but this functionality is currently disabled. The purpose of this paragraph is to prepare the program for processing by setting up the necessary system variables and displaying initial messages. It consumes the system date and day. It produces console output. There is no business logic or error handling in this paragraph. It does not call any other paragraphs.",
        "called_by": [],
        "calls": [],
        "citation": [
          20,
          33
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-EXIT",
        "summary": null,
        "purpose": "This paragraph simply marks the exit point of the 1000-INITIALIZE paragraph. It contains only the EXIT statement and serves as a target for the THRU option in the PERFORM statement in MAIN-PARA. It does not perform any actions or contain any logic. It is a standard COBOL construct for defining the end of a performed section.",
        "called_by": [],
        "calls": [],
        "citation": [
          34,
          35
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-FIND-NEXT-AUTH-SUMMARY",
        "summary": null,
        "purpose": "This paragraph retrieves the next authorization summary record from the IMS database. It initializes PAUT-PCB-STATUS and then calls CBLTDLI with FUNC-GN to retrieve the next root segment (authorization summary). If the call is successful (PAUT-PCB-STATUS is spaces), it increments counters, moves the retrieved data to OPFIL1-REC, initializes ROOT-SEG-KEY and CHILD-SEG-REC, moves PA-ACCT-ID to ROOT-SEG-KEY, and calls 3100-INSERT-PARENT-SEG-GSAM to write the parent segment to the GSAM file. It then calls 3000-FIND-NEXT-AUTH-DTL to retrieve the child segments. If PAUT-PCB-STATUS is 'GB', it sets END-OF-AUTHDB to TRUE and WS-END-OF-ROOT-SEG to 'Y', indicating the end of the data. If PAUT-PCB-STATUS is neither spaces nor 'GB', it displays an error message and calls 9999-ABEND to terminate the program. This paragraph is the core logic for reading the root segment from IMS. It consumes data from the IMS database via CBLTDLI. It produces output to OPFIL1-REC and calls other paragraphs to write to the GSAM file. The business logic is to retrieve and process authorization summaries, handling different IMS call statuses. Error handling is performed by checking PAUT-PCB-STATUS and calling 9999-ABEND if an error occurs.",
        "called_by": [],
        "calls": [
          "CBLTDLI",
          "3100-INSERT-PARENT-SEG-GSAM",
          "3000-FIND-NEXT-AUTH-DTL",
          "9999-ABEND"
        ],
        "citation": [
          37,
          78
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-EXIT",
        "summary": null,
        "purpose": "This paragraph simply marks the exit point of the 2000-FIND-NEXT-AUTH-SUMMARY paragraph. It contains only the EXIT statement and serves as a target for the THRU option in the PERFORM statement in MAIN-PARA. It does not perform any actions or contain any logic. It is a standard COBOL construct for defining the end of a performed section.",
        "called_by": [],
        "calls": [],
        "citation": [
          80,
          81
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-FIND-NEXT-AUTH-DTL",
        "summary": null,
        "purpose": "This paragraph retrieves the next authorization detail record (child segment) from the IMS database. It calls CBLTDLI with FUNC-GNP to retrieve the next child segment. If the call is successful (PAUT-PCB-STATUS is spaces), it sets MORE-AUTHS to TRUE, increments counters, moves the retrieved data to CHILD-SEG-REC, and calls 3200-INSERT-CHILD-SEG-GSAM to write the child segment to the GSAM file. If PAUT-PCB-STATUS is 'GE', it sets NO-MORE-AUTHS to TRUE and WS-END-OF-CHILD-SEG to 'Y', indicating the end of the child segments for the current parent. If PAUT-PCB-STATUS is neither spaces nor 'GE', it displays an error message and calls 9999-ABEND to terminate the program. Finally, it initializes PAUT-PCB-STATUS. This paragraph retrieves and processes authorization details. It consumes data from the IMS database via CBLTDLI. It produces output to CHILD-SEG-REC and calls other paragraphs to write to the GSAM file. The business logic is to retrieve and process authorization details, handling different IMS call statuses. Error handling is performed by checking PAUT-PCB-STATUS and calling 9999-ABEND if an error occurs.",
        "called_by": [],
        "calls": [
          "CBLTDLI",
          "3200-INSERT-CHILD-SEG-GSAM",
          "9999-ABEND"
        ],
        "citation": [
          83,
          116
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-EXIT",
        "summary": null,
        "purpose": "This paragraph simply marks the exit point of the 3000-FIND-NEXT-AUTH-DTL paragraph. It contains only the EXIT statement and serves as a target for the THRU option in the PERFORM statement. It does not perform any actions or contain any logic. It is a standard COBOL construct for defining the end of a performed section.",
        "called_by": [],
        "calls": [],
        "citation": [
          117,
          118
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3100-INSERT-PARENT-SEG-GSAM",
        "summary": null,
        "purpose": "This paragraph inserts the parent segment (authorization summary) into the GSAM dataset. It calls CBLTDLI with FUNC-ISRT, using PASFLPCB and PENDING-AUTH-SUMMARY. If the GSAM call is not successful (PASFL-PCB-STATUS is not spaces), it displays an error message and calls 9999-ABEND to terminate the program. This paragraph is responsible for writing the parent segment to the GSAM file. It consumes data from PENDING-AUTH-SUMMARY. It produces output to the GSAM file. The business logic is to insert the parent segment into the GSAM file and handle potential errors. Error handling is performed by checking PASFL-PCB-STATUS and calling 9999-ABEND if an error occurs.",
        "called_by": [],
        "calls": [
          "CBLTDLI",
          "9999-ABEND"
        ],
        "citation": [
          120,
          135
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3100-EXIT",
        "summary": null,
        "purpose": "This paragraph simply marks the exit point of the 3100-INSERT-PARENT-SEG-GSAM paragraph. It contains only the EXIT statement and serves as a target for the THRU option in the PERFORM statement. It does not perform any actions or contain any logic. It is a standard COBOL construct for defining the end of a performed section.",
        "called_by": [],
        "calls": [],
        "citation": [
          137,
          138
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GB'",
        "action": "DISPLAY error message and PERFORM 9999-ABEND",
        "citation": [
          74,
          77
        ]
      },
      {
        "condition": "PAUT-PCB-STATUS NOT EQUAL TO SPACES AND 'GE'",
        "action": "DISPLAY error message and PERFORM 9999-ABEND",
        "citation": [
          110,
          113
        ]
      },
      {
        "condition": "PASFL-PCB-STATUS NOT EQUAL TO SPACES",
        "action": "DISPLAY error message and PERFORM 9999-ABEND",
        "citation": [
          131,
          134
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [],
    "open_questions": [
      {
        "question": "What is the purpose of the PADFLPCB parameter in the ENTRY statement?",
        "context": "The PADFLPCB parameter is used in the ENTRY statement, but its purpose is not clear from the code snippet. It is not used anywhere else in the provided code.",
        "suggestion": "Review the program's documentation or consult with the developers to understand the purpose of this parameter."
      },
      {
        "question": "What is the structure of the IMS segments (PENDING-AUTH-SUMMARY, PENDING-AUTH-DETAILS)?",
        "context": "The code uses these segments but their structure is not defined in the provided snippet. Understanding their structure is crucial for understanding the data being processed.",
        "suggestion": "Locate the copybooks that define these segments."
      },
      {
        "question": "What is the purpose of the IMSFUNCS, CIPAUSMY, CIPAUDTY functions?",
        "context": "These functions are called in the ENTRY statement, but their purpose is not clear from the code snippet.",
        "suggestion": "Review the program's documentation or consult with the developers to understand the purpose of these functions."
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-24T10:33:21.842416"
}