{
  "batch_idx": 0,
  "total_batches": 2,
  "template": {
    "header": {
      "program_id": "PAUDBLOD",
      "file_name": "cbl/PAUDBLOD.CBL",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-25T15:21:08.287398",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "PAUDBLOD is a batch utility that initializes IMS database access via PCB, opens input files for root and child segments, reads root segment records from INFILE1 and inserts them into IMS as PENDING-AUTH-SUMMARY using CBLTDLI ISRT calls, then reads child segment records from INFILE2 qualified by root key and inserts them as PENDING-AUTH-DETAILS, finally closing files.",
      "business_context": "Supports loading pending authorization summary and detail data into an IMS database for audit or transaction processing systems.",
      "program_type": "BATCH",
      "citations": [
        18,
        169,
        190,
        222,
        269
      ]
    },
    "inputs": [
      {
        "name": "INFILE1",
        "io_type": "FILE_SEQUENTIAL",
        "description": "Input file containing root segment records (INFIL1-REC mapped to PENDING-AUTH-SUMMARY)",
        "copybook": null,
        "citation": [
          190,
          222
        ]
      },
      {
        "name": "INFILE2",
        "io_type": "FILE_SEQUENTIAL",
        "description": "Input file containing child segment records (CHILD-SEG-REC mapped to PENDING-AUTH-DETAILS, qualified by ROOT-SEG-KEY)",
        "copybook": null,
        "citation": [
          190,
          269
        ]
      },
      {
        "name": "PAUTBPCB",
        "io_type": "IMS_SEGMENT",
        "description": "IMS PCB for database access and status feedback",
        "copybook": null,
        "citation": [
          169,
          208
        ]
      }
    ],
    "outputs": [
      {
        "name": "IMS Database (Root Segment)",
        "io_type": "IMS_SEGMENT",
        "description": "Inserted root segments as PENDING-AUTH-SUMMARY",
        "copybook": null,
        "citation": [
          242
        ]
      },
      {
        "name": "IMS Database (Child Segment)",
        "io_type": "IMS_SEGMENT",
        "description": "Inserted child segments as PENDING-AUTH-DETAILS qualified by root key",
        "copybook": null,
        "citation": [
          269
        ]
      }
    ],
    "called_programs": [
      {
        "program_name": "CBLTDLI",
        "call_type": "STATIC_CALL",
        "purpose": "Performs IMS DL/I insert (ISRT) operations for root and child segments",
        "parameters": [
          "FUNC-ISRT",
          "PAUTBPCB",
          "PENDING-AUTH-SUMMARY",
          "ROOT-UNQUAL-SSA"
        ],
        "citation": 207
      }
    ],
    "calling_context": {
      "called_by": [],
      "entry_points": [],
      "linkage_section": [
        "PAUTBPCB"
      ]
    },
    "business_rules": [
      {
        "rule_id": "BR001",
        "description": "File open and read status must be spaces or '00' to continue processing; otherwise display error and abend",
        "logic_summary": "IF WS-INFIL*-STATUS = SPACES OR '00' CONTINUE ELSE DISPLAY ERROR PERFORM 9999-ABEND",
        "conditions": [
          "WS-INFIL1-STATUS = SPACES OR '00'",
          "WS-INFIL2-STATUS = SPACES OR '00'",
          "WS-INFIL*-STATUS = '10' for EOF"
        ],
        "citation": [
          196,
          202,
          210,
          228,
          232,
          274,
          284
        ]
      },
      {
        "rule_id": "BR002",
        "description": "IMS PCB status must be spaces (success) or 'II' (duplicate ignored) after insert; otherwise abend",
        "logic_summary": "IF PAUT-PCB-STATUS NOT = SPACES AND 'II' DISPLAY ERROR PERFORM 9999-ABEND",
        "conditions": [
          "PAUT-PCB-STATUS = SPACES",
          "PAUT-PCB-STATUS = 'II'"
        ],
        "citation": [
          214,
          253,
          256,
          259
        ]
      },
      {
        "rule_id": "BR003",
        "description": "Child segment processing only if ROOT-SEG-KEY is numeric",
        "logic_summary": "IF ROOT-SEG-KEY IS NUMERIC MOVE to QUAL-SSA-KEY-VALUE and process",
        "conditions": [
          "ROOT-SEG-KEY IS NUMERIC"
        ],
        "citation": [
          269
        ]
      }
    ],
    "data_flow": {
      "reads_from": [
        {
          "source": "INFILE1",
          "fields_used": [
            "INFIL1-REC"
          ],
          "citation": [
            222
          ]
        },
        {
          "source": "INFILE2",
          "fields_used": [
            "CHILD-SEG-REC",
            "ROOT-SEG-KEY"
          ],
          "citation": [
            269
          ]
        }
      ],
      "writes_to": [
        {
          "destination": "IMS Database",
          "fields_written": [
            "PENDING-AUTH-SUMMARY",
            "PENDING-AUTH-DETAILS"
          ],
          "citation": [
            242,
            269
          ]
        }
      ],
      "transforms": [
        {
          "input_field": "INFIL1-REC",
          "output_field": "PENDING-AUTH-SUMMARY",
          "transformation_description": "Direct MOVE from input record to IMS insert buffer",
          "citation": [
            222
          ]
        },
        {
          "input_field": "ROOT-SEG-KEY",
          "output_field": "QUAL-SSA-KEY-VALUE",
          "transformation_description": "MOVE root key to qualified SSA for child insert parentage",
          "citation": [
            269
          ]
        },
        {
          "input_field": "CHILD-SEG-REC",
          "output_field": "PENDING-AUTH-DETAILS",
          "transformation_description": "Direct MOVE from input record to IMS child insert buffer",
          "citation": [
            269
          ]
        }
      ]
    },
    "copybooks_used": [],
    "paragraphs": [
      {
        "paragraph_name": "PAUDBLOD",
        "summary": null,
        "purpose": "This is the program entry point paragraph that establishes the IMS DL/I environment by issuing an ENTRY 'DLITCBL' USING PAUTBPCB, likely initializing IMS functions or PCBs. It consumes the PAUTBPCB linkage item as input for IMS access. It produces no direct outputs but sets up the environment for subsequent processing. There are no business logic decisions or error handling in this minimal paragraph. It calls IMSFUNCS, CIPAUSMY, CIPAUDTY indirectly via setup or not shown in AST, but transfers control to MAIN-PARA implicitly. Its role is to handle program invocation under IMS batch DL/I mode.",
        "called_by": [],
        "calls": [],
        "citation": [
          18,
          18
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "MAIN-PARA",
        "summary": null,
        "purpose": "This is the primary orchestration paragraph controlling the overall program flow for IMS data load. It begins by displaying a start message and performing 1000-INITIALIZE THRU 1000-EXIT to open input files INFILE1 and INFILE2 and initialize date variables. After initialization, it enters a loop performing 2000-READ-ROOT-SEG-FILE THRU 2000-EXIT UNTIL END-ROOT-SEG-FILE = 'Y', processing all root segments. It then enters another loop performing 3000-READ-CHILD-SEG-FILE THRU 3000-EXIT UNTIL END-CHILD-SEG-FILE = 'Y', processing child segments qualified by root keys. Upon EOF on both files, it performs 4000-FILE-CLOSE THRU 4000-EXIT for cleanup. No direct error handling here; relies on subordinate paragraphs to abend if needed. Finally, it executes GOBACK to terminate the program. This structure ensures sequential load of root then dependent child data into IMS.",
        "called_by": [
          "PAUDBLOD"
        ],
        "calls": [
          "1000-INITIALIZE",
          "2000-READ-ROOT-SEG-FILE",
          "3000-READ-CHILD-SEG-FILE",
          "4000-FILE-CLOSE"
        ],
        "citation": [
          169,
          189
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-INITIALIZE",
        "summary": null,
        "purpose": "This paragraph handles program initialization including date acceptance and file opens for input files. It consumes system date via ACCEPT CURRENT-DATE FROM DATE and CURRENT-YYDDD FROM DAY, and displays them for logging. It then opens INFILE1 and checks WS-INFIL1-STATUS; if not spaces or '00', displays error and performs 9999-ABEND (line 202). Similarly opens INFILE2 and checks WS-INFIL2-STATUS; if invalid, displays error and abends (line 210). Business logic enforces strict file availability before proceeding to data load. Error handling is immediate abend on open failure with no recovery. It calls 9999-ABEND on errors but no other paragraphs. Its role is to ensure environment readiness before main processing loops.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [
          "9999-ABEND"
        ],
        "citation": [
          190,
          217
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "1000-EXIT",
        "summary": null,
        "purpose": "This paragraph serves solely as the exit point for 1000-INITIALIZE, executing a simple EXIT statement to return control to the caller (MAIN-PARA). It consumes no data inputs and produces no outputs or modifications. There are no business logic decisions, conditions, loops, or error handling implemented. No paragraphs or programs are called from here. Its purpose is to provide a clean termination scope for THRU phrases, allowing potential future additions of cleanup code without altering caller logic. This is a standard COBOL pattern for modular paragraph flow control.",
        "called_by": [
          "1000-INITIALIZE"
        ],
        "calls": [],
        "citation": [
          218,
          221
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-READ-ROOT-SEG-FILE",
        "summary": null,
        "purpose": "This paragraph reads root segment records from INFILE1 and orchestrates their insertion into IMS. It performs a READ INFILE1 and checks WS-INFIL1-STATUS; if spaces or '00', MOVEs INFIL1-REC to PENDING-AUTH-SUMMARY and performs 2100-INSERT-ROOT-SEG THRU 2100-EXIT. If status '10' (EOF), sets END-ROOT-SEG-FILE to 'Y' to exit loop. Other statuses trigger display of read error (no abend here, but may propagate). Business logic branches on 5 decision points: successful read/process, EOF, or error. Error handling defers abend to subordinate 2100 if IMS insert fails. It calls 2100-INSERT-ROOT-SEG for delegation and relies on loop in MAIN-PARA. Its role is to loop-control root segment loading until EOF.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [
          "2100-INSERT-ROOT-SEG"
        ],
        "citation": [
          222,
          238
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2000-EXIT",
        "summary": null,
        "purpose": "This paragraph acts as the exit point for 2000-READ-ROOT-SEG-FILE, issuing EXIT to return to MAIN-PARA loop control. No inputs consumed or outputs produced. No decisions, validations, or error handling. No calls made. Ensures modular flow for THRU UNTIL construct.",
        "called_by": [
          "2000-READ-ROOT-SEG-FILE"
        ],
        "calls": [],
        "citation": [
          239,
          241
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2100-INSERT-ROOT-SEG",
        "summary": null,
        "purpose": "This paragraph performs the IMS insert for root segments using CALL 'CBLTDLI' with FUNC-ISRT, PAUTBPCB, PENDING-AUTH-SUMMARY, and ROOT-UNQUAL-SSA. It consumes PENDING-AUTH-SUMMARY from prior MOVE and PCB for access. Displays diagnostic messages around the call. Checks PAUT-PCB-STATUS post-call: spaces indicates success (displayed), 'II' indicates duplicate (logged), any other triggers display failure and PERFORM 9999-ABEND. Business logic has 4 decision points for status handling. Error handling abends on non-success/duplicate PCB status (lines 253,256,259). Calls CBLTDLI for insert and 9999-ABEND on error. Role: atomic IMS root insert with validation.",
        "called_by": [
          "2000-READ-ROOT-SEG-FILE"
        ],
        "calls": [
          "CBLTDLI",
          "9999-ABEND"
        ],
        "citation": [
          242,
          263
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "2100-EXIT",
        "summary": null,
        "purpose": "Exit point for 2100-INSERT-ROOT-SEG with simple EXIT statement. No data flow, logic, or calls. Provides scope termination.",
        "called_by": [
          "2100-INSERT-ROOT-SEG"
        ],
        "calls": [],
        "citation": [
          264,
          268
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-READ-CHILD-SEG-FILE",
        "summary": null,
        "purpose": "This paragraph reads child segment records from INFILE2, qualifies with root key, and delegates insert. Performs READ INFILE2; if WS-INFIL2-STATUS spaces/'00', checks if ROOT-SEG-KEY IS NUMERIC, then MOVE ROOT-SEG-KEY to QUAL-SSA-KEY-VALUE, MOVE CHILD-SEG-REC to PENDING-AUTH-DETAILS, and PERFORM 3100-INSERT-CHILD-SEG THRU 3100-EXIT. If status '10', sets END-CHILD-SEG-FILE 'Y'. Other statuses display read error. Modifies ROOT-SEG-KEY, QUAL-SSA-KEY-VALUE, CHILD-SEG-REC. 6 decision points: read success + numeric key, EOF, error. Error handling via subordinates. Calls 3100-INSERT-CHILD-SEG. Ensures child records linked to prior root.",
        "called_by": [
          "MAIN-PARA"
        ],
        "calls": [
          "3100-INSERT-CHILD-SEG"
        ],
        "citation": [
          269,
          289
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "3000-EXIT",
        "summary": null,
        "purpose": "Exit point for 3000-READ-CHILD-SEG-FILE with EXIT. Minimal, no logic.",
        "called_by": [
          "3000-READ-CHILD-SEG-FILE"
        ],
        "calls": [],
        "citation": [
          290,
          291
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "WS-INFIL1-STATUS NOT = SPACES OR '00' on OPEN/READ",
        "action": "DISPLAY error message and PERFORM 9999-ABEND",
        "citation": [
          202,
          228,
          232
        ]
      },
      {
        "condition": "WS-INFIL2-STATUS NOT = SPACES OR '00' on OPEN/READ",
        "action": "DISPLAY error message and PERFORM 9999-ABEND",
        "citation": [
          210,
          274,
          284
        ]
      },
      {
        "condition": "PAUT-PCB-STATUS NOT = SPACES AND 'II' after CBLTDLI",
        "action": "DISPLAY failure and PERFORM 9999-ABEND",
        "citation": [
          253
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [],
    "open_questions": [
      {
        "question": "Details of 3100-INSERT-CHILD-SEG, 3200-INSERT-IMS-CALL, 4000-FILE-CLOSE, 9999-ABEND paragraphs",
        "context": "AST snippet truncated; only referenced via PERFORM but not detailed",
        "suggestion": "Provide full AST or source for these paragraphs"
      },
      {
        "question": "Copybook definitions for INFIL1-REC, PENDING-AUTH-SUMMARY, etc.",
        "context": "Not visible in provided AST",
        "suggestion": "Analyze referenced copybooks"
      },
      {
        "question": "Exact called programs like IMSFUNCS, CIPAUSMY, CIPAUDTY, PAUTBPCB",
        "context": "Mentioned in outline but not in AST snippet",
        "suggestion": "Full source analysis"
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-25T08:21:08.289235"
}