{
  "batch_idx": 1,
  "total_batches": 2,
  "template": {
    "header": {
      "program_id": "CBPAUP0C",
      "file_name": "CBPAUP0C.cbl",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-24T17:37:09.809368",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "This COBOL program deletes authorization details and summary records from an IMS database. It also takes checkpoints to ensure recoverability.",
      "business_context": "This program likely supports a business process related to managing and purging pending authorization requests.",
      "program_type": "BATCH",
      "citations": [
        8,
        33,
        53
      ]
    },
    "inputs": [],
    "outputs": [],
    "called_programs": [],
    "calling_context": {
      "called_by": [],
      "entry_points": [],
      "linkage_section": []
    },
    "business_rules": [],
    "data_flow": {
      "reads_from": [],
      "writes_to": [],
      "transforms": []
    },
    "copybooks_used": [],
    "paragraphs": [
      {
        "paragraph_name": "5000-DELETE-AUTH-DTL",
        "summary": null,
        "purpose": "This paragraph deletes an authorization detail record from the IMS database. It first checks if debugging is enabled and displays the account ID if it is (lines 4-6). It then executes a DLI DELETE command to remove the PAUTDTL1 segment from the PENDING-AUTH-DETAILS using the PAUT-PCB-NUM (lines 8-11). After the delete operation, it checks the DIBSTAT to determine if the deletion was successful (line 13). If DIBSTAT is spaces, it increments the WS-NO-DTL-DELETED counter (line 14). If the deletion fails (DIBSTAT is not spaces), it displays an error message including the DIBSTAT and PA-ACCT-ID and then calls the 9999-ABEND paragraph to terminate the program (lines 16-18).",
        "called_by": [],
        "calls": [
          "9999-ABEND"
        ],
        "citation": [
          1,
          23
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "5000-EXIT",
        "summary": null,
        "purpose": "This paragraph simply exits the 5000-DELETE-AUTH-DTL paragraph, returning control to the calling paragraph. It contains only the EXIT statement (line 24).",
        "called_by": [],
        "calls": [],
        "citation": [
          23,
          25
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "6000-DELETE-AUTH-SUMMARY",
        "summary": null,
        "purpose": "This paragraph deletes an authorization summary record from the IMS database. It begins by checking if debugging is enabled and displaying the account ID if it is (lines 29-31). It then executes a DLI DELETE command to remove the PAUTSUM0 segment from the PENDING-AUTH-SUMMARY using the PAUT-PCB-NUM (lines 33-36). Following the delete operation, it checks the DIBSTAT to determine if the deletion was successful (line 38). If DIBSTAT is spaces, it increments the WS-NO-SUMRY-DELETED counter (line 39). If the deletion fails (DIBSTAT is not spaces), it displays an error message including the DIBSTAT and PA-ACCT-ID, and then calls the 9999-ABEND paragraph to terminate the program (lines 41-43).",
        "called_by": [],
        "calls": [
          "9999-ABEND"
        ],
        "citation": [
          26,
          48
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "6000-EXIT",
        "summary": null,
        "purpose": "This paragraph exits the 6000-DELETE-AUTH-SUMMARY paragraph, returning control to the calling paragraph. It consists solely of the EXIT statement (line 48).",
        "called_by": [],
        "calls": [],
        "citation": [
          47,
          49
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9000-TAKE-CHECKPOINT",
        "summary": null,
        "purpose": "This paragraph takes a checkpoint using the IMS CHKP call. It issues the EXEC DLI CHKP command with the ID WK-CHKPT-ID (lines 53-54). After the checkpoint call, it checks the DIBSTAT to determine if the checkpoint was successful (line 56). If DIBSTAT is spaces, it increments the WS-NO-CHKP counter (line 57). If WS-NO-CHKP is greater than or equal to P-CHKP-DIS-FREQ, it resets WS-NO-CHKP to 0 and displays a checkpoint success message including the WS-NO-SUMRY-READ and WS-CURR-APP-ID (lines 58-62). If the checkpoint fails (DIBSTAT is not spaces), it displays an error message including the DIBSTAT, WS-NO-SUMRY-READ, and WS-CURR-APP-ID, and then calls the 9999-ABEND paragraph to terminate the program (lines 64-67).",
        "called_by": [],
        "calls": [
          "9999-ABEND"
        ],
        "citation": [
          50,
          73
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9000-EXIT",
        "summary": null,
        "purpose": "This paragraph exits the 9000-TAKE-CHECKPOINT paragraph, returning control to the calling paragraph. It contains only the EXIT statement (line 73).",
        "called_by": [],
        "calls": [],
        "citation": [
          72,
          74
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9999-ABEND",
        "summary": null,
        "purpose": "This paragraph handles program termination due to an error. It displays a message indicating that CBPAUP0C is abending (line 78). It then sets the RETURN-CODE to 16 (line 80) and executes a GOBACK statement to terminate the program (line 81).",
        "called_by": [
          "5000-DELETE-AUTH-DTL",
          "6000-DELETE-AUTH-SUMMARY",
          "9000-TAKE-CHECKPOINT"
        ],
        "calls": [],
        "citation": [
          75,
          83
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      },
      {
        "paragraph_name": "9999-EXIT",
        "summary": null,
        "purpose": "This paragraph exits the 9999-ABEND paragraph. It contains only the EXIT statement (line 84). This paragraph is likely unreachable, since 9999-ABEND performs a GOBACK.",
        "called_by": [],
        "calls": [],
        "citation": [
          83,
          85
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "DIBSTAT NOT = SPACES during AUTH DETAIL DELETE",
        "action": "DISPLAY error message and ABEND",
        "citation": [
          16,
          18
        ]
      },
      {
        "condition": "DIBSTAT NOT = SPACES during AUTH SUMMARY DELETE",
        "action": "DISPLAY error message and ABEND",
        "citation": [
          41,
          43
        ]
      },
      {
        "condition": "DIBSTAT NOT = SPACES during CHECKPOINT",
        "action": "DISPLAY error message and ABEND",
        "citation": [
          64,
          67
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [],
    "open_questions": [
      {
        "question": "What is the purpose of the WK-CHKPT-ID?",
        "context": "The code uses WK-CHKPT-ID in the checkpoint call, but its origin and purpose are unclear.",
        "suggestion": "Examine the data definitions section to understand how WK-CHKPT-ID is defined and populated."
      },
      {
        "question": "What is the structure of PENDING-AUTH-DETAILS and PENDING-AUTH-SUMMARY?",
        "context": "The code deletes segments from these structures, but the structure itself is not defined in the snippet.",
        "suggestion": "Check the copybooks used by this program to find the definitions of these structures."
      },
      {
        "question": "What are the valid values for DIBSTAT?",
        "context": "The code checks if DIBSTAT is equal to spaces, but other possible values and their meanings are unknown.",
        "suggestion": "Consult IMS documentation to understand the possible values of DIBSTAT and their corresponding meanings."
      },
      {
        "question": "What is the purpose of the DEBUG-ON variable?",
        "context": "The code checks DEBUG-ON to display debug messages, but the origin and purpose of this variable are unclear.",
        "suggestion": "Examine the data definitions section to understand how DEBUG-ON is defined and populated."
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-24T10:37:09.810346"
}