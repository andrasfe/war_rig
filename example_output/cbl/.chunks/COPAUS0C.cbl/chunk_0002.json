{
  "batch_idx": 2,
  "total_batches": 3,
  "template": {
    "header": {
      "program_id": "COPAUS0C",
      "file_name": "COPAUS0C.cbl",
      "file_type": "COBOL",
      "analyzed_by": "WAR_RIG",
      "analyzed_at": "2026-02-24T17:42:01.146128",
      "iteration_count": 1,
      "final_status": null
    },
    "purpose": {
      "summary": "This COBOL program schedules a PSB (Program Specification Block) for IMS database interaction. It attempts to schedule the PSB and handles potential errors by displaying an error message on the screen.",
      "business_context": "This program likely supports an online transaction processing system that interacts with an IMS database.",
      "program_type": "ONLINE_CICS",
      "citations": [
        2,
        29
      ]
    },
    "inputs": [],
    "outputs": [],
    "called_programs": [
      {
        "program_name": "SEND-PAULST-SCREEN",
        "call_type": "STATIC_CALL",
        "purpose": "Displays an error message on the screen if the PSB scheduling fails.",
        "parameters": [],
        "citation": 29
      }
    ],
    "calling_context": {
      "called_by": [],
      "entry_points": [],
      "linkage_section": []
    },
    "business_rules": [
      {
        "rule_id": "BR001",
        "description": "If the PSB is scheduled more than once, it terminates the current PSB before scheduling it again.",
        "logic_summary": "Checks PSB-SCHEDULED-MORE-THAN-ONCE flag and executes TERM if true, followed by SCHD.",
        "conditions": [
          "IF PSB-SCHEDULED-MORE-THAN-ONCE"
        ],
        "citation": [
          7,
          11
        ]
      },
      {
        "rule_id": "BR002",
        "description": "If the PSB scheduling fails (STATUS-OK is false), it sets an error flag, constructs an error message, and displays it on the screen.",
        "logic_summary": "Checks STATUS-OK flag. If false, sets WS-ERR-FLG to 'Y', constructs WS-MESSAGE, and calls SEND-PAULST-SCREEN.",
        "conditions": [
          "IF STATUS-OK"
        ],
        "citation": [
          17,
          20,
          22,
          29
        ]
      }
    ],
    "data_flow": {
      "reads_from": [],
      "writes_to": [],
      "transforms": []
    },
    "copybooks_used": [
      {
        "copybook_name": "COPAU0AI",
        "purpose": "Likely defines the screen layout and data structures used by SEND-PAULST-SCREEN.",
        "location": "WORKING_STORAGE",
        "citation": 28
      }
    ],
    "paragraphs": [
      {
        "paragraph_name": "SCHEDULE-PSB",
        "summary": null,
        "purpose": "This paragraph is responsible for scheduling a Program Specification Block (PSB) for IMS database interaction. It first attempts to schedule the PSB using the DLI SCHD command, specifying the PSB name. The DIBSTAT variable is then moved to IMS-RETURN-CODE to capture the status of the scheduling operation. If the PSB has been scheduled more than once, the paragraph terminates the current PSB before scheduling it again. If the PSB scheduling is successful (STATUS-OK is true), it sets the IMS-PSB-SCHD flag to TRUE. Otherwise, it sets an error flag (WS-ERR-FLG), constructs an error message containing the IMS return code, and calls the SEND-PAULST-SCREEN program to display the error message on the screen. The paragraph also sets ACCTIDL of COPAU0AI to -1 before calling SEND-PAULST-SCREEN.",
        "called_by": [],
        "calls": [
          "SEND-PAULST-SCREEN"
        ],
        "citation": [
          1,
          31
        ],
        "outgoing_calls": [],
        "incoming_calls": [],
        "is_dead_code": false,
        "dead_code_reason": null,
        "metadata": null
      }
    ],
    "error_handling": [
      {
        "condition": "STATUS-OK is false (PSB scheduling fails)",
        "action": "Sets WS-ERR-FLG to 'Y', constructs an error message in WS-MESSAGE, sets ACCTIDL of COPAU0AI to -1, and calls SEND-PAULST-SCREEN to display the error.",
        "citation": [
          17,
          20,
          22,
          28,
          29
        ]
      }
    ],
    "sql_operations": [],
    "cics_operations": [
      {
        "command": "UNKNOWN",
        "resource": "SEND-PAULST-SCREEN",
        "purpose": "Likely sends a map to the terminal to display an error message.",
        "citation": 29
      }
    ],
    "open_questions": [
      {
        "question": "What is the exact purpose and structure of the COPAU0AI copybook?",
        "context": "The code references ACCTIDL OF COPAU0AI, suggesting it's related to screen display, but the copybook itself is not provided.",
        "suggestion": "Examine the COPAU0AI copybook to understand its fields and how they are used in the SEND-PAULST-SCREEN program."
      },
      {
        "question": "What is the purpose of setting ACCTIDL OF COPAU0AI to -1 before calling SEND-PAULST-SCREEN?",
        "context": "The code sets this field to -1 immediately before calling SEND-PAULST-SCREEN, but the reason is unclear without knowing the structure of COPAU0AI.",
        "suggestion": "Examine the COPAU0AI copybook and the SEND-PAULST-SCREEN program to understand how ACCTIDL is used and why it's being set to -1."
      },
      {
        "question": "What type of screen operation is SEND-PAULST-SCREEN performing?",
        "context": "The code calls SEND-PAULST-SCREEN, but the exact CICS command (e.g., SEND MAP) is not explicitly stated.",
        "suggestion": "Review the SEND-PAULST-SCREEN program to determine the specific CICS command being used to display the screen."
      }
    ],
    "resolved_questions": [],
    "dead_code": [],
    "call_semantics": [],
    "flow_diagram": null
  },
  "saved_at": "2026-02-24T10:42:01.150591"
}