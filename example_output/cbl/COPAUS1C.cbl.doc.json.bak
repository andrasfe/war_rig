{
  "header": {
    "program_id": "COPAUS1C",
    "file_name": "cbl/COPAUS1C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:12:29.184013",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "COPAUS1C is a CICS online transaction program that provides a detailed view of a selected pending authorization record from IMS database. It supports user interactions via BMS map including loading details on ENTER/PF keys, toggling fraud status on PF5, navigating to next record on PF8, and returning to summary view on PF3. Authorization details are read from IMS PAUTSUM0 root and PAUTDTL1 child segments, populated into output map COPAU1AO for display, with fraud updates via linked program.",
    "business_context": "CardDemo Authorization Module - displays and manages details of pending authorization messages including fraud flagging for account review.",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      3,
      4,
      5,
      36
    ]
  },
  "inputs": [
    {
      "name": "CARDDEMO-COMMAREA",
      "io_type": "CICS_COMMAREA",
      "description": "Communication area carrying account ID, selected PAU key, page info, fraud data from/to previous screens",
      "copybook": "COCOM01Y COPAU01",
      "citation": [
        171,
        167
      ]
    },
    {
      "name": "COPAU1AI",
      "io_type": "CICS_MAP",
      "description": "Input BMS map fields from user screen interactions like selected auth key",
      "copybook": "COPAU01",
      "citation": [
        400
      ]
    },
    {
      "name": "PAUTSUM0",
      "io_type": "IMS_SEGMENT",
      "description": "Pending Authorization Summary root segment qualified by account ID",
      "copybook": "CIPAUSMY",
      "citation": [
        439
      ]
    },
    {
      "name": "PAUTDTL1",
      "io_type": "IMS_SEGMENT",
      "description": "Pending Authorization Details child segment qualified by auth key",
      "copybook": "CIPAUDTY",
      "citation": [
        465,
        495
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU1AO",
      "io_type": "CICS_MAP",
      "description": "Output BMS map populated with auth details, header, error messages for screen display",
      "copybook": "COPAU01",
      "citation": [
        381,
        389
      ]
    },
    {
      "name": "PAUTDTL1",
      "io_type": "IMS_SEGMENT",
      "description": "Updated Pending Authorization Details segment with toggled fraud status",
      "copybook": "CIPAUDTY",
      "citation": [
        525
      ]
    },
    {
      "name": "CARDDEMO-COMMAREA",
      "io_type": "CICS_COMMAREA",
      "description": "Updated commarea returned to caller with current selected key and context",
      "copybook": "COCOM01Y COPAU01",
      "citation": [
        204
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "COPAUS2C",
      "call_type": "CICS_LINK",
      "purpose": "Handles fraud report/ removal processing and returns update status",
      "parameters": [
        "WS-FRAUD-DATA"
      ],
      "citation": 249
    },
    {
      "program_name": "COPAUS0C",
      "call_type": "CICS_XCTL",
      "purpose": "Transfers control back to authorization summary screen",
      "parameters": [
        "CARDDEMO-COMMAREA"
      ],
      "citation": 368
    }
  ],
  "calling_context": {
    "called_by": [
      "COPAUS0C"
    ],
    "entry_points": [
      "CPVD"
    ],
    "linkage_section": [
      "DFHCOMMAREA",
      "LK-COMMAREA"
    ]
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Authorization response status display: '00' is APPROVED ('A' green), else DECLINED ('D' red)",
      "logic_summary": "Check PA-AUTH-RESP-CODE, set AUTHRSPO and color field",
      "conditions": [
        "PA-AUTH-RESP-CODE = '00'"
      ],
      "citation": [
        311
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Fraud status toggle: If already confirmed, remove fraud flag; else report as fraud",
      "logic_summary": "Check PA-FRAUD-CONFIRMED, set opposite flag and call fraud program",
      "conditions": [
        "PA-FRAUD-CONFIRMED",
        "PA-FRAUD-REMOVED"
      ],
      "citation": [
        236
      ]
    },
    {
      "rule_id": "BR003",
      "description": "Decline reason lookup and display from static table",
      "logic_summary": "SEARCH table by PA-AUTH-RESP-REASON, format AUTHRSNO with code-description",
      "conditions": [
        "DECL-CODE = PA-AUTH-RESP-REASON"
      ],
      "citation": [
        318
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Input validation for numeric account ID and non-blank selected key before IMS read",
      "logic_summary": "Check CDEMO-ACCT-ID NUMERIC and CDEMO-CPVD-PAU-SELECTED not spaces/low-values",
      "conditions": [
        "CDEMO-ACCT-ID IS NUMERIC",
        "CDEMO-CPVD-PAU-SELECTED NOT = SPACES AND LOW-VALUES"
      ],
      "citation": [
        211
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "PENDING-AUTH-SUMMARY",
        "fields_used": [
          "PA-ACCT-ID",
          "PA-AUTHORIZATION-KEY"
        ],
        "citation": [
          436
        ]
      },
      {
        "source": "PENDING-AUTH-DETAILS",
        "fields_used": [
          "PA-CARD-NUM",
          "PA-AUTH-ORIG-DATE",
          "PA-AUTH-ORIG-TIME",
          "PA-APPROVED-AMT",
          "PA-AUTH-RESP-CODE",
          "PA-AUTH-RESP-REASON",
          "PA-PROCESSING-CODE",
          "PA-FRAUD-CONFIRMED"
        ],
        "citation": [
          295
        ]
      },
      {
        "source": "CARDDEMO-COMMAREA",
        "fields_used": [
          "CDEMO-ACCT-ID",
          "CDEMO-CPVD-PAU-SELECTED",
          "CDEMO-CUST-ID"
        ],
        "citation": [
          213
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "COPAU1AO",
        "fields_written": [
          "CARDNUMO",
          "AUTHDTO",
          "AUTHTMO",
          "AUTHAMTO",
          "AUTHRSPO",
          "AUTHRSNO"
        ],
        "citation": [
          295
        ]
      },
      {
        "destination": "PENDING-AUTH-DETAILS",
        "fields_written": [
          "PA-FRAUD-CONFIRMED",
          "PA-FRAUD-REMOVED",
          "PA-FRAUD-RPT-DATE"
        ],
        "citation": [
          522
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PA-AUTH-ORIG-DATE",
        "output_field": "AUTHDTO",
        "transformation_description": "Reformat YYMMDD to MM/DD/YY using WS-CURDATE-MM-DD-YY",
        "citation": [
          297
        ]
      },
      {
        "input_field": "PA-AUTH-ORIG-TIME",
        "output_field": "AUTHTMO",
        "transformation_description": "Reformat HHMMSS to HH:MM:SS",
        "citation": [
          303
        ]
      },
      {
        "input_field": "PA-AUTH-RESP-REASON",
        "output_field": "AUTHRSNO",
        "transformation_description": "Lookup description from WS-DECLINE-REASON-TAB, format code-DESC",
        "citation": [
          325
        ]
      },
      {
        "input_field": "PA-CARD-EXPIRY-DATE",
        "output_field": "CRDEXPO",
        "transformation_description": "Reformat YYMM to YY/MM",
        "citation": [
          336
        ]
      }
    ]
  },
  "copybooks_used": [
    {
      "copybook_name": "COCOM01Y",
      "purpose": "Defines CARDDEMO-COMMAREA structure including CPVD info, auth keys array, page num",
      "location": "WORKING_STORAGE",
      "citation": 109
    },
    {
      "copybook_name": "COPAU01",
      "purpose": "Defines BMS map structures COPAU1AI/AO for auth detail view input/output",
      "location": "WORKING_STORAGE",
      "citation": 122
    },
    {
      "copybook_name": "CIPAUSMY",
      "purpose": "Defines PENDING-AUTH-SUMMARY IMS root segment layout",
      "location": "WORKING_STORAGE",
      "citation": 142
    },
    {
      "copybook_name": "CIPAUDTY",
      "purpose": "Defines PENDING-AUTH-DETAILS IMS child segment layout",
      "location": "WORKING_STORAGE",
      "citation": 146
    },
    {
      "copybook_name": "COTTL01Y",
      "purpose": "Screen titles like CCDA-TITLE01/02",
      "location": "WORKING_STORAGE",
      "citation": 126
    },
    {
      "copybook_name": "CSDAT01Y",
      "purpose": "Current date working variables WS-CURDATE-*",
      "location": "WORKING_STORAGE",
      "citation": 129
    },
    {
      "copybook_name": "CSMSG01Y",
      "purpose": "Common messages like CCDA-MSG-INVALID-KEY",
      "location": "WORKING_STORAGE",
      "citation": 132
    },
    {
      "copybook_name": "DFHAID",
      "purpose": "CICS AID constants like DFHENTER, DFHPF3",
      "location": "WORKING_STORAGE",
      "citation": 148
    },
    {
      "copybook_name": "DFHBMSCA",
      "purpose": "BMS color constants DFHGREEN, DFHRED",
      "location": "WORKING_STORAGE",
      "citation": 150
    }
  ],
  "paragraphs": [
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "This is the primary entry point paragraph that orchestrates the entire program flow for the CPVD transaction. It initializes flags and messages, then checks EIBCALEN to distinguish cold start from reentry: on cold start (EIBCALEN=0), it initializes commarea and XCTLs back to summary screen COPAUS0C. On reentry, it loads commarea from DFHCOMMAREA, clears fraud data, and if first reenter sets reenter flag and performs PROCESS-ENTER-KEY to load details before sending screen. Otherwise, it receives the map, evaluates EIBAID to dispatch: ENTER/PF8/PF5 process specific actions then send screen; PF3 returns to summary; other keys treat as enter but show invalid key message. It consumes EIB fields (EIBCALEN, EIBAID), commarea, and map inputs, producing updated commarea and screen sends. Business logic handles transaction navigation and reentry states via CDEMO-PGM-REENTER flag. Errors are indirectly handled via subordinate paragraphs. After dispatch, it always EXEC CICS RETURN with TRANSID CPVD and updated commarea. Calls subordinate paragraphs based on AID and state.",
      "called_by": [],
      "calls": [
        "PROCESS-ENTER-KEY",
        "SEND-AUTHVIEW-SCREEN",
        "RETURN-TO-PREV-SCREEN",
        "RECEIVE-AUTHVIEW-SCREEN",
        "MARK-AUTH-FRAUD",
        "PROCESS-PF8-KEY"
      ],
      "citation": [
        157,
        206
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-ENTER-KEY",
      "summary": null,
      "purpose": "This paragraph handles the default action for ENTER key or invalid AID, validating and loading the selected authorization record for display. It clears the input map COPAU1AO to low-values, checks if CDEMO-ACCT-ID is numeric and CDEMO-CPVD-PAU-SELECTED is valid (not spaces/low-values), moving them to WS-ACCT-ID/WS-AUTH-KEY if so, then performs READ-AUTH-RECORD to fetch IMS segments. If PSB scheduled, it unschedules and syncpoints. If validation fails, sets ERR-FLG-ON. Always performs POPULATE-AUTH-DETAILS to format data into output map regardless of error. Inputs consumed: commarea fields CDEMO-ACCT-ID, CDEMO-CPVD-PAU-SELECTED. Outputs produced: WS-*-fields, populated map fields, IMS PCB state. Business logic enforces numeric acct and non-blank key before DB access to prevent invalid reads. No direct error handling beyond flag set; relies on populate to skip on error. Calls READ-AUTH-RECORD for data fetch and POPULATE-AUTH-DETAILS for formatting.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "READ-AUTH-RECORD",
        "POPULATE-AUTH-DETAILS",
        "TAKE-SYNCPOINT"
      ],
      "citation": [
        208,
        229
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "MARK-AUTH-FRAUD",
      "summary": null,
      "purpose": "This paragraph toggles the fraud status on PF5 keypress by reading the current auth record, flipping the flag, calling fraud program, and updating IMS if successful. It moves commarea acct/selected key to WS-*, performs READ-AUTH-RECORD, then if PA-FRAUD-CONFIRMED sets remove else sets report fraud flag. Prepares WS-FRAUD-DATA with record/cust/acct, LINKs to COPAUS2C. If link normal and update success, performs UPDATE-AUTH-DETAILS; else rolls back and sets message from fraud msg. Updates selected key from PA- and repopulates details. Inputs: commarea CDEMO-ACCT-ID/CPVD-PAU-SELECTED/CUST-ID, IMS details. Outputs: updated WS-FRAUD-DATA param, IMS segment via update, message. Business logic implements toggle: confirmed->remove, else->report. Error handling: rollback on link error or fraud update fail, set err flag indirectly. Calls READ-AUTH-RECORD, LINK COPAUS2C, UPDATE-AUTH-DETAILS if success, ROLL-BACK/POPULATE on error/success.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "READ-AUTH-RECORD",
        "UPDATE-AUTH-DETAILS",
        "ROLL-BACK",
        "POPULATE-AUTH-DETAILS"
      ],
      "citation": [
        230,
        267
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-PF8-KEY",
      "summary": null,
      "purpose": "Handles PF8 next record navigation by reading current record then GNP next child segment, updating selected key if not EOF. Moves commarea acct/selected to WS-*, READ-AUTH-RECORD (fetches parent+child), then READ-NEXT-AUTH-RECORD for next details. If PSB sched, unsched+syncpoint. If AUTHS-EOF, sets no-erase, message 'last auth'; else moves PA-AUTH-KEY to selected and populates. Inputs: commarea keys, current IMS position. Outputs: next PENDING-AUTH-DETAILS, updated selected key in commarea, message on EOF. Business logic checks EOF flag post-GNP to detect end of siblings. Error handling via read paras. Calls READ-AUTH-RECORD, READ-NEXT-AUTH-RECORD, POPULATE-AUTH-DETAILS, TAKE-SYNCPOINT.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "READ-AUTH-RECORD",
        "READ-NEXT-AUTH-RECORD",
        "POPULATE-AUTH-DETAILS",
        "TAKE-SYNCPOINT"
      ],
      "citation": [
        268,
        290
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "POPULATE-AUTH-DETAILS",
      "summary": null,
      "purpose": "Formats and moves IMS auth details fields into output map COPAU1AO fields for screen display, skipping if ERR-FLG-ON. Consumes PENDING-AUTH-DETAILS fields like PA-CARD-NUM, dates, amounts, codes, fraud status. Produces map fields: CARDNUMO, AUTHDTO/AUTHTMO (reformatted), AUTHAMTO, AUTHRSPO/RSNO (status/reason lookup/color), AUTHCDO etc., merchant info, fraud date if flagged. Business logic: conditional status A/D with color, SEARCH decline table for desc, date/time/expiry reformats, fraud display if confirmed/removed. No direct reads/writes/ errors; validation via ERR-FLG-OFF. No calls.",
      "called_by": [
        "PROCESS-ENTER-KEY",
        "MARK-AUTH-FRAUD",
        "PROCESS-PF8-KEY"
      ],
      "calls": [],
      "citation": [
        291,
        358
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "RETURN-TO-PREV-SCREEN",
      "summary": null,
      "purpose": "Prepares commarea for return to authorization summary screen COPAUS0C via XCTL. Sets CDEMO-FROM-*-fields to current tranid/program/context, CDEMO-PGM-ENTER true, then XCTL PROGRAM(CDEMO-TO-PROGRAM=COPAUS0C) with commarea. Inputs: WS-PGM-AUTH-SMRY, WS-CICS-TRANID. Outputs: modified commarea. Business logic: standard CICS navigation backtrack. No error handling. No subordinate calls.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        360,
        371
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "SEND-AUTHVIEW-SCREEN",
      "summary": null,
      "purpose": "Sends the populated COPAU1AO map to terminal with cursor, erasing if SEND-ERASE-YES. First performs POPULATE-HEADER-INFO for titles/date/time/tranid/program. Moves WS-MESSAGE to map error field, -1 to CARDNUML (attr?). Conditional ERASE on flag. Inputs: populated map, WS-MESSAGE, flags. Outputs: screen display. Business logic: erase on initial loads. No errors. Calls POPULATE-HEADER-INFO.",
      "called_by": [
        "MAIN-PARA",
        "PROCESS-ENTER-KEY",
        "MARK-AUTH-FRAUD",
        "PROCESS-PF8-KEY",
        "READ-AUTH-RECORD"
      ],
      "calls": [
        "POPULATE-HEADER-INFO"
      ],
      "citation": [
        373,
        396
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "RECEIVE-AUTHVIEW-SCREEN",
      "summary": null,
      "purpose": "Receives user input from COPAU1A map into COPAU1AI with NOHANDLE. Simple CICS RECEIVE. Inputs: terminal screen. Outputs: COPAU1AI fields. No logic/conditions/errors/calls.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        398,
        406
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "POPULATE-HEADER-INFO",
      "summary": null,
      "purpose": "Populates common header fields in COPAU1AO: titles from copy, tranid/program names, current date/time reformatted. Calls FUNCTION CURRENT-DATE to WS-CURDATE-DATA, formats MM/DD/YY and HH:MM:SS. Inputs: WS-*, copies. Outputs: TITLE01O/02O, TRNNAMEO etc. No conditions/errors/calls.",
      "called_by": [
        "SEND-AUTHVIEW-SCREEN"
      ],
      "calls": [],
      "citation": [
        409,
        429
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "READ-AUTH-RECORD",
      "summary": null,
      "purpose": "Schedules PSB if needed, then GU root PAUTSUM0 by acct-id SSA, if OK GNP child PAUTDTL1 by auth-key. Sets EOF flags on status, error on other: builds WS-MESSAGE with IMS code and sends screen. Inputs: WS-ACCT-ID/AUTH-KEY to SSAs. Outputs: PENDING-AUTH-*-segments, flags, message on err. Business logic: qualified reads parent->child. Errors: send screen+msg, no abend. Calls SCHEDULE-PSB, SEND-AUTHVIEW-SCREEN on err.",
      "called_by": [
        "PROCESS-ENTER-KEY",
        "MARK-AUTH-FRAUD",
        "PROCESS-PF8-KEY"
      ],
      "calls": [
        "SCHEDULE-PSB",
        "SEND-AUTHVIEW-SCREEN"
      ],
      "citation": [
        431,
        491
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "READ-NEXT-AUTH-RECORD",
      "summary": null,
      "purpose": "Performs unqualified GNP next PAUTDTL1 sibling from current PCB position, sets flags on status, error msg+send screen. Inputs: current PCB. Outputs: next PENDING-AUTH-DETAILS, flags/message. Business logic: sequential next for PF8. Errors: send screen.",
      "called_by": [
        "PROCESS-PF8-KEY"
      ],
      "calls": [
        "SEND-AUTHVIEW-SCREEN"
      ],
      "citation": [
        493,
        518
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "UPDATE-AUTH-DETAILS",
      "summary": null,
      "purpose": "REPL current PAUTDTL1 with WS-FRAUD-AUTH-RECORD (updated fraud), syncpoint if OK with success msg based on remove/report; else rollback, err msg+send screen. Inputs: WS-FRAUD-*. Outputs: updated IMS segment, message. Business logic: post-fraud toggle update. Errors: rollback+screen.",
      "called_by": [
        "MARK-AUTH-FRAUD"
      ],
      "calls": [
        "TAKE-SYNCPOINT",
        "ROLL-BACK",
        "SEND-AUTHVIEW-SCREEN"
      ],
      "citation": [
        520,
        552
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "TAKE-SYNCPOINT",
      "summary": null,
      "purpose": "Exec CICS SYNCPOINT to commit changes. No inputs/outputs/logic.",
      "called_by": [
        "PROCESS-ENTER-KEY",
        "PROCESS-PF8-KEY",
        "UPDATE-AUTH-DETAILS"
      ],
      "calls": [],
      "citation": [
        557,
        560
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "ROLL-BACK",
      "summary": null,
      "purpose": "Exec CICS SYNCPOINT ROLLBACK to undo DB changes. No inputs/outputs/logic.",
      "called_by": [
        "MARK-AUTH-FRAUD",
        "UPDATE-AUTH-DETAILS"
      ],
      "calls": [],
      "citation": [
        565,
        569
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "SCHEDULE-PSB",
      "summary": null,
      "purpose": "Exec DLI SCHD PSBPAUTB NODHABEND, term+resched if already scheduled, set flag on OK else err msg+send screen. Inputs: PSB-NAME. Outputs: PCB scheduled, flag/message. Business logic: handle TC status retry.",
      "called_by": [
        "READ-AUTH-RECORD"
      ],
      "calls": [
        "SEND-AUTHVIEW-SCREEN"
      ],
      "citation": [
        574,
        603
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "IMS-RETURN-CODE not STATUS-OK/GE/GB (GU/GNP/REPL)",
      "action": "Set WS-ERR-FLG 'Y', STRING error message with code, PERFORM SEND-AUTHVIEW-SCREEN",
      "citation": [
        453
      ]
    },
    {
      "condition": "CICS LINK EIBRESP not NORMAL or fraud update FAILED",
      "action": "MOVE fraud msg to WS-MESSAGE or error, PERFORM ROLL-BACK",
      "citation": [
        253
      ]
    },
    {
      "condition": "PSB schedule not STATUS-OK",
      "action": "Set WS-ERR-FLG 'Y', STRING msg, SEND-AUTHVIEW-SCREEN",
      "citation": [
        593
      ]
    },
    {
      "condition": "Input validation fail (non-numeric ACCT-ID or blank key)",
      "action": "SET ERR-FLG-ON",
      "citation": [
        224
      ]
    },
    {
      "condition": "EIBAID OTHER than ENTER/PF3/5/8",
      "action": "PROCESS-ENTER-KEY + 'INVALID KEY' message",
      "citation": [
        194
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "SEND MAP",
      "resource": "COPAU1A COPAU01",
      "purpose": "Display auth detail screen with/without ERASE and CURSOR",
      "citation": 381
    },
    {
      "command": "RECEIVE MAP",
      "resource": "COPAU1A COPAU01",
      "purpose": "Receive user input into COPAU1AI NOHANDLE",
      "citation": 400
    },
    {
      "command": "RETURN",
      "resource": "TRANSID(CPVD)",
      "purpose": "Return to transaction with updated COMMAREA",
      "citation": 202
    },
    {
      "command": "XCTL",
      "resource": "PROGRAM(COPAUS0C)",
      "purpose": "Transfer control to summary screen",
      "citation": 367
    },
    {
      "command": "LINK",
      "resource": "PROGRAM(COPAUS2C)",
      "purpose": "Invoke fraud processing with WS-FRAUD-DATA NOHANDLE",
      "citation": 248
    },
    {
      "command": "SYNCPOINT",
      "resource": "",
      "purpose": "Commit database changes",
      "citation": 558
    },
    {
      "command": "SYNCPOINT ROLLBACK",
      "resource": "",
      "purpose": "Rollback database changes on error",
      "citation": 567
    }
  ],
  "open_questions": [
    {
      "question": "Exact field layouts and values in copybooks like CIPAUSMY, CIPAUDTY, COPAU01",
      "context": "Source shows usage but not full definitions; inferred from moves like PA-CARD-NUM",
      "suggestion": "Provide copybook sources for precise field details"
    },
    {
      "question": "How COPAUS0C invokes this (exact XCTL or LINK?)",
      "context": "Inferred from context/WS-PGM-AUTH-SMRY but not explicit call site",
      "suggestion": "Analyze caller COPAUS0C.cbl"
    }
  ]
}