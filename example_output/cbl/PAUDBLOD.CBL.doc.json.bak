{
  "header": {
    "program_id": "PAUDBLOD",
    "file_name": "PAUDBLOD.CBL",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-02-24T17:43:32.357547",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "The COBOL program PAUDBLOD reads two sequential input files, INFILE1 and INFILE2, and inserts data from these files into an IMS database. INFILE1 provides data for the root segment (PAUTSUM0), and INFILE2 provides data for the child segment (PAUTDTL1).",
    "business_context": "UNKNOWN",
    "program_type": "BATCH",
    "citations": [
      18,
      26,
      32,
      226,
      230
    ]
  },
  "inputs": [
    {
      "name": "INFILE1",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing data for the root segment (PAUTSUM0) of the IMS database.",
      "copybook": "CIPAUSMY",
      "citation": [
        26,
        201,
        226
      ]
    },
    {
      "name": "INFILE2",
      "io_type": "FILE_SEQUENTIAL",
      "description": "Sequential file containing data for the child segment (PAUTDTL1) of the IMS database.",
      "copybook": "CIPAUDTY",
      "citation": [
        32,
        209,
        180
      ]
    },
    {
      "name": "IO-PCB-MASK",
      "io_type": "PARAMETER",
      "description": "IO PCB Mask passed to the program.",
      "copybook": "PAUTBPCB",
      "citation": [
        164
      ]
    },
    {
      "name": "PAUTBPCB",
      "io_type": "PARAMETER",
      "description": "PAUTBPCB is a PCB mask passed to the program.",
      "copybook": "PAUTBPCB",
      "citation": [
        165
      ]
    }
  ],
  "outputs": [
    {
      "name": "IMS Database (PAUTSUM0, PAUTDTL1)",
      "io_type": "IMS_SEGMENT",
      "description": "IMS database segments PAUTSUM0 (root) and PAUTDTL1 (child) are populated with data from INFILE1 and INFILE2 respectively.",
      "copybook": null,
      "citation": [
        230
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [
      "DLITCBL"
    ],
    "linkage_section": [
      "IO-PCB-MASK",
      "PAUTBPCB"
    ]
  },
  "business_rules": [],
  "data_flow": {
    "reads_from": [
      {
        "source": "INFILE1",
        "fields_used": [
          "INFIL1-REC"
        ],
        "citation": [
          226
        ]
      },
      {
        "source": "INFILE2",
        "fields_used": [
          "ROOT-SEG-KEY",
          "CHILD-SEG-REC"
        ],
        "citation": [
          180
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "PAUTSUM0 (IMS Segment)",
        "fields_written": [
          "PENDING-AUTH-SUMMARY"
        ],
        "citation": [
          230
        ]
      },
      {
        "destination": "PAUTDTL1 (IMS Segment)",
        "fields_written": [
          "PENDING-AUTH-DETAILS"
        ],
        "citation": [
          180
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "INFIL1-REC",
        "output_field": "PENDING-AUTH-SUMMARY",
        "transformation_description": "Data from INFILE1 record is moved to the PENDING-AUTH-SUMMARY structure.",
        "citation": [
          229
        ]
      }
    ]
  },
  "copybooks_used": [
    {
      "copybook_name": "IMSFUNCS",
      "purpose": "Contains IMS function definitions.",
      "location": "WORKING_STORAGE",
      "citation": 142
    },
    {
      "copybook_name": "CIPAUSMY",
      "purpose": "Defines the layout of the PENDING-AUTH-SUMMARY segment (root segment).",
      "location": "WORKING_STORAGE",
      "citation": 149
    },
    {
      "copybook_name": "CIPAUDTY",
      "purpose": "Defines the layout of the PENDING-AUTH-DETAILS segment (child segment).",
      "location": "WORKING_STORAGE",
      "citation": 153
    },
    {
      "copybook_name": "PAUTBPCB",
      "purpose": "Defines the PCB mask.",
      "location": "LINKAGE",
      "citation": 114
    }
  ],
  "paragraphs": [
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "MAIN-PARA is the main control paragraph of the PAUDBLOD program. It orchestrates the overall program flow by calling other paragraphs to perform initialization, file reading, and database insertion. It starts by displaying a message indicating the program's start (line 173). It then calls 1000-INITIALIZE to perform initial setup tasks such as accepting the current date and opening the input files (INFILE1 and INFILE2). After initialization, it enters a loop that reads records from INFILE1 (root segment data) using 2000-READ-ROOT-SEG-FILE and inserts them into the IMS database using 2100-INSERT-ROOT-SEG. This loop continues until the end of INFILE1 is reached. Subsequently, it enters another loop to read records from INFILE2 (child segment data) using 3000-READ-CHILD-SEG-FILE. Finally, it calls 4000-FILE-CLOSE to close the input files and terminates the program with GOBACK.",
      "called_by": [],
      "calls": [
        "1000-INITIALIZE",
        "2000-READ-ROOT-SEG-FILE",
        "3000-READ-CHILD-SEG-FILE",
        "4000-FILE-CLOSE"
      ],
      "citation": [
        169,
        187
      ],
      "outgoing_calls": [
        {
          "target": "1000-INITIALIZE",
          "call_type": "performs",
          "line": 175
        },
        {
          "target": "2000-READ-ROOT-SEG-FILE",
          "call_type": "performs",
          "line": 177
        },
        {
          "target": "3000-READ-CHILD-SEG-FILE",
          "call_type": "performs",
          "line": 180
        },
        {
          "target": "4000-FILE-CLOSE",
          "call_type": "performs",
          "line": 183
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "1000-INITIALIZE",
      "summary": null,
      "purpose": "The 1000-INITIALIZE paragraph performs the initial setup tasks required for the PAUDBLOD program to run successfully. It begins by accepting the current date and current year/day from the system (lines 172-173). It then displays the current date on the console (lines 196-197). The paragraph proceeds to open INFILE1 and INFILE2 for input (lines 201, 209). It checks the file status after each OPEN operation (WS-INFIL1-STATUS, WS-INFIL2-STATUS). If the file status is not equal to spaces or '00' (indicating a successful open), it displays an error message and calls 9999-ABEND to terminate the program. Otherwise, it continues processing. No data is written in this paragraph. This paragraph is called by MAIN-PARA to ensure that the program's environment is properly initialized before processing any data.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "9999-ABEND"
      ],
      "citation": [
        190,
        219
      ],
      "outgoing_calls": [
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 206
        },
        {
          "target": "9999-ABEND",
          "call_type": "performs",
          "line": 214
        }
      ],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "2000-READ-ROOT-SEG-FILE",
      "summary": null,
      "purpose": "The 2000-READ-ROOT-SEG-FILE paragraph reads records from INFILE1, which contains data for the root segment (PAUTSUM0) of the IMS database. It starts by reading a record from INFILE1 (line 226). It then checks the file status (WS-INFIL1-STATUS) to determine if the read was successful. If the file status is equal to spaces or '00', it moves the data from the input record (INFIL1-REC) to the PENDING-AUTH-SUMMARY structure (line 229). After moving the data, it calls 2100-INSERT-ROOT-SEG to insert the root segment into the IMS database. If the file status is '10', it indicates the end of the file, and the program proceeds to the next step. If the file status indicates an error, the program may proceed to an error handling routine (though this is not explicitly shown in the provided snippet). This paragraph is called repeatedly by MAIN-PARA until the end of INFILE1 is reached, as indicated by the END-ROOT-SEG-FILE flag being set to 'Y'.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "2100-INSERT-ROOT-SEG"
      ],
      "citation": [
        222,
        233
      ],
      "outgoing_calls": [
        {
          "target": "2100-INSERT-ROOT-SEG",
          "call_type": "performs",
          "line": 230
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "MAIN-PARA",
          "line": 177,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "3000-READ-CHILD-SEG-FILE",
      "summary": null,
      "purpose": "The 3000-READ-CHILD-SEG-FILE paragraph is responsible for reading records from INFILE2, which contains data for the child segment (PAUTDTL1) of the IMS database. The provided code snippet only shows the paragraph being performed until END-CHILD-SEG-FILE is equal to 'Y' (line 181). The actual READ statement and subsequent processing of the INFILE2 data are not included in the provided code. Based on the program's overall purpose, it's likely that this paragraph would read a record from INFILE2, move the relevant data to the PENDING-AUTH-DETAILS structure, and then call another paragraph (similar to 2100-INSERT-ROOT-SEG) to insert the child segment into the IMS database. Error handling for file status would also likely be present. This paragraph is called repeatedly by MAIN-PARA until the end of INFILE2 is reached.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        180,
        181
      ],
      "outgoing_calls": [
        {
          "target": "3100-INSERT-CHILD-SEG",
          "call_type": "performs",
          "line": 281
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/PAUDBLOD.CBL",
          "function": "MAIN-PARA",
          "line": 180,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "4000-FILE-CLOSE",
      "summary": null,
      "purpose": "The 4000-FILE-CLOSE paragraph is responsible for closing the input files INFILE1 and INFILE2. The code for this paragraph is not provided in the snippet. However, based on standard COBOL programming practices, this paragraph would contain CLOSE statements for both INFILE1 and INFILE2. It would also likely check the file status after each CLOSE operation and perform error handling if any errors occur during the close process. This paragraph is called by MAIN-PARA after all records have been read from both input files to ensure that the files are properly closed before the program terminates.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        183,
        183
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "WS-INFIL1-STATUS not equal to SPACES or '00' during OPEN",
      "action": "DISPLAY error message and ABEND",
      "citation": [
        205,
        206
      ]
    },
    {
      "condition": "WS-INFIL2-STATUS not equal to SPACES or '00' during OPEN",
      "action": "DISPLAY error message and ABEND",
      "citation": [
        213,
        214
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "What is the purpose of the IMSFUNCS copybook?",
      "context": "The code only includes a COPY statement, but not the contents of the copybook.",
      "suggestion": "Examine the IMSFUNCS copybook to understand the IMS functions used by the program."
    },
    {
      "question": "What is the exact logic within 2100-INSERT-ROOT-SEG?",
      "context": "The code for this paragraph is not provided.",
      "suggestion": "Examine the code for 2100-INSERT-ROOT-SEG to understand how the root segment is inserted into the IMS database."
    },
    {
      "question": "What is the exact logic within 3000-READ-CHILD-SEG-FILE and the paragraph that inserts the child segment?",
      "context": "The code for these paragraphs is not provided.",
      "suggestion": "Examine the code for 3000-READ-CHILD-SEG-FILE and the child segment insertion paragraph to understand how the child segment is read and inserted into the IMS database."
    },
    {
      "question": "What is the exact logic within 4000-FILE-CLOSE?",
      "context": "The code for this paragraph is not provided.",
      "suggestion": "Examine the code for 4000-FILE-CLOSE to understand how the files are closed and what error handling is performed."
    },
    {
      "question": "What is the purpose of the 'DLITCBL' entry point?",
      "context": "The purpose of this entry point is not clear from the provided code.",
      "suggestion": "Consult IMS documentation to understand the purpose of the 'DLITCBL' entry point and how it is used in this program."
    }
  ],
  "resolved_questions": [],
  "dead_code": [],
  "call_semantics": [
    {
      "caller": "MAIN-PARA",
      "callee": "1000-INITIALIZE",
      "inputs": [],
      "outputs": [
        "CURRENT-DATE",
        "CURRENT-YYDDD",
        "WS-INFIL1-STATUS",
        "WS-INFIL2-STATUS",
        "END-ROOT-SEG-FILE",
        "END-CHILD-SEG-FILE"
      ],
      "purpose": "Initializes the program by accepting current date values and opening input files INFILE1 and INFILE2, setting status flags accordingly."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "2000-READ-ROOT-SEG-FILE",
      "inputs": [
        "WS-INFIL1-STATUS"
      ],
      "outputs": [
        "END-ROOT-SEG-FILE",
        "PENDING-AUTH-SUMMARY"
      ],
      "purpose": "Reads a record from INFILE1 and moves it to PENDING-AUTH-SUMMARY if successful, otherwise sets END-ROOT-SEG-FILE flag on end-of-file."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "3000-READ-CHILD-SEG-FILE",
      "inputs": [
        "WS-INFIL2-STATUS",
        "ROOT-SEG-KEY",
        "CHILD-SEG-REC"
      ],
      "outputs": [
        "END-CHILD-SEG-FILE",
        "QUAL-SSA-KEY-VALUE",
        "PENDING-AUTH-DETAILS"
      ],
      "purpose": "Reads a record from INFILE2, populates child segment data and key for IMS insertion if valid, or sets end-of-file flag."
    },
    {
      "caller": "MAIN-PARA",
      "callee": "4000-FILE-CLOSE",
      "inputs": [
        "WS-INFIL1-STATUS",
        "WS-INFIL2-STATUS"
      ],
      "outputs": [],
      "purpose": "Closes both INFILE1 and INFILE2 and displays error messages if either file fails to close."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "9999-ABEND",
      "inputs": [],
      "outputs": [
        "RETURN-CODE"
      ],
      "purpose": "Terminates the program abnormally by setting RETURN-CODE to 16 after displaying an abend message."
    },
    {
      "caller": "1000-INITIALIZE",
      "callee": "9999-ABEND",
      "inputs": [
        "WS-INFIL1-STATUS",
        "WS-INFIL2-STATUS"
      ],
      "outputs": [],
      "purpose": "Abends the program with return code 16 when an input file fails to open."
    },
    {
      "caller": "2000-READ-ROOT-SEG-FILE",
      "callee": "2100-INSERT-ROOT-SEG",
      "inputs": [
        "INFIL1-REC"
      ],
      "outputs": [],
      "purpose": "Inserts a root segment into the IMS database using data read from INFILE1."
    },
    {
      "caller": "2100-INSERT-ROOT-SEG",
      "callee": "9999-ABEND",
      "inputs": [
        "PAUT-PCB-STATUS"
      ],
      "outputs": [],
      "purpose": "Abends the program if the root segment insert operation fails with an unexpected status code."
    },
    {
      "caller": "3000-READ-CHILD-SEG-FILE",
      "callee": "3100-INSERT-CHILD-SEG",
      "inputs": [
        "ROOT-SEG-KEY",
        "CHILD-SEG-REC"
      ],
      "outputs": [],
      "purpose": "Inserts a child segment into the IMS database after qualifying the parent root segment using the root key."
    },
    {
      "caller": "3100-INSERT-CHILD-SEG",
      "callee": "3200-INSERT-IMS-CALL",
      "inputs": [],
      "outputs": [],
      "purpose": "Performs an IMS insert call to add a child segment to the database after successfully retrieving the parent segment."
    },
    {
      "caller": "3100-INSERT-CHILD-SEG",
      "callee": "9999-ABEND",
      "inputs": [],
      "outputs": [],
      "purpose": "Abends the program with return code 16 when the GU call to the root segment fails."
    },
    {
      "caller": "3200-INSERT-IMS-CALL",
      "callee": "9999-ABEND",
      "inputs": [],
      "outputs": [],
      "purpose": "Abends the program with return code 16 when the ISRT call for the child segment fails."
    }
  ],
  "flow_diagram": "flowchart TD\n    %% Title: PAUDBLOD.CBL\n    1000_EXIT[\"1000-EXIT\"]\n    1000_INITIALIZE[\"1000-INITIALIZE\"]\n    9999_ABEND[\"9999-ABEND\"]\n    2000_EXIT[\"2000-EXIT\"]\n    2000_READ_ROOT_SEG_FILE[\"2000-READ-ROOT-SEG-FILE\"]\n    2100_INSERT_ROOT_SEG[\"2100-INSERT-ROOT-SEG\"]\n    2100_EXIT[\"2100-EXIT\"]\n    CBLTDLI__ext([\"CBLTDLI\"])\n    3000_EXIT[\"3000-EXIT\"]\n    3000_READ_CHILD_SEG_FILE[\"3000-READ-CHILD-SEG-FILE\"]\n    3100_INSERT_CHILD_SEG[\"3100-INSERT-CHILD-SEG\"]\n    3100_EXIT[\"3100-EXIT\"]\n    3200_INSERT_IMS_CALL[\"3200-INSERT-IMS-CALL\"]\n    3200_EXIT[\"3200-EXIT\"]\n    4000_EXIT[\"4000-EXIT\"]\n    4000_FILE_CLOSE[\"4000-FILE-CLOSE\"]\n    9999_EXIT[\"9999-EXIT\"]\n    MAIN_PARA[\"MAIN-PARA\"]\n    1000_INITIALIZE --> 9999_ABEND\n    2000_READ_ROOT_SEG_FILE --> 2100_INSERT_ROOT_SEG\n    2100_INSERT_ROOT_SEG --> 9999_ABEND\n    2100_INSERT_ROOT_SEG -.->|calls| CBLTDLI__ext\n    3000_READ_CHILD_SEG_FILE --> 3100_INSERT_CHILD_SEG\n    3100_INSERT_CHILD_SEG --> 3200_INSERT_IMS_CALL\n    3100_INSERT_CHILD_SEG --> 9999_ABEND\n    3100_INSERT_CHILD_SEG -.->|calls| CBLTDLI__ext\n    3200_INSERT_IMS_CALL --> 9999_ABEND\n    3200_INSERT_IMS_CALL -.->|calls| CBLTDLI__ext\n    MAIN_PARA --> 1000_INITIALIZE\n    MAIN_PARA --> 2000_READ_ROOT_SEG_FILE\n    MAIN_PARA --> 3000_READ_CHILD_SEG_FILE\n    MAIN_PARA --> 4000_FILE_CLOSE"
}