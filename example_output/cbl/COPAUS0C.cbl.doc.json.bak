{
  "header": {
    "program_id": "COPAUS0C",
    "file_name": "cbl/COPAUS0C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:12:25.395280",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "COPAUS0C is a CICS online program that displays a paginated summary list of pending authorization details for a given account ID in the CardDemo application. It retrieves account, customer, and card cross-reference data from VSAM files, fetches authorization summary and detail segments from IMS database, populates a BMS screen with up to 5 authorization entries per page, handles user selections to XCTL to detail view, and supports PF7/PF8 paging.",
    "business_context": "Serves the CardDemo authorization module by providing a summary view of pending authorizations (approved/declined) for credit card accounts, enabling users to browse, select, and drill down to details.",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      3,
      4,
      5,
      36,
      178,
      337,
      786
    ]
  },
  "inputs": [
    {
      "name": "CARDDEMO-COMMAREA",
      "io_type": "CICS_COMMAREA",
      "description": "Common commarea containing account ID, program context flags, previous/next page auth keys, page number, and selection flags from prior screens",
      "copybook": "COCOM01Y",
      "citation": [
        116,
        190,
        200,
        284
      ]
    },
    {
      "name": "COPAU0AI",
      "io_type": "CICS_MAP",
      "description": "BMS input map fields for account ID entry (ACCTIDI), selection fields (SEL0001I-SEL0005I), from mapset COPAU00",
      "copybook": "COPAU00",
      "citation": [
        129,
        207,
        264,
        286
      ]
    },
    {
      "name": "CXACAIX",
      "io_type": "FILE_VSAM",
      "description": "Card cross-reference alternate index by account ID to retrieve customer ID and card number",
      "copybook": "CVACT03Y",
      "citation": [
        41,
        817,
        819
      ]
    },
    {
      "name": "ACCTDAT",
      "io_type": "FILE_VSAM",
      "description": "Account master file read by account ID for credit limits and other account details",
      "copybook": "CVACT01Y",
      "citation": [
        38,
        868,
        870
      ]
    },
    {
      "name": "CUSTDAT",
      "io_type": "FILE_VSAM",
      "description": "Customer master file read by customer ID for name, address, phone",
      "copybook": "CVCUS01Y",
      "citation": [
        39,
        918,
        920
      ]
    },
    {
      "name": "PAUTSUM0",
      "io_type": "IMS_SEGMENT",
      "description": "IMS root segment for pending auth summary (counts, balances, totals) qualified by account ID",
      "copybook": "CIPAUSMY",
      "citation": [
        160,
        971,
        974
      ]
    },
    {
      "name": "PAUTDTL1",
      "io_type": "IMS_SEGMENT",
      "description": "IMS child segment for pending auth details (transaction ID, date, time, type, status, amount) under summary",
      "copybook": "CIPAUDTY",
      "citation": [
        164,
        462,
        493
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU0AO",
      "io_type": "CICS_MAP",
      "description": "BMS output map populated with header (titles, date/time, tran/program), account details (customer name, address, limits), auth summary counts/balances, list of 5 auth details, error messages",
      "copybook": "COPAU00",
      "citation": [
        129,
        195,
        692,
        696
      ]
    },
    {
      "name": "CARDDEMO-COMMAREA",
      "io_type": "CICS_COMMAREA",
      "description": "Updated commarea with selected auth key, page info, flags for XCTL/RETURN",
      "copybook": "COCOM01Y",
      "citation": [
        116,
        284,
        325,
        256
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "COPAUS1C",
      "call_type": "CICS_XCTL",
      "purpose": "Transfer control to authorization details screen with selected auth key",
      "parameters": [
        "CARDDEMO-COMMAREA"
      ],
      "citation": 323
    },
    {
      "program_name": "COMEN01C",
      "call_type": "CICS_XCTL",
      "purpose": "Return to menu screen on PF3",
      "parameters": [
        "CARDDEMO-COMMAREA"
      ],
      "citation": 236
    },
    {
      "program_name": "COSGN00C",
      "call_type": "CICS_XCTL",
      "purpose": "Fallback to signon screen if no previous program set",
      "parameters": [
        "CARDDEMO-COMMAREA"
      ],
      "citation": 669
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [
      "CPVS"
    ],
    "linkage_section": [
      "DFHCOMMAREA"
    ]
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Account ID must be numeric and non-blank to retrieve details; otherwise display error message",
      "logic_summary": "Checks ACCTIDI numeric after receive; sets error if not",
      "conditions": [
        "IF ACCTIDI = SPACES OR LOW-VALUES",
        "IF ACCTIDI NOT NUMERIC"
      ],
      "citation": [
        264,
        273
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Selection field (SELxxxxI) must be 'S' or 's' to XCTL to details; invalid sets error",
      "logic_summary": "Evaluates which SEL field filled, sets PAU-SELECTED, checks = 'S'/'s'",
      "conditions": [
        "WHEN SEL0001I NOT = SPACES AND LOW-VALUES",
        "WHEN CDEMO-CPVS-PAU-SEL-FLG = 'S' or 's'"
      ],
      "citation": [
        286,
        313
      ]
    },
    {
      "rule_id": "BR003",
      "description": "Display up to 5 auth details per page; PF7 previous page if page >1 using saved prev key; PF8 next using last key",
      "logic_summary": "PROCESS-PAGE-FORWARD loop GNP 5 times or EOF; saves keys for paging",
      "conditions": [
        "IF WS-IDX >5 OR AUTHS-EOF",
        "CDEMO-CPVS-PAGE-NUM >1"
      ],
      "citation": [
        424,
        365
      ]
    },
    {
      "rule_id": "BR004",
      "description": "Approval status 'A' if resp code '00', else 'D'; populate screen fields accordingly",
      "logic_summary": "IF PA-AUTH-RESP-CODE = '00' MOVE 'A'",
      "conditions": [
        "PA-AUTH-RESP-CODE = '00'"
      ],
      "citation": [
        536
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "COPAU0AI",
        "fields_used": [
          "ACCTIDI",
          "SEL0001I",
          "SEL0002I",
          "SEL0003I",
          "SEL0004I",
          "SEL0005I"
        ],
        "citation": [
          264,
          286
        ]
      },
      {
        "source": "CXACAIX",
        "fields_used": [
          "XREF-CUST-ID",
          "XREF-CARD-NUM"
        ],
        "citation": [
          830
        ]
      },
      {
        "source": "ACCTDAT",
        "fields_used": [
          "ACCT-CREDIT-LIMIT",
          "ACCT-CASH-CREDIT-LIMIT"
        ],
        "citation": [
          780,
          782
        ]
      },
      {
        "source": "CUSTDAT",
        "fields_used": [
          "CUST-ID",
          "CUST-FIRST-NAME",
          "CUST-LAST-NAME",
          "CUST-ADDR-LINE-1"
        ],
        "citation": [
          757,
          766
        ]
      },
      {
        "source": "PAUTSUM0",
        "fields_used": [
          "PA-APPROVED-AUTH-CNT",
          "PA-DECLINED-AUTH-CNT",
          "PA-CREDIT-BALANCE"
        ],
        "citation": [
          787
        ]
      },
      {
        "source": "PAUTDTL1",
        "fields_used": [
          "PA-TRANSACTION-ID",
          "PA-AUTH-ORIG-DATE",
          "PA-AUTHORIZATION-KEY"
        ],
        "citation": [
          547,
          424
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "COPAU0AO",
        "fields_written": [
          "CNAMEO",
          "APPRCNTO",
          "TRNID01I",
          "PAMT001I"
        ],
        "citation": [
          764,
          789,
          547
        ]
      },
      {
        "destination": "CARDDEMO-COMMAREA",
        "fields_written": [
          "CDEMO-CPVS-PAU-SELECTED",
          "CDEMO-CPVS-AUTH-KEYS"
        ],
        "citation": [
          289,
          545
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PA-AUTH-ORIG-TIME",
        "output_field": "WS-AUTH-TIME",
        "transformation_description": "Reformats HHMMSS to HH:MM:SS string by substring moves",
        "citation": [
          527
        ]
      },
      {
        "input_field": "PA-AUTH-ORIG-DATE",
        "output_field": "WS-AUTH-DATE",
        "transformation_description": "Reformats YYMMDD to MM/DD/YY using WS-CURDATE-MM-DD-YY",
        "citation": [
          531
        ]
      },
      {
        "input_field": "CUST-FIRST-NAME, CUST-MIDDLE-NAME, CUST-LAST-NAME",
        "output_field": "CNAMEO",
        "transformation_description": "Concatenates first middle-initial last with spaces",
        "citation": [
          758
        ]
      },
      {
        "input_field": "PA-AUTH-RESP-CODE",
        "output_field": "WS-AUTH-APRV-STAT",
        "transformation_description": "'00' to 'A' approved, else 'D' declined",
        "citation": [
          536
        ]
      }
    ]
  },
  "copybooks_used": [
    {
      "copybook_name": "COCOM01Y",
      "purpose": "Defines CARDDEMO-COMMAREA with common fields like ACCT-ID, PGM flags, CPVS-specific auth keys/page info",
      "location": "WORKING_STORAGE",
      "citation": 116
    },
    {
      "copybook_name": "COPAU00",
      "purpose": "BMS mapset for COPAU0A input/output (account ID, auth list fields, selections, headers)",
      "location": "WORKING_STORAGE",
      "citation": 129
    },
    {
      "copybook_name": "COTTL01Y",
      "purpose": "Screen titles like CCDA-TITLE01/02",
      "location": "WORKING_STORAGE",
      "citation": 132
    },
    {
      "copybook_name": "CSDAT01Y",
      "purpose": "Current date working variables WS-CURDATE-*",
      "location": "WORKING_STORAGE",
      "citation": 135
    },
    {
      "copybook_name": "CSMSG01Y",
      "purpose": "Common messages like CCDA-MSG-INVALID-KEY",
      "location": "WORKING_STORAGE",
      "citation": 138
    },
    {
      "copybook_name": "CSMSG02Y",
      "purpose": "Abend variables",
      "location": "WORKING_STORAGE",
      "citation": 141
    },
    {
      "copybook_name": "CVACT01Y",
      "purpose": "ACCOUNT-RECORD layout",
      "location": "WORKING_STORAGE",
      "citation": 144
    },
    {
      "copybook_name": "CVCUS01Y",
      "purpose": "CUSTOMER-RECORD layout",
      "location": "WORKING_STORAGE",
      "citation": 153
    },
    {
      "copybook_name": "CVACT03Y",
      "purpose": "CARD-XREF-RECORD layout",
      "location": "WORKING_STORAGE",
      "citation": 151
    },
    {
      "copybook_name": "CIPAUSMY",
      "purpose": "PENDING-AUTH-SUMMARY IMS segment layout",
      "location": "WORKING_STORAGE",
      "citation": 161
    },
    {
      "copybook_name": "CIPAUDTY",
      "purpose": "PENDING-AUTH-DETAILS IMS segment layout",
      "location": "WORKING_STORAGE",
      "citation": 165
    },
    {
      "copybook_name": "DFHAID",
      "purpose": "CICS attention key EIBAID",
      "location": "WORKING_STORAGE",
      "citation": 168
    },
    {
      "copybook_name": "DFHBMSCA",
      "purpose": "CICS BMS constants like DFHENTER, DFHPF3, DFHBMUNP",
      "location": "WORKING_STORAGE",
      "citation": 169
    }
  ],
  "paragraphs": [
    {
      "paragraph_name": "MAIN-PARA",
      "summary": null,
      "purpose": "This is the primary entry point and orchestration paragraph that initializes flags, handles first-time entry vs reentry via commarea, receives map if applicable, dispatches to key handlers (ENTER/PF3/PF7/PF8), gathers details, sends the populated summary screen, and returns with transaction ID preserving commarea. It consumes EIBCALEN to detect initial call (0), DFHCOMMAREA for context, and BMS input map COPAU0AI for user data. It produces updated COPAU0AO map output, refreshed auth list and header info, and updated CARDDEMO-COMMAREA with page/selection data. Business logic includes checking reenter flag to decide init vs process, evaluating EIBAID for PF keys to invoke specific handlers like PROCESS-ENTER-KEY for selection/validation/XCTL or paging. Error handling sets WS-ERR-FLG and WS-MESSAGE for invalid keys, sending screen immediately. It calls GATHER-DETAILS to fetch/populate data, RECEIVE-PAULST-SCREEN, SEND-PAULST-SCREEN, and handlers like PROCESS-PF7-KEY/PF8-KEY for navigation, RETURN-TO-PREV-SCREEN for PF3. On initial call, initializes commarea and sends empty screen prompting for acct ID.",
      "called_by": [],
      "calls": [
        "GATHER-DETAILS",
        "RECEIVE-PAULST-SCREEN",
        "PROCESS-ENTER-KEY",
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        178,
        257
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-ENTER-KEY",
      "summary": null,
      "purpose": "Handles ENTER keypress to validate/process account ID input and selection fields for drill-down to auth details. Consumes ACCTIDI from COPAU0AI and SEL000xI fields to determine selected auth key index. Produces updated CDEMO-CPVS-PAU-SEL-FLG/SELECTED in commarea, WS-ACCT-ID, error message if invalid, and XCTL to details if valid 'S'. Logic validates acct ID non-blank/numeric, maps SEL field to CDEMO-CPVS-AUTH-KEYS(n), checks 'S'/'s' for XCTL COPAUS1C with commarea. Errors for blank/non-numeric acct or invalid sel set WS-ERR-FLG/'Y', cursor to ACCTIDL, message. Calls GATHER-DETAILS to refresh list post-process.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "GATHER-DETAILS"
      ],
      "citation": [
        261,
        338
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GATHER-DETAILS",
      "summary": null,
      "purpose": "Coordinates retrieval of account-related data and auth list population for the screen. Consumes WS-ACCT-ID to drive file reads and IMS GU for summary. Produces populated screen fields via sub-calls, initializes page num/keys, sets flags for paging. Logic checks acct ID valid, calls GATHER-ACCOUNT-DETAILS for VSAM data, INITIALIZE-AUTH-DATA to clear list, PROCESS-PAGE-FORWARD if summary found. No direct error handling, propagates from subs. Calls GATHER-ACCOUNT-DETAILS, INITIALIZE-AUTH-DATA, PROCESS-PAGE-FORWARD.",
      "called_by": [
        "MAIN-PARA",
        "PROCESS-ENTER-KEY"
      ],
      "calls": [
        "GATHER-ACCOUNT-DETAILS",
        "INITIALIZE-AUTH-DATA",
        "PROCESS-PAGE-FORWARD"
      ],
      "citation": [
        342,
        358
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-PF7-KEY",
      "summary": null,
      "purpose": "Handles backward paging (previous page) if not on page 1, repositions using saved prev key. Consumes CDEMO-CPVS-PAGE-NUM and PAUKEY-PREV-PG array. Produces decremented page num, sets WS-AUTH-KEY-SAVE to prev key, refreshes list via forward process. Logic checks page >1, computes page-1, moves prev key( page), GET-AUTH-SUMMARY, INITIALIZE/PROCESS-PAGE-FORWARD with REPOSITION if PF7. Error/message if already top. Calls GET-AUTH-SUMMARY, INITIALIZE-AUTH-DATA, PROCESS-PAGE-FORWARD.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "GET-AUTH-SUMMARY",
        "INITIALIZE-AUTH-DATA",
        "PROCESS-PAGE-FORWARD"
      ],
      "citation": [
        362,
        385
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-PF8-KEY",
      "summary": null,
      "purpose": "Handles forward paging (next page) from last key, repositions to end. Consumes CDEMO-CPVS-PAUKEY-LAST. Produces NEXT-PAGE-YES/NO flag, refreshed list. Logic moves last key to save, GET-AUTH-SUMMARY, REPOSITION-AUTHORIZATIONS to position after last, then forward. Message if already bottom. Calls GET-AUTH-SUMMARY, REPOSITION-AUTHORIZATIONS, INITIALIZE-AUTH-DATA, PROCESS-PAGE-FORWARD.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [
        "GET-AUTH-SUMMARY",
        "REPOSITION-AUTHORIZATIONS",
        "INITIALIZE-AUTH-DATA",
        "PROCESS-PAGE-FORWARD"
      ],
      "citation": [
        388,
        412
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "PROCESS-PAGE-FORWARD",
      "summary": null,
      "purpose": "Fetches and populates up to 5 sequential auth detail segments for current page display. Consumes WS-IDX=1 init, current position from prior GNP/GU. Produces screen list fields TRNIDxxI/PDATExxI etc via POPULATE, saves LAST/PREV-PG keys, sets NEXT-PAGE-YES if more after 5. Loop PERFORM UNTIL idx>5/EOF/ERR: REPOSITION if PF7 idx1 else GET-AUTHORIZATIONS, POPULATE if ok, inc idx/save keys. After loop, peeks one more for next flag. Calls GET-AUTHORIZATIONS, REPOSITION-AUTHORIZATIONS, POPULATE-AUTH-LIST.",
      "called_by": [
        "GATHER-DETAILS",
        "PROCESS-PF7-KEY",
        "PROCESS-PF8-KEY"
      ],
      "calls": [
        "REPOSITION-AUTHORIZATIONS",
        "GET-AUTHORIZATIONS",
        "POPULATE-AUTH-LIST"
      ],
      "citation": [
        415,
        454
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GET-AUTHORIZATIONS",
      "summary": null,
      "purpose": "Performs IMS GNP call to retrieve next PAUTDTL1 child segment under current parent. Consumes current PCB position. Produces PENDING-AUTH-DETAILS populated, sets AUTHS-EOF if GE/GB. Logic GNP PAUTDTL1 INTO details, eval DIBSTAT: OK=not eof, GE/GB=eof, other=err msg/abend-like send. Calls SEND-PAULST-SCREEN on error.",
      "called_by": [
        "PROCESS-PAGE-FORWARD"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        458,
        486
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "REPOSITION-AUTHORIZATIONS",
      "summary": null,
      "purpose": "Repositions IMS cursor to specific auth key via qualified GNP for paging. Consumes WS-AUTH-KEY-SAVE moved to PA-AUTHORIZATION-KEY. Produces PENDING-AUTH-DETAILS at that key, sets eof if not found. Logic GNP PAUTDTL1 WHERE PAUT9CTS=KEY, eval STATUS-OK/not-eof, GE/GB=eof, other err.",
      "called_by": [
        "PROCESS-PF8-KEY",
        "PROCESS-PAGE-FORWARD"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        488,
        519
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "POPULATE-AUTH-LIST",
      "summary": null,
      "purpose": "Transforms current PENDING-AUTH-DETAILS into screen fields for specific list row (1-5). Consumes PA fields like AMT, TIME, DATE, RESP-CODE, saves KEY to commarea array. Produces COPAU0AI fields like TRNID01I, PAMT001I, sets UNP for sel attr. Logic formats time/date, sets A/D stat, EVALUATE WS-IDX to move to row n fields.",
      "called_by": [
        "PROCESS-PAGE-FORWARD"
      ],
      "calls": [],
      "citation": [
        522,
        605
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "INITIALIZE-AUTH-DATA",
      "summary": null,
      "purpose": "Clears the 5 auth list fields on screen map to protected blanks before repopulate. Consumes WS-IDX 1-5 loop. Produces SPACES in TRNIDxxI/PDATE etc, PRO for sel attr. VARYING loop EVALUATE idx move SPACES/DFHBMPRO to row fields.",
      "called_by": [
        "GATHER-DETAILS",
        "PROCESS-PF7-KEY",
        "PROCESS-PF8-KEY"
      ],
      "calls": [],
      "citation": [
        608,
        662
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "SEND-PAULST-SCREEN",
      "summary": null,
      "purpose": "Sends the BMS map COPAU0A with cursor/erase if flagged, after IMS syncpoint if PSB scheduled. Consumes fully populated COPAU0AO, WS-MESSAGE to ERRMSGO. Produces screen display to user. Logic unschedule PSB/SYNCPOINT if sched, POPULATE-HEADER-INFO, move msg, SEND MAPSET FROM AO ERASE if yes else no.",
      "called_by": [
        "MAIN-PARA",
        "GET-AUTHORIZATIONS",
        "many error paths"
      ],
      "calls": [
        "POPULATE-HEADER-INFO"
      ],
      "citation": [
        681,
        709
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "RECEIVE-PAULST-SCREEN",
      "summary": null,
      "purpose": "Receives user input from BMS map into COPAU0AI with resp codes. Consumes screen data. Produces COPAU0AI fields populated, WS-RESP-CD/REAS-CD for validation.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        712,
        722
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "POPULATE-HEADER-INFO",
      "summary": null,
      "purpose": "Fills static/dynamic header fields like titles, current date/time, tran/program names. Consumes FUNCTION CURRENT-DATE. Produces TITLE01O etc, formatted CURDATEO/CURTIMEO. Moves constants WS vars to output fields.",
      "called_by": [
        "SEND-PAULST-SCREEN"
      ],
      "calls": [],
      "citation": [
        726,
        747
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GATHER-ACCOUNT-DETAILS",
      "summary": null,
      "purpose": "Retrieves and displays acct/cust summary info and auth totals from VSAM/IMS. Consumes WS-ACCT-ID driving chain. Produces screen fields CNAMEO, CREDLIMO, APPRCNTO etc from records. Calls VSAM reads xref/acct/cust, formats name/addr, moves limits, GET-AUTH-SUMMARY for totals if found else zeros.",
      "called_by": [
        "GATHER-DETAILS"
      ],
      "calls": [
        "GETCARDXREF-BYACCT",
        "GETACCTDATA-BYACCT",
        "GETCUSTDATA-BYCUST",
        "GET-AUTH-SUMMARY"
      ],
      "citation": [
        750,
        808
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GETCARDXREF-BYACCT",
      "summary": null,
      "purpose": "Reads VSAM card xref AIX by acct ID to get cust/card nums. Consumes WS-ACCT-ID to RID. Produces CARD-XREF-RECORD, CDEMO-CUST-ID/NUM. Eval RESP: NORMAL ok, NOTFND/OTHER err msg/send.",
      "called_by": [
        "GATHER-ACCOUNT-DETAILS"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        812,
        862
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GETACCTDATA-BYACCT",
      "summary": null,
      "purpose": "Reads VSAM acct file by acct ID from xref. Consumes XREF-ACCT-ID. Produces ACCOUNT-RECORD. Eval RESP normal cont, notfnd/other err.",
      "called_by": [
        "GATHER-ACCOUNT-DETAILS"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        865,
        912
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GETCUSTDATA-BYCUST",
      "summary": null,
      "purpose": "Reads VSAM cust file by cust ID from xref. Consumes XREF-CUST-ID. Produces CUSTOMER-RECORD. Eval RESP normal cont, notfnd/other err.",
      "called_by": [
        "GATHER-ACCOUNT-DETAILS"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        915,
        963
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "GET-AUTH-SUMMARY",
      "summary": null,
      "purpose": "Schedules PSB, GU qualified IMS root PAUTSUM0 by acct ID. Consumes CDEMO-ACCT-ID to PA-ACCT-ID. Produces PENDING-AUTH-SUMMARY, sets FOUND/NFOUND flags. Eval STATUS-OK found, GE nfound, other err.",
      "called_by": [
        "PROCESS-PF7-KEY",
        "PROCESS-PF8-KEY",
        "GATHER-ACCOUNT-DETAILS"
      ],
      "calls": [
        "SCHEDULE-PSB",
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        966,
        997
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "SCHEDULE-PSB",
      "summary": null,
      "purpose": "Schedules IMS PSBPAUTB, reschedules if already once, sets flag. Handles TERM if TC. Produces IMS-PSB-SCHD 'Y'. Err if not OK.",
      "called_by": [
        "GET-AUTH-SUMMARY"
      ],
      "calls": [
        "SEND-PAULST-SCREEN"
      ],
      "citation": [
        1001,
        1031
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    },
    {
      "paragraph_name": "RETURN-TO-PREV-SCREEN",
      "summary": null,
      "purpose": "Prepares XCTL to previous program (menu or signon) on PF3. Sets CDEMO-TO/FROM-PROGRAM/TRANID, context 0. Consumes CDEMO-TO-PROGRAM fallback COSGN00C.",
      "called_by": [
        "MAIN-PARA"
      ],
      "calls": [],
      "citation": [
        665,
        677
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "CICS READ RESP NOT NORMAL/NOTFND",
      "action": "Set WS-ERR-FLG 'Y', format WS-MESSAGE with resp/reas, MOVE -1 ACCTIDL, PERFORM SEND-PAULST-SCREEN",
      "citation": [
        828,
        845
      ]
    },
    {
      "condition": "IMS DLI STATUS NOT OK/GE/GB",
      "action": "Set WS-ERR-FLG 'Y', STRING IMS-RETURN-CODE to WS-MESSAGE, MOVE -1 ACCTIDL, SEND-PAULST-SCREEN",
      "citation": [
        467,
        474
      ]
    },
    {
      "condition": "EIBAID OTHER than ENTER/PF3/7/8",
      "action": "Set WS-ERR-FLG 'Y', MOVE CCDA-MSG-INVALID-KEY to WS-MESSAGE, MOVE -1 ACCTIDL, SEND screen",
      "citation": [
        246
      ]
    },
    {
      "condition": "ACCTIDI blank or non-numeric",
      "action": "Set WS-ERR-FLG 'Y', specific message, MOVE -1 ACCTIDL",
      "citation": [
        267,
        276
      ]
    },
    {
      "condition": "Invalid selection not 'S'/'s'",
      "action": "Set message 'Invalid selection. Valid value is S', MOVE -1 ACCTIDL",
      "citation": [
        328
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "RECEIVE MAP",
      "resource": "COPAU0A",
      "purpose": "Receive user input fields like acct ID and selections",
      "citation": 715
    },
    {
      "command": "SEND MAP",
      "resource": "COPAU0A",
      "purpose": "Send populated output map with cursor, erase on init/full refresh",
      "citation": 695
    },
    {
      "command": "XCTL PROGRAM",
      "resource": "COPAUS1C/COMEN01C/COSGN00C",
      "purpose": "Transfer to details/menu screens preserving commarea",
      "citation": 323
    },
    {
      "command": "RETURN TRANSID",
      "resource": "CPVS",
      "purpose": "Return to CICS with same transaction and updated commarea",
      "citation": 254
    },
    {
      "command": "SYNCPOINT",
      "resource": "",
      "purpose": "Commit IMS PSB before send",
      "citation": 686
    }
  ],
  "open_questions": []
}