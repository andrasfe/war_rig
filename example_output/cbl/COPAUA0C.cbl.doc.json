{
  "header": {
    "program_id": "COPAUA0C",
    "file_name": "COPAUA0C.cbl",
    "file_type": "COBOL",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-28T14:56:29.552612",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This COBOL program processes authorization requests, retrieves account and customer information, makes authorization decisions based on available credit and transaction amount, and sends a response. It reads card details, retrieves account and customer data from CICS files and IMS database, and updates the pending authorization summary in IMS. The program also logs errors and warnings to an error log.",
    "business_context": "This program is likely part of a credit card authorization system, responsible for validating transactions and updating account information.",
    "program_type": "ONLINE_CICS",
    "citations": [
      400,
      477,
      620,
      738
    ]
  },
  "inputs": [
    {
      "name": "W01-GET-BUFFER",
      "io_type": "CICS_QUEUE",
      "description": "Contains the authorization request message received from the MQ queue.",
      "copybook": null,
      "citation": [
        405
      ]
    },
    {
      "name": "WS-CCXREF-FILE",
      "io_type": "FILE_VSAM",
      "description": "Card Cross-Reference file, used to retrieve account and customer IDs based on the card number.",
      "copybook": null,
      "citation": [
        478
      ]
    },
    {
      "name": "WS-ACCTFILENAME",
      "io_type": "FILE_VSAM",
      "description": "Account master file, used to retrieve account details such as credit limit and current balance.",
      "copybook": null,
      "citation": [
        526
      ]
    },
    {
      "name": "WS-CUSTFILENAME",
      "io_type": "FILE_VSAM",
      "description": "Customer master file, used to retrieve customer details.",
      "copybook": null,
      "citation": [
        574
      ]
    },
    {
      "name": "PENDING-AUTH-SUMMARY",
      "io_type": "IMS_SEGMENT",
      "description": "IMS segment PAUTSUM0 containing pending authorization summary data.",
      "copybook": null,
      "citation": [
        622,
        837
      ]
    },
    {
      "name": "PA-RQ-CARD-NUM",
      "io_type": "CICS_COMMAREA",
      "description": "Card number from the request.",
      "copybook": null,
      "citation": [
        85
      ]
    },
    {
      "name": "PA-RQ-TRANSACTION-AMT",
      "io_type": "CICS_COMMAREA",
      "description": "Transaction amount from the request.",
      "copybook": null,
      "citation": [
        694
      ]
    }
  ],
  "outputs": [
    {
      "name": "W02-PUT-BUFFER",
      "io_type": "CICS_QUEUE",
      "description": "Contains the authorization response message sent to the MQ queue.",
      "copybook": null,
      "citation": [
        737
      ]
    },
    {
      "name": "PENDING-AUTH-SUMMARY",
      "io_type": "IMS_SEGMENT",
      "description": "Updated pending authorization summary segment in IMS.",
      "copybook": null,
      "citation": [
        827
      ]
    }
  ],
  "called_programs": [
    {
      "program_name": "MQGET",
      "call_type": "STATIC_CALL",
      "purpose": "Retrieves a message from the MQ queue.",
      "parameters": [
        "W01-HCONN-REQUEST",
        "W01-HOBJ-REQUEST",
        "MQM-MD-REQUEST",
        "MQM-GET-MESSAGE-OPTIONS",
        "W01-BUFFLEN",
        "W01-GET-BUFFER",
        "W01-DATALEN",
        "WS-COMPCODE",
        "WS-REASON"
      ],
      "citation": 400
    },
    {
      "program_name": "MQPUT1",
      "call_type": "STATIC_CALL",
      "purpose": "Sends a response message to the MQ queue.",
      "parameters": [
        "W02-HCONN-REPLY",
        "MQM-OD-REPLY",
        "MQM-MD-REPLY",
        "MQM-PUT-MESSAGE-OPTIONS",
        "W02-BUFFLEN",
        "W02-PUT-BUFFER",
        "WS-COMPCODE",
        "WS-REASON"
      ],
      "citation": 758
    }
  ],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Decline authorization if the transaction amount exceeds the available credit.",
      "logic_summary": "Compares WS-TRANSACTION-AMT with WS-AVAILABLE-AMT. If the transaction amount is greater, the authorization is declined.",
      "conditions": [
        "IF WS-TRANSACTION-AMT > WS-AVAILABLE-AMT"
      ],
      "citation": [
        678,
        686
      ]
    },
    {
      "rule_id": "BR002",
      "description": "If no authorization summary is found, use account data to determine available credit.",
      "logic_summary": "If FOUND-PAUT-SMRY-SEG is false, the program uses ACCT-CREDIT-LIMIT and ACCT-CURR-BAL to calculate available credit.",
      "conditions": [
        "IF FOUND-PAUT-SMRY-SEG",
        "IF FOUND-ACCT-IN-MSTR"
      ],
      "citation": [
        675,
        684
      ]
    }
  ],
  "data_flow": {
    "reads_from": [
      {
        "source": "W01-GET-BUFFER",
        "fields_used": [
          "MQMD-CORRELID",
          "MQMD-REPLYTOQ"
        ],
        "citation": [
          411,
          413
        ]
      },
      {
        "source": "CARD-XREF-RECORD",
        "fields_used": [
          "XREF-ACCT-ID",
          "XREF-CUST-ID"
        ],
        "citation": [
          523,
          571
        ]
      },
      {
        "source": "ACCOUNT-RECORD",
        "fields_used": [
          "ACCT-CREDIT-LIMIT",
          "ACCT-CURR-BAL"
        ],
        "citation": [
          674,
          675
        ]
      },
      {
        "source": "PENDING-AUTH-SUMMARY",
        "fields_used": [
          "PA-CREDIT-LIMIT",
          "PA-CREDIT-BALANCE"
        ],
        "citation": [
          676,
          677
        ]
      }
    ],
    "writes_to": [
      {
        "destination": "W02-PUT-BUFFER",
        "fields_written": [
          "PA-RL-CARD-NUM",
          "PA-RL-TRANSACTION-ID",
          "PA-RL-AUTH-ID-CODE",
          "PA-RL-AUTH-RESP-CODE",
          "PA-RL-AUTH-RESP-REASON",
          "WS-APPROVED-AMT-DIS"
        ],
        "citation": [
          722,
          723,
          724,
          725,
          726,
          727
        ]
      },
      {
        "destination": "PENDING-AUTH-SUMMARY",
        "fields_written": [
          "PA-APPROVED-AUTH-CNT",
          "PA-APPROVED-AUTH-AMT",
          "PA-CREDIT-BALANCE",
          "PA-DECLINED-AUTH-CNT",
          "PA-DECLINED-AUTH-AMT"
        ],
        "citation": [
          814,
          815,
          817,
          820,
          821
        ]
      }
    ],
    "transforms": [
      {
        "input_field": "PA-RQ-TRANSACTION-AMT",
        "output_field": "WS-TRANSACTION-AMT",
        "transformation_description": "Moves the transaction amount from the request to a working storage variable for processing.",
        "citation": [
          678
        ]
      },
      {
        "input_field": "ACCT-CREDIT-LIMIT",
        "output_field": "PA-CREDIT-LIMIT",
        "transformation_description": "Moves the account credit limit to the pending authorization summary.",
        "citation": [
          810
        ]
      }
    ]
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "5000-PROCESS-AUTH",
      "summary": null,
      "purpose": "This paragraph is the main processing unit for authorizing a transaction. It orchestrates the retrieval of necessary data, makes an authorization decision, sends a response, and writes the authorization to the database. It starts by scheduling a PSB (Program Specification Block) for IMS access using 1200-SCHEDULE-PSB. Then, it attempts to read the card cross-reference record using 5100-READ-XREF-RECORD. If the card is found in the cross-reference, it reads the account record using 5200-READ-ACCT-RECORD, the customer record using 5300-READ-CUST-RECORD, the authorization summary using 5500-READ-AUTH-SUMMRY, and the profile data using 5600-READ-PROFILE-DATA. After retrieving the data, it calls 6000-MAKE-DECISION to determine whether to approve or decline the authorization. Finally, it sends the response using 7100-SEND-RESPONSE and writes the authorization to the database using 8000-WRITE-AUTH-TO-DB if the card was found in the cross-reference file. Error handling is performed within the called paragraphs, and flags are set to indicate whether records were found or not found.",
      "called_by": [],
      "calls": [
        "1200-SCHEDULE-PSB",
        "5100-READ-XREF-RECORD",
        "5200-READ-ACCT-RECORD",
        "5300-READ-CUST-RECORD",
        "5500-READ-AUTH-SUMMRY",
        "5600-READ-PROFILE-DATA",
        "6000-MAKE-DECISION",
        "7100-SEND-RESPONSE",
        "8000-WRITE-AUTH-TO-DB"
      ],
      "citation": [
        438,
        476
      ],
      "outgoing_calls": [
        {
          "target": "1200-SCHEDULE-PSB",
          "call_type": "performs",
          "line": 443
        },
        {
          "target": "5100-READ-XREF-RECORD",
          "call_type": "performs",
          "line": 448
        },
        {
          "target": "5200-READ-ACCT-RECORD",
          "call_type": "performs",
          "line": 451
        },
        {
          "target": "5300-READ-CUST-RECORD",
          "call_type": "performs",
          "line": 452
        },
        {
          "target": "5500-READ-AUTH-SUMMRY",
          "call_type": "performs",
          "line": 454
        },
        {
          "target": "5600-READ-PROFILE-DATA",
          "call_type": "performs",
          "line": 456
        },
        {
          "target": "6000-MAKE-DECISION",
          "call_type": "performs",
          "line": 459
        },
        {
          "target": "7100-SEND-RESPONSE",
          "call_type": "performs",
          "line": 461
        },
        {
          "target": "8000-WRITE-AUTH-TO-DB",
          "call_type": "performs",
          "line": 464
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "2000-MAIN-PROCESS",
          "line": 330,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5100-READ-XREF-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the card cross-reference record from the VSAM file WS-CCXREF-FILE. It moves the card number from the request (PA-RQ-CARD-NUM) to the key field (XREF-CARD-NUM) and then executes a CICS READ command to retrieve the CARD-XREF-RECORD. The paragraph checks the CICS response code (WS-RESP-CD) to determine the outcome of the read operation. If the record is found (DFHRESP(NORMAL)), it sets CARD-FOUND-XREF to TRUE. If the record is not found (DFHRESP(NOTFND)), it sets CARD-NFOUND-XREF and NFOUND-ACCT-IN-MSTR to TRUE and logs a warning message. If any other error occurs, it logs a critical error message with the CICS response codes. The paragraph uses EVALUATE statement for error handling based on the CICS response code. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        472,
        517
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 500
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 512
        },
        {
          "target": "WS-CCXREF-FILE",
          "call_type": "reads",
          "line": 477
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 448,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5200-READ-ACCT-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the account record from the VSAM file WS-ACCTFILENAME. It moves the account ID from the cross-reference record (XREF-ACCT-ID) to the key field (WS-CARD-RID-ACCT-ID) and then executes a CICS READ command to retrieve the ACCOUNT-RECORD. The paragraph checks the CICS response code (WS-RESP-CD) to determine the outcome of the read operation. If the record is found (DFHRESP(NORMAL)), it sets FOUND-ACCT-IN-MSTR to TRUE. If the record is not found (DFHRESP(NOTFND)), it sets NFOUND-ACCT-IN-MSTR to TRUE and logs a warning message. If any other error occurs, it logs a critical error message with the CICS response codes. The paragraph uses EVALUATE statement for error handling based on the CICS response code. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        520,
        565
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 547
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 560
        },
        {
          "target": "WS-ACCTFILENAME",
          "call_type": "reads",
          "line": 525
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 451,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5300-READ-CUST-RECORD",
      "summary": null,
      "purpose": "This paragraph reads the customer record from the VSAM file WS-CUSTFILENAME. It moves the customer ID from the cross-reference record (XREF-CUST-ID) to the key field (WS-CARD-RID-CUST-ID) and then executes a CICS READ command to retrieve the CUSTOMER-RECORD. The paragraph checks the CICS response code (WS-RESP-CD) to determine the outcome of the read operation. If the record is found (DFHRESP(NORMAL)), it sets FOUND-CUST-IN-MSTR to TRUE. If the record is not found (DFHRESP(NOTFND)), it sets NFOUND-CUST-IN-MSTR to TRUE and logs a warning message. If any other error occurs, it logs a critical error message with the CICS response codes. The paragraph uses EVALUATE statement for error handling based on the CICS response code. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        568,
        613
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 595
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 608
        },
        {
          "target": "WS-CUSTFILENAME",
          "call_type": "reads",
          "line": 573
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 452,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5500-READ-AUTH-SUMMRY",
      "summary": null,
      "purpose": "This paragraph reads the pending authorization summary segment (PAUTSUM0) from the IMS database. It moves the account ID from the cross-reference record (XREF-ACCT-ID) to the PA-ACCT-ID field and then executes an IMS DLI GU (Get Unique) command to retrieve the segment. The paragraph checks the IMS return code (DIBSTAT) to determine the outcome of the read operation. If the segment is found (STATUS-OK), it sets FOUND-PAUT-SMRY-SEG to TRUE. If the segment is not found (SEGMENT-NOT-FOUND), it sets NFOUND-PAUT-SMRY-SEG to TRUE. If any other error occurs, it logs a critical error message with the IMS return code. The paragraph uses EVALUATE statement for error handling based on the IMS return code. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        616,
        644
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 639
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 454,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "5600-READ-PROFILE-DATA",
      "summary": null,
      "purpose": "This paragraph is a placeholder and currently contains only a CONTINUE statement. It does not perform any specific action. It is called by 5000-PROCESS-AUTH. It might be intended for future implementation to read profile data, but currently, it serves as a no-op. There is no error handling or data manipulation performed in this paragraph.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [],
      "citation": [
        647,
        654
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 456,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "6000-MAKE-DECISION",
      "summary": null,
      "purpose": "This paragraph determines whether to approve or decline the authorization request based on the available credit and the transaction amount. It first moves the request data to the response fields. If a pending authorization summary segment is found (FOUND-PAUT-SMRY-SEG), it calculates the available amount based on the credit limit and balance from the summary. Otherwise, if an account record is found (FOUND-ACCT-IN-MSTR), it calculates the available amount based on the credit limit and balance from the account record. If neither is found, the authorization is declined. If the transaction amount exceeds the available amount, the authorization is declined and INSUFFICIENT-FUND is set to TRUE. Based on the decision, the appropriate authorization response code and amount are moved to the response fields. Finally, it sets the authorization response reason based on various conditions such as card not found, insufficient funds, or other errors. The paragraph constructs the response message to be sent back.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [],
      "citation": [
        657,
        735
      ],
      "outgoing_calls": [],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 459,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "7100-SEND-RESPONSE",
      "summary": null,
      "purpose": "This paragraph sends the authorization response message to the MQ queue. It first sets the MQ object descriptor (MQOD) and message descriptor (MQMD) fields with the appropriate values, including the reply queue name and correlation ID. It then computes the MQPMO-OPTIONS for the MQPUT1 call. The paragraph moves the response length to W02-BUFFLEN and calls the MQPUT1 program to send the message. If the MQPUT1 call fails, it logs a critical error message with the MQ completion and reason codes. The paragraph uses an IF statement to check the MQ completion code and perform error handling. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "MQPUT1",
        "9500-LOG-ERROR"
      ],
      "citation": [
        738,
        793
      ],
      "outgoing_calls": [
        {
          "target": "MQPUT1",
          "call_type": "calls",
          "line": 758
        },
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 778
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 461,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8000-WRITE-AUTH-TO-DB",
      "summary": null,
      "purpose": "This paragraph writes the authorization information to the database. It calls 8400-UPDATE-SUMMARY to update the pending authorization summary in IMS and 8500-INSERT-AUTH to insert the authorization details. This paragraph is called only if the card is found in the cross-reference file. It orchestrates the update of the IMS summary and the insertion of the authorization record. No specific error handling is done in this paragraph; it relies on the called paragraphs to handle errors.",
      "called_by": [
        "5000-PROCESS-AUTH"
      ],
      "calls": [
        "8400-UPDATE-SUMMARY",
        "8500-INSERT-AUTH"
      ],
      "citation": [
        786,
        795
      ],
      "outgoing_calls": [
        {
          "target": "8400-UPDATE-SUMMARY",
          "call_type": "performs",
          "line": 790
        },
        {
          "target": "8500-INSERT-AUTH",
          "call_type": "performs",
          "line": 791
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "5000-PROCESS-AUTH",
          "line": 464,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8400-UPDATE-SUMMARY",
      "summary": null,
      "purpose": "This paragraph updates the pending authorization summary in the IMS database. If a summary segment is not found (NFOUND-PAUT-SMRY-SEG), it initializes the PENDING-AUTH-SUMMARY and moves the account and customer IDs from the cross-reference record. It then moves the account credit limits. If the authorization is approved (AUTH-RESP-APPROVED), it increments the approved authorization count and amount and updates the credit balance. Otherwise, it increments the declined authorization count and amount. Finally, it either replaces the existing segment (EXEC DLI REPL) if a summary segment was found or inserts a new segment (EXEC DLI ISRT) if a summary segment was not found. The paragraph checks the IMS return code (DIBSTAT) and logs an error if the update fails. The error logging is done by calling 9500-LOG-ERROR.",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [
        "9500-LOG-ERROR"
      ],
      "citation": [
        798,
        861
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 846
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8000-WRITE-AUTH-TO-DB",
          "line": 790,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    },
    {
      "paragraph_name": "8500-INSERT-AUTH",
      "summary": null,
      "purpose": "This paragraph inserts the authorization details into the database. It retrieves the current date and time using CICS ASKTIME and FORMATTIME commands. It then calculates the authorization date and time as 9C packed decimal values. The paragraph moves the request data to the authorization record fields. This paragraph prepares the data and inserts the authorization record. No specific error handling is done in this paragraph.",
      "called_by": [
        "8000-WRITE-AUTH-TO-DB"
      ],
      "calls": [],
      "citation": [
        854,
        891
      ],
      "outgoing_calls": [
        {
          "target": "9500-LOG-ERROR",
          "call_type": "performs",
          "line": 931
        }
      ],
      "incoming_calls": [
        {
          "file": "/home/andras/aws-mainframe-modernization-carddemo/app/app-authorization-ims-db2-mq/cbl/COPAUA0C.cbl",
          "function": "8000-WRITE-AUTH-TO-DB",
          "line": 791,
          "call_type": "performs"
        }
      ],
      "is_dead_code": false,
      "dead_code_reason": null,
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "WS-REASON = MQRC-NO-MSG-AVAILABLE",
      "action": "SET NO-MORE-MSG-AVAILABLE TO TRUE",
      "citation": [
        416,
        417
      ]
    },
    {
      "condition": "WS-COMPCODE NOT = MQCC-OK (MQGET)",
      "action": "MOVE 'M003' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        420,
        429
      ]
    },
    {
      "condition": "WS-RESP-CD NOT = DFHRESP(NORMAL) (XREF READ)",
      "action": "MOVE 'C001' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        502,
        512
      ]
    },
    {
      "condition": "WS-RESP-CD NOT = DFHRESP(NORMAL) (ACCT READ)",
      "action": "MOVE 'C002' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        160,
        170
      ]
    },
    {
      "condition": "WS-RESP-CD NOT = DFHRESP(NORMAL) (CUST READ)",
      "action": "MOVE 'C003' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        598,
        608
      ]
    },
    {
      "condition": "DIBSTAT NOT = STATUS-OK (IMS GET SUMMARY)",
      "action": "MOVE 'I002' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        633,
        639
      ]
    },
    {
      "condition": "WS-COMPCODE NOT = MQCC-OK (MQPUT1)",
      "action": "MOVE 'M004' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        777,
        788
      ]
    },
    {
      "condition": "DIBSTAT NOT = STATUS-OK (IMS UPDATE SUMMARY)",
      "action": "MOVE 'I003' TO ERR-LOCATION, SET ERR-CRITICAL TO TRUE, PERFORM 9500-LOG-ERROR",
      "citation": [
        840,
        846
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "READ",
      "resource": "WS-CCXREF-FILE",
      "purpose": "Read card cross-reference record.",
      "citation": 477
    },
    {
      "command": "READ",
      "resource": "WS-ACCTFILENAME",
      "purpose": "Read account record.",
      "citation": 525
    },
    {
      "command": "READ",
      "resource": "WS-CUSTFILENAME",
      "purpose": "Read customer record.",
      "citation": 573
    },
    {
      "command": "ASKTIME",
      "resource": null,
      "purpose": "Get current system time.",
      "citation": 857
    },
    {
      "command": "FORMATTIME",
      "resource": null,
      "purpose": "Format system time into usable formats.",
      "citation": 871
    }
  ],
  "open_questions": [
    {
      "question": "What is the purpose of the 1200-SCHEDULE-PSB paragraph?",
      "context": "The code only shows a PERFORM THRU, but the contents of the paragraph are not included in the sample.",
      "suggestion": "Examine the complete source code to determine the function of 1200-SCHEDULE-PSB."
    },
    {
      "question": "What is the complete structure of the input and output messages (W01-GET-BUFFER and W02-PUT-BUFFER)?",
      "context": "The code references these buffers but does not define their structure.",
      "suggestion": "Examine the copybooks or data definitions associated with these buffers."
    },
    {
      "question": "What is the purpose of the 9500-LOG-ERROR paragraph?",
      "context": "The code calls this paragraph for error logging, but the implementation is not included in the sample.",
      "suggestion": "Examine the complete source code to determine the function of 9500-LOG-ERROR."
    }
  ],
  "dead_code": [
    {
      "name": "9500-EXIT",
      "artifact_type": "paragraph",
      "line": 1012,
      "reason": "Paragraph '9500-EXIT' is never PERFORMed or referenced by any other paragraph or program"
    },
    {
      "name": "9990-EXIT",
      "artifact_type": "paragraph",
      "line": 1024,
      "reason": "Paragraph '9990-EXIT' is never PERFORMed or referenced by any other paragraph or program"
    }
  ],
  "flow_diagram": "flowchart TD\n    %% Title: COPAUA0C.cbl\n    1000_EXIT[\"1000-EXIT\"]\n    1000_INITIALIZE[\"1000-INITIALIZE\"]\n    1100_OPEN_REQUEST_QUEUE[\"1100-OPEN-REQUEST-QUEUE\"]\n    3100_READ_REQUEST_MQ[\"3100-READ-REQUEST-MQ\"]\n    1100_EXIT[\"1100-EXIT\"]\n    9500_LOG_ERROR[\"9500-LOG-ERROR\"]\n    MQOPEN__ext([\"MQOPEN\"])\n    1200_EXIT[\"1200-EXIT\"]\n    1200_SCHEDULE_PSB[\"1200-SCHEDULE-PSB\"]\n    2000_EXIT[\"2000-EXIT\"]\n    2000_MAIN_PROCESS[\"2000-MAIN-PROCESS\"]\n    2100_EXTRACT_REQUEST_MSG[\"2100-EXTRACT-REQUEST-MSG\"]\n    5000_PROCESS_AUTH[\"5000-PROCESS-AUTH\"]\n    2100_EXIT[\"2100-EXIT\"]\n    3100_EXIT[\"3100-EXIT\"]\n    MQGET__ext([\"MQGET\"])\n    5000_EXIT[\"5000-EXIT\"]\n    5100_READ_XREF_RECORD[\"5100-READ-XREF-RECORD\"]\n    5200_READ_ACCT_RECORD[\"5200-READ-ACCT-RECORD\"]\n    5300_READ_CUST_RECORD[\"5300-READ-CUST-RECORD\"]\n    5500_READ_AUTH_SUMMRY[\"5500-READ-AUTH-SUMMRY\"]\n    5600_READ_PROFILE_DATA[\"5600-READ-PROFILE-DATA\"]\n    6000_MAKE_DECISION[\"6000-MAKE-DECISION\"]\n    7100_SEND_RESPONSE[\"7100-SEND-RESPONSE\"]\n    8000_WRITE_AUTH_TO_DB[\"8000-WRITE-AUTH-TO-DB\"]\n    5100_EXIT[\"5100-EXIT\"]\n    WS_CCXREF_FILE__ext[(\"WS-CCXREF-FILE\")]\n    5200_EXIT[\"5200-EXIT\"]\n    WS_ACCTFILENAME__ext[(\"WS-ACCTFILENAME\")]\n    5300_EXIT[\"5300-EXIT\"]\n    WS_CUSTFILENAME__ext[(\"WS-CUSTFILENAME\")]\n    5500_EXIT[\"5500-EXIT\"]\n    5600_EXIT[\"5600-EXIT\"]\n    6000_EXIT[\"6000-EXIT\"]\n    7100_EXIT[\"7100-EXIT\"]\n    MQPUT1__ext([\"MQPUT1\"])\n    8000_EXIT[\"8000-EXIT\"]\n    8400_UPDATE_SUMMARY[\"8400-UPDATE-SUMMARY\"]\n    8500_INSERT_AUTH[\"8500-INSERT-AUTH\"]\n    8400_EXIT[\"8400-EXIT\"]\n    8500_EXIT[\"8500-EXIT\"]\n    9000_EXIT[\"9000-EXIT\"]\n    9000_TERMINATE[\"9000-TERMINATE\"]\n    9100_CLOSE_REQUEST_QUEUE[\"9100-CLOSE-REQUEST-QUEUE\"]\n    MQCLOSE__ext([\"MQCLOSE\"])\n    9100_EXIT[\"9100-EXIT\"]\n    9500_EXIT[\"9500-EXIT\"]\n    9990_END_ROUTINE[\"9990-END-ROUTINE\"]\n    9990_EXIT[\"9990-EXIT\"]\n    MAIN_PARA[\"MAIN-PARA\"]\n    1000_INITIALIZE --> 1100_OPEN_REQUEST_QUEUE\n    1000_INITIALIZE --> 3100_READ_REQUEST_MQ\n    1100_OPEN_REQUEST_QUEUE --> 9500_LOG_ERROR\n    1100_OPEN_REQUEST_QUEUE -.->|calls| MQOPEN__ext\n    1200_SCHEDULE_PSB --> 9500_LOG_ERROR\n    2000_MAIN_PROCESS --> 2100_EXTRACT_REQUEST_MSG\n    2000_MAIN_PROCESS --> 3100_READ_REQUEST_MQ\n    2000_MAIN_PROCESS --> 5000_PROCESS_AUTH\n    3100_READ_REQUEST_MQ --> 9500_LOG_ERROR\n    3100_READ_REQUEST_MQ -.->|calls| MQGET__ext\n    5000_PROCESS_AUTH --> 1200_SCHEDULE_PSB\n    5000_PROCESS_AUTH --> 5100_READ_XREF_RECORD\n    5000_PROCESS_AUTH --> 5200_READ_ACCT_RECORD\n    5000_PROCESS_AUTH --> 5300_READ_CUST_RECORD\n    5000_PROCESS_AUTH --> 5500_READ_AUTH_SUMMRY\n    5000_PROCESS_AUTH --> 5600_READ_PROFILE_DATA\n    5000_PROCESS_AUTH --> 6000_MAKE_DECISION\n    5000_PROCESS_AUTH --> 7100_SEND_RESPONSE\n    5000_PROCESS_AUTH --> 8000_WRITE_AUTH_TO_DB\n    5100_READ_XREF_RECORD --> 9500_LOG_ERROR\n    5100_READ_XREF_RECORD -.->|reads| WS_CCXREF_FILE__ext\n    5200_READ_ACCT_RECORD --> 9500_LOG_ERROR\n    5200_READ_ACCT_RECORD -.->|reads| WS_ACCTFILENAME__ext\n    5300_READ_CUST_RECORD --> 9500_LOG_ERROR\n    5300_READ_CUST_RECORD -.->|reads| WS_CUSTFILENAME__ext\n    5500_READ_AUTH_SUMMRY --> 9500_LOG_ERROR\n    7100_SEND_RESPONSE --> 9500_LOG_ERROR\n    7100_SEND_RESPONSE -.->|calls| MQPUT1__ext\n    8000_WRITE_AUTH_TO_DB --> 8400_UPDATE_SUMMARY\n    8000_WRITE_AUTH_TO_DB --> 8500_INSERT_AUTH\n    8400_UPDATE_SUMMARY --> 9500_LOG_ERROR\n    8500_INSERT_AUTH --> 9500_LOG_ERROR\n    9000_TERMINATE --> 9100_CLOSE_REQUEST_QUEUE\n    9100_CLOSE_REQUEST_QUEUE --> 9500_LOG_ERROR\n    9100_CLOSE_REQUEST_QUEUE -.->|calls| MQCLOSE__ext\n    9500_LOG_ERROR --> 9990_END_ROUTINE\n    9990_END_ROUTINE --> 9000_TERMINATE\n    MAIN_PARA --> 1000_INITIALIZE\n    MAIN_PARA --> 2000_MAIN_PROCESS\n    MAIN_PARA --> 9000_TERMINATE"
}