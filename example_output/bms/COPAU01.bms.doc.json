{
  "header": {
    "program_id": "COPAU01",
    "file_name": "COPAU01.bms",
    "file_type": "BMS",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T14:23:23.186977",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This BMS file defines the mapset COPAU01 containing the single map COPAU1A for the 'Pending Authorization Details Screen' in a CICS CardDemo application. It specifies screen layout including header fields for transaction ID, date, time, program name, titles, and detailed fields for card number, auth date/time/response/reason/code/amount/type/source, merchant details, and fraud/match status. The map supports display-only fields with labels, colors, positions, and bottom function keys for user actions.",
    "business_context": "Review and management of pending card authorization details in a payment processing system",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      19,
      26,
      292
    ]
  },
  "inputs": [
    {
      "name": "COPAU1A",
      "io_type": "CICS_MAP",
      "description": "Symbolic map for receiving user input such as function key presses from the screen",
      "copybook": null,
      "citation": [
        26
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU1A",
      "io_type": "CICS_MAP",
      "description": "Physical and symbolic map for sending authorization details to the 3270 screen display",
      "copybook": null,
      "citation": [
        26
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Screen navigation and actions controlled by function keys: F3=Back to previous screen, F5=Mark/Remove Fraud on the authorization, F8=Next Auth to view subsequent authorization",
      "logic_summary": "Function key labels displayed at screen bottom; handling implemented in calling CICS program based on received map AID field",
      "conditions": [
        "User presses F3",
        "User presses F5",
        "User presses F8"
      ],
      "citation": [
        292
      ]
    }
  ],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [
    {
      "paragraph_name": "COPAU1A",
      "summary": null,
      "purpose": "This map definition serves as the primary screen layout for displaying pending authorization details in the CICS online transaction. It consumes data from the calling program's working storage variables mapped to symbolic fields such as CARDNUM (line 85), AUTHDT (94), AUTHTM (104), AUTHAMT (144), MERNAME (239), and others, which are populated before SEND MAP. It produces a formatted 24x80 screen output with protected label fields (ASKIP) in turquoise/blue/yellow and data fields in pink/blue/red/neutral colors for readability and highlighting (e.g., fraud status in red at 224). No business decisions are made here as it is a static layout definition; all fields are display-only (ATTRB includes ASKIP on data fields) except implied function key detection via RECEIVE MAP. Error handling is supported via the ERRMSG field (line 284) with attributes ASKIP,BRT,FSET for bright protected error message display. No subordinate paragraphs or programs are called as this is a BMS map, not executable code; it is referenced by CICS EXEC CICS SEND/RECEIVE MAP commands in the driving program.",
      "called_by": [],
      "calls": [],
      "citation": [
        26,
        293
      ],
      "outgoing_calls": [],
      "incoming_calls": [],
      "metadata": null
    }
  ],
  "error_handling": [
    {
      "condition": "Application error requiring message display",
      "action": "Populate and display error text in ERRMSG field (bright, protected, field-set attribute)",
      "citation": [
        284
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "SEND MAP",
      "resource": "COPAU1A",
      "purpose": "Output populated authorization and merchant details to user screen",
      "citation": 26
    },
    {
      "command": "RECEIVE MAP",
      "resource": "COPAU1A",
      "purpose": "Input function key or any modifiable field from user interaction",
      "citation": 26
    }
  ],
  "open_questions": []
}