{
  "header": {
    "program_id": "COPAU01",
    "file_name": "COPAU01.bms",
    "file_type": "BMS",
    "analyzed_by": "Scribe",
    "analyzed_at": "2026-01-26T02:33:04.990818",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "This BMS mapset defines the COPAU01 screen for the CardDemo application, displaying pending authorization details including card number, auth date/time/response, amount, merchant info, and fraud/match status. The screen supports view-only display with protected fields and function keys for navigation (F3=Back), fraud marking (F5), and next auth (F8). It is designed for CICS online transaction review in a payment processing demo.",
    "business_context": "Review and management of pending credit card authorizations, including fraud detection and merchant details verification.",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      19,
      78,
      292
    ]
  },
  "inputs": [
    {
      "name": "COPAU1A",
      "io_type": "CICS_MAP",
      "description": "Receives user input from the terminal, primarily function key actions (F3, F5, F8) since all data fields are protected with ASKIP; ERRMSG field supports error feedback but remains protected.",
      "copybook": null,
      "citation": [
        22,
        26,
        284,
        292
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU1A",
      "io_type": "CICS_MAP",
      "description": "Defines the 24x80 screen layout populated by the calling CICS program with authorization and merchant details for display to the user.",
      "copybook": null,
      "citation": [
        19,
        26
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "All data display fields are protected to enforce view-only access, preventing user modification of authorization details.",
      "logic_summary": "Implemented via ASKIP attribute on every DFHMDF defining data fields, ensuring no unprotected input fields.",
      "conditions": [
        "ATTRB includes ASKIP on all data fields",
        "MODE=INOUT but no PROT=OFF fields"
      ],
      "citation": [
        22,
        34,
        57,
        85,
        94,
        104,
        114,
        124,
        134,
        144,
        154,
        164,
        174,
        184,
        194,
        204,
        214,
        224,
        239,
        249,
        259,
        269,
        279,
        284
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Error messages are displayed in a dedicated protected field with bright and set attributes for visibility.",
      "logic_summary": "ERRMSG field uses ATTRB=(ASKIP,BRT,FSET) to highlight errors without allowing modification.",
      "conditions": [
        "Error condition triggers population of ERRMSG"
      ],
      "citation": [
        284
      ]
    }
  ],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [],
  "error_handling": [
    {
      "condition": "Application or validation errors",
      "action": "Display message in protected ERRMSG field at POS=(23,1) with bright red highlighting.",
      "citation": [
        284
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [],
  "open_questions": [
    {
      "question": "Which CICS program(s) use this BMS mapset (SEND/RECEIVE COPAU1A)?",
      "context": "Not specified in the BMS source file.",
      "suggestion": "Search calling COBOL programs for references to COPAU01 or COPAU1A."
    },
    {
      "question": "What are the exact data sources (e.g., VSAM files, DB2 tables) populating the map fields?",
      "context": "BMS defines layout only, not data sources.",
      "suggestion": "Analyze the using CICS program."
    }
  ]
}