{
  "header": {
    "program_id": "COPAU00",
    "file_name": "COPAU00.bms",
    "file_type": "BMS",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T14:23:14.843576",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "The COPAU00 BMS map defines the layout for the CardDemo Pending Authorization Screen. It provides fields for inputting an Account ID to search, displays customer account details including name, customer ID, address, status, phone, approval/decline counts, credit/cash limits and balances. It also shows a table of up to five pending authorization transactions with columns for selection, transaction ID, date, time, type, A/D, status, and amount, allowing user selection via 'S' for details.",
    "business_context": "Serves credit card authorization review process by displaying pending authorizations for a specific account to enable selection and further viewing.",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      19,
      78,
      83
    ]
  },
  "inputs": [
    {
      "name": "ACCTID",
      "io_type": "CICS_MAP",
      "description": "Account ID search field, unprotected for user entry",
      "copybook": null,
      "citation": [
        84,
        85,
        87
      ]
    },
    {
      "name": "SEL0001",
      "io_type": "CICS_MAP",
      "description": "Selection field (e.g., 'S') for first pending transaction, unprotected",
      "copybook": null,
      "citation": [
        277,
        278,
        280
      ]
    },
    {
      "name": "SEL0002",
      "io_type": "CICS_MAP",
      "description": "Selection field (e.g., 'S') for second pending transaction, unprotected",
      "copybook": null,
      "citation": [
        321,
        322,
        324
      ]
    },
    {
      "name": "SEL0003",
      "io_type": "CICS_MAP",
      "description": "Selection field (e.g., 'S') for third pending transaction, unprotected",
      "copybook": null,
      "citation": [
        365,
        366,
        368
      ]
    },
    {
      "name": "SEL0004",
      "io_type": "CICS_MAP",
      "description": "Selection field (e.g., 'S') for fourth pending transaction, unprotected",
      "copybook": null,
      "citation": [
        409,
        410,
        412
      ]
    },
    {
      "name": "SEL0005",
      "io_type": "CICS_MAP",
      "description": "Selection field (e.g., 'S') for fifth pending transaction, unprotected",
      "copybook": null,
      "citation": [
        488,
        489,
        491
      ]
    }
  ],
  "outputs": [
    {
      "name": "COPAU00",
      "io_type": "CICS_MAP",
      "description": "Full screen map including headers, account details (CNAME, CUSTID, PHONE1, APPRCNT, DECLCNT, CREDLIM, CASHLIM, APPRAMT, CREDBAL, CASHBAL, DECLAMT), and transaction list fields (TRNID01-05, PDATE01-05, etc.) populated by calling program",
      "copybook": null,
      "citation": [
        19,
        26,
        96,
        103,
        125,
        132,
        139,
        147,
        156,
        165,
        174,
        183,
        192,
        286
      ]
    },
    {
      "name": "ERRMSG",
      "io_type": "CICS_MAP",
      "description": "Error message display field",
      "copybook": null,
      "citation": [
        503
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Limits display to a maximum of five pending authorization transactions per account",
      "logic_summary": "Screen layout defines exactly five rows of transaction fields (TRNID01-05, PDATE01-05, PTIME01-05, PTYPE01-05, PAPRV01-05, PSTAT01-05, PAMT001-05) with corresponding selection fields SEL0001-SEL0005",
      "conditions": [
        "Display only 5 transactions",
        "User selects via SEL fields"
      ],
      "citation": [
        277,
        321,
        365,
        409,
        488
      ]
    }
  ],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [],
  "error_handling": [
    {
      "condition": "Application error",
      "action": "Populate and display message in ERRMSG field (bright, red, FSET)",
      "citation": [
        503,
        504
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "SEND MAP",
      "resource": "COPAU00",
      "purpose": "Transmit screen layout and data for pending authorizations display",
      "citation": 19
    },
    {
      "command": "RECEIVE MAP",
      "resource": "COPAU00",
      "purpose": "Receive user inputs from ACCTID and SELxxxx fields",
      "citation": 19
    }
  ],
  "open_questions": [
    {
      "question": "Which CICS COBOL program(s) reference and use this BMS map?",
      "context": "BMS file defines the map but does not indicate the calling transaction/program",
      "suggestion": "Search for COPY COPAU00 or DFHMDI COPAU00 in associated COBOL source files"
    },
    {
      "question": "What populates the dynamic display fields like TRNID01, CNAME, etc.?",
      "context": "BMS defines layout and initial values (mostly spaces) but data sources are in calling program",
      "suggestion": "Analyze referencing CICS program for MOVE statements to map fields"
    }
  ]
}