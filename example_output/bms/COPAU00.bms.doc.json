{
  "header": {
    "program_id": "COPAU00",
    "file_name": "COPAU00.bms",
    "file_type": "BMS",
    "analyzed_by": "WAR_RIG",
    "analyzed_at": "2026-01-26T15:14:02.371671",
    "iteration_count": 1,
    "final_status": null
  },
  "purpose": {
    "summary": "BMS mapset definition for the 'Pending Authorization Screen' in the CardDemo application. Provides a terminal screen for searching pending authorizations by account ID, displaying customer details, account limits/balances, and a selectable list of up to 5 transactions. Supports user interaction via selection fields and function keys for navigation.",
    "business_context": "Credit card processing system for customer service representatives to view, search, and select pending authorization transactions by account.",
    "program_type": "ONLINE_CICS",
    "citations": [
      2,
      3,
      19,
      78,
      83,
      501
    ]
  },
  "inputs": [
    {
      "name": "ACCTID",
      "io_type": "CICS_MAP",
      "description": "11-character unprotected input field for searching account ID",
      "copybook": null,
      "citation": [
        84,
        87
      ]
    },
    {
      "name": "SEL0001",
      "io_type": "CICS_MAP",
      "description": "1-character unprotected selection field for transaction 1",
      "copybook": null,
      "citation": [
        277,
        280
      ]
    },
    {
      "name": "SEL0002",
      "io_type": "CICS_MAP",
      "description": "1-character unprotected selection field for transaction 2",
      "copybook": null,
      "citation": [
        321,
        324
      ]
    },
    {
      "name": "SEL0003",
      "io_type": "CICS_MAP",
      "description": "1-character unprotected selection field for transaction 3",
      "copybook": null,
      "citation": [
        365,
        368
      ]
    },
    {
      "name": "SEL0004",
      "io_type": "CICS_MAP",
      "description": "1-character unprotected selection field for transaction 4",
      "copybook": null,
      "citation": [
        409,
        412
      ]
    },
    {
      "name": "SEL0005",
      "io_type": "CICS_MAP",
      "description": "1-character unprotected selection field for transaction 5",
      "copybook": null,
      "citation": [
        488,
        491
      ]
    }
  ],
  "outputs": [
    {
      "name": "Customer Info Fields",
      "io_type": "CICS_MAP",
      "description": "Protected display fields for customer name (CNAME), ID (CUSTID), address (ADDR001/ADDR002), phone (PHONE1), account status (ACCSTAT)",
      "copybook": null,
      "citation": [
        96,
        103,
        107,
        118,
        125,
        132,
        139
      ]
    },
    {
      "name": "Account Summary Fields",
      "io_type": "CICS_MAP",
      "description": "Protected display fields for credit/cash limits (CREDLIM/CASHLIM), balances (CREDBAL/CASHBAL), approved/declined counts (APPRCNT/DECLCNT), amounts (APPRAMT/DECLAMT)",
      "copybook": null,
      "citation": [
        147,
        156,
        165,
        174,
        183,
        192
      ]
    },
    {
      "name": "Transaction List Fields",
      "io_type": "CICS_MAP",
      "description": "Protected display fields for transaction details including TRNIDxx, PDATExx, PTIMExx, PTYPExx, PAPRVxx, PSTATxx, PAMTxx (x=01-05)",
      "copybook": null,
      "citation": [
        286,
        330,
        374,
        418,
        453
      ]
    },
    {
      "name": "ERRMSG",
      "io_type": "CICS_MAP",
      "description": "Error message display field (78 characters, bright, red)",
      "copybook": null,
      "citation": [
        503
      ]
    },
    {
      "name": "Header/Trailer Fields",
      "io_type": "CICS_MAP",
      "description": "Static labels, titles, current date/time (CURDATE/CURTIME), program name (PGMNAME/TRNNAME), function key help",
      "copybook": null,
      "citation": [
        33,
        46,
        51,
        69,
        74,
        511
      ]
    }
  ],
  "called_programs": [],
  "calling_context": {
    "called_by": [],
    "entry_points": [],
    "linkage_section": []
  },
  "business_rules": [
    {
      "rule_id": "BR001",
      "description": "Account search input constrained to exactly 11 characters",
      "logic_summary": "ACCTID field defined with LENGTH=11 and UNPROT attribute for user entry",
      "conditions": [
        "User enters ACCTID for search"
      ],
      "citation": [
        84,
        87
      ]
    },
    {
      "rule_id": "BR002",
      "description": "Transaction selection by entering 'S' in one of the 1-character SEL fields",
      "logic_summary": "SELxxxx fields are 1-char UNPROT; screen instruction specifies 'Type \"S\" to View Authorization details'",
      "conditions": [
        "SEL0001='S'",
        "SEL0002='S'",
        "SEL0003='S'",
        "SEL0004='S'",
        "SEL0005='S'"
      ],
      "citation": [
        277,
        321,
        365,
        409,
        488,
        501
      ]
    },
    {
      "rule_id": "BR003",
      "description": "Screen navigation via function keys: F3=Back, F7=Backward, F8=Forward, ENTER=Continue",
      "logic_summary": "Static help text in footer defines user navigation options",
      "conditions": [
        "Function key pressed"
      ],
      "citation": [
        511
      ]
    }
  ],
  "data_flow": {
    "reads_from": [],
    "writes_to": [],
    "transforms": []
  },
  "copybooks_used": [],
  "paragraphs": [],
  "error_handling": [
    {
      "condition": "Application or validation errors",
      "action": "Populate and display message in ERRMSG field (position 23,1, length 78, red, bright)",
      "citation": [
        503
      ]
    }
  ],
  "sql_operations": [],
  "cics_operations": [
    {
      "command": "SEND MAP",
      "resource": "COPAU00",
      "purpose": "Display the pending authorization screen with customer and transaction data",
      "citation": 19
    },
    {
      "command": "RECEIVE MAP",
      "resource": "COPAU00",
      "purpose": "Capture user inputs from ACCTID and SEL fields",
      "citation": 22
    }
  ],
  "open_questions": [
    {
      "question": "Which CICS transaction ID or program uses this BMS mapset?",
      "context": "BMS file defines the map but does not reference calling program or transaction",
      "suggestion": "Search COBOL programs for 'COPAU00' in SEND/RECEIVE MAP statements"
    },
    {
      "question": "What are the exact data sources populating the output fields (e.g., TRNID01)?",
      "context": "BMS defines layout only, not data population logic",
      "suggestion": "Analyze referencing CICS program WORKING-STORAGE and logic"
    }
  ]
}