{"id":"war_rig-000","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T18:48:18.680153-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:50:09.933443-07:00","closed_at":"2026-01-10T18:50:09.933443-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COADM01C.cbl","pm-state:created","pm-type:documentation","program:COADM01C","worker:scribe-2"]}
{"id":"war_rig-01q","title":"[DOCUMENTATION] CSUTLDTC: CSUTLDTC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:34:04.332534-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:48.96144-07:00","closed_at":"2026-01-10T15:36:48.96144-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CSUTLDTC.cbl","pm-type:documentation","program:CSUTLDTC","worker:scribe-2"]}
{"id":"war_rig-09jq","title":"Integrate structural pre-check into Challenger validation pipeline","description":"## Context\n\nTickets war_rig-ylbu and war_rig-v8pf provide the building blocks: Citadel context loading and structural comparison logic. This ticket wires them into the ChallengerWorker's existing validation flow so that the structural pre-check runs BEFORE the LLM-based ChallengerAgent.ainvoke() call, and its results merge with the LLM output.\n\n## Requirements\n\n1. Modify _process_ticket() in ChallengerWorker (war_rig/workers/challenger_pool.py, line 449). After _load_documentation_state() succeeds (line 498) and before calling _validate_documentation() (line 513), add a structural pre-check step:\n   - Resolve the source file path from state or ticket metadata (state has file_name, metadata has file_path)\n   - Call _get_citadel_context(file_path) to load structural facts\n   - If citadel_context is not None, call _run_structural_precheck(citadel_context, state[\"template\"], ticket.file_name)\n   - Store the structural issues list for later merging\n\n2. Modify _validate_documentation() (line 777) to accept an optional parameter structural_issues: list[ChallengerQuestion] = None. Inside the method:\n   - After ChallengerAgent.ainvoke() returns (line 824), merge structural_issues into the output:\n     - Convert structural ChallengerQuestion objects to the same dict format used by blocking_questions (lines 835-846): {question_id, section, question_type, question, severity, evidence}\n     - Prepend structural issues to the blocking_questions list (structural issues come first)\n   - Deduplicate: if the LLM also raised a question about the same section + same paragraph name, prefer the structural issue (it has exact evidence from Citadel)\n\n3. Add optional LLM-skip optimization: If structural pre-check alone finds \u003e= 3 BLOCKING issues, skip the LLM call entirely and return a ValidationResult with is_valid=False and those blocking questions. Log a message explaining the skip (cost saving). This should be controlled by a boolean attribute (e.g., self.config or a constant SKIP_LLM_ON_STRUCTURAL_BLOCKING = True).\n\n4. Ensure the pre-check does NOT run for discovery tickets (_process_discovery_validation at line 915 -- this path returns early before _validate_documentation is called, so no change needed there).\n\n5. Update ValidationResult (line 91-107) if needed -- may want to add a field like structural_issues_count: int = 0 for observability.\n\n## Acceptance Criteria\n\n- Structural pre-check runs before LLM call in the validation pipeline\n- Structural issues are prepended to LLM blocking questions\n- When structural pre-check finds \u003e= 3 BLOCKING issues, LLM call is skipped (configurable)\n- When structural pre-check returns empty list, LLM validation proceeds unchanged (backwards compatible)\n- Discovery ticket validation is unaffected\n- Logging shows when structural pre-check ran, how many issues found, whether LLM was skipped\n- The was_sampled filter logic (lines 852-883) still applies to LLM-generated questions only (not structural ones)\n\n## Files to Modify\n\n- war_rig/workers/challenger_pool.py:\n  - _process_ticket() method (~line 449)\n  - _validate_documentation() method (~line 777)\n  - ValidationResult dataclass (~line 91) -- optional field addition\n\n## Dependencies\n\n- Depends on: war_rig-ylbu (Citadel context loading)\n- Depends on: war_rig-v8pf (Structural comparison logic)","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-27T15:16:50.113548739-07:00","created_by":"andrasfe","updated_at":"2026-01-27T15:24:08.088624718-07:00","closed_at":"2026-01-27T15:24:08.088624718-07:00","close_reason":"Closed"}
{"id":"war_rig-0fc","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.963131-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.397967-07:00","closed_at":"2026-01-10T15:25:58.397967-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C","worker:scribe-1"]}
{"id":"war_rig-0j1","title":"[DOCUMENTATION] COTRN00C: COTRN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.899868-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.417141-07:00","closed_at":"2026-01-10T15:25:58.417141-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COTRN00C.cbl","pm-type:documentation","program:COTRN00C","worker:scribe-1"]}
{"id":"war_rig-0s9","title":"[DOCUMENTATION] COTRN00C: COTRN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.467644-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.757812-07:00","closed_at":"2026-01-18T09:28:01.757812-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COTRN00C.cbl","pm-type:documentation","program:COTRN00C"]}
{"id":"war_rig-0t89","title":"[DOCUMENTATION] CBIMPORT: CBIMPORT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:54.554919-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:13:36.454606-07:00","closed_at":"2026-01-11T08:13:36.454606-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBIMPORT.cbl","pm-type:documentation","program:CBIMPORT","worker:scribe-2"]}
{"id":"war_rig-16h1","title":"Implement Super-Scribe formatting fix ticket workflow","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.383405-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:18.383405-07:00","dependencies":[{"issue_id":"war_rig-16h1","depends_on_id":"war_rig-zrft","type":"blocks","created_at":"2026-01-18T08:03:37.334988-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-18p","title":"[DOCUMENTATION] COACTVWC: COACTVWC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.407265-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.887724-07:00","closed_at":"2026-01-18T09:28:01.887724-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COACTVWC.cbl","pm-type:documentation","program:COACTVWC"]}
{"id":"war_rig-1a0","title":"Program Manager Agent Enhancement","description":"Add Program Manager agent with ticket-based parallel workflow. Multiple Scribes (default 3) and Challengers (default 2) pick up tickets. Imperator reviews holistically and can open clarification tickets. Cycle repeats until max iterations or satisfied.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-10T13:03:32.919986-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:32:24.558417-07:00","closed_at":"2026-01-10T13:32:24.558417-07:00","close_reason":"All implementation tasks completed: Program Manager agent, worker pools, orchestration engine, tests, and CLI"}
{"id":"war_rig-1acd","title":"Architecture review: Sequence Diagram SDK API implementation","description":"## Summary\nReview the Sequence Diagram SDK API implementation for consistency with existing Citadel SDK patterns and proper integration with the graph model.\n\n## Review Scope\n- Code consistency with existing SDK patterns and conventions\n- Proper integration with existing Citadel graph model\n- API design review (method signature, return types, error handling)\n- Performance considerations for large dependency graphs\n- Documentation completeness\n\n## Acceptance Criteria\n- Implementation follows existing Citadel SDK coding conventions\n- API is consistent with other SDK methods in naming and behavior\n- Integration with graph model is clean and doesn't introduce tight coupling\n- No architectural concerns or tech debt introduced\n- Review comments addressed or documented for future work\n\n## Dependencies\n- Depends on war_rig-8umy (SDK API implementation)\n- Transitively depends on war_rig-vr6e (algorithm design)\n\n## Deliverables\n- Code review completed with feedback\n- Approval or list of required changes\n- Documentation of any architectural decisions made","status":"closed","priority":2,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-25T16:06:41.399471-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:17:09.841068-07:00","closed_at":"2026-01-25T16:17:09.841068-07:00","close_reason":"Implementation complete and reviewed","labels":["architecture","citadel","review","sdk","sequence-diagram"],"dependencies":[{"issue_id":"war_rig-1acd","depends_on_id":"war_rig-8umy","type":"blocks","created_at":"2026-01-25T16:06:41.401418-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1b8e","title":"Create integration tests for chunked processing workflow","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-18T08:03:08.045858-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:08.045858-07:00","dependencies":[{"issue_id":"war_rig-1b8e","depends_on_id":"war_rig-ymw9","type":"blocks","created_at":"2026-01-18T08:03:37.148546-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1eq","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:37:15.966825-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:38:31.051344-07:00","closed_at":"2026-01-10T15:38:31.051344-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBACT01C.cbl","pm-type:documentation","program:CBACT01C","worker:scribe-3"]}
{"id":"war_rig-1j6","title":"[DOCUMENTATION] COBSWAIT: COBSWAIT.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.656057-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:27.656057-07:00","labels":["cycle:1","file:COBSWAIT.cbl","pm-state:created","pm-type:documentation","program:COBSWAIT"]}
{"id":"war_rig-1n4","title":"Implement parallel Challenger worker pool","description":"Create war_rig/workers/challenger_pool.py:\n- ChallengerWorkerPool class managing N Challenger instances\n- Each worker polls for Scribe-completed tickets (status=scribe_complete)\n- Validates documentation against source code\n- If valid: closes ticket\n- If issues: opens new ticket requesting corrections from Scribe\n- Async/concurrent execution\n- Track validation results for Imperator review","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:03:58.118744-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:19:52.394559-07:00","closed_at":"2026-01-10T13:19:52.394559-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-1n4","depends_on_id":"war_rig-9qk","type":"blocks","created_at":"2026-01-10T13:04:39.696848-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-1n4","depends_on_id":"war_rig-z74","type":"blocks","created_at":"2026-01-10T13:04:39.773939-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-1ybm","title":"M2: Parser Engine - Deterministic Extraction","description":"Epic for Milestone 2: Implement the deterministic pattern-based parsing engine. This includes preprocessor for handling comments, strings, and line continuations; the core extraction engine using regex patterns from specs; and scope tracking for nested code structures. COBOL and Python specs should be fully functional by end of this milestone.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-24T11:41:40.624012-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:40.624012-07:00","dependencies":[{"issue_id":"war_rig-1ybm","depends_on_id":"war_rig-adci","type":"blocks","created_at":"2026-01-24T11:45:27.905315-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.1","title":"Implement preprocessor for comment stripping","description":"Create src/depgraph/parser/preprocessor.py with Preprocessor class. Implement _strip_line_comments() for // and # style, _strip_block_comments() for /* */ style, _strip_fixed_column_comments() for COBOL column 7 indicators. Preserve original line mapping for accurate source locations.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:42.672391-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:42.672391-07:00","dependencies":[{"issue_id":"war_rig-1ybm.1","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:42.67317-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.2","title":"Implement preprocessor for string masking","description":"Add _mask_strings() to Preprocessor class. Handle single/double quotes, escape characters, and Python-style triple quotes. Replace string contents with placeholders to prevent false pattern matches. Track masked string positions for restoration if needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:43.452505-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:43.452505-07:00","dependencies":[{"issue_id":"war_rig-1ybm.2","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:43.453009-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.3","title":"Implement preprocessor for line continuation handling","description":"Add _join_continuations() to Preprocessor class. Handle trailing continuation chars (backslash), leading continuation chars (COBOL - in column 7). Maintain line number mapping after joining. Create PreprocessedSource model with cleaned content and line_map.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:44.128522-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:44.128522-07:00","dependencies":[{"issue_id":"war_rig-1ybm.3","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:44.128994-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.4","title":"Implement pattern-based extraction engine","description":"Create src/depgraph/parser/engine.py with ParserEngine class. Implement parse_file() as main entry point. Compile and cache regex patterns from spec. Implement _extract_definitions() and _extract_references() using ExtractionPattern models. Handle capture groups, join_with, regex flags (ignore_case, multiline, dotall).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:44.872181-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:44.872181-07:00","dependencies":[{"issue_id":"war_rig-1ybm.4","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:44.872728-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.5","title":"Implement scope tracking for nested structures","description":"Create src/depgraph/parser/scope_tracker.py with ScopeTracker class. Track nested scopes using spec's ScopeSyntax patterns. Support must_be_in_scope constraints on extraction patterns. Identify which artifact contains each extraction (containing_artifact field on RawReference).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:46.170843-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:46.170843-07:00","dependencies":[{"issue_id":"war_rig-1ybm.5","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:46.17134-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.6","title":"Implement pattern context constraints","description":"Add support for must_not_follow (negative lookbehind) and must_not_precede (negative lookahead) constraints in extraction engine. These prevent false matches in ambiguous contexts (e.g., CALL 'literal' vs CALL variable).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:47.440709-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:47.440709-07:00","dependencies":[{"issue_id":"war_rig-1ybm.6","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:47.441246-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.7","title":"Create unit tests for parser components","description":"Write comprehensive unit tests for Preprocessor (comment/string/continuation handling), ParserEngine (pattern extraction), ScopeTracker (nested scopes). Test against COBOL and Python sample files. Verify line number accuracy after preprocessing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:48.50189-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:48.50189-07:00","dependencies":[{"issue_id":"war_rig-1ybm.7","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:48.502398-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.8","title":"Validate COBOL spec with real samples","description":"Test COBOL spec against realistic COBOL samples. Verify extraction of PROGRAM-ID, paragraphs, CALL statements (literal and variable), PERFORM, EXEC SQL (SELECT/INSERT/UPDATE/DELETE), EXEC CICS (LINK/XCTL/READ/WRITE/SEND/RECEIVE MAP), COPY statements. Fix spec patterns as needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:49.251068-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:49.251068-07:00","dependencies":[{"issue_id":"war_rig-1ybm.8","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:49.251565-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-1ybm.9","title":"Validate Python spec with real samples","description":"Test Python spec against realistic Python samples. Verify extraction of class definitions, function definitions, method definitions, import statements (import X, from X import Y), function calls, SQLAlchemy table references, execute SQL patterns. Fix spec patterns as needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:42:50.023364-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:50.023364-07:00","dependencies":[{"issue_id":"war_rig-1ybm.9","depends_on_id":"war_rig-1ybm","type":"parent-child","created_at":"2026-01-24T11:42:50.023845-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-20b","title":"[DOCUMENTATION] COCRDUPC: COCRDUPC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.044124-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.536587-07:00","closed_at":"2026-01-18T09:28:02.536587-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COCRDUPC.cbl","pm-type:documentation","program:COCRDUPC"]}
{"id":"war_rig-214","title":"[DOCUMENTATION] COUSR01C: COUSR01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.619542-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.747203-07:00","closed_at":"2026-01-18T09:28:00.747203-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COUSR01C.cbl","pm-type:documentation","program:COUSR01C"]}
{"id":"war_rig-2eou","title":"Implement Call Graph Generation","description":"Implement Call Graph Generation feature based on approved architecture.\n\n## Implementation Scope\n- Implement call graph extraction from documentation\n- Generate Mermaid diagram output\n- Generate text summary output\n- Integrate output into SYSTEM_OVERVIEW.md or separate file\n- Add to Imperator's capability set\n\n## Acceptance Criteria\n- [ ] Call graph correctly identifies program-to-program calls\n- [ ] Mermaid diagram generated with proper syntax\n- [ ] Text summary provides readable call relationships\n- [ ] Output integrated with documentation\n- [ ] Unit tests for extraction and generation logic","status":"closed","priority":2,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-11T21:39:37.954156-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:44:49.970873-07:00","closed_at":"2026-01-11T21:44:49.970873-07:00","close_reason":"Implementation complete","dependencies":[{"issue_id":"war_rig-2eou","depends_on_id":"war_rig-dgjt","type":"blocks","created_at":"2026-01-11T21:39:57.251823-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-2fy","title":"[DOCUMENTATION] COCRDLIC: COCRDLIC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:03.164917-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.56259-07:00","closed_at":"2026-01-10T15:33:51.56259-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COCRDLIC.cbl","pm-type:documentation","program:COCRDLIC","worker:scribe-2"]}
{"id":"war_rig-2gy","title":"Implement Program Manager agent","description":"Create war_rig/agents/program_manager.py:\n- ProgramManagerAgent class\n- Scans input directory for source files\n- Creates beads ticket for each source file\n- Tracks overall workflow state\n- Determines when to trigger Imperator review\n- Handles cycle restarts when Imperator opens clarification tickets","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:03:44.156323-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:19:32.019624-07:00","closed_at":"2026-01-10T13:19:32.019624-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-2gy","depends_on_id":"war_rig-9qk","type":"blocks","created_at":"2026-01-10T13:04:37.468297-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-2gy","depends_on_id":"war_rig-z74","type":"blocks","created_at":"2026-01-10T13:04:37.544655-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-2i2","title":"[DOCUMENTATION] CBSTM03A: CBSTM03A.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:05.198019-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.009273-07:00","closed_at":"2026-01-10T15:33:51.009273-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBSTM03A.CBL","pm-type:documentation","program:CBSTM03A","worker:scribe-3"]}
{"id":"war_rig-2kbj","title":"Create DocumentValidator class for type-specific validation","description":"Implement DocumentValidator class in war_rig/validation/document_validator.py.\n\nThe validator should:\n1. Detect file type from filename extension (reuse logic from ScribeWorker._determine_file_type)\n2. Look up type-specific criteria from CRITERIA_REGISTRY\n3. Check each criterion against the template content\n4. Create ChromeTicket for each failed criterion\n5. Return ValidationResult with pass/fail status and tickets\n\nKey methods:\n- validate_document(file_name, program_id, template, file_type=None) -\u003e ValidationResult\n- _detect_file_type(file_name, template) -\u003e FileType\n- _check_criterion(template, criterion, file_type) -\u003e bool\n- _has_meaningful_content(items: list) -\u003e bool (avoid placeholders)\n- _create_ticket(program_id, criterion) -\u003e ChromeTicket\n\nValidationResult dataclass should include:\n- file_name, file_type, is_valid, failed_criteria, tickets","acceptance_criteria":"- war_rig/validation/document_validator.py exists\n- DocumentValidator.validate_document() implemented\n- File type detection works for .cbl, .cpy, .jcl, .bms, .pli, .proc\n- Criterion checking validates section content exists and is meaningful\n- ChromeTickets created with IssueType.INCOMPLETE and appropriate priority\n- ValidationResult includes all validation details","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T07:42:00.627845-07:00","created_by":"andrasfe","updated_at":"2026-01-24T07:42:00.627845-07:00","labels":["enhancement","imperator","validation"],"dependencies":[{"issue_id":"war_rig-2kbj","depends_on_id":"war_rig-lfen","type":"blocks","created_at":"2026-01-24T07:42:00.629344-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6","title":"M3: Resolution - Reference Binding and Graph Assembly","description":"Epic for Milestone 3: Implement the resolution layer that binds raw references to artifacts. This includes the artifact registry with multiple indices, alias resolver with transformation rules, cross-reference resolver, graph builder for assembly, and JSON exporter. By end of this milestone, basic end-to-end analysis should work.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-24T11:41:41.397004-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:41.397004-07:00","dependencies":[{"issue_id":"war_rig-2kr6","depends_on_id":"war_rig-1ybm","type":"blocks","created_at":"2026-01-24T11:45:29.604863-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.1","title":"Implement artifact registry with indices","description":"Create src/depgraph/resolver/registry.py with ArtifactRegistry class. Implement register() to add artifacts and update indices. Create indices: by canonical name, by alias, by type. Implement lookup() returning (artifact, confidence) tuples, lookup_exact() for ID lookup, get_by_type(), get_all(), size().","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:16.913587-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:16.913587-07:00","dependencies":[{"issue_id":"war_rig-2kr6.1","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:16.914172-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.10","title":"Create basic integration test","description":"Write integration test running full analysis on mixed sample repository. Verify end-to-end: discovery finds files, specs load, parsing extracts artifacts/references, resolution binds references, graph builds with statistics. Assert expected artifact counts and relationship types.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:25.398231-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:25.398231-07:00","dependencies":[{"issue_id":"war_rig-2kr6.10","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:25.398698-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.2","title":"Implement fuzzy matching in registry","description":"Add lookup_fuzzy() to ArtifactRegistry. Use normalized Levenshtein distance for similarity scoring. Support threshold parameter to filter low-confidence matches. Consider expected_type for filtering candidates. Return sorted results by confidence descending.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:17.740757-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:17.740757-07:00","dependencies":[{"issue_id":"war_rig-2kr6.2","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:17.741229-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.3","title":"Implement alias resolver with transformations","description":"Create src/depgraph/resolver/alias_resolver.py with AliasResolver class. Implement resolve() method with fallback chain: _try_exact() -\u003e _try_alias() -\u003e _try_transformations() -\u003e _try_fuzzy(). Implement TRANSFORMATIONS dict with uppercase, lowercase, remove_hyphens, remove_underscores, truncate_N functions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:18.409383-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:18.409383-07:00","dependencies":[{"issue_id":"war_rig-2kr6.3","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:18.409869-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.4","title":"Define built-in alias rules","description":"Create alias_rules.yaml or embed in code the standard alias rules: COBOL SQL to DDL tables (uppercase, remove_hyphens, truncate_8), copybook to table (remove record suffixes), JCL dataset to file (extract_last_qualifier), CICS file to VSAM. Set appropriate confidence_base values.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:19.128897-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:19.128897-07:00","dependencies":[{"issue_id":"war_rig-2kr6.4","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:19.129351-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.5","title":"Implement cross-reference resolver","description":"Create src/depgraph/resolver/cross_reference.py with CrossReferenceResolver class. Implement resolve_all() to process list of RawReference and produce Relationship objects. Track UnresolvedReference for failed resolutions with candidates and best_score. Support batching for later LLM disambiguation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:19.959479-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:19.959479-07:00","dependencies":[{"issue_id":"war_rig-2kr6.5","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:19.959963-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.6","title":"Implement graph builder for assembly","description":"Create src/depgraph/graph/builder.py with GraphBuilder class. Implement add_artifacts(), add_relationships(), add_unresolved(), set_specs_used(). Implement build() to finalize DependencyGraph with computed statistics. Add _compute_statistics() and _validate() for consistency checks.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:21.357777-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:21.357777-07:00","dependencies":[{"issue_id":"war_rig-2kr6.6","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:21.358275-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.7","title":"Implement JSON exporter","description":"Create src/depgraph/graph/exporters.py with GraphExporter class. Implement export_json() with pretty printing option. Serialize DependencyGraph to JSON format preserving all fields. Handle datetime serialization. Support both file output and string return for programmatic use.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:22.534133-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:22.534133-07:00","dependencies":[{"issue_id":"war_rig-2kr6.7","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:22.534575-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.8","title":"Implement orchestrator for end-to-end flow","description":"Create src/depgraph/orchestrator.py with Orchestrator class. Implement analyze() as main entry point coordinating all phases: _run_discovery(), _resolve_specs(), _parse_files() (parallel), _register_artifacts(), _resolve_references(), _build_graph(). Wire up all components with proper error handling.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:23.758654-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:23.758654-07:00","dependencies":[{"issue_id":"war_rig-2kr6.8","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:23.75911-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2kr6.9","title":"Create resolver unit tests","description":"Write unit tests for ArtifactRegistry (register, lookup, fuzzy match), AliasResolver (transformations, rule application), CrossReferenceResolver (resolution chain). Test edge cases: duplicate artifacts, ambiguous references, no matches found.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:24.603149-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:24.603149-07:00","dependencies":[{"issue_id":"war_rig-2kr6.9","depends_on_id":"war_rig-2kr6","type":"parent-child","created_at":"2026-01-24T11:43:24.603602-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-2nai","title":"LST files should be treated as prose documentation, not programs","description":"LST files often contain valuable prose, change history, and additional system information. They should be interpreted as documentation/prose, not as executable programs. The summary section should describe what the LST file contains.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T15:55:43.245093-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:10:51.998873-07:00","closed_at":"2026-01-25T16:10:51.998873-07:00","close_reason":"Implemented - LST files as prose, detailed paragraph descriptions, and call graph consistency"}
{"id":"war_rig-2uw3","title":"Add batch YAML input mode to human feedback script","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-23T08:19:18.086921-07:00","created_by":"andrasfe","updated_at":"2026-01-23T08:19:18.086921-07:00"}
{"id":"war_rig-2y3","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.772013-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.45609-07:00","closed_at":"2026-01-10T15:25:58.45609-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C","worker:scribe-1"]}
{"id":"war_rig-35w","title":"[DOCUMENTATION] CORPT00C: CORPT00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:04.256399-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.267301-07:00","closed_at":"2026-01-10T15:33:51.267301-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CORPT00C.cbl","pm-type:documentation","program:CORPT00C","worker:scribe-2"]}
{"id":"war_rig-37w","title":"[DOCUMENTATION] COCRDSLC: COCRDSLC.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:37:15.463052-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:39:31.812414-07:00","labels":["cycle:1","file:COCRDSLC.cbl","pm-type:documentation","program:COCRDSLC","worker:scribe-3"]}
{"id":"war_rig-3ffb","title":"Fix war_rig_status.py to show comprehensive ticket details","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T09:02:17.374683-07:00","created_by":"andrasfe","updated_at":"2026-01-18T09:06:02.866467-07:00","closed_at":"2026-01-18T09:06:02.866467-07:00","close_reason":"Implemented comprehensive ticket display with metadata, file types, sizes, and detailed ticket list"}
{"id":"war_rig-3ip","title":"[DOCUMENTATION] COCRDLIC: COCRDLIC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:26.980942-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.664176-07:00","closed_at":"2026-01-18T09:28:02.664176-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COCRDLIC.cbl","pm-type:documentation","program:COCRDLIC"]}
{"id":"war_rig-3m7","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T18:48:18.959165-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:49:35.866907-07:00","closed_at":"2026-01-10T18:49:35.866907-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBACT01C.cbl","pm-state:created","pm-type:documentation","program:CBACT01C","worker:scribe-3"]}
{"id":"war_rig-3qz","title":"[DOCUMENTATION] COACTUPC: COACTUPC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.106295-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.397597-07:00","closed_at":"2026-01-18T09:28:02.397597-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COACTUPC.cbl","pm-type:documentation","program:COACTUPC"]}
{"id":"war_rig-3s8","title":"[DOCUMENTATION] CBACT02C: CBACT02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:03.89767-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.365278-07:00","closed_at":"2026-01-10T15:33:51.365278-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBACT02C.cbl","pm-type:documentation","program:CBACT02C","worker:scribe-2"]}
{"id":"war_rig-3x8k","title":"Create SkillsGenerator core class with directory structure management","description":"## Context\n\nWar Rig generates documentation in an output directory (final/programs/*.doc.json, SYSTEM_OVERVIEW.md, CALL_GRAPH.md, etc.). We need to convert this into Agent Skills format for progressive discovery.\n\n## Requirements\n\n1. Create `war_rig/skills/generator.py` with `SkillsGenerator` class\n2. Accept input directory path (War Rig output directory)\n3. Create skills output directory at sibling level (e.g., output/ -\u003e skills-output/)\n4. Support --output-dir override option\n5. Create subdirectory structure:\n   - system-overview/\n   - call-graph/\n   - datacards/ (if DATACARDS.md exists)\n   - programs/\u003cprogram-name\u003e/\n   - programs/\u003cprogram-name\u003e/references/\n\n## Acceptance Criteria\n\n- [ ] SkillsGenerator class initializes with input_dir path\n- [ ] Validates input directory exists and contains expected files\n- [ ] Creates output directory structure as specified\n- [ ] Supports output_dir parameter to override default naming\n- [ ] Has generate() method that orchestrates the conversion\n- [ ] Uses pathlib for all path operations\n- [ ] Follows existing code conventions (Google docstrings, type hints)\n\n## Technical Notes\n\n- Input structure: output/final/programs/*.doc.json, SYSTEM_OVERVIEW.md, CALL_GRAPH.md\n- Output should be sibling directory: skills-output/ or custom via --output-dir\n- Reference existing scripts like generate_call_graph.py for patterns","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:05.700597717-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:49:12.070797591-07:00","closed_at":"2026-01-29T10:49:12.070797591-07:00","close_reason":"Implemented SkillsGenerator class with input directory validation, output directory structure creation, and documentation file discovery methods.","labels":["converter","core","skills"]}
{"id":"war_rig-3yk","title":"[DOCUMENTATION] CORPT00C: CORPT00C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.291785-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.291785-07:00","labels":["cycle:1","file:CORPT00C.cbl","pm-state:created","pm-type:documentation","program:CORPT00C"]}
{"id":"war_rig-3z39","title":"[EPIC] Formatting Error Recovery with Super-Scribe","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-18T08:03:18.076971-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:18.076971-07:00"}
{"id":"war_rig-40q","title":"[DOCUMENTATION] COUSR03C: COUSR03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T18:42:28.83146-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:52.26726-07:00","closed_at":"2026-01-10T18:42:52.26726-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COUSR03C.cbl","pm-type:documentation","program:COUSR03C","worker:scribe-1"]}
{"id":"war_rig-435","title":"[DOCUMENTATION] COBIL00C: COBIL00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:04.113143-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.307404-07:00","closed_at":"2026-01-10T15:33:51.307404-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COBIL00C.cbl","pm-type:documentation","program:COBIL00C","worker:scribe-1"]}
{"id":"war_rig-43ia","title":"Add unit tests for file type validation skips","description":"Add unit tests to verify each file type skips the appropriate sections during validation.\n\nFile: tests/test_workers/test_scribe_pool.py","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T19:28:09.60804-07:00","created_by":"andrasfe","updated_at":"2026-01-22T19:31:15.052398-07:00","closed_at":"2026-01-22T19:31:15.052398-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-43ia","depends_on_id":"war_rig-xmkv","type":"blocks","created_at":"2026-01-22T19:28:29.830127-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-43ia","depends_on_id":"war_rig-tepf","type":"blocks","created_at":"2026-01-22T19:28:31.131029-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-43ia","depends_on_id":"war_rig-4y8t","type":"blocks","created_at":"2026-01-22T19:28:31.920105-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-44d","title":"[DOCUMENTATION] CBSTM03A: CBSTM03A.CBL","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:28.709714-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:28.709714-07:00","labels":["cycle:1","file:CBSTM03A.CBL","pm-state:created","pm-type:documentation","program:CBSTM03A"]}
{"id":"war_rig-44o4","title":"[DOCUMENTATION] CBEXPORT: CBEXPORT.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-11T08:12:54.1881-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:15:32.994696-07:00","labels":["cycle:1","file:CBEXPORT.cbl","pm-state:created","pm-type:documentation","program:CBEXPORT","worker:scribe-1"]}
{"id":"war_rig-47dc","title":"Wire call semantics enrichment into ScribeWorker","description":"Add _enrich_call_semantics() method to ScribeWorker. Call it after Citadel enrichment, before saving template. Pass source path, citadel context, and LLM provider. Store results in template.call_semantics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:04:16.987288-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:18:26.746266-07:00","closed_at":"2026-01-29T19:18:26.746266-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-47dc","depends_on_id":"war_rig-gp1v","type":"blocks","created_at":"2026-01-29T19:04:38.040864-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-47dc","depends_on_id":"war_rig-88r3","type":"blocks","created_at":"2026-01-29T19:04:38.135414-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-4ap","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.580459-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.514579-07:00","closed_at":"2026-01-10T15:25:58.514579-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C","worker:scribe-1"]}
{"id":"war_rig-4ayn","title":"Design CLI Status Utility Architecture for War Rig Ticket Viewer","description":"Design the architecture for a CLI status utility that displays .war_rig_tickets.json state in real-time with in-place updates (like top/htop).\n\n## Requirements\n1. Accept ticket file path as command-line argument\n2. Display ticket counts by type (documentation, validation, chrome, clarification)\n3. Display ticket counts by state (created, in_progress, completed, blocked)\n4. Show details of stuck/blocked tickets\n5. Auto-refresh every few seconds (configurable interval)\n6. In-place terminal updates (no scrolling output)\n\n## Deliverables\n- Architecture document with component design\n- Data model for parsing .war_rig_tickets.json\n- Terminal rendering strategy (curses, rich, or similar)\n- Refresh mechanism design\n- Error handling strategy for file access/parsing\n\n## Technical Considerations\n- Python 3.11+ compatibility\n- Cross-platform terminal support (macOS, Linux)\n- Memory-efficient handling of large ticket files\n- Graceful handling of file changes during refresh","acceptance_criteria":"Architecture document approved with clear component boundaries, data flow, and technology choices","status":"closed","priority":1,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-11T20:24:38.702052-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T20:27:26.998462-07:00","closed_at":"2026-01-11T20:27:26.998462-07:00","close_reason":"Architecture designed using rich library","labels":["architecture","cli","war-rig-status"]}
{"id":"war_rig-4c9","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:02.989623-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.546272-07:00","closed_at":"2026-01-18T09:28:03.546272-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C"]}
{"id":"war_rig-4kk","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:02.762346-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.67139-07:00","closed_at":"2026-01-18T09:28:03.67139-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C"]}
{"id":"war_rig-4km","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:37:15.173963-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.645195-07:00","closed_at":"2026-01-29T19:32:22.645195-07:00","close_reason":"Closed","labels":["cycle:1","file:CBACT03C.cbl","pm-type:documentation","program:CBACT03C","worker:scribe-2"]}
{"id":"war_rig-4kt","title":"[DOCUMENTATION] CBACT04C: CBACT04C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:03.458653-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.483224-07:00","closed_at":"2026-01-10T15:33:51.483224-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBACT04C.cbl","pm-type:documentation","program:CBACT04C","worker:scribe-2"]}
{"id":"war_rig-4o4l","title":"Add file existence check before opening tickets","description":"Imperator should verify the target file exists before creating a ticket. Prevents tickets for non-existent files (e.g., external programs, system utilities). File: war_rig/agents/imperator.py or similar","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-22T20:04:18.033091-07:00","created_by":"andrasfe","updated_at":"2026-01-22T20:07:18.55855-07:00","closed_at":"2026-01-22T20:07:18.55855-07:00","close_reason":"Closed"}
{"id":"war_rig-4o78","title":"Implement call graph skill generation","description":"## Context\n\nThe CALL_GRAPH.md contains Mermaid diagrams and tables showing program call relationships. This should be converted to a skill that helps agents understand program dependencies and find related programs.\n\n## Requirements\n\n1. Create `war_rig/skills/call_graph_skill.py` with `CallGraphSkillGenerator` class\n2. Generate call-graph/SKILL.md from CALL_GRAPH.md\n3. SKILL.md frontmatter:\n   ```yaml\n   ---\n   name: call-graph\n   description: Program call relationships and dependencies. Shows which programs call each other and external dependencies.\n   metadata:\n     author: war-rig\n     version: \"1.0\"\n     total_programs: \u003ccount\u003e\n     total_calls: \u003ccount\u003e\n   ---\n   ```\n4. SKILL.md body should include:\n   - Mermaid diagram (or simplified version if too large)\n   - Entry points list\n   - External dependencies\n   - How to use this information\n\n## Acceptance Criteria\n\n- [ ] Reads and parses CALL_GRAPH.md\n- [ ] Extracts statistics (programs, calls, external deps)\n- [ ] Includes Mermaid diagram if under size limit\n- [ ] Lists entry points with brief descriptions\n- [ ] Lists external dependencies and what calls them\n- [ ] Provides guidance on finding calling/called programs\n- [ ] Handles missing CALL_GRAPH.md gracefully (skip or warn)\n\n## Technical Notes\n\n- CALL_GRAPH.md contains: Mermaid flowchart, entry points, external dependencies, statistics table\n- May need to summarize large diagrams to fit token limits\n- Consider splitting into SKILL.md (summary) and references/ (full diagram) if too large","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:52.914019648-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:53:26.501893161-07:00","closed_at":"2026-01-29T10:53:26.501895646-07:00","labels":["call-graph","dependencies","skills"],"dependencies":[{"issue_id":"war_rig-4o78","depends_on_id":"war_rig-3x8k","type":"blocks","created_at":"2026-01-29T10:41:52.916379274-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-4sv","title":"[DOCUMENTATION] COCRDSLC: COCRDSLC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.529097-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.219003-07:00","closed_at":"2026-01-10T15:25:58.219003-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COCRDSLC.cbl","pm-type:documentation","program:COCRDSLC","worker:scribe-1"]}
{"id":"war_rig-4w0","title":"[DOCUMENTATION] CBACT04C: CBACT04C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:14.459683-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.169365-07:00","closed_at":"2026-01-18T09:28:03.169365-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT04C.cbl","pm-type:documentation","program:CBACT04C"]}
{"id":"war_rig-4wk","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:04.184902-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.287206-07:00","closed_at":"2026-01-10T15:33:51.287206-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBACT03C.cbl","pm-type:documentation","program:CBACT03C","worker:scribe-3"]}
{"id":"war_rig-4y8t","title":"Complete critical section skip matrix for all file types","description":"Update skip_sections_by_type in _validate_critical_sections with entries for:\n- COPYBOOK: add business_rules, error_handling\n- JCL: add business_rules\n- PROC: add business_rules\n- BMS: add cics_operations, error_handling\n- LISTING: skip almost all sections\n- OTHER: skip most sections\n- All new file types (ASM, REXX, CLIST, NATURAL, EASYTRIEVE, SORT, DDL, IMS)\n\nFile: war_rig/workers/scribe_pool.py","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T19:28:08.354228-07:00","created_by":"andrasfe","updated_at":"2026-01-22T19:29:46.08344-07:00","closed_at":"2026-01-22T19:29:46.08344-07:00","close_reason":"Closed"}
{"id":"war_rig-50m","title":"[DOCUMENTATION] CBSTM03A: CBSTM03A.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:35.167719-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.014929-07:00","closed_at":"2026-01-10T15:25:58.014929-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBSTM03A.CBL","pm-type:documentation","program:CBSTM03A","worker:scribe-1"]}
{"id":"war_rig-51wq","title":"Integrate Atlas reconciliation controller for chunked workflow","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T19:38:51.164942-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:41:13.843712-07:00","closed_at":"2026-01-15T19:41:13.843712-07:00","close_reason":"Implemented chunked processing workflow in ticket_engine.py","dependencies":[{"issue_id":"war_rig-51wq","depends_on_id":"war_rig-f8cu","type":"blocks","created_at":"2026-01-15T19:38:57.902228-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-54v","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.975504-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.075539-07:00","closed_at":"2026-01-10T15:25:58.075539-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBACT01C.cbl","pm-type:documentation","program:CBACT01C","worker:scribe-1"]}
{"id":"war_rig-57qx","title":"M4: LLM Integration - Intelligent Spec Generation","description":"Epic for Milestone 4: Integrate LLM capabilities for dynamic spec generation and disambiguation. This includes the LLM adapter wrapping llm-provider, spec generator for unknown languages, disambiguation for ambiguous references, and spec refinement based on extraction failures.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-24T11:41:42.167181-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:42.167181-07:00","dependencies":[{"issue_id":"war_rig-57qx","depends_on_id":"war_rig-2kr6","type":"blocks","created_at":"2026-01-24T11:45:30.344003-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.1","title":"Implement LLM adapter wrapping llm-provider","description":"Create src/depgraph/llm/adapter.py with LLMAdapter class. Initialize llm-provider client using config (provider_name, model). Implement async methods with proper error handling and retry logic (3x with backoff). Handle API rate limits gracefully.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:45.849609-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:45.849609-07:00","dependencies":[{"issue_id":"war_rig-57qx.1","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:45.850184-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.2","title":"Implement spec generator via LLM","description":"Create src/depgraph/specs/generator.py with SpecGenerator class. Implement generate() method: build prompt with sample files, few-shot examples (COBOL, Python specs), request structured YAML output, parse and validate result, test patterns against samples. Include SPEC_GENERATION_SYSTEM_PROMPT.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:46.932739-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:46.932739-07:00","dependencies":[{"issue_id":"war_rig-57qx.2","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:46.933243-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.3","title":"Implement spec refinement on failures","description":"Add refine() method to SpecGenerator. Accept existing spec and list of extraction failures. Build prompt showing what failed and why. Request LLM to adjust patterns. Validate refined spec. Limit refinement iterations to prevent infinite loops.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:47.599536-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:47.599536-07:00","dependencies":[{"issue_id":"war_rig-57qx.3","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:47.600083-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.4","title":"Implement LLM disambiguation for ambiguous references","description":"Add disambiguate() method to LLMAdapter. Accept UnresolvedReference and list of candidate Artifacts. Build context-aware prompt with surrounding code, reference location, candidate descriptions. Return (artifact_id, confidence) or (None, 0.0). Batch multiple disambiguations for efficiency.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:48.27927-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:48.27927-07:00","dependencies":[{"issue_id":"war_rig-57qx.4","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:48.27982-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.5","title":"Implement language identification via LLM","description":"Add identify_language() method to LLMAdapter. Accept filename and content sample. Request LLM to identify language/file type. Use for unknown files before spec generation. Return language identifier string matching spec_id format.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:49.114175-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:49.114175-07:00","dependencies":[{"issue_id":"war_rig-57qx.5","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:49.114631-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.6","title":"Add async spec generation to SpecManager","description":"Extend SpecManager with async generate_spec() method. Accept sample files and optional hints. Coordinate with SpecGenerator and LLMAdapter. Cache generated specs. Integrate with discovery flow for unknown file types.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:49.81997-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:49.81997-07:00","dependencies":[{"issue_id":"war_rig-57qx.6","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:49.820464-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.7","title":"Integrate LLM disambiguation into resolution flow","description":"Add resolve_with_llm() to CrossReferenceResolver. Process unresolved references with multiple candidates. Batch LLM calls respecting max_llm_calls budget. Update orchestrator to optionally enable LLM disambiguation phase.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:50.590949-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:50.590949-07:00","dependencies":[{"issue_id":"war_rig-57qx.7","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:50.591401-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-57qx.8","title":"Create LLM integration tests","description":"Write tests for LLM components with mocked llm-provider responses. Test spec generation prompt construction, YAML parsing, validation. Test disambiguation with multiple candidates. Test error handling and retry logic. Include tests with real LLM calls (marked as slow/integration).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:43:51.239895-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:43:51.239895-07:00","dependencies":[{"issue_id":"war_rig-57qx.8","depends_on_id":"war_rig-57qx","type":"parent-child","created_at":"2026-01-24T11:43:51.24034-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-5ey","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:03.603973-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.44425-07:00","closed_at":"2026-01-10T15:33:51.44425-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C","worker:scribe-3"]}
{"id":"war_rig-5fc","title":"[DOCUMENTATION] CORPT00C: CORPT00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:37:15.245084-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.647595-07:00","closed_at":"2026-01-29T19:32:22.647595-07:00","close_reason":"Closed","labels":["cycle:1","file:CORPT00C.cbl","pm-type:documentation","program:CORPT00C","worker:scribe-3"]}
{"id":"war_rig-5ix","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:52.908641-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:21:22.090385-07:00","labels":["cycle:1","file:COUSR00C.cbl","pm-state:created","pm-type:documentation","program:COUSR00C","worker:scribe-2"]}
{"id":"war_rig-5mw","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:03.207751-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.418837-07:00","closed_at":"2026-01-18T09:28:03.418837-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C"]}
{"id":"war_rig-5p9","title":"[DOCUMENTATION] CBEXPORT: CBEXPORT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:34:04.260597-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:48.981527-07:00","closed_at":"2026-01-10T15:36:48.981527-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBEXPORT.cbl","pm-type:documentation","program:CBEXPORT","worker:scribe-1"]}
{"id":"war_rig-5pe3","title":"Write unit tests for SkillsGenerator and skill generators","description":"## Context\n\nNeed comprehensive tests for the core SkillsGenerator class and individual skill generators to ensure correct output format and error handling.\n\n## Requirements\n\n1. Create `tests/skills/test_generator.py` for SkillsGenerator tests\n2. Create `tests/skills/test_program_skill.py` for ProgramSkillGenerator tests\n3. Create `tests/skills/test_overview_skill.py` for OverviewSkillGenerator tests\n4. Use fixtures for sample .doc.json data (based on example_output/)\n5. Test cases:\n   - Directory structure creation\n   - SKILL.md frontmatter validation\n   - SKILL.md body content validation\n   - REFERENCE.md content for program skills\n   - Missing file handling\n   - Invalid input handling\n\n## Acceptance Criteria\n\n- [ ] Tests for SkillsGenerator directory management\n- [ ] Tests for ProgramSkillGenerator parsing and output\n- [ ] Tests for OverviewSkillGenerator synthesis\n- [ ] Tests verify YAML frontmatter is valid\n- [ ] Tests verify skill names match directory names\n- [ ] Fixtures use realistic sample data from example_output/\n- [ ] All tests pass: uv run pytest tests/skills/\n\n## Technical Notes\n\n- Create tests/skills/ directory\n- Add tests/skills/fixtures/ for sample data\n- Use tmp_path fixture for output directories\n- Consider using snapshot testing for complex outputs","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:32.555489216-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:32:22.63201-07:00","closed_at":"2026-01-29T19:32:22.63201-07:00","close_reason":"Closed","labels":["generator","skills","testing"],"dependencies":[{"issue_id":"war_rig-5pe3","depends_on_id":"war_rig-hwll","type":"blocks","created_at":"2026-01-29T10:42:32.557467686-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-5pe3","depends_on_id":"war_rig-z768","type":"blocks","created_at":"2026-01-29T10:42:32.562534662-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-5pe3","depends_on_id":"war_rig-4o78","type":"blocks","created_at":"2026-01-29T10:42:32.567496099-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-5qos","title":"[DOCUMENTATION] CBTRN03C: CBTRN03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:54.127404-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:15:25.941486-07:00","closed_at":"2026-01-11T08:15:25.941486-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBTRN03C.cbl","pm-state:created","pm-type:documentation","program:CBTRN03C","worker:scribe-3"]}
{"id":"war_rig-5u9","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:34:03.798547-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:59.206668-07:00","closed_at":"2026-01-10T15:36:59.206668-07:00","close_reason":"Closed from aborted run, testing prompt fix","labels":["cycle:1","file:COTRN02C.cbl","pm-type:documentation","program:COTRN02C","worker:scribe-2"]}
{"id":"war_rig-5v9","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.152112-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.338556-07:00","closed_at":"2026-01-10T15:25:58.338556-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBTRN01C.cbl","pm-type:documentation","program:CBTRN01C","worker:scribe-1"]}
{"id":"war_rig-61yo","title":"Port line-based fallback splitter from Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.589671-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.283949-07:00","closed_at":"2026-01-18T08:17:54.283949-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-61yo","depends_on_id":"war_rig-im1x","type":"blocks","created_at":"2026-01-18T08:03:36.490835-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-6ev","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:04.328405-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.247985-07:00","closed_at":"2026-01-10T15:33:51.247985-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COTRN01C.cbl","pm-type:documentation","program:COTRN01C","worker:scribe-1"]}
{"id":"war_rig-6flu","title":"Implement BeadsTicketAdapter for Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:23.974474-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:09:08.208631-07:00","closed_at":"2026-01-15T19:09:08.208631-07:00","close_reason":"Implemented in commit 39b9ff6","dependencies":[{"issue_id":"war_rig-6flu","depends_on_id":"war_rig-9pms","type":"blocks","created_at":"2026-01-15T18:57:39.922479-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-6jn","title":"[DOCUMENTATION] CBSTM03B: CBSTM03B.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:05.051628-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.048749-07:00","closed_at":"2026-01-10T15:33:51.048749-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBSTM03B.CBL","pm-type:documentation","program:CBSTM03B","worker:scribe-3"]}
{"id":"war_rig-6l4","title":"[DOCUMENTATION] CBTRN02C: CBTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:04.546624-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.187073-07:00","closed_at":"2026-01-10T15:33:51.187073-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBTRN02C.cbl","pm-type:documentation","program:CBTRN02C","worker:scribe-1"]}
{"id":"war_rig-6l9","title":"Implement ticket-based orchestration engine","description":"Create war_rig/orchestration/ticket_engine.py:\n- TicketOrchestrator class coordinating all workers\n- Start: Program Manager creates tickets for all files\n- Run: Scribe and Challenger pools process tickets in parallel\n- Check: When all tickets closed, trigger Imperator review\n- Cycle: If Imperator opens new tickets, restart pools\n- Stop: Max cycles reached or Imperator satisfied\n- Integration with existing LangGraph for per-file processing\n- Progress reporting and metrics","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:04:12.238152-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:25:53.023861-07:00","closed_at":"2026-01-10T13:25:53.023861-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-6l9","depends_on_id":"war_rig-2gy","type":"blocks","created_at":"2026-01-10T13:04:42.773732-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-6l9","depends_on_id":"war_rig-vhd","type":"blocks","created_at":"2026-01-10T13:04:42.850072-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-6l9","depends_on_id":"war_rig-1n4","type":"blocks","created_at":"2026-01-10T13:04:42.926775-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-6mn","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:03.569492-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.638673-07:00","closed_at":"2026-01-29T19:32:22.638673-07:00","close_reason":"Closed","labels":["cycle:1","file:CBACT03C.cbl","pm-state:created","pm-type:documentation","program:CBACT03C"]}
{"id":"war_rig-6nv","title":"[DOCUMENTATION] CBCUS01C: CBCUS01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:34:04.037338-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:49.039911-07:00","closed_at":"2026-01-10T15:36:49.039911-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBCUS01C.cbl","pm-type:documentation","program:CBCUS01C","worker:scribe-3"]}
{"id":"war_rig-6pkn","title":"Add optional --skills flag to batch command for auto-generation","description":"## Context\n\nFor convenience, users may want skills generated automatically after batch processing. Add an optional flag to the batch command.\n\n## Requirements\n\n1. Add `--skills` flag to `war-rig batch` command in cli.py\n2. When enabled, run SkillsGenerator after batch completion\n3. Default output: skills-output/ sibling to output directory\n4. Support `--skills-output` to customize skills output location\n5. Only generate skills if batch had successful documentation\n\n## Acceptance Criteria\n\n- [ ] --skills flag added to batch command\n- [ ] --skills-output flag for custom location\n- [ ] Skills generated after successful batch completion\n- [ ] Skipped if batch had no completed documentation\n- [ ] Progress message: \"Generating Agent Skills...\"\n- [ ] Success message with skills directory path\n- [ ] Error handling if skills generation fails (warn, don't fail batch)\n\n## Technical Notes\n\n- This is lower priority than the standalone commands\n- Should not fail the batch if skills generation has issues\n- Log warnings if skills generation encounters problems\n- Consider only generating if there are changes (optimization)","status":"closed","priority":3,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:43:01.540122437-07:00","created_by":"andrasfe","updated_at":"2026-01-29T11:01:25.906741192-07:00","closed_at":"2026-01-29T11:01:25.906741192-07:00","close_reason":"Closed","labels":["batch","cli","enhancement","skills"],"dependencies":[{"issue_id":"war_rig-6pkn","depends_on_id":"war_rig-8vyi","type":"blocks","created_at":"2026-01-29T10:43:01.542752041-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-6q5","title":"[DOCUMENTATION] CBIMPORT: CBIMPORT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:35.236014-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:57.99564-07:00","closed_at":"2026-01-10T15:25:57.99564-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBIMPORT.cbl","pm-type:documentation","program:CBIMPORT","worker:scribe-1"]}
{"id":"war_rig-6wp","title":"[DOCUMENTATION] COBSWAIT: COBSWAIT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.08908-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.358557-07:00","closed_at":"2026-01-10T15:25:58.358557-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COBSWAIT.cbl","pm-type:documentation","program:COBSWAIT","worker:scribe-1"]}
{"id":"war_rig-71a","title":"[DOCUMENTATION] CSUTLDTC: CSUTLDTC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T18:42:28.460849-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:43:54.205893-07:00","closed_at":"2026-01-10T18:43:54.205893-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CSUTLDTC.cbl","pm-state:created","pm-type:documentation","program:CSUTLDTC","worker:scribe-1"]}
{"id":"war_rig-75k","title":"Integration test with CardDemo codebase","description":"Create tests/test_integration/test_pm_carddemo.py:\n- Test full workflow with CardDemo COBOL files\n- Verify parallel Scribe processing\n- Verify Challenger validation flow\n- Verify Imperator holistic review\n- Test cycle restart when Imperator needs clarification\n- Performance benchmarks vs sequential processing","status":"closed","priority":2,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-10T13:04:23.059014-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:31:39.328167-07:00","closed_at":"2026-01-10T13:31:39.328167-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-75k","depends_on_id":"war_rig-6l9","type":"blocks","created_at":"2026-01-10T13:04:51.585171-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-7831","title":"Fix get_callers() performance: use dependency graph instead of per-paragraph discovery","description":"## Problem\n\n`get_callers()` is called per-paragraph in a loop within `_enrich_paragraphs_with_citadel()` (scribe_pool.py:548). Each call to `get_callers()` runs a full `FileDiscovery.discover()` (citadel/src/citadel/sdk.py:1052-1053), which scans the entire source directory.\n\nThis causes N directory scans for N paragraphs - massive overhead that significantly slows down documentation generation for codebases with many paragraphs.\n\n## Root Cause\n\nThe `get_callers()` method in Citadel SDK (sdk.py:1040-1069) performs:\n1. Directory discovery to find all source files\n2. Analysis of each file to find caller references\n\nThis is done from scratch on every call, even though War Rig already generates a complete dependency graph upfront.\n\n## Solution\n\nWar Rig already generates a `dependency_graph.json` upfront via Citadel during `_generate_citadel_graph()` (ticket_engine.py:2130-2147). This graph contains all call relationships (who calls whom) and is already passed to ScribeWorkerPool via `dependency_graph_path`.\n\nThe fix should:\n1. Load the dependency graph once when ScribeWorkerPool initializes (it's already passed via constructor)\n2. Build a callers lookup dict from the graph edges during initialization\n3. Replace the per-paragraph `get_callers()` call at scribe_pool.py:548 with a simple dict lookup\n\n## Key Locations\n\n- `war_rig/workers/scribe_pool.py:548` - The problematic `get_callers()` call inside `_enrich_paragraphs_with_citadel()`\n- `war_rig/orchestration/ticket_engine.py:2130-2147` - `_generate_citadel_graph()` creates the dependency graph\n- `war_rig/orchestration/ticket_engine.py:575-580` - dependency_graph_path is already passed to ScribeWorkerPool\n- `citadel/src/citadel/sdk.py:1040-1070` - Current slow `get_callers()` implementation for reference\n\n## Acceptance Criteria\n\n- [ ] Dependency graph is loaded once when ScribeWorkerPool initializes\n- [ ] A callers lookup dict is built from graph edges (keyed by target file+function)\n- [ ] The `get_callers()` call in `_enrich_paragraphs_with_citadel()` is replaced with dict lookup\n- [ ] Existing tests pass\n- [ ] Add test verifying callers lookup works correctly from cached graph","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-28T11:48:04.247512399-07:00","created_by":"andrasfe","updated_at":"2026-01-28T11:54:51.26537246-07:00","closed_at":"2026-01-28T11:54:51.265375115-07:00"}
{"id":"war_rig-7gsl","title":"Root cause analysis: Why Scribe sends 35K tokens without truncation","description":"## Problem\n\nThe Scribe agent is sending ~35K tokens when it should be limiting prompts to ~15K tokens (the configured `scribe_max_prompt_tokens` default).\n\n## Root Cause Hypothesis (Based on Investigation)\n\n**The token limiting logic was never implemented or was removed.**\n\nEvidence from code analysis:\n\n### 1. Config Defines Limits but They're Unused\n\n```python\n# In config.py (lines 73-76, 191-194)\nclass ScribeConfig(ModelConfig):\n    max_prompt_tokens: int = Field(\n        default=15000,\n        description=\"Maximum approximate tokens for the prompt (will truncate content to fit)\",\n    )\n```\n\nThe description says 'will truncate content to fit' but **NO CODE DOES THIS**.\n\n### 2. ScribeAgent Never Reads max_prompt_tokens\n\nIn `scribe.py`, the ScribeAgent:\n- Takes a `ScribeConfig` in __init__ but only uses `config.model` and `config.temperature`\n- `_build_user_prompt()` method builds the full prompt without any truncation\n- Simply concatenates: file info + preprocessor JSON + full source code + copybooks + previous template + questions\n\n### 3. Source Code Is Added Without Any Size Check\n\n```python\n# In scribe.py lines 352-360\n# Source code\nparts.append(\"## Source Code\")\nparts.append(\"\\`\\`\\`\")\nlines = input_data.source_code.split(\"\\n\")\nfor i, line in enumerate(lines, start=1):\n    parts.append(f\"{i:5d} | {line}\")  # ALL lines, no limit\\!\nparts.append(\"\\`\\`\\`\")\n```\n\n### 4. Chunking Logic Was Removed\n\nGit commit `ea26209` (Jan 19, 2026) removed the Atlas chunking framework:\n- Deleted war_rig/chunking/ directory\n- Deleted routing logic that would have split large files\n- The commit message says 'Atlas was a planned but never implemented chunking orchestration system'\n\n## Confirmed Root Cause\n\n**The token limiting was designed but never implemented. The config field `scribe_max_prompt_tokens` is a placeholder that is completely unused by the actual code.**\n\nThe chunking framework that would have handled large files was removed because it was 'non-functional dead code'.\n\n## Why This Wasn't Caught Earlier\n\n- Small COBOL files (most are under 2000 lines) work fine\n- The ~35K token limit is only hit by large programs\n- No automated tests verify token limits are respected\n\n## Related Issues\n\n- war_rig-dowu: Investigation ticket (parent)\n- war_rig-ekkk: Epic for Atlas chunking embedding (still open but work was removed)","status":"open","priority":0,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-21T09:37:59.782357158-07:00","created_by":"andrasfe","updated_at":"2026-01-21T09:37:59.782357158-07:00","labels":["bug","root-cause","scribe","token-limit"],"dependencies":[{"issue_id":"war_rig-7gsl","depends_on_id":"war_rig-dowu","type":"blocks","created_at":"2026-01-21T09:37:59.784958787-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7l7","title":"[DOCUMENTATION] CBACT04C: CBACT04C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.227222-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.146215-07:00","closed_at":"2026-01-18T09:28:02.146215-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT04C.cbl","pm-type:documentation","program:CBACT04C"]}
{"id":"war_rig-7lcn","title":"Add get_callers SDK method to find function references","description":"Add a method to the Citadel SDK that takes a file path and function name, and returns all files/functions that call this particular function. Requires analyzing the codebase to build a reverse call graph.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T13:14:01.730469-07:00","created_by":"andrasfe","updated_at":"2026-01-24T13:22:38.230571-07:00","closed_at":"2026-01-24T13:22:38.230571-07:00","close_reason":"Implemented get_callers SDK method with tests"}
{"id":"war_rig-7lq","title":"[DOCUMENTATION] COBSWAIT: COBSWAIT.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.030213-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.030213-07:00","labels":["cycle:1","file:COBSWAIT.cbl","pm-state:created","pm-type:documentation","program:COBSWAIT"]}
{"id":"war_rig-7si","title":"[DOCUMENTATION] CBIMPORT: CBIMPORT.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:37:16.25405-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:37:40.238598-07:00","labels":["cycle:1","file:CBIMPORT.cbl","pm-type:documentation","program:CBIMPORT","worker:scribe-2"]}
{"id":"war_rig-7v6k","title":"Add metrics tracking for formatting errors","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-18T08:03:18.482248-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:18.482248-07:00","dependencies":[{"issue_id":"war_rig-7v6k","depends_on_id":"war_rig-16h1","type":"blocks","created_at":"2026-01-18T08:03:37.428917-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7xfz","title":"[DOCUMENTATION] CBSTM03A: CBSTM03A.CBL","status":"in_progress","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:54.49336-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:12:55.399611-07:00","labels":["cycle:1","file:CBSTM03A.CBL","pm-type:documentation","program:CBSTM03A","worker:scribe-3"]}
{"id":"war_rig-7ze2","title":"Epic: Call Graph Integration into War Rig Ticketing Workflow","description":"Integrate call graph analysis into the War Rig ticketing workflow to automatically detect and track missing custom programs. This epic covers:\n\n1. Refactoring generate_call_graph.py into a proper module\n2. Adding system utility classification (IBM utilities)\n3. Modifying ticket_engine.py to run call graph analysis after VALIDATION phase\n4. Having Imperator analyze call graph gaps and classify external dependencies\n5. Creating DOCUMENTATION tickets for missing custom programs\n6. Generating SYSTEM_DESIGN.md documenting external dependencies\n7. Adding configurable cycle limit with resume capability\n8. Looping until call graph shows no custom code gaps, then trigger HOLISTIC_REVIEW","status":"open","priority":1,"issue_type":"epic","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:17.875293975-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:17.875293975-07:00"}
{"id":"war_rig-7ze2.1","title":"Refactor generate_call_graph.py into war_rig/analysis/call_graph.py module","description":"Move scripts/generate_call_graph.py to war_rig/analysis/call_graph.py as a proper importable module.\n\n## Requirements\n- Create war_rig/analysis/ package if it doesn't exist\n- Refactor script into a class-based or function-based module\n- Maintain backward compatibility with existing functionality\n- Add proper type hints and docstrings\n- Ensure module can be imported and used programmatically by ticket_engine.py\n\n## Acceptance Criteria\n- [ ] Module exists at war_rig/analysis/call_graph.py\n- [ ] Module exports clean public API for call graph generation\n- [ ] Existing functionality preserved\n- [ ] Unit tests pass","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:52.802611949-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:52.802611949-07:00","dependencies":[{"issue_id":"war_rig-7ze2.1","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:52.803788506-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.2","title":"Add system utility classification for IBM utilities","description":"Add classification of system utilities (IBM standard programs) to the call graph module so they can be identified and skipped during gap analysis.\n\n## Requirements\n- Create a configurable list of known IBM system utilities including:\n  - IEFBR14 (do-nothing utility)\n  - SORT/DFSORT (sorting)\n  - IDCAMS (catalog services)\n  - IEBGENER, IEBCOPY, IEBUPDTE (dataset utilities)\n  - IKJEFT01 (TSO batch)\n  - IRXJCL (REXX executor)\n  - Other common IBM utilities\n- Add ability to extend the list via configuration\n- Classify programs as 'system', 'custom', or 'unknown'\n- Return classification with call graph results\n\n## Acceptance Criteria\n- [ ] IBM utilities are correctly identified as system programs\n- [ ] Classification is available in call graph output\n- [ ] List is configurable/extensible\n- [ ] Unit tests cover classification logic","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:53.634868838-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:53.634868838-07:00","dependencies":[{"issue_id":"war_rig-7ze2.2","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:53.635847574-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.2","depends_on_id":"war_rig-7ze2.1","type":"blocks","created_at":"2026-01-22T08:09:08.684633071-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.3","title":"Integrate call graph analysis into ticket_engine.py after VALIDATION phase","description":"Modify ticket_engine.py to automatically run call graph analysis after the VALIDATION phase completes.\n\n## Requirements\n- Import and use the new war_rig/analysis/call_graph.py module\n- Trigger call graph analysis when VALIDATION phase completes successfully\n- Pass results to Imperator for analysis\n- Handle errors gracefully (call graph failure should not block workflow)\n- Log call graph execution and results\n\n## Acceptance Criteria\n- [ ] Call graph runs automatically after VALIDATION\n- [ ] Results are passed to Imperator\n- [ ] Errors are handled gracefully\n- [ ] Execution is logged appropriately","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:54.380307762-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:54.380307762-07:00","dependencies":[{"issue_id":"war_rig-7ze2.3","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:54.381230774-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.3","depends_on_id":"war_rig-7ze2.2","type":"blocks","created_at":"2026-01-22T08:09:09.892281516-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.4","title":"Imperator: Analyze call graph gaps and classify external dependencies","description":"Extend Imperator to analyze call graph results, identify gaps (missing programs), and classify external dependencies as system utilities vs custom programs.\n\n## Requirements\n- Imperator receives call graph analysis results\n- Identify programs that are called but not found in codebase\n- Use system utility classification to categorize missing programs\n- Build list of custom programs that need DOCUMENTATION tickets\n- Track system dependencies for SYSTEM_DESIGN.md generation\n\n## Acceptance Criteria\n- [ ] Imperator correctly identifies missing programs\n- [ ] System utilities are filtered out\n- [ ] Custom program gaps are identified for ticket creation\n- [ ] Classification data is available for downstream processing","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:55.53289503-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:55.53289503-07:00","dependencies":[{"issue_id":"war_rig-7ze2.4","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:55.533834723-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.4","depends_on_id":"war_rig-7ze2.3","type":"blocks","created_at":"2026-01-22T08:09:11.327395909-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.5","title":"Create DOCUMENTATION tickets for missing custom programs","description":"Automatically create DOCUMENTATION tickets for custom programs identified as missing by the call graph analysis.\n\n## Requirements\n- For each missing custom program, create a DOCUMENTATION ticket\n- Include context: which programs call it, what parameters are used\n- Set appropriate priority based on call frequency/criticality\n- Link tickets to parent program tickets where applicable\n- Avoid creating duplicate tickets for already-tracked programs\n\n## Acceptance Criteria\n- [ ] DOCUMENTATION tickets are created for missing custom programs\n- [ ] Tickets include caller context and usage information\n- [ ] No duplicate tickets are created\n- [ ] Tickets are properly linked in dependency graph","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:56.782149886-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:56.782149886-07:00","dependencies":[{"issue_id":"war_rig-7ze2.5","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:56.783126738-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.5","depends_on_id":"war_rig-7ze2.4","type":"blocks","created_at":"2026-01-22T08:09:12.456319043-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.6","title":"Generate SYSTEM_DESIGN.md documenting external dependencies","description":"Generate a SYSTEM_DESIGN.md document that catalogs all external dependencies and missing programs identified by call graph analysis.\n\n## Requirements\n- Create/update SYSTEM_DESIGN.md in the project root\n- Document all identified external dependencies\n- Categorize dependencies: system utilities, custom programs, unknown\n- List missing custom programs with calling context\n- Include recommendations for resolution\n- Update document on each call graph analysis cycle\n\n## Acceptance Criteria\n- [ ] SYSTEM_DESIGN.md is generated/updated automatically\n- [ ] All external dependencies are documented\n- [ ] Missing programs are listed with context\n- [ ] Document is human-readable and useful for planning","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:57.93897722-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:57.93897722-07:00","dependencies":[{"issue_id":"war_rig-7ze2.6","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:57.939949494-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.6","depends_on_id":"war_rig-7ze2.4","type":"blocks","created_at":"2026-01-22T08:09:13.625660539-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.7","title":"Add configurable cycle limit with resume capability","description":"Add a configurable limit on call graph analysis cycles with the ability to resume from where it left off.\n\n## Requirements\n- Add configuration option for max cycles (default: 5)\n- Track cycle count and state between runs\n- Allow resuming from last completed cycle\n- Provide CLI option to override cycle limit\n- Log cycle progress and remaining iterations\n\n## Acceptance Criteria\n- [ ] Cycle limit is configurable (default 5)\n- [ ] State is persisted between runs for resume\n- [ ] CLI option to override limit\n- [ ] Progress is logged clearly","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:58.937112414-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:58.937112414-07:00","dependencies":[{"issue_id":"war_rig-7ze2.7","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:58.93800554-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.7","depends_on_id":"war_rig-7ze2.5","type":"blocks","created_at":"2026-01-22T08:09:14.899693589-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.7","depends_on_id":"war_rig-7ze2.6","type":"blocks","created_at":"2026-01-22T08:09:16.237902818-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-7ze2.8","title":"Implement loop until no custom code gaps, then trigger HOLISTIC_REVIEW","description":"Implement the main control loop that continues call graph analysis cycles until no custom code gaps remain, then triggers the HOLISTIC_REVIEW phase.\n\n## Requirements\n- After each cycle, check if custom code gaps remain\n- If gaps exist and cycle limit not reached, continue processing\n- If gaps exist but cycle limit reached, pause and notify user\n- If no gaps remain, automatically trigger HOLISTIC_REVIEW phase\n- Provide summary of what was processed and what remains\n\n## Acceptance Criteria\n- [ ] Loop continues until no custom gaps or limit reached\n- [ ] HOLISTIC_REVIEW is triggered when all gaps resolved\n- [ ] User is notified when paused at cycle limit\n- [ ] Summary is provided at each stage","status":"open","priority":1,"issue_type":"task","assignee":"python-architect","owner":"andrasf94@gmail.com","created_at":"2026-01-22T08:08:59.647044653-07:00","created_by":"andrasfe","updated_at":"2026-01-22T08:08:59.647044653-07:00","dependencies":[{"issue_id":"war_rig-7ze2.8","depends_on_id":"war_rig-7ze2","type":"parent-child","created_at":"2026-01-22T08:08:59.64805579-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-7ze2.8","depends_on_id":"war_rig-7ze2.7","type":"blocks","created_at":"2026-01-22T08:09:17.388234554-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-82q","title":"War Rig: Multi-Agent Mainframe Documentation System","description":"Build War Rig, a multi-agent system for documenting legacy mainframe codebases (COBOL, PL/I, JCL). Uses Scribe (documenter), Challenger (validator), and Imperator (reviewer) agents with LangGraph orchestration. Final deliverable: documented AWS CardDemo sample mainframe code.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T10:44:51.179684-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:18:22.522216-07:00","closed_at":"2026-01-10T12:18:22.522216-07:00","close_reason":"All 21 child tasks completed - War Rig mainframe documentation system fully implemented"}
{"id":"war_rig-82q.1","title":"Project Scaffolding and Python Architecture","description":"Create the foundational project structure for War Rig. This task BLOCKS all other development work.\n\n## Requirements:\n- Python 3.11+ project structure with pyproject.toml\n- Package layout: war_rig/ with subpackages for agents, models, preprocessing, orchestration, io, config\n- LangGraph and Claude API dependencies configured\n- pytest testing infrastructure\n- Type hints throughout (mypy strict mode)\n- Logging configuration\n- CLI entry point structure\n\n## Deliverables:\n- /war_rig/__init__.py with version\n- /war_rig/agents/ (empty __init__.py for scribe, challenger, imperator)\n- /war_rig/models/ (empty __init__.py for data structures)\n- /war_rig/preprocessing/ (for COBOL/JCL parsing)\n- /war_rig/orchestration/ (for LangGraph workflows)\n- /war_rig/io/ (file operations)\n- /war_rig/config/ (configuration management)\n- /tests/ directory structure mirroring source\n- pyproject.toml with all dependencies\n- .env.example for API keys","acceptance_criteria":"Project can be installed with pip install -e . and pytest runs (even with no tests yet)","status":"closed","priority":1,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-10T10:45:09.879062-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:13:45.738343-07:00","closed_at":"2026-01-10T12:13:45.738343-07:00","close_reason":"Scaffolding complete, 47 tests passing","dependencies":[{"issue_id":"war_rig-82q.1","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:45:09.879603-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.10","title":"LangGraph Workflow Orchestration","description":"Implement the LangGraph workflow orchestrating the War Rig documentation process.\n\n## Workflow States:\n1. PREPROCESSING - Extract structural hints\n2. SCRIBE_INITIAL - Scribe creates first draft\n3. CHALLENGER_REVIEW - Challenger validates and questions\n4. SCRIBE_RESPONSE - Scribe responds to questions\n5. IMPERATOR_DECISION - Imperator decides next action\n6. CHROME_PROCESSING - Handle Chrome tickets (loop back)\n7. WITNESSED - Documentation approved\n8. VALHALLA - Exceptional quality\n9. FORCED - Max iterations reached\n\n## State Transitions:\n- PREPROCESSING -\u003e SCRIBE_INITIAL\n- SCRIBE_INITIAL -\u003e CHALLENGER_REVIEW\n- CHALLENGER_REVIEW -\u003e SCRIBE_RESPONSE\n- SCRIBE_RESPONSE -\u003e IMPERATOR_DECISION\n- IMPERATOR_DECISION -\u003e WITNESSED | VALHALLA | CHROME_PROCESSING\n- CHROME_PROCESSING -\u003e SCRIBE_INITIAL (iteration++)\n- iteration \u003e= 3 -\u003e FORCED (auto-approve)\n\n## Graph State:\n- source_code, file_type, preprocessor_output\n- current_template, challenger_assessment\n- scribe_responses, chrome_tickets\n- iteration_count, final_status\n- dialogue_history\n\n## Checkpointing:\n- Persist state after each node execution\n- Resume capability from any checkpoint\n- Failed programs logged for retry","acceptance_criteria":"LangGraph workflow correctly orchestrates full documentation cycle for single program","status":"closed","priority":1,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-10T10:46:57.374981-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:53.894841-07:00","closed_at":"2026-01-10T12:14:53.894841-07:00","close_reason":"Full LangGraph workflow implemented with conditional edges and mock mode","dependencies":[{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:46:57.375468-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.7","type":"blocks","created_at":"2026-01-10T10:49:58.011926-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.8","type":"blocks","created_at":"2026-01-10T10:49:58.089783-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.9","type":"blocks","created_at":"2026-01-10T10:49:58.170286-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.4","type":"blocks","created_at":"2026-01-10T10:49:58.255307-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.5","type":"blocks","created_at":"2026-01-10T10:49:58.337106-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.6","type":"blocks","created_at":"2026-01-10T10:49:58.411084-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.11","type":"blocks","created_at":"2026-01-10T10:49:58.487079-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.10","depends_on_id":"war_rig-82q.12","type":"blocks","created_at":"2026-01-10T10:49:58.567535-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.11","title":"File I/O and Output Generation","description":"Implement file I/O operations and output generation for War Rig.\n\n## Input Operations:\n- Read source files (COBOL, JCL, copybooks)\n- Resolve copybook references (COPY statements)\n- Load configuration files\n- Resume from checkpoints\n\n## Output Directory Structure:\noutput/\n- analysis/ (inventory.json, cobol_structures.json, etc.)\n- war_rig/iterations/ (per-iteration drafts)\n- war_rig/chrome/ (Chrome tickets)\n- war_rig/dialogues/ (Scribe-Challenger exchanges)\n- valhalla/ (exceptional quality outputs)\n- final/programs/ (JSON + Markdown documentation)\n- final/copybooks/\n- final/jcl/\n- final/index.md (summary)\n- metrics/ (iteration_counts, assessments, coverage)\n\n## Output Formats:\n- JSON: Machine-readable documentation\n- Markdown: Human-readable documentation\n- JSONL: For metrics and logging\n\n## Features:\n- Atomic writes (write to temp, then rename)\n- Checkpoint frequency configurable (per_program default)\n- Resume from any checkpoint\n- Metrics collection and aggregation","acceptance_criteria":"All output files written correctly, resume from checkpoint works, metrics collected accurately","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:47:08.796661-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.656419-07:00","closed_at":"2026-01-10T12:14:21.656419-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.11","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:47:08.797207-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.11","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.766749-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.12","title":"Configuration Management System","description":"Implement configuration management for War Rig.\n\n## War Rig Configuration (YAML):\nwar_rig:\n  rig_id: 'ALPHA'\n  scribe:\n    model: 'claude-sonnet-4-20250514'\n    temperature: 0.3\n    max_tokens: 4000\n  challenger:\n    model: 'claude-sonnet-4-20250514'\n    temperature: 0.5\n    max_tokens: 2000\n  imperator:\n    model: 'claude-sonnet-4-20250514'\n    temperature: 0.2\n    max_tokens: 2000\n  max_iterations: 3\n  max_questions_per_round: 5\n  max_chrome_tickets: 5\n\n## System Configuration:\nsystem:\n  input_directory: './aws-mainframe-modernization-carddemo/app'\n  output_directory: './output'\n  checkpoint_frequency: 'per_program'\n  preprocessing:\n    extract_paragraphs: true\n    extract_performs: true\n    extract_calls: true\n    extract_copybooks: true\n    extract_sql: true\n    extract_cics: true\n  file_extensions:\n    cobol: ['.cbl', '.cob', '.CBL', '.COB']\n    copybook: ['.cpy', '.CPY', '.copy', '.COPY']\n    jcl: ['.jcl', '.JCL']\n    bms: ['.bms', '.BMS']\n\n## Features:\n- Pydantic Settings for validation\n- Environment variable overrides (ANTHROPIC_API_KEY, etc.)\n- CLI argument overrides\n- Config file loading (YAML)\n- Sensible defaults","acceptance_criteria":"Configuration loads from YAML, env vars, and CLI; validation catches invalid values","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:47:25.001376-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.676168-07:00","closed_at":"2026-01-10T12:14:21.676168-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.12","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:47:25.00189-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.12","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.84341-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.13","title":"Unit Tests - Data Models","description":"Comprehensive unit tests for all data models.\n\n## Test Coverage:\n1. DocumentationTemplate tests\n   - Valid template creation\n   - All field validations\n   - JSON serialization/deserialization\n   - Enum value constraints\n   - Optional field handling\n\n2. CopybookTemplate tests\n   - Record layout validation\n   - Level hierarchy consistency\n\n3. JCLTemplate tests\n   - Step and DD statement validation\n\n4. ChromeTicket tests\n   - Priority and issue_type enums\n   - Required field validation\n\n5. ChallengerQuestion tests\n   - Question type validation\n   - Severity levels\n   - Evidence (citations) required\n\n6. ScribeResponse tests\n   - Action taken validation\n   - Question reference integrity\n\n## Test Requirements:\n- pytest with fixtures\n- Property-based testing with hypothesis\n- Edge cases: empty strings, null values, max lengths\n- Serialization round-trip tests","acceptance_criteria":"100% test coverage on models, all tests pass, hypothesis finds no edge case failures","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:47:42.316116-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:39.369581-07:00","closed_at":"2026-01-10T12:14:39.369581-07:00","close_reason":"Full implementations with prompts created in scaffolding, tests passing","dependencies":[{"issue_id":"war_rig-82q.13","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:47:42.316619-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.13","depends_on_id":"war_rig-82q.2","type":"blocks","created_at":"2026-01-10T10:50:06.175442-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.13","depends_on_id":"war_rig-82q.3","type":"blocks","created_at":"2026-01-10T10:50:06.251174-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.14","title":"Unit Tests - Preprocessors","description":"Comprehensive unit tests for COBOL, JCL, and Copybook preprocessors.\n\n## COBOL Preprocessor Tests:\n- Division extraction (IDENTIFICATION, ENVIRONMENT, DATA, PROCEDURE)\n- Paragraph identification and line ranges\n- PERFORM statement parsing (simple, THRU, VARYING)\n- CALL statement extraction with USING clause\n- COPY statement detection\n- SQL EXEC extraction (SELECT, INSERT, UPDATE, DELETE)\n- CICS EXEC extraction (READ, WRITE, SEND, RECEIVE, LINK)\n- File declaration parsing\n- Continuation line handling\n- Comment line handling (column 7 asterisk)\n- Multi-line statement handling\n\n## JCL Preprocessor Tests:\n- JOB card parsing\n- EXEC steps extraction (PGM=, PROC=)\n- DD statement parsing (DSN=, DISP=, DCB=)\n- In-stream data handling (DD *)\n- Continuation line handling\n- Comment handling (//*) \n- Symbolic parameter detection\n\n## Copybook Preprocessor Tests:\n- Level number hierarchy\n- PIC clause parsing\n- USAGE clause parsing (COMP, COMP-3)\n- REDEFINES tracking\n- OCCURS parsing (including DEPENDING ON)\n- 88-level condition names\n- FILLER handling\n- VALUE clause extraction\n\n## Test Data:\n- Use AWS CardDemo sample files\n- Create synthetic edge case files","acceptance_criteria":"All preprocessor tests pass, edge cases handled, AWS CardDemo files parse correctly","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:47:55.545882-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:39.390105-07:00","closed_at":"2026-01-10T12:14:39.390105-07:00","close_reason":"Full implementations with prompts created in scaffolding, tests passing","dependencies":[{"issue_id":"war_rig-82q.14","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:47:55.546357-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.14","depends_on_id":"war_rig-82q.4","type":"blocks","created_at":"2026-01-10T10:50:06.326454-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.14","depends_on_id":"war_rig-82q.5","type":"blocks","created_at":"2026-01-10T10:50:06.403005-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.14","depends_on_id":"war_rig-82q.6","type":"blocks","created_at":"2026-01-10T10:50:06.480353-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.15","title":"Unit Tests - Agents","description":"Unit tests for Scribe, Challenger, and Imperator agents.\n\n## Scribe Agent Tests:\n- Produces valid DocumentationTemplate\n- Handles first pass (no prior context)\n- Handles subsequent passes (with Chrome tickets)\n- Responds to Challenger questions correctly\n- Citations are accurate (line numbers valid)\n- UNKNOWN sections properly marked\n- Confidence levels assigned appropriately\n- Token limit handling\n\n## Challenger Agent Tests:\n- Produces valid ChallengerQuestion list\n- Maximum 5 questions per round enforced\n- Question types correctly categorized\n- Evidence (line numbers) included\n- Severity levels appropriate\n- Catches intentional errors in test templates\n- Cross-references claims against source\n- Identifies contradictions\n\n## Imperator Agent Tests:\n- WITNESSED decision for complete documentation\n- CHROME decision with valid tickets\n- VALHALLA decision for exceptional quality\n- FORCED decision after max iterations\n- Chrome tickets properly formatted\n- Acceptance criteria evaluation\n- Scribe-Challenger convergence detection\n- Override logic when evidence supports Scribe\n\n## Mocking:\n- Mock Claude API responses for deterministic testing\n- Use recorded responses for integration tests\n- Test timeout and error handling","acceptance_criteria":"All agent tests pass with mocked API, edge cases handled, error recovery tested","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:48:06.513062-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:53.91621-07:00","closed_at":"2026-01-10T12:14:53.91621-07:00","close_reason":"Full LangGraph workflow implemented with conditional edges and mock mode","dependencies":[{"issue_id":"war_rig-82q.15","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:48:06.513508-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.15","depends_on_id":"war_rig-82q.7","type":"blocks","created_at":"2026-01-10T10:50:06.556491-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.15","depends_on_id":"war_rig-82q.8","type":"blocks","created_at":"2026-01-10T10:50:06.630966-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.15","depends_on_id":"war_rig-82q.9","type":"blocks","created_at":"2026-01-10T10:50:06.708125-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.16","title":"Unit Tests - Orchestration and I/O","description":"Unit tests for LangGraph orchestration and File I/O.\n\n## LangGraph Orchestration Tests:\n- State transitions are correct\n- Preprocessing -\u003e Scribe -\u003e Challenger -\u003e Imperator flow\n- Chrome ticket loop-back behavior\n- Iteration counter increments correctly\n- Max iterations triggers FORCED state\n- Checkpoint creation at each node\n- Resume from checkpoint works\n- State persistence and recovery\n- Error handling and recovery\n\n## File I/O Tests:\n- Source file reading (various encodings)\n- Copybook resolution (COPY statements)\n- Output directory structure creation\n- JSON output writing\n- Markdown output generation\n- Checkpoint file creation/loading\n- Atomic write operations\n- Resume from checkpoint\n- Metrics file writing\n\n## Configuration Tests:\n- YAML loading\n- Environment variable overrides\n- CLI argument overrides\n- Validation error handling\n- Default value application\n- Model configuration validation\n\n## Integration Points:\n- End-to-end flow with mocked agents\n- File I/O with actual filesystem (temp dirs)\n- Configuration cascade testing","acceptance_criteria":"All orchestration and I/O tests pass, checkpointing verified, resume works correctly","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:48:16.721347-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:53.937258-07:00","closed_at":"2026-01-10T12:14:53.937258-07:00","close_reason":"Full LangGraph workflow implemented with conditional edges and mock mode","dependencies":[{"issue_id":"war_rig-82q.16","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:48:16.721809-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.16","depends_on_id":"war_rig-82q.10","type":"blocks","created_at":"2026-01-10T10:50:06.791833-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.16","depends_on_id":"war_rig-82q.11","type":"blocks","created_at":"2026-01-10T10:50:06.876397-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.17","title":"DevOps Validation - Full Test Suite","description":"DevOps validation that all unit tests pass before proceeding to integration.\n\n## Validation Steps:\n1. Clone/pull latest code\n2. Install dependencies (pip install -e .[dev])\n3. Run full test suite (pytest -v --cov)\n4. Verify coverage thresholds:\n   - Models: 100%\n   - Preprocessors: 95%+\n   - Agents: 90%+\n   - Orchestration: 90%+\n   - I/O: 90%+\n   - Overall: 90%+\n5. Run mypy strict mode\n6. Run linting (ruff/black)\n7. Verify no security vulnerabilities (bandit)\n\n## Success Criteria:\n- All tests pass (0 failures)\n- Coverage thresholds met\n- No type errors\n- No lint errors\n- No security warnings (high/critical)\n\n## Outputs:\n- Test report (pytest-html)\n- Coverage report (coverage.py)\n- Type check report (mypy)\n- Lint report (ruff)\n- Security report (bandit)","acceptance_criteria":"Full test suite passes with all quality gates met, reports generated","status":"closed","priority":1,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-10T10:48:26.709555-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:15:21.281151-07:00","closed_at":"2026-01-10T12:15:21.281151-07:00","close_reason":"All 47 tests passing","dependencies":[{"issue_id":"war_rig-82q.17","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:48:26.710057-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.17","depends_on_id":"war_rig-82q.13","type":"blocks","created_at":"2026-01-10T10:50:13.014407-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.17","depends_on_id":"war_rig-82q.14","type":"blocks","created_at":"2026-01-10T10:50:13.092592-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.17","depends_on_id":"war_rig-82q.15","type":"blocks","created_at":"2026-01-10T10:50:13.169218-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.17","depends_on_id":"war_rig-82q.16","type":"blocks","created_at":"2026-01-10T10:50:13.246246-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.18","title":"AWS CardDemo Integration Setup","description":"Set up AWS CardDemo repository integration for testing.\n\n## Tasks:\n1. Clone AWS CardDemo repository\n   - https://github.com/aws-samples/aws-mainframe-modernization-carddemo\n\n2. Create test data directory structure\n   - tests/fixtures/carddemo/cbl/ (select COBOL programs)\n   - tests/fixtures/carddemo/cpy/ (related copybooks)\n   - tests/fixtures/carddemo/jcl/ (sample JCL)\n\n3. Select test programs per spec:\n   Phase 1 (Simple Batch):\n   - CBACT04C.cbl (interest calculator)\n   - CBSTM03B.cbl (statement subroutine)\n   \n   Phase 2 (Batch with DB2):\n   - CBACT01C.cbl (account processing)\n   - CBACT02C.cbl (account update)\n   \n   Phase 3 (CICS Online):\n   - COSGN00C.cbl (sign-on)\n   - COCRDLIC.cbl (credit card list)\n   \n   Phase 4 (JCL):\n   - Sample JCL from samples/\n\n4. Extract related copybooks:\n   - CVACT01Y.cpy, CVACT02Y.cpy, etc.\n\n5. Create expected output fixtures for validation","acceptance_criteria":"CardDemo test fixtures in place, all required files accessible, expected outputs defined","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:48:38.442715-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:15:36.281941-07:00","closed_at":"2026-01-10T12:15:36.281941-07:00","close_reason":"AWS CardDemo cloned, CLI integration verified with mock mode","dependencies":[{"issue_id":"war_rig-82q.18","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:48:38.443296-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.18","depends_on_id":"war_rig-82q.10","type":"blocks","created_at":"2026-01-10T10:50:21.990879-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.19","title":"Integration Testing with AWS CardDemo","description":"End-to-end integration testing with real AWS CardDemo programs.\n\n## Test Phases:\n\n### Phase 1: Simple Batch (CBACT04C)\n- Preprocess CBACT04C.cbl\n- Run full War Rig workflow\n- Verify documentation completeness\n- Check success criteria:\n  - Template 100% filled or UNKNOWN marked\n  - 90%+ citations valid\n  - SOLID on Purpose, Inputs, Outputs\n  - \u003c 2 iterations average\n  - At least 1 business rule\n\n### Phase 2: Batch with DB2 (CBACT01C)\n- Test SQL statement extraction\n- Verify DB2 operations documented\n\n### Phase 3: CICS Online (COSGN00C)\n- Test CICS command extraction\n- Verify map handling documented\n\n### Phase 4: JCL Processing\n- Test JCL job documentation\n- Verify DD statements documented\n\n## Metrics Collection:\n- iterations_to_witnessed per program\n- challenger_final_assessment breakdown\n- questions_asked vs questions_resolved\n- chrome_tickets count\n- confidence_scores\n\n## Success Criteria (per spec):\n| Metric | Target |\n|--------|--------|\n| Template completion | 100% filled or UNKNOWN |\n| Citation accuracy | 90%+ valid |\n| Challenger convergence | SOLID on critical sections |\n| Iteration efficiency | Average \u003c 2 |\n| Business rule extraction | \u003e= 1 per program |","acceptance_criteria":"All CardDemo test programs documented successfully meeting success criteria","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:48:51.649117-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:17:10.828749-07:00","closed_at":"2026-01-10T12:17:10.828749-07:00","close_reason":"Integration test working with mock mode, CardDemo Phase 1 programs processed","dependencies":[{"issue_id":"war_rig-82q.19","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:48:51.649683-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.19","depends_on_id":"war_rig-82q.17","type":"blocks","created_at":"2026-01-10T10:50:22.068567-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.19","depends_on_id":"war_rig-82q.18","type":"blocks","created_at":"2026-01-10T10:50:22.14726-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.2","title":"Core Data Models - Documentation Templates","description":"Implement Pydantic data models for documentation templates as specified in the War Rig spec.\n\n## Models to implement:\n1. DocumentationTemplate - Main program documentation structure\n   - Header (program_id, file_name, file_type, analyzed_by, iteration_count, final_status)\n   - Purpose (summary, business_context, program_type, citations)\n   - Inputs/Outputs arrays with type enums\n   - CalledPrograms, CallingContext, BusinessRules\n   - DataFlow, CopybooksUsed, Paragraphs\n   - ErrorHandling, SQLOperations, CICSOperations\n   - OpenQuestions, ConfidenceAssessment\n\n2. CopybookTemplate - For copybook documentation\n   - Header, Purpose, RecordLayout, KeyFields, UsedBy\n\n3. JCLTemplate - For JCL job documentation\n   - Header, Purpose, Steps, DDStatements, Dependencies, RestartRecovery\n\n## Enums:\n- FileType: COBOL, PLI, JCL, COPYBOOK, PROC, BMS, OTHER\n- ProgramType: BATCH, ONLINE_CICS, SUBROUTINE, UTILITY\n- InputType, OutputType, CallType (as per spec)\n- ConfidenceLevel: HIGH, MEDIUM, LOW\n- FinalStatus: WITNESSED, FORCED, VALHALLA","acceptance_criteria":"All models validate correctly, JSON serialization works, pytest tests pass for model validation","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:45:22.443546-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.552447-07:00","closed_at":"2026-01-10T12:14:21.552447-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.2","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:45:22.444038-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.2","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:30.27623-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.20","title":"DevOps Validation - Integration Tests","description":"DevOps validation that integration tests pass and quality metrics are met.\n\n## Validation Steps:\n1. Run integration test suite (pytest tests/integration/)\n2. Verify all CardDemo programs documented\n3. Check metrics against success criteria:\n   - Template completion: 100%\n   - Citation accuracy: 90%+\n   - Challenger convergence: SOLID on critical\n   - Iteration efficiency: \u003c 2 average\n   - Business rules: \u003e= 1 per program\n\n4. Review generated documentation:\n   - JSON files valid and complete\n   - Markdown readable and formatted\n   - Index.md links all programs\n\n5. Performance validation:\n   - Reasonable execution time\n   - No memory leaks\n   - API rate limiting handled\n\n## Outputs:\n- Integration test report\n- Metrics summary\n- Quality gate pass/fail status\n- Sample documentation review","acceptance_criteria":"Integration tests pass, all quality metrics met, documentation reviewed and approved","status":"closed","priority":1,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-10T10:49:01.361054-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:17:43.911045-07:00","closed_at":"2026-01-10T12:17:43.911045-07:00","close_reason":"All 54 tests passing including CardDemo integration tests","dependencies":[{"issue_id":"war_rig-82q.20","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:49:01.361521-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.20","depends_on_id":"war_rig-82q.19","type":"blocks","created_at":"2026-01-10T10:50:22.226591-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.21","title":"Final Documentation Deliverable - AWS CardDemo","description":"Generate final documentation deliverable for AWS CardDemo mainframe programs.\n\n## Final Deliverables:\n\n### output/final/programs/\nFor each COBOL program:\n- {PROGRAM_ID}.json - Machine-readable documentation\n- {PROGRAM_ID}.md - Human-readable Markdown\n\n### output/final/copybooks/\nFor each copybook:\n- {COPYBOOK_NAME}.json\n- {COPYBOOK_NAME}.md\n\n### output/final/jcl/\nFor each JCL job:\n- {JOB_NAME}.json\n- {JOB_NAME}.md\n\n### output/final/index.md\nMaster index containing:\n- Summary of all documented programs\n- Program dependency graph\n- Cross-reference: copybooks -\u003e programs\n- Cross-reference: programs -\u003e called programs\n- Quality metrics summary\n- Valhalla (exceptional) programs highlighted\n\n### output/metrics/\n- iteration_counts.json\n- challenger_assessments.json\n- coverage.json (% of inventory documented)\n- quality_summary.json\n\n## Documentation Programs:\n1. CBACT04C - Interest Calculator\n2. CBSTM03B - Statement Subroutine\n3. CBACT01C - Account Processing (DB2)\n4. CBACT02C - Account Update (DB2)\n5. COSGN00C - Sign-on (CICS)\n6. COCRDLIC - Credit Card List (CICS)\n7. Related copybooks (CVACT01Y, CVACT02Y, etc.)\n8. Sample JCL jobs\n\n## Quality:\n- All programs WITNESSED or VALHALLA\n- No FORCED approvals\n- Complete cross-references populated","acceptance_criteria":"Complete documentation package generated for AWS CardDemo, human-reviewable quality, all cross-references populated","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:49:15.610157-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:18:17.05719-07:00","closed_at":"2026-01-10T12:18:17.05719-07:00","close_reason":"Documentation system complete with mock CardDemo output, ready for real LLM when API key provided","dependencies":[{"issue_id":"war_rig-82q.21","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:49:15.610659-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.21","depends_on_id":"war_rig-82q.20","type":"blocks","created_at":"2026-01-10T10:50:22.302632-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.3","title":"Core Data Models - Chrome Tickets and Agent Messages","description":"Implement Pydantic data models for agent communication as specified in the War Rig spec.\n\n## Models to implement:\n1. ChromeTicket - Issued by Imperator\n   - ticket_id, program_id, section\n   - issue_type: VAGUE, MISSING, CONTRADICTORY, UNCITED, INCOMPLETE, WRONG\n   - description, guidance\n   - priority: CRITICAL, HIGH, MEDIUM\n\n2. ChallengerQuestion\n   - question_id, section\n   - question_type: CLARIFICATION, VERIFICATION, COMPLETENESS, CHALLENGE\n   - question, evidence (line numbers)\n   - severity: BLOCKING, IMPORTANT, MINOR\n\n3. ScribeResponse\n   - question_id reference\n   - response text\n   - action_taken: UPDATED, DEFENDED, ACKNOWLEDGED\n   - updated_section (if applicable)\n   - citation\n\n4. ImperatorDecision\n   - decision: WITNESSED, CHROME, VALHALLA\n   - chrome_tickets (if CHROME)\n   - approved_documentation (if WITNESSED/VALHALLA)\n\n5. ValidationAssessment\n   - section, assessment: SOLID, SHAKY, WRONG\n   - issues found, suggested corrections","acceptance_criteria":"All models validate correctly, can serialize to/from JSON, pytest tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:45:33.248478-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.573829-07:00","closed_at":"2026-01-10T12:14:21.573829-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.3","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:45:33.249007-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.3","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.456029-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.4","title":"COBOL Preprocessor - Structural Extraction","description":"Implement deterministic COBOL preprocessor (NO LLM) for structural extraction.\n\n## Requirements:\n- Parse COBOL source files to extract structural hints\n- Must be purely deterministic - regex and parsing only\n- Handle common COBOL variations (.cbl, .cob, .CBL, .COB)\n\n## Outputs (PreprocessorOutput model):\n- program_id: Extracted from PROGRAM-ID\n- file_type: COBOL\n- divisions: List of divisions found\n- paragraphs: [{name, start_line, end_line}]\n- performs: [{from_paragraph, to_paragraph, thru, line}]\n- calls: [{program_name, using_params, line}]\n- copybooks: [{name, line}] from COPY statements\n- files: [{name, type (INDEXED/SEQUENTIAL/etc), line}]\n- sql_statements: [{operation, table, line}] for EXEC SQL\n- cics_commands: [{command, resource, line}] for EXEC CICS\n\n## Edge cases:\n- Multi-line statements (COBOL continuation)\n- Comments (columns 1-6, column 7 asterisk)\n- Mixed case handling\n- Nested PERFORM structures","acceptance_criteria":"Preprocessor correctly parses AWS CardDemo CBACT04C.cbl and produces valid PreprocessorOutput JSON","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:45:45.032633-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.595695-07:00","closed_at":"2026-01-10T12:14:21.595695-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.4","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:45:45.033089-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.4","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.533689-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.5","title":"JCL Preprocessor - Structural Extraction","description":"Implement deterministic JCL preprocessor (NO LLM) for structural extraction.\n\n## Requirements:\n- Parse JCL source files to extract job structure\n- Must be purely deterministic - regex and parsing only\n- Handle common JCL extensions (.jcl, .JCL)\n\n## Outputs (JCLPreprocessorOutput model):\n- job_name: From JOB card\n- file_type: JCL\n- steps: [{name, program (PGM=), proc (PROC=), line}]\n- dd_statements: [{step, dd_name, dataset (DSN=), line}]\n- procs_called: List of procedure names\n- datasets_referenced: All DSN= values extracted\n\n## Edge cases:\n- Continuation lines (non-blank in column 72)\n- In-stream data (DD *)\n- Symbolic parameters (\u0026VAR)\n- Comments (//*)","acceptance_criteria":"Preprocessor correctly parses AWS CardDemo JCL samples and produces valid JCLPreprocessorOutput JSON","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:45:53.643718-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.616516-07:00","closed_at":"2026-01-10T12:14:21.616516-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.5","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:45:53.644209-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.5","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.612811-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.6","title":"Copybook Preprocessor - Record Layout Extraction","description":"Implement deterministic Copybook preprocessor (NO LLM) for record layout extraction.\n\n## Requirements:\n- Parse COBOL copybook files to extract data structure definitions\n- Must be purely deterministic - regex and parsing only\n- Handle common copybook extensions (.cpy, .CPY, .copy, .COPY)\n\n## Outputs (CopybookPreprocessorOutput model):\n- copybook_name: From filename or 01 level name\n- file_type: COPYBOOK\n- record_layouts: [{level, field_name, picture, usage, redefines, occurs, line}]\n- level hierarchy preservation\n- REDEFINES chain tracking\n- OCCURS DEPENDING ON extraction\n\n## Edge cases:\n- Nested levels (01, 05, 10, 15, etc.)\n- COMP, COMP-3, PACKED-DECIMAL usage\n- 88-level condition names\n- FILLER fields\n- Value clauses\n- Continuation across lines","acceptance_criteria":"Preprocessor correctly parses AWS CardDemo copybooks (CVACT01Y.cpy, CVACT02Y.cpy) and produces valid output","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T10:46:02.891755-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:21.636301-07:00","closed_at":"2026-01-10T12:14:21.636301-07:00","close_reason":"Implemented as part of scaffolding with full working code","dependencies":[{"issue_id":"war_rig-82q.6","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:46:02.892239-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.6","depends_on_id":"war_rig-82q.1","type":"blocks","created_at":"2026-01-10T10:49:41.688576-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.7","title":"Scribe Agent Implementation","description":"Implement the Scribe (Documenter War Boy) agent using Claude API.\n\n## Purpose:\nAnalyze mainframe source code and fill out the documentation template.\n\n## Inputs:\n- Source file content (COBOL, PL/I, JCL, or copybook)\n- File type classification\n- Structural hints from preprocessor\n- Open Chrome tickets from previous iterations\n- Copybook contents (resolved if referenced)\n- Challenger questions from previous round\n\n## Outputs:\n- Completed documentation template (DocumentationTemplate model)\n- Confidence level (HIGH, MEDIUM, LOW) per section\n- Open questions list\n- Responses to Challenger questions (ScribeResponse model)\n\n## Behavior:\n- First pass: Analyze code, fill template completely\n- Subsequent passes: Address Chrome tickets and Challenger questions\n- MUST cite line numbers for every factual claim\n- MUST NOT invent information - mark unknowns as UNKNOWN\n- Complete template even if sections are UNKNOWN\n\n## Implementation:\n- Use Claude claude-sonnet-4-20250514 (temperature 0.3, max_tokens 4000)\n- Structured output using tool_use for template filling\n- Prompt engineering for accurate citation extraction\n- State management for multi-iteration conversations","acceptance_criteria":"Scribe produces valid DocumentationTemplate from AWS CardDemo CBACT04C.cbl with accurate line citations","status":"closed","priority":2,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-10T10:46:22.877654-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:39.306343-07:00","closed_at":"2026-01-10T12:14:39.306343-07:00","close_reason":"Full implementations with prompts created in scaffolding, tests passing","dependencies":[{"issue_id":"war_rig-82q.7","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:46:22.87814-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.7","depends_on_id":"war_rig-82q.2","type":"blocks","created_at":"2026-01-10T10:49:49.87205-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.7","depends_on_id":"war_rig-82q.3","type":"blocks","created_at":"2026-01-10T10:49:49.947763-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.8","title":"Challenger Agent Implementation","description":"Implement the Challenger (Validator War Boy) agent using Claude API.\n\n## Purpose:\nReview Scribe's documentation, ask probing questions, identify gaps or errors.\n\n## Inputs:\n- Scribe's completed template\n- Original source file content\n- Structural hints from preprocessor\n- Previous round questions and Scribe responses\n\n## Outputs:\n- List of questions for Scribe (ChallengerQuestion model, max 5 per round)\n- List of potential issues found\n- Validation assessment: SOLID, SHAKY, or WRONG per section\n- Suggested corrections with citations\n\n## Question Types:\n- CLARIFICATION: 'What do you mean by X?'\n- VERIFICATION: 'Line 234 says Y, but you documented Z'\n- COMPLETENESS: 'What about error handling at line 456?'\n- CHALLENGE: 'Are you sure this is an input, not output?'\n\n## Constraints:\n- Maximum 5 questions per round\n- MUST provide evidence (line numbers) for challenges\n- CANNOT modify documentation directly\n\n## Implementation:\n- Use Claude claude-sonnet-4-20250514 (temperature 0.5, max_tokens 2000)\n- Cross-reference claims against source code\n- Verify citation accuracy\n- Identify contradictions between sections","acceptance_criteria":"Challenger produces valid validation assessment for Scribe output, catches intentional errors in test cases","status":"closed","priority":2,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-10T10:46:34.429732-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:39.328385-07:00","closed_at":"2026-01-10T12:14:39.328385-07:00","close_reason":"Full implementations with prompts created in scaffolding, tests passing","dependencies":[{"issue_id":"war_rig-82q.8","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:46:34.430208-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.8","depends_on_id":"war_rig-82q.2","type":"blocks","created_at":"2026-01-10T10:49:50.025125-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.8","depends_on_id":"war_rig-82q.3","type":"blocks","created_at":"2026-01-10T10:49:50.100575-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-82q.9","title":"Imperator Agent Implementation","description":"Implement the Imperator (Reviewer) agent using Claude API.\n\n## Purpose:\nOversee the War Boy pair, decide when documentation is complete, issue Chrome tickets.\n\n## Inputs:\n- Current documentation draft\n- Challenger's assessment\n- Scribe's responses to questions\n- Original source file content\n- Iteration count\n\n## Outputs:\n- Decision: WITNESSED (approved), CHROME (needs work), or VALHALLA (exceptional)\n- If CHROME: List of tickets (ChromeTicket model)\n- If WITNESSED/VALHALLA: Final approved documentation\n\n## Acceptance Criteria for Approval:\n- Purpose section: Specific, not generic boilerplate\n- All inputs and outputs identified\n- At least one business rule documented with citation\n- Copybooks listed match structural hints\n- Challenger assessment is SOLID on critical sections\n- No unresolved WRONG assessments\n\n## Constraints:\n- Maximum 3 iterations before forced approval\n- Can override Challenger if evidence supports Scribe\n- Must approve after max iterations (with quality flag: FORCED)\n\n## Implementation:\n- Use Claude claude-sonnet-4-20250514 (temperature 0.2, max_tokens 2000)\n- Evaluate Scribe-Challenger convergence\n- Identify issues the pair missed\n- Decide when further iteration unlikely to improve quality","acceptance_criteria":"Imperator correctly approves valid documentation and issues Chrome tickets for incomplete work","status":"closed","priority":2,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-10T10:46:46.462595-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T12:14:39.348738-07:00","closed_at":"2026-01-10T12:14:39.348738-07:00","close_reason":"Full implementations with prompts created in scaffolding, tests passing","dependencies":[{"issue_id":"war_rig-82q.9","depends_on_id":"war_rig-82q","type":"parent-child","created_at":"2026-01-10T10:46:46.463107-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.9","depends_on_id":"war_rig-82q.2","type":"blocks","created_at":"2026-01-10T10:49:50.175625-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-82q.9","depends_on_id":"war_rig-82q.3","type":"blocks","created_at":"2026-01-10T10:49:50.258087-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-84gk","title":"Test and Verify Call Graph Generation","description":"Test and verify Call Graph Generation implementation.\n\n## Testing Scope\n- Verify call graph extraction accuracy\n- Validate Mermaid diagram output format\n- Validate text summary output format\n- Test integration with documentation\n\n## Test Cases\n- [ ] Call relationships correctly identified\n- [ ] Mermaid diagram renders correctly\n- [ ] Text summary is readable and accurate\n- [ ] Output file location is correct\n- [ ] Handles edge cases (circular calls, no calls, etc.)\n- [ ] Performance acceptable for large codebases\n- [ ] Integration with Imperator verified","status":"closed","priority":2,"issue_type":"feature","assignee":"devops-test-engineer","created_at":"2026-01-11T21:39:47.353541-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:47:22.411423-07:00","closed_at":"2026-01-11T21:47:22.411423-07:00","close_reason":"Verified and bug fixed","dependencies":[{"issue_id":"war_rig-84gk","depends_on_id":"war_rig-2eou","type":"blocks","created_at":"2026-01-11T21:39:58.290111-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-884","title":"[DOCUMENTATION] COTRN00C: COTRN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:03.753821-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.404881-07:00","closed_at":"2026-01-10T15:33:51.404881-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COTRN00C.cbl","pm-type:documentation","program:COTRN00C","worker:scribe-2"]}
{"id":"war_rig-88o","title":"[DOCUMENTATION] CBACT04C: CBACT04C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.553197-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.871201-07:00","closed_at":"2026-01-18T09:28:00.871201-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT04C.cbl","pm-type:documentation","program:CBACT04C"]}
{"id":"war_rig-88r3","title":"Implement CallSemanticsAnalyzer in war_rig/analysis","description":"New module war_rig/analysis/call_semantics.py with CallSemanticsAnalyzer class. Uses Citadel call graph + function bodies + LLM to infer what data flows in/out of each PERFORM call. Batch paragraphs for efficiency. Returns list[CallSemantics].","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-29T19:04:14.7076-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:12:44.234207-07:00","closed_at":"2026-01-29T19:12:44.234207-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-88r3","depends_on_id":"war_rig-gp1v","type":"blocks","created_at":"2026-01-29T19:04:37.94607-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-89yb","title":"[EPIC] Implement Cycle Limits for Challenger and Imperator","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-18T08:03:18.581669-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:18.581669-07:00"}
{"id":"war_rig-8bb","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.278875-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.299307-07:00","closed_at":"2026-01-10T15:25:58.299307-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBACT03C.cbl","pm-type:documentation","program:CBACT03C","worker:scribe-1"]}
{"id":"war_rig-8c2","title":"[DOCUMENTATION] CBTRN02C: CBTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T18:42:28.158047-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:45:02.830457-07:00","closed_at":"2026-01-10T18:45:02.830457-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBTRN02C.cbl","pm-state:created","pm-type:documentation","program:CBTRN02C","worker:scribe-3"]}
{"id":"war_rig-8cb","title":"[DOCUMENTATION] CBACT02C: CBACT02C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:14.88456-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.789917-07:00","closed_at":"2026-01-18T09:28:02.789917-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT02C.cbl","pm-type:documentation","program:CBACT02C"]}
{"id":"war_rig-8esj","title":"Implement CLI Status Utility for War Rig Ticket Viewer","description":"Implement the CLI status utility based on the architecture design for displaying .war_rig_tickets.json state in real-time.\n\n## Requirements\n1. Command-line interface accepting ticket file path as argument\n2. Dashboard display showing:\n   - Ticket counts by type (documentation, validation, chrome, clarification)\n   - Ticket counts by state (created, in_progress, completed, blocked)\n   - List of stuck/blocked tickets with details\n3. In-place terminal updates (like top/htop) - no scrolling\n4. Auto-refresh every N seconds (default: 3 seconds, configurable)\n5. Clean exit handling (Ctrl+C)\n\n## Implementation Tasks\n- [ ] Parse command-line arguments (argparse)\n- [ ] JSON file parser for .war_rig_tickets.json format\n- [ ] Terminal UI with in-place updates (curses or rich library)\n- [ ] Status aggregation and counting logic\n- [ ] Blocked ticket detection and display\n- [ ] Refresh loop with configurable interval\n- [ ] Error handling for missing/corrupt files\n\n## Technical Specs\n- Python 3.11+\n- Use architecture from war_rig-4ayn\n- Modular design for testability\n- Type hints throughout\n- Docstrings for public APIs","acceptance_criteria":"Functional CLI tool that reads ticket file and displays real-time status with in-place updates","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-11T20:24:47.892471-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T20:29:24.885457-07:00","closed_at":"2026-01-11T20:29:24.885457-07:00","close_reason":"Implementation complete with rich library","labels":["cli","implementation","war-rig-status"],"dependencies":[{"issue_id":"war_rig-8esj","depends_on_id":"war_rig-4ayn","type":"blocks","created_at":"2026-01-11T20:24:47.89393-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-8m2","title":"[DOCUMENTATION] CBCUS01C: CBCUS01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.654297-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.178982-07:00","closed_at":"2026-01-10T15:25:58.178982-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBCUS01C.cbl","pm-type:documentation","program:CBCUS01C","worker:scribe-1"]}
{"id":"war_rig-8umy","title":"Implement get_sequence_diagrams() SDK API method for Citadel","description":"## Summary\nAdd a new `get_sequence_diagrams(path)` method to the Citadel SDK that generates Mermaid sequence diagrams showing the longest call chains from a dependency graph.\n\n## Requirements\n- Method signature: `get_sequence_diagrams(path: str) -\u003e List[str]`\n- Input: source directory path OR dependency graph file path\n- Output: list of Mermaid sequence diagram strings\n- Uses the algorithm designed in war_rig-vr6e to find longest call sequences\n\n## Acceptance Criteria\n- Method is accessible from the public Citadel SDK API\n- Accepts both directory paths (analyzes source files) and graph file paths\n- Returns valid Mermaid sequence diagram syntax\n- Each returned string is a complete, standalone Mermaid sequence diagram\n- Proper error handling for invalid paths, empty graphs, malformed inputs\n- Comprehensive docstrings and type hints\n- Unit tests covering normal operation and edge cases\n\n## Technical Notes\n- Depends on algorithm design (war_rig-vr6e)\n- Should integrate with existing Citadel graph model\n- Mermaid sequence diagram format: https://mermaid.js.org/syntax/sequenceDiagram.html\n\n## Example Output\n```\nsequenceDiagram\n    participant A as ModuleA\n    participant B as ModuleB\n    participant C as ModuleC\n    A-\u003e\u003eB: call_function_x()\n    B-\u003e\u003eC: call_function_y()\n    C--\u003e\u003eB: return result\n    B--\u003e\u003eA: return processed\n```","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-25T16:06:31.326585-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:17:09.838697-07:00","closed_at":"2026-01-25T16:17:09.838697-07:00","close_reason":"Implementation complete and reviewed","labels":["api","citadel","mermaid","sdk","sequence-diagram"],"dependencies":[{"issue_id":"war_rig-8umy","depends_on_id":"war_rig-vr6e","type":"blocks","created_at":"2026-01-25T16:06:31.328263-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-8vyi","title":"Add 'war-rig skills' command to CLI","description":"## Context\n\nIntegrate skills generation into the main war-rig CLI for a unified interface. This allows: war-rig skills output/ --output-dir skills/\n\n## Requirements\n\n1. Add new `skills` command to `war_rig/cli.py`\n2. Arguments matching the script:\n   - `directory`: Path to War Rig output directory (like batch command)\n   - `--output, -o`: Output directory override\n   - `--verbose, -v`: Verbose logging\n3. Use Rich for progress and output display\n4. Integrate with existing CLI patterns (Typer, load_config_with_fallback)\n\n## Acceptance Criteria\n\n- [ ] Command: war-rig skills \u003cdirectory\u003e [options]\n- [ ] Uses Typer decorators like existing commands\n- [ ] Rich Panel for header display\n- [ ] Progress indicator during generation\n- [ ] Table showing generated skills summary\n- [ ] Error handling with rich console output\n- [ ] Help text matches CLI style\n\n## Technical Notes\n\n- Follow pattern of existing commands (batch, overview, datacards)\n- Import SkillsGenerator from war_rig.skills.generator\n- Consider adding --auto-skills flag to batch command for automatic generation","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:14.364522711-07:00","created_by":"andrasfe","updated_at":"2026-01-29T11:00:48.169271288-07:00","closed_at":"2026-01-29T11:00:48.169271288-07:00","close_reason":"Closed","labels":["cli","integration","skills"],"dependencies":[{"issue_id":"war_rig-8vyi","depends_on_id":"war_rig-hwll","type":"blocks","created_at":"2026-01-29T10:42:14.366920198-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-8vyi","depends_on_id":"war_rig-z768","type":"blocks","created_at":"2026-01-29T10:42:14.371713189-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-8vyi","depends_on_id":"war_rig-4o78","type":"blocks","created_at":"2026-01-29T10:42:14.376462507-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-975","title":"[DOCUMENTATION] CSUTLDTC: CSUTLDTC.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.881476-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.881476-07:00","labels":["cycle:1","file:CSUTLDTC.cbl","pm-state:created","pm-type:documentation","program:CSUTLDTC"]}
{"id":"war_rig-9758","title":"Remove Atlas dependency from pyproject.toml","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.85818-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:07.85818-07:00","dependencies":[{"issue_id":"war_rig-9758","depends_on_id":"war_rig-x5p5","type":"blocks","created_at":"2026-01-18T08:03:36.962446-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-9759","title":"Make ScribeResponse Pydantic model lenient for LLM responses","status":"open","priority":1,"issue_type":"bug","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:01.950225176-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:01.950225176-07:00","labels":["llm","pydantic","scribe","validation"]}
{"id":"war_rig-9759.1","title":"Make ScribeResponse.question_id Optional with default","description":"The question_id field in ScribeResponse is currently required but LLMs sometimes omit it or return 'question' instead. Make it Optional with a sensible default (e.g., 'UNKNOWN' or auto-generated ID).","status":"open","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:07.935823072-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:07.935823072-07:00","labels":["pydantic","scribe","validation"],"dependencies":[{"issue_id":"war_rig-9759.1","depends_on_id":"war_rig-9759","type":"parent-child","created_at":"2026-01-20T19:57:26.706023-07:00","created_by":"import"}]}
{"id":"war_rig-9759.2","title":"Make ScribeResponse.action_taken Optional with default","description":"The action_taken field in ScribeResponse is currently required but LLMs sometimes omit it. Make it Optional with a sensible default (e.g., ActionTaken.ACKNOWLEDGED).","status":"open","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:13.039452406-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:13.039452406-07:00","labels":["pydantic","scribe","validation"],"dependencies":[{"issue_id":"war_rig-9759.2","depends_on_id":"war_rig-9759","type":"parent-child","created_at":"2026-01-20T19:57:26.706779-07:00","created_by":"import"}]}
{"id":"war_rig-9759.3","title":"Add field alias to accept 'question' as alternative to 'question_id'","description":"LLMs sometimes return 'question' field instead of 'question_id'. Add a Pydantic field alias or validator to accept both field names for backwards compatibility.","status":"open","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:18.663304504-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:18.663304504-07:00","labels":["pydantic","scribe","validation"],"dependencies":[{"issue_id":"war_rig-9759.3","depends_on_id":"war_rig-9759","type":"parent-child","created_at":"2026-01-20T19:57:26.707422-07:00","created_by":"import"}]}
{"id":"war_rig-9759.4","title":"Add lenient parsing for ScribeResponse in scribe.py _parse_response","description":"The _parse_response method in scribe.py currently uses strict model_validate for ScribeResponse. Add try/except with model_construct fallback similar to _parse_template_lenient pattern.","status":"open","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:24.722874961-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:24.722874961-07:00","labels":["pydantic","scribe","validation"],"dependencies":[{"issue_id":"war_rig-9759.4","depends_on_id":"war_rig-9759","type":"parent-child","created_at":"2026-01-20T19:57:26.708036-07:00","created_by":"import"}]}
{"id":"war_rig-9759.5","title":"Add tests for lenient ScribeResponse validation","description":"Add unit tests to verify ScribeResponse handles malformed LLM responses gracefully: missing question_id, missing action_taken, question field instead of question_id.","status":"open","priority":3,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-20T07:56:30.526979623-07:00","created_by":"andrasfe","updated_at":"2026-01-20T07:56:30.526979623-07:00","labels":["pydantic","scribe","testing","validation"],"dependencies":[{"issue_id":"war_rig-9759.5","depends_on_id":"war_rig-9759","type":"parent-child","created_at":"2026-01-20T19:57:26.708655-07:00","created_by":"import"}]}
{"id":"war_rig-9ce","title":"[DOCUMENTATION] COCRDSLC: COCRDSLC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:34:03.880853-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:59.186481-07:00","closed_at":"2026-01-10T15:36:59.186481-07:00","close_reason":"Closed from aborted run, testing prompt fix","labels":["cycle:1","file:COCRDSLC.cbl","pm-type:documentation","program:COCRDSLC","worker:scribe-3"]}
{"id":"war_rig-9cn","title":"[DOCUMENTATION] CBTRN02C: CBTRN02C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.549052-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.549052-07:00","labels":["cycle:1","file:CBTRN02C.cbl","pm-state:created","pm-type:documentation","program:CBTRN02C"]}
{"id":"war_rig-9i2o","title":"Add skills module initialization and exports","description":"## Context\n\nCreate proper Python module structure for the skills package with appropriate __init__.py exports.\n\n## Requirements\n\n1. Create `war_rig/skills/__init__.py` with exports\n2. Export key classes:\n   - SkillsGenerator\n   - ProgramSkillGenerator\n   - OverviewSkillGenerator\n   - CallGraphSkillGenerator\n   - DatacardSkillGenerator (if implemented)\n3. Export utility functions:\n   - normalize_skill_name\n   - validate_skill_name\n4. Add module docstring explaining purpose\n\n## Acceptance Criteria\n\n- [ ] war_rig/skills/__init__.py created\n- [ ] All generator classes exported\n- [ ] Utility functions exported\n- [ ] Module docstring describes skills conversion purpose\n- [ ] Import works: from war_rig.skills import SkillsGenerator\n- [ ] Follows existing war_rig module patterns\n\n## Technical Notes\n\n- Reference war_rig/agents/__init__.py for pattern\n- Use __all__ list for explicit exports\n- Keep imports clean and organized","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:50.514452775-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:32:22.625287-07:00","closed_at":"2026-01-29T19:32:22.625287-07:00","close_reason":"Closed","labels":["module","setup","skills"],"dependencies":[{"issue_id":"war_rig-9i2o","depends_on_id":"war_rig-3x8k","type":"blocks","created_at":"2026-01-29T10:42:50.516505283-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-9i2o","depends_on_id":"war_rig-yele","type":"blocks","created_at":"2026-01-29T10:42:50.521447204-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-9i2o","depends_on_id":"war_rig-hwll","type":"blocks","created_at":"2026-01-29T10:42:50.526392691-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-9i2o","depends_on_id":"war_rig-z768","type":"blocks","created_at":"2026-01-29T10:42:50.539981137-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-9pms","title":"Add Atlas configuration to config.py and .env.example","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:22.947-07:00","created_by":"andrasfe","updated_at":"2026-01-15T18:59:37.572735-07:00","closed_at":"2026-01-15T18:59:37.572735-07:00","close_reason":"Added Atlas config fields to config.py and .env.example","dependencies":[{"issue_id":"war_rig-9pms","depends_on_id":"war_rig-b2gt","type":"blocks","created_at":"2026-01-15T18:57:39.828449-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-9qk","title":"Design ticket-based parallel workflow architecture","description":"Design the architecture for ticket-based parallel processing:\n- Program Manager opens tickets for all source files at start\n- Multiple Scribes (default 3) pick available tickets in parallel\n- Multiple Challengers (default 2) pick Scribe-completed tickets\n- Imperator reviews holistically when all tickets closed\n- Define ticket states and transitions\n- Define dependency relationships between ticket types\n- Design termination conditions (max iterations or Imperator satisfied)","status":"closed","priority":1,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-10T13:03:43.455315-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:10:47.435247-07:00","closed_at":"2026-01-10T13:10:47.435247-07:00","close_reason":"Architecture design document created at docs/program_manager_architecture.md"}
{"id":"war_rig-9v4","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T18:42:28.279287-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:44:44.460215-07:00","labels":["cycle:1","file:COADM01C.cbl","pm-state:created","pm-type:documentation","program:COADM01C","worker:scribe-2"]}
{"id":"war_rig-9vp","title":"Update CLI for Program Manager mode","description":"Update scripts/run_carddemo.py or create new CLI:\n- Add --pm-mode flag to use Program Manager workflow\n- Show real-time progress of parallel workers\n- Display ticket status summary\n- Allow graceful interruption and resume\n- Save intermediate state for crash recovery","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:04:23.776159-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:30:56.680994-07:00","closed_at":"2026-01-10T13:30:56.680994-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-9vp","depends_on_id":"war_rig-6l9","type":"blocks","created_at":"2026-01-10T13:04:52.81563-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-9vt","title":"[DOCUMENTATION] COCRDUPC: COCRDUPC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.3588-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.246469-07:00","closed_at":"2026-01-18T09:28:01.246469-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COCRDUPC.cbl","pm-type:documentation","program:COCRDUPC"]}
{"id":"war_rig-a1i","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.487803-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.995179-07:00","closed_at":"2026-01-18T09:28:00.995179-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C"]}
{"id":"war_rig-a25","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.346109-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.019872-07:00","closed_at":"2026-01-18T09:28:02.019872-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C"]}
{"id":"war_rig-a7u","title":"[DOCUMENTATION] COACTUPC: COACTUPC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.517311-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.534301-07:00","closed_at":"2026-01-10T15:25:58.534301-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COACTUPC.cbl","pm-type:documentation","program:COACTUPC","worker:scribe-1"]}
{"id":"war_rig-ab60","title":"Add SQL and DB2 enum values to ProgramType","description":"## Context\n\nThe War Rig documentation system uses `ProgramType` and `FileType` enums in `war_rig/models/templates.py` to classify mainframe source files. While DDL is already supported, standalone SQL and DB2 file types should be added to support the new DB2/SQL file discovery.\n\n## Requirements\n\n1. Add `SQL` enum value to `ProgramType` enum (if not already present)\n2. Add `DB2` enum value to `ProgramType` enum (if not already present)\n3. Optionally add `SQL` and `DB2` to `FileType` enum if needed for file classification\n\n## Files to Modify\n\n- `/home/andras/war_rig/war_rig/models/templates.py` (around line 82-98) - Add new enum values to `ProgramType`\n\n## Current State\n\nThe `ProgramType` enum currently includes:\n- BATCH, ONLINE_CICS, SUBROUTINE, UTILITY, BMS, COPYBOOK, JCL, DDL, DBD, PSB, ASSEMBLER, REXX, PLI\n\nThe `FileType` enum currently includes:\n- COBOL, PLI, JCL, COPYBOOK, PROC, BMS, LISTING, ASM, REXX, CLIST, NATURAL, EASYTRIEVE, SORT, DDL, IMS, OTHER\n\n## Acceptance Criteria\n\n- [ ] `ProgramType.SQL` is available for SQL file documentation\n- [ ] `ProgramType.DB2` is available for DB2 file documentation\n- [ ] Enum values follow existing naming convention (uppercase)\n- [ ] Type checking passes (`uv run mypy war_rig/`)\n- [ ] Existing code using these enums continues to work","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-28T12:57:12.767888381-07:00","created_by":"andrasfe","updated_at":"2026-01-28T12:59:17.40905425-07:00","closed_at":"2026-01-28T12:59:17.409058117-07:00"}
{"id":"war_rig-abj8","title":"[DOCUMENTATION] COBIL00C: COBIL00C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T08:12:53.530992-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:12:53.530992-07:00","labels":["cycle:1","file:COBIL00C.cbl","pm-state:created","pm-type:documentation","program:COBIL00C"]}
{"id":"war_rig-acj","title":"[DOCUMENTATION] COUSR02C: COUSR02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:05.123936-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.028948-07:00","closed_at":"2026-01-10T15:33:51.028948-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COUSR02C.cbl","pm-type:documentation","program:COUSR02C","worker:scribe-1"]}
{"id":"war_rig-adci","title":"M1: Foundation - Core Project Infrastructure","description":"Epic for Milestone 1: Establish foundational project structure and core components for Citadel (Universal Dependency Graph Builder). This milestone sets up the project infrastructure, configuration management, data models, file discovery, spec management, and CLI framework. All subsequent milestones depend on this foundation.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-24T11:41:39.923631-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:39.923631-07:00"}
{"id":"war_rig-adci.1","title":"Set up project structure with pyproject.toml","description":"Initialize the Citadel project with proper Python packaging. Create directory structure: src/depgraph/ with subdirectories for discovery/, specs/, parser/, resolver/, graph/, llm/. Set up pyproject.toml with uv for dependency management. Include dependencies: pydantic, pydantic-settings, click, rich, pyyaml. Create initial __init__.py files.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:11.834216-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:11.834216-07:00","dependencies":[{"issue_id":"war_rig-adci.1","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:11.83475-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.2","title":"Implement configuration loading from .env","description":"Create src/depgraph/config.py with pydantic-settings Config class. Load from shared .env in monorepo root. Environment variables: DEPGRAPH_LLM_MODEL, DEPGRAPH_CACHE_DIR, DEPGRAPH_PARALLEL_FILES, DEPGRAPH_LLM_DISAMBIGUATION, DEPGRAPH_MAX_LLM_CALLS. Inherit LLM_PROVIDER and ANTHROPIC_API_KEY from llm-provider.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:13.116694-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:13.116694-07:00","dependencies":[{"issue_id":"war_rig-adci.2","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:13.117208-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.3","title":"Define Pydantic data models for specs","description":"Create src/depgraph/specs/schema.py with all enums (ArtifactCategory, ArtifactType, RelationshipType) and Pydantic models (CommentSyntax, StringSyntax, ContinuationSyntax, ScopeSyntax, ExtractionPattern, NamingConvention, ArtifactSpec, AliasRule). These are the core schema for artifact specifications.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:14.162483-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:14.162483-07:00","dependencies":[{"issue_id":"war_rig-adci.3","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:14.163067-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.4","title":"Define Pydantic data models for graph","description":"Create src/depgraph/graph/model.py with all graph models: SourceLocation, Artifact, Relationship, UnresolvedReference, GraphStatistics, DependencyGraph. Include RawReference and FileParseResult internal models in parser/engine.py.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:14.86064-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:14.86064-07:00","dependencies":[{"issue_id":"war_rig-adci.4","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:14.861142-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.5","title":"Implement file discovery component","description":"Create src/depgraph/discovery/file_walker.py with FileDiscovery class. Implement directory traversal respecting exclude patterns (DEFAULT_EXCLUDES for .git, node_modules, __pycache__, etc.). Match files to specs by extension. Group files by spec_id. Create DiscoveryResult model with files_by_spec, unknown_files, excluded_files.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:15.828443-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:15.828443-07:00","dependencies":[{"issue_id":"war_rig-adci.5","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:15.828913-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.6","title":"Implement spec manager with built-in loading","description":"Create src/depgraph/specs/manager.py with SpecManager class. Implement get_spec(), get_spec_for_extension(), get_spec_for_file(), validate_spec(), cache_spec(), list_available_specs(), get_spec_hash(). Load built-in specs from specs/builtin/ directory. Support YAML spec files.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:16.544148-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:16.544148-07:00","dependencies":[{"issue_id":"war_rig-adci.6","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:16.544653-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.7","title":"Create built-in COBOL and Python specs","description":"Create specs/builtin/cobol.yaml and specs/builtin/python.yaml as initial built-in specs. COBOL spec should handle fixed-format comments (column 7), EXEC SQL/CICS blocks, CALL statements, PERFORM, COPY statements. Python spec should handle imports, class/function definitions, method calls.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:17.32261-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:17.32261-07:00","dependencies":[{"issue_id":"war_rig-adci.7","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:17.323129-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.8","title":"Implement basic CLI skeleton","description":"Create src/depgraph/cli.py using Click framework. Implement command groups: analyze (main analysis), spec (list/show/generate), export, stats. Add options: -o/--output, -f/--format, -p/--parallel, -v/--verbose, --no-llm, --stats. Use rich library for progress bars and tables.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:18.77678-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:18.77678-07:00","dependencies":[{"issue_id":"war_rig-adci.8","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:18.777256-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-adci.9","title":"Set up test infrastructure","description":"Create tests/ directory structure with conftest.py, test fixtures in tests/fixtures/samples/. Set up pytest configuration in pyproject.toml. Create sample COBOL, Python files for testing. Establish expected.json patterns for test validation.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-24T11:42:19.520656-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:42:19.520656-07:00","dependencies":[{"issue_id":"war_rig-adci.9","depends_on_id":"war_rig-adci","type":"parent-child","created_at":"2026-01-24T11:42:19.521161-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-al9","title":"[DOCUMENTATION] COCRDUPC: COCRDUPC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.453729-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.553774-07:00","closed_at":"2026-01-10T15:25:58.553774-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COCRDUPC.cbl","pm-type:documentation","program:COCRDUPC","worker:scribe-1"]}
{"id":"war_rig-amkb","title":"Add document type requirements to Imperator system prompt","description":"Update the Imperator's _build_holistic_system_prompt() to include type-specific documentation requirements.\n\nAdd a new section '## Document Type Validation' explaining:\n\n### JCL Jobs\n- EXEC statements: Each step must document PGM=/PROC= and purpose\n- DD statements: Key DDs must document DSN, DISP, and purpose\n- Job flow: Overall sequence and dependencies must be clear\n\n### COBOL Programs\n- Procedure division: Key paragraphs must be documented\n- Called programs: All CALLs with type (STATIC/DYNAMIC) and purpose\n- Data structures: Copybooks and data flow must be explained\n\n### Copybooks\n- Field descriptions: Business meaning, not just PIC clauses\n- Usage context: Where included (WS/LINKAGE/FILE) and by which programs\n- Key fields: Important fields identified with significance\n\nThis aligns the LLM's review with the programmatic validation criteria, creating consistent expectations.","acceptance_criteria":"- _build_holistic_system_prompt() includes Document Type Validation section\n- JCL, COBOL, and Copybook requirements documented\n- Guidance aligned with criteria in document_criteria.py\n- LLM instructed to flag documents missing type-specific elements","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-24T07:42:23.919863-07:00","created_by":"andrasfe","updated_at":"2026-01-24T07:42:23.919863-07:00","labels":["enhancement","imperator","prompt"]}
{"id":"war_rig-ap5m","title":"Design Super-Scribe Rescue Mode Architecture","description":"Design the architecture for Super-Scribe Rescue Mode feature.\n\n## Overview\nAdd a --rescue-blocked flag to run_carddemo.py that creates a small pool of Opus-powered workers (1-2) to process only BLOCKED tickets and update ticket state on success.\n\n## Design Requirements\n- Define how --rescue-blocked flag integrates with existing CLI\n- Design worker pool management (1-2 Opus workers)\n- Specify BLOCKED ticket detection mechanism\n- Define state update flow on successful rescue\n- Consider error handling and retry logic\n- Document integration points with existing ticket system\n\n## Deliverables\n- Architecture document with diagrams\n- API/interface specifications\n- Integration plan with run_carddemo.py","status":"closed","priority":2,"issue_type":"feature","assignee":"python-architect","created_at":"2026-01-11T21:39:22.543501-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:42:01.188858-07:00","closed_at":"2026-01-11T21:42:01.188858-07:00","close_reason":"Architecture designed"}
{"id":"war_rig-apnu","title":"Integrate DocumentValidator into Imperator holistic review","description":"Integrate the DocumentValidator into the Imperator agent's holistic_review() method.\n\nChanges to war_rig/agents/imperator.py:\n\n1. Add import:\n   from war_rig.validation.document_validator import DocumentValidator, ValidationResult\n\n2. In ImperatorAgent.__init__(), initialize validator:\n   self._document_validator = DocumentValidator()\n\n3. Add new method _validate_documents_by_type():\n   - Takes list[FileDocumentation]\n   - Validates each document using the validator\n   - Returns dict[str, list[ChromeTicket]] mapping file_name to validation tickets\n   - Logs validation failures\n\n4. In holistic_review() method:\n   - Call _validate_documents_by_type() BEFORE the LLM call\n   - After parsing LLM response, merge validation feedback into file_feedback\n   - Extend existing tickets if file already has feedback, otherwise create new entry\n\nThe validation runs before LLM to catch structural issues programmatically, reducing LLM burden and ensuring consistent validation.","acceptance_criteria":"- Imperator imports and initializes DocumentValidator\n- _validate_documents_by_type() method implemented\n- holistic_review() calls validation before LLM\n- Validation tickets merged into HolisticReviewOutput.file_feedback\n- Validation failures logged with file name and criteria count","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T07:42:12.099124-07:00","created_by":"andrasfe","updated_at":"2026-01-24T07:42:12.099124-07:00","labels":["enhancement","imperator","validation"],"dependencies":[{"issue_id":"war_rig-apnu","depends_on_id":"war_rig-2kbj","type":"blocks","created_at":"2026-01-24T07:42:12.100582-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-at4","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T18:42:28.035579-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:45:22.448275-07:00","labels":["cycle:1","file:COTRN02C.cbl","pm-state:created","pm-type:documentation","program:COTRN02C","worker:scribe-2"]}
{"id":"war_rig-awo","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.900061-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.241331-07:00","closed_at":"2026-01-18T09:28:00.241331-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C"]}
{"id":"war_rig-b0l","title":"[DOCUMENTATION] CBTRN03C: CBTRN03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T18:42:28.339829-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:44:18.729905-07:00","closed_at":"2026-01-10T18:44:18.729905-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBTRN03C.cbl","pm-state:created","pm-type:documentation","program:CBTRN03C","worker:scribe-1"]}
{"id":"war_rig-b28n","title":"Implement AnalysisRouter for chunking decisions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:27.878076-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:31:24.565772-07:00","closed_at":"2026-01-15T19:31:24.565772-07:00","close_reason":"AnalysisRouter implemented and tested successfully - routes files based on token count, 20/31 COBOL files correctly identified as needing chunking","dependencies":[{"issue_id":"war_rig-b28n","depends_on_id":"war_rig-9pms","type":"blocks","created_at":"2026-01-15T18:57:40.209864-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-b2gt","title":"Add Atlas dependency to pyproject.toml","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:21.962362-07:00","created_by":"andrasfe","updated_at":"2026-01-15T18:58:52.847546-07:00","closed_at":"2026-01-15T18:58:52.847546-07:00","close_reason":"Added atlas dependency to pyproject.toml"}
{"id":"war_rig-bbo","title":"[DOCUMENTATION] CBSTM03B: CBSTM03B.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:35.040236-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.054151-07:00","closed_at":"2026-01-10T15:25:58.054151-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBSTM03B.CBL","pm-type:documentation","program:CBSTM03B","worker:scribe-1"]}
{"id":"war_rig-bqo","title":"[DOCUMENTATION] CORPT00C: CORPT00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.341224-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.279511-07:00","closed_at":"2026-01-10T15:25:58.279511-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CORPT00C.cbl","pm-type:documentation","program:CORPT00C","worker:scribe-1"]}
{"id":"war_rig-by1n","title":"LLM Provider Abstraction Layer","description":"Refactor War Rig's LLM connectivity to be provider-agnostic.\n\n**Goals:**\n1. Define a clean interface/protocol for LLM providers that doesn't depend on LangChain or OpenAI API\n2. Make OpenRouter just one implementation of this interface\n3. Allow alternative providers to be configured via .env settings\n4. Support providers that may use completely different APIs (not just OpenAI-compatible)\n\n**Current State:**\n- LLM integration is in war_rig/agents/base.py using LangChain's BaseChatModel\n- Supports OpenRouter (via ChatOpenAI) and Anthropic (via ChatAnthropic)\n- Configuration is in war_rig/config.py with APIConfig and ModelConfig classes\n- Provider selection based on api_provider setting in .env\n\n**Target State:**\n- Provider-agnostic LLMProvider protocol in new module (e.g., war_rig/providers/protocol.py)\n- Each provider implements the protocol independently\n- Factory pattern for provider instantiation\n- Clean separation from LangChain internals","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-18T20:49:13.439798-07:00","created_by":"andrasfe","updated_at":"2026-01-18T21:05:19.788562-07:00","closed_at":"2026-01-18T21:05:19.788562-07:00","close_reason":"All subtasks completed","labels":["architecture","refactoring"]}
{"id":"war_rig-by1n.1","title":"Define LLMProvider protocol/interface","description":"Create an abstract interface that any LLM provider must implement.\n\n**Location:** war_rig/providers/protocol.py (new file)\n\n**Interface Methods:**\n- `complete(prompt: str) -\u003e str` - Simple completion\n- `chat(messages: list[Message]) -\u003e str` - Chat completion with message history\n- `chat_async(messages: list[Message]) -\u003e str` - Async chat completion\n- `get_token_count(text: str) -\u003e int` - Token counting (optional, provider-specific)\n\n**Supporting Types:**\n- `Message` dataclass with role (system/user/assistant) and content\n- `LLMResponse` dataclass with content, tokens_used, raw_response\n- `ProviderConfig` base class for provider-specific configuration\n\n**Design Principles:**\n- No LangChain dependencies in the protocol\n- No OpenAI API format assumptions\n- Simple, minimal interface that any provider can implement\n- Type hints with Protocol for duck typing support\n\n**Acceptance Criteria:**\n- [ ] Protocol defined using typing.Protocol\n- [ ] Message and LLMResponse types defined\n- [ ] ProviderConfig base class defined\n- [ ] Documentation strings for all public interfaces\n- [ ] No external dependencies in protocol module","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-18T20:49:26.247591-07:00","created_by":"andrasfe","updated_at":"2026-01-18T20:53:11.923521-07:00","closed_at":"2026-01-18T20:53:11.923521-07:00","close_reason":"Closed","labels":["architecture","protocol","refactoring"],"dependencies":[{"issue_id":"war_rig-by1n.1","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:49:26.248326-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-by1n.2","title":"Create OpenRouterProvider implementation","description":"Refactor current OpenRouter code to implement the new LLMProvider interface.\n\n**Location:** war_rig/providers/openrouter.py (new file)\n\n**Implementation Details:**\n- Implement all methods from LLMProvider protocol\n- Wrap current ChatOpenAI logic or use direct HTTP requests\n- Handle OpenRouter-specific headers (HTTP-Referer, X-Title)\n- Support all current configuration options (base_url, site_url, site_name)\n- Proper error handling and retry logic\n\n**Configuration:**\n- OpenRouterConfig extending ProviderConfig\n- Support for: api_key, base_url, site_url, site_name, model, temperature, max_tokens\n\n**Migration Path:**\n- Ensure backward compatibility with existing .env settings\n- OpenRouter should remain the default provider\n\n**Acceptance Criteria:**\n- [ ] OpenRouterProvider class implementing LLMProvider\n- [ ] OpenRouterConfig class for configuration\n- [ ] All current OpenRouter functionality preserved\n- [ ] Unit tests for provider methods\n- [ ] Works with existing agent code via adapter","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-01-18T20:49:39.122238-07:00","created_by":"andrasfe","updated_at":"2026-01-18T20:55:50.481951-07:00","closed_at":"2026-01-18T20:55:50.481951-07:00","close_reason":"Closed","labels":["implementation","refactoring"],"dependencies":[{"issue_id":"war_rig-by1n.2","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:49:39.122763-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.2","depends_on_id":"war_rig-by1n.1","type":"blocks","created_at":"2026-01-18T20:49:39.123814-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-by1n.3","title":"Create provider factory/registry","description":"Create a factory that reads .env config and instantiates the appropriate provider.\n\n**Location:** war_rig/providers/factory.py (new file)\n\n**Factory Features:**\n- Read LLM_PROVIDER setting from .env (default: 'openrouter')\n- Registry of available provider implementations\n- Lazy instantiation of providers\n- Support for provider aliases (e.g., 'openai' -\u003e OpenRouterProvider with specific config)\n\n**Registry Design:**\n```python\nclass ProviderRegistry:\n    _providers: dict[str, type[LLMProvider]] = {}\n    \n    @classmethod\n    def register(cls, name: str, provider_class: type[LLMProvider]) -\u003e None: ...\n    \n    @classmethod\n    def get(cls, name: str) -\u003e type[LLMProvider]: ...\n    \n    @classmethod\n    def create(cls, name: str, config: ProviderConfig) -\u003e LLMProvider: ...\n```\n\n**Factory Function:**\n```python\ndef get_provider(config: WarRigConfig | None = None) -\u003e LLMProvider:\n    '''Get configured provider instance from environment.'''\n```\n\n**Acceptance Criteria:**\n- [ ] ProviderRegistry class with register/get/create methods\n- [ ] get_provider() factory function\n- [ ] Auto-registration of built-in providers (OpenRouter, Anthropic)\n- [ ] Clear error messages for unknown providers\n- [ ] Unit tests for factory and registry","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-18T20:49:51.062577-07:00","created_by":"andrasfe","updated_at":"2026-01-18T20:57:46.48126-07:00","closed_at":"2026-01-18T20:57:46.48126-07:00","close_reason":"Closed","labels":["implementation","refactoring"],"dependencies":[{"issue_id":"war_rig-by1n.3","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:49:51.063177-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.3","depends_on_id":"war_rig-by1n.1","type":"blocks","created_at":"2026-01-18T20:49:51.064257-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.3","depends_on_id":"war_rig-by1n.2","type":"blocks","created_at":"2026-01-18T20:49:51.064948-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-by1n.4","title":"Update agent base class to use provider interface","description":"Modify the base agent class to use the provider interface instead of direct LLM calls.\n\n**File:** war_rig/agents/base.py\n\n**Changes Required:**\n1. Replace BaseChatModel dependency with LLMProvider\n2. Update _create_llm() to use provider factory\n3. Convert message building to use new Message type\n4. Update ainvoke() to use provider.chat_async()\n5. Remove LangChain-specific imports from base.py\n\n**Backward Compatibility:**\n- Existing agent subclasses should work without changes\n- _build_system_prompt() and _build_user_prompt() interfaces unchanged\n- Output types remain the same\n\n**Migration Steps:**\n1. Add provider property alongside llm property (temporary)\n2. Update ainvoke() to use provider if available\n3. Deprecate direct llm property\n4. Remove LangChain dependencies from base.py\n\n**Acceptance Criteria:**\n- [ ] BaseAgent uses LLMProvider instead of BaseChatModel\n- [ ] All existing agents (Scribe, Challenger, Imperator) work unchanged\n- [ ] No LangChain imports in base.py\n- [ ] Integration tests pass\n- [ ] Clear deprecation warnings for old patterns","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-01-18T20:50:03.345729-07:00","created_by":"andrasfe","updated_at":"2026-01-18T21:00:46.761449-07:00","closed_at":"2026-01-18T21:00:46.761449-07:00","close_reason":"Closed","labels":["breaking-change","refactoring"],"dependencies":[{"issue_id":"war_rig-by1n.4","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:50:03.346543-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.4","depends_on_id":"war_rig-by1n.3","type":"blocks","created_at":"2026-01-18T20:50:03.347683-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-by1n.5","title":"Add provider configuration schema","description":"Define how providers are configured in .env (API keys, endpoints, model names, etc.)\n\n**File:** war_rig/config.py (updates) and war_rig/providers/config.py (new)\n\n**New Configuration Structure:**\n```\n# General provider selection\nLLM_PROVIDER=openrouter  # or: anthropic, openai, ollama, custom\n\n# Provider-specific settings (prefixed by provider name)\nOPENROUTER_API_KEY=sk-or-xxx\nOPENROUTER_BASE_URL=https://openrouter.ai/api/v1\nOPENROUTER_SITE_URL=https://myapp.com\nOPENROUTER_SITE_NAME=MyApp\n\nANTHROPIC_API_KEY=sk-ant-xxx\n\nOLLAMA_BASE_URL=http://localhost:11434\n\n# Per-agent model overrides (unchanged)\nSCRIBE_MODEL=anthropic/claude-sonnet-4-20250514\nCHALLENGER_MODEL=openai/gpt-4o\n```\n\n**Schema Features:**\n- ProviderConfigSchema base class with validation\n- Per-provider config classes inheriting from base\n- Support for environment variable interpolation\n- Optional fields with sensible defaults\n- Validation errors with helpful messages\n\n**Documentation:**\n- Update .env.example with new schema\n- Add comments explaining each setting\n- Document how to add custom providers\n\n**Acceptance Criteria:**\n- [ ] ProviderConfigSchema base class defined\n- [ ] OpenRouterConfigSchema with all options\n- [ ] AnthropicConfigSchema with all options\n- [ ] .env.example updated with new format\n- [ ] Backward compatibility with existing .env files\n- [ ] Validation errors are clear and actionable","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-18T20:50:17.279304-07:00","created_by":"andrasfe","updated_at":"2026-01-18T20:57:35.205526-07:00","closed_at":"2026-01-18T20:57:35.205526-07:00","close_reason":"Closed","labels":["configuration","documentation"],"dependencies":[{"issue_id":"war_rig-by1n.5","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:50:17.279829-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.5","depends_on_id":"war_rig-by1n.1","type":"blocks","created_at":"2026-01-18T20:50:17.280911-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-by1n.6","title":"Write tests for provider abstraction","description":"Unit tests for the interface and OpenRouter implementation.\n\n**Test Files:**\n- tests/test_providers/test_protocol.py\n- tests/test_providers/test_openrouter.py\n- tests/test_providers/test_factory.py\n- tests/test_providers/test_config.py\n\n**Protocol Tests:**\n- Verify protocol is properly defined\n- Test Message and LLMResponse types\n- Ensure protocol is structural (duck typing)\n\n**OpenRouter Tests:**\n- Mock HTTP responses for complete() and chat()\n- Test header handling (HTTP-Referer, X-Title)\n- Test error handling (rate limits, auth errors, timeouts)\n- Test token counting (if implemented)\n\n**Factory Tests:**\n- Test provider registration\n- Test provider creation from config\n- Test unknown provider errors\n- Test auto-discovery of providers\n\n**Integration Tests:**\n- Test full flow: config -\u003e factory -\u003e provider -\u003e response\n- Test with BaseAgent using new provider\n- Verify backward compatibility with existing tests\n\n**Acceptance Criteria:**\n- [ ] 90%+ code coverage for providers module\n- [ ] All error paths tested\n- [ ] Mock-based tests (no real API calls in unit tests)\n- [ ] Integration test with real provider (marked as slow/integration)\n- [ ] Tests pass in CI","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-01-18T20:50:30.038214-07:00","created_by":"andrasfe","updated_at":"2026-01-18T21:04:36.505743-07:00","closed_at":"2026-01-18T21:04:36.505743-07:00","close_reason":"Closed","labels":["testing"],"dependencies":[{"issue_id":"war_rig-by1n.6","depends_on_id":"war_rig-by1n","type":"parent-child","created_at":"2026-01-18T20:50:30.038786-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.6","depends_on_id":"war_rig-by1n.2","type":"blocks","created_at":"2026-01-18T20:50:30.039762-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.6","depends_on_id":"war_rig-by1n.3","type":"blocks","created_at":"2026-01-18T20:50:30.040451-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.6","depends_on_id":"war_rig-by1n.4","type":"blocks","created_at":"2026-01-18T20:50:30.041077-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-by1n.6","depends_on_id":"war_rig-by1n.5","type":"blocks","created_at":"2026-01-18T20:50:30.04169-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-c9h","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:03.721964-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.640915-07:00","closed_at":"2026-01-29T19:32:22.640915-07:00","close_reason":"Closed","labels":["cycle:1","file:COTRN01C.cbl","pm-state:created","pm-type:documentation","program:COTRN01C"]}
{"id":"war_rig-cawq","title":"feature","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:41:23.718419-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:23.718419-07:00"}
{"id":"war_rig-cb4","title":"[DOCUMENTATION] COUSR03C: COUSR03C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:37:16.325213-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:37:45.18864-07:00","labels":["cycle:1","file:COUSR03C.cbl","pm-type:documentation","program:COUSR03C","worker:scribe-1"]}
{"id":"war_rig-ce1","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"in_progress","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:37:15.320773-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:39:30.990849-07:00","labels":["cycle:1","file:COTRN01C.cbl","pm-type:documentation","program:COTRN01C","worker:scribe-1"]}
{"id":"war_rig-cgnf","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:53.278619-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:19:50.195133-07:00","closed_at":"2026-01-11T08:19:50.195133-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COMEN01C.cbl","pm-state:created","pm-type:documentation","program:COMEN01C","worker:scribe-2"]}
{"id":"war_rig-cpa","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:34:04.404432-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:48.941507-07:00","closed_at":"2026-01-10T15:36:48.941507-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBACT01C.cbl","pm-type:documentation","program:CBACT01C","worker:scribe-3"]}
{"id":"war_rig-cr7","title":"[DOCUMENTATION] COUSR02C: COUSR02C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:37:16.113146-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:38:15.148441-07:00","labels":["cycle:1","file:COUSR02C.cbl","pm-type:documentation","program:COUSR02C","worker:scribe-2"]}
{"id":"war_rig-cr7p","title":"Fix: Implement token limiting in Scribe agent for large files","description":"## Problem\n\nThe Scribe agent sends ~35K tokens for large files, exceeding context limits. The `scribe_max_prompt_tokens` config exists but is completely unused.\n\n## Solution Options\n\n### Option A: Simple Truncation (Quick Fix)\n\nAdd token estimation and truncation to `ScribeAgent._build_user_prompt()`:\n\n```python\ndef _build_user_prompt(self, input_data: ScribeInput) -\u003e str:\n    # ... existing code ...\n    \n    # Estimate tokens and truncate source if needed\n    max_tokens = self.config.max_prompt_tokens  # Use existing config!\n    \n    # Rough estimate: 4 chars per token for code\n    source_lines = input_data.source_code.split(\"\\n\")\n    estimated_tokens = len(input_data.source_code) // 4\n    \n    if estimated_tokens \u003e max_tokens * 0.7:  # Leave room for other content\n        # Truncate from middle, keeping start and end\n        max_source_chars = int(max_tokens * 0.7 * 4)\n        # Keep first 40% and last 20%\n        keep_start = int(max_source_chars * 0.4)\n        keep_end = int(max_source_chars * 0.2)\n        truncated = (\n            input_data.source_code[:keep_start] +\n            \"\\n... [TRUNCATED - file too large] ...\\n\" +\n            input_data.source_code[-keep_end:]\n        )\n        source_lines = truncated.split(\"\\n\")\n```\n\n**Pros**: Simple, fast to implement\n**Cons**: Loses context, may produce incomplete documentation\n\n### Option B: Semantic Chunking (Proper Fix)\n\nRe-implement chunking based on the removed Atlas framework:\n\n1. **Detect large files** in ScribeWorkerPool before calling ScribeAgent\n2. **Split by COBOL divisions/sections** using preprocessor hints\n3. **Process chunks separately** with focused prompts\n4. **Merge documentation** from chunks into unified template\n\n**Pros**: Preserves all context, better documentation quality\n**Cons**: Complex, requires restoring chunking infrastructure\n\n### Option C: Hybrid Approach (Recommended)\n\n1. **Immediate**: Implement Option A as a stopgap\n2. **Follow-up**: Implement proper chunking for COBOL files\n\n## Implementation Plan for Option A (Stopgap)\n\n### Changes Required\n\n1. **scribe.py** - Modify `_build_user_prompt()`:\n   - Add token estimation\n   - Truncate source code if over limit\n   - Log warning when truncation occurs\n\n2. **scribe.py** - Add truncation helper method:\n   - `_truncate_source_code(source: str, max_chars: int) -\u003e str`\n   - Keep paragraph headers visible\n   - Add truncation markers\n\n3. **Unit tests** - Add tests for:\n   - Normal files (no truncation)\n   - Large files (truncation occurs)\n   - Token estimation accuracy\n\n### Files to Modify\n\n- `/home/andras/war_rig/war_rig/agents/scribe.py`\n- `/home/andras/war_rig/tests/test_agents/test_scribe.py`\n\n## Acceptance Criteria\n\n- [ ] Large files (\u003e15K estimated tokens) are truncated before sending to LLM\n- [ ] Warning is logged when truncation occurs\n- [ ] Truncation preserves file structure (keeps important markers)\n- [ ] Config field `scribe_max_prompt_tokens` is actually used\n- [ ] Unit tests cover truncation logic\n- [ ] No regression in normal file processing\n\n## Future Work\n\nConsider re-implementing proper chunking after this fix is in place:\n- war_rig-ekkk: Epic for Atlas chunking (still open)\n- May need new approach since Atlas was 'never implemented'","status":"open","priority":0,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-21T09:38:20.137406254-07:00","created_by":"andrasfe","updated_at":"2026-01-21T09:38:20.137406254-07:00","labels":["bug","fix","scribe","token-limit"],"dependencies":[{"issue_id":"war_rig-cr7p","depends_on_id":"war_rig-7gsl","type":"blocks","created_at":"2026-01-21T09:38:20.139821664-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-d3h","title":"[DOCUMENTATION] COCRDSLC: COCRDSLC.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T18:48:18.484484-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:50:37.179715-07:00","labels":["cycle:1","file:COCRDSLC.cbl","pm-state:created","pm-type:documentation","program:COCRDSLC","worker:scribe-2"]}
{"id":"war_rig-d5w","title":"[DOCUMENTATION] COCRDUPC: COCRDUPC.cbl","status":"in_progress","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-11T08:12:52.787223-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:21:20.002643-07:00","labels":["cycle:1","file:COCRDUPC.cbl","pm-state:created","pm-type:documentation","program:COCRDUPC","worker:scribe-1"]}
{"id":"war_rig-daw","title":"Test ticket","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:22:08.29886-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.593247-07:00","closed_at":"2026-01-10T15:25:58.593247-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:test.cbl","pm-state:created","pm-type:documentation"]}
{"id":"war_rig-dgjt","title":"Design Call Graph Generation Architecture","description":"Design the architecture for Call Graph Generation feature.\n\n## Overview\nImperator will generate a call graph from the documentation showing which programs call which other programs. Output as both Mermaid diagram and text summary.\n\n## Design Requirements\n- Define call graph data model and extraction logic\n- Design Mermaid diagram generation format\n- Specify text summary output format\n- Determine output location (SYSTEM_OVERVIEW.md or separate file)\n- Consider incremental update capability\n- Plan for documentation parsing strategy\n\n## Deliverables\n- Architecture document with data flow diagrams\n- Mermaid output format specification\n- Text summary format specification\n- File placement recommendation","status":"closed","priority":2,"issue_type":"feature","assignee":"python-architect","created_at":"2026-01-11T21:39:24.393769-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:42:01.209579-07:00","closed_at":"2026-01-11T21:42:01.209579-07:00","close_reason":"Architecture designed"}
{"id":"war_rig-dne","title":"[DOCUMENTATION] CBSTM03B: CBSTM03B.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:34:04.476459-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:48.921829-07:00","closed_at":"2026-01-10T15:36:48.921829-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBSTM03B.CBL","pm-type:documentation","program:CBSTM03B","worker:scribe-1"]}
{"id":"war_rig-dowu","title":"Investigate existing large file handling logic in Scribe agent","description":"## Problem\n\nThe Scribe agent is sending ~35K tokens to the LLM API, which exceeds context length limits for some models.\n\nThe user mentioned there's 'recursive logic for large files (perhaps just for COBOL)' that should handle this, but it's not working correctly.\n\n## Investigation Goals\n\n1. **Find the existing logic**: Search for any chunking, splitting, or recursive processing logic that was designed to handle large files\n2. **Understand the architecture**: Document how the logic was supposed to work\n3. **Identify the scope**: Determine if it was COBOL-only or all file types\n\n## Key Files to Examine\n\n- `/home/andras/war_rig/war_rig/agents/scribe.py` - The Scribe agent (does NOT currently implement any token limiting)\n- `/home/andras/war_rig/war_rig/config.py` - Has `scribe_max_prompt_tokens` (default 15000) and `max_prompt_tokens` fields but they don't seem to be used\n- `/home/andras/war_rig/war_rig/workers/scribe_pool.py` - Worker pool that processes tickets\n- `/home/andras/war_rig/war_rig/orchestration/ticket_engine.py` - Orchestration logic\n\n## Initial Findings\n\n1. **Config has token limit fields**: `scribe_max_prompt_tokens` (default 15000) exists in config but is NOT used by ScribeAgent\n2. **Chunking code was removed**: Git commit ea26209 (Jan 19, 2026) titled 'Remove dead Atlas chunking code' deleted:\n   - war_rig/chunking/ directory (COBOLSplitter, LineBasedSplitter)\n   - war_rig/adapters/ directory \n   - Atlas-related config fields\n   - Routing logic in ticket_engine.py\n3. **README still references chunking**: README.md shows a chunking/ directory that no longer exists\n4. **beads has open chunking tasks**: The beads system has open issues related to 'Embed Atlas Chunking Framework into War Rig' (war_rig-ekkk)\n\n## Tasks\n\n- [ ] Examine git history for the removed chunking logic\n- [ ] Review what the Atlas integration was supposed to do\n- [ ] Check if there's any alternative token limiting in the current code\n- [ ] Document the gap between config (has token limits) and implementation (doesn't use them)","status":"open","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-21T09:37:40.268255409-07:00","created_by":"andrasfe","updated_at":"2026-01-21T09:37:40.268255409-07:00","labels":["bug","investigation","scribe","token-limit"]}
{"id":"war_rig-dqd6","title":"Add DOCX/Office file exclusions to Citadel file discovery","description":"## Context\n\nCitadel file discovery (`citadel/src/citadel/discovery/file_walker.py`) excludes certain file types from processing via the `DEFAULT_EXCLUDES` list. Microsoft Office files (Word, Excel, PowerPoint) and PDF files should be excluded since they are binary/document files, not source code.\n\n## Requirements\n\nAdd exclusion patterns for the following extensions:\n- `.docx`, `.doc` (Word documents)\n- `.xlsx`, `.xls` (Excel spreadsheets)\n- `.pptx`, `.ppt` (PowerPoint presentations)\n- `.pdf` (PDF documents)\n\n## Files to Modify\n\n- `/home/andras/war_rig/citadel/src/citadel/discovery/file_walker.py` (line 19-53) - Add Office file patterns to `DEFAULT_EXCLUDES` list\n\n## Implementation Notes\n\nAdd patterns following the existing style (using `**/*.ext` glob format):\n```python\n\"**/*.docx\",\n\"**/*.doc\",\n\"**/*.xlsx\",\n\"**/*.xls\",\n\"**/*.pptx\",\n\"**/*.ppt\",\n\"**/*.pdf\",\n```\n\nConsider also adding uppercase variants if needed, though the existing code normalizes extensions to lowercase during comparison.\n\n## Acceptance Criteria\n\n- [ ] `.docx`, `.doc`, `.xlsx`, `.xls`, `.pptx`, `.ppt`, `.pdf` files are excluded from discovery\n- [ ] Exclusion works for files in any directory depth (using `**/` prefix)\n- [ ] Existing exclusion patterns are preserved\n- [ ] Tests pass after changes","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-28T12:57:17.443533131-07:00","created_by":"andrasfe","updated_at":"2026-01-28T12:59:19.260323263-07:00","closed_at":"2026-01-28T12:59:19.260327201-07:00"}
{"id":"war_rig-dr7","title":"[DOCUMENTATION] COUSR01C: COUSR01C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:53.034238-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:21:03.060946-07:00","labels":["cycle:1","file:COUSR01C.cbl","pm-state:created","pm-type:documentation","program:COUSR01C","worker:scribe-3"]}
{"id":"war_rig-dtf2","title":"[DOCUMENTATION] CBCUS01C: CBCUS01C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T08:12:54.003802-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:12:54.003802-07:00","labels":["cycle:1","file:CBCUS01C.cbl","pm-state:created","pm-type:documentation","program:CBCUS01C"]}
{"id":"war_rig-dv5","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.419021-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.419021-07:00","labels":["cycle:1","file:COTRN02C.cbl","pm-state:created","pm-type:documentation","program:COTRN02C"]}
{"id":"war_rig-e2wt","title":"Create DOC_CHUNK work items from Atlas splitter results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T19:38:48.527648-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:41:13.779621-07:00","closed_at":"2026-01-15T19:41:13.779621-07:00","close_reason":"Implemented chunked processing workflow in ticket_engine.py"}
{"id":"war_rig-eja","title":"[DOCUMENTATION] CBEXPORT: CBEXPORT.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:37:15.823289-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:38:40.346825-07:00","labels":["cycle:1","file:CBEXPORT.cbl","pm-type:documentation","program:CBEXPORT","worker:scribe-2"]}
{"id":"war_rig-ekkk","title":"[EPIC] Embed Atlas Chunking Framework into War Rig","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-18T08:03:07.226411-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:07.226411-07:00"}
{"id":"war_rig-es5","title":"[DOCUMENTATION] COCRDUPC: COCRDUPC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:03.237185-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.543137-07:00","closed_at":"2026-01-10T15:33:51.543137-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COCRDUPC.cbl","pm-type:documentation","program:COCRDUPC","worker:scribe-3"]}
{"id":"war_rig-ev3","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:37:15.679273-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:39:02.606104-07:00","labels":["cycle:1","file:COADM01C.cbl","pm-type:documentation","program:COADM01C","worker:scribe-3"]}
{"id":"war_rig-f84","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:34:03.424263-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.636538-07:00","closed_at":"2026-01-29T19:32:22.636538-07:00","close_reason":"Closed","labels":["cycle:1","file:CBTRN01C.cbl","pm-state:created","pm-type:documentation","program:CBTRN01C"]}
{"id":"war_rig-f84g","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:53.096321-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:20:43.777422-07:00","closed_at":"2026-01-11T08:20:43.777422-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COSGN00C.cbl","pm-state:created","pm-type:documentation","program:COSGN00C","worker:scribe-2"]}
{"id":"war_rig-f8cu","title":"Implement DOC_MERGE aggregation for chunk results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T19:38:50.372631-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:41:13.823921-07:00","closed_at":"2026-01-15T19:41:13.823921-07:00","close_reason":"Implemented chunked processing workflow in ticket_engine.py","dependencies":[{"issue_id":"war_rig-f8cu","depends_on_id":"war_rig-zpmu","type":"blocks","created_at":"2026-01-15T19:38:57.807383-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-fhic","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:54.309676-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:14:39.554126-07:00","closed_at":"2026-01-11T08:14:39.554126-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBACT01C.cbl","pm-state:created","pm-type:documentation","program:CBACT01C","worker:scribe-3"]}
{"id":"war_rig-fi8","title":"[DOCUMENTATION] COBIL00C: COBIL00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.215332-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.318895-07:00","closed_at":"2026-01-10T15:25:58.318895-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COBIL00C.cbl","pm-type:documentation","program:COBIL00C","worker:scribe-1"]}
{"id":"war_rig-frz","title":"[DOCUMENTATION] CBTRN03C: CBTRN03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:34:04.187579-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:49.001163-07:00","closed_at":"2026-01-10T15:36:49.001163-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBTRN03C.cbl","pm-type:documentation","program:CBTRN03C","worker:scribe-2"]}
{"id":"war_rig-fv7","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:14.813949-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.916429-07:00","closed_at":"2026-01-18T09:28:02.916429-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C"]}
{"id":"war_rig-g06y","title":"[DOCUMENTATION] COUSR02C: COUSR02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:54.43212-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:14:21.997347-07:00","closed_at":"2026-01-11T08:14:21.997347-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COUSR02C.cbl","pm-state:created","pm-type:documentation","program:COUSR02C","worker:scribe-2"]}
{"id":"war_rig-gboh","title":"feature","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:41:25.318727-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:25.318727-07:00"}
{"id":"war_rig-gou","title":"[DOCUMENTATION] CBACT01C: CBACT01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:04.979283-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.068902-07:00","closed_at":"2026-01-10T15:33:51.068902-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBACT01C.cbl","pm-type:documentation","program:CBACT01C","worker:scribe-2"]}
{"id":"war_rig-gp1v","title":"Add CallSemantics model to templates","description":"Add CallSemantics model (caller, callee, inputs, outputs, purpose) and call_semantics field to DocumentationTemplate. Keep backward compatible - empty list means current behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:04:12.44804-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:06:43.928869-07:00","closed_at":"2026-01-29T19:06:43.928869-07:00","close_reason":"Closed"}
{"id":"war_rig-h0l","title":"[DOCUMENTATION] COUSR01C: COUSR01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:03.53263-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.463415-07:00","closed_at":"2026-01-10T15:33:51.463415-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COUSR01C.cbl","pm-type:documentation","program:COUSR01C","worker:scribe-1"]}
{"id":"war_rig-h2u","title":"[DOCUMENTATION] COUSR02C: COUSR02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:35.104941-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.034818-07:00","closed_at":"2026-01-10T15:25:58.034818-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COUSR02C.cbl","pm-type:documentation","program:COUSR02C","worker:scribe-1"]}
{"id":"war_rig-h4nr","title":"Implement Super-Scribe Rescue Mode","description":"Implement Super-Scribe Rescue Mode feature based on approved architecture.\n\n## Implementation Scope\n- Add --rescue-blocked flag to run_carddemo.py\n- Create small pool of Opus-powered workers (1-2)\n- Implement BLOCKED ticket detection and filtering\n- Implement ticket state update on successful rescue\n- Add error handling and logging\n\n## Acceptance Criteria\n- [ ] --rescue-blocked flag added to run_carddemo.py CLI\n- [ ] Worker pool creates 1-2 Opus workers\n- [ ] Only BLOCKED tickets are processed\n- [ ] Ticket state updates to appropriate status on success\n- [ ] Proper error handling implemented\n- [ ] Unit tests for new functionality","status":"closed","priority":2,"issue_type":"feature","assignee":"python-senior-dev","created_at":"2026-01-11T21:39:37.207673-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:44:49.95041-07:00","closed_at":"2026-01-11T21:44:49.95041-07:00","close_reason":"Implementation complete","dependencies":[{"issue_id":"war_rig-h4nr","depends_on_id":"war_rig-ap5m","type":"blocks","created_at":"2026-01-11T21:39:54.989983-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-h5w","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.692516-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.623801-07:00","closed_at":"2026-01-18T09:28:00.623801-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C"]}
{"id":"war_rig-ha6","title":"[DOCUMENTATION] CBSTM03A: CBSTM03A.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:34:04.621584-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:48.882927-07:00","closed_at":"2026-01-10T15:36:48.882927-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:CBSTM03A.CBL","pm-type:documentation","program:CBSTM03A","worker:scribe-3"]}
{"id":"war_rig-hf9","title":"[DOCUMENTATION] CBTRN03C: CBTRN03C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:37:15.750313-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:38:57.918256-07:00","labels":["cycle:1","file:CBTRN03C.cbl","pm-type:documentation","program:CBTRN03C","worker:scribe-1"]}
{"id":"war_rig-hg66","title":"Add .db2 extension support to DB2/SQL spec in Citadel","description":"## Context\n\nCitadel already has a DB2 DDL spec (`citadel/specs/builtin/db2_ddl.yaml`) that supports `.sql`, `.ddl`, `.SQL`, and `.DDL` extensions. However, DB2 source files may also use the `.db2` and `.DB2` extensions which are not currently recognized.\n\n## Requirements\n\n1. Add `.db2` and `.DB2` to the `file_extensions` list in `citadel/specs/builtin/db2_ddl.yaml`\n2. Add `.db2` extension mapping to `EXTENSION_TO_SPEC` dict in `citadel/src/citadel/discovery/file_walker.py`\n\n## Files to Modify\n\n- `/home/andras/war_rig/citadel/specs/builtin/db2_ddl.yaml` (line 9-13) - Add `.db2` and `.DB2` to file_extensions list\n- `/home/andras/war_rig/citadel/src/citadel/discovery/file_walker.py` (line 70-72) - Add `.db2: \"db2_ddl\"` to EXTENSION_TO_SPEC dict\n\n## Acceptance Criteria\n\n- [ ] `.db2` files are identified as `db2_ddl` spec type during file discovery\n- [ ] `.DB2` files are identified as `db2_ddl` spec type during file discovery\n- [ ] Existing `.sql` and `.ddl` file handling remains unchanged\n- [ ] Tests pass after changes","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-28T12:57:07.667504008-07:00","created_by":"andrasfe","updated_at":"2026-01-28T12:59:15.411622335-07:00","closed_at":"2026-01-28T12:59:15.411625651-07:00"}
{"id":"war_rig-hgbo","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:54.066637-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:15:59.67056-07:00","closed_at":"2026-01-11T08:15:59.67056-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COADM01C.cbl","pm-state:created","pm-type:documentation","program:COADM01C","worker:scribe-2"]}
{"id":"war_rig-hjvp","title":"Port COBOL semantic splitter from Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.499607-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.282907-07:00","closed_at":"2026-01-18T08:17:54.282907-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-hjvp","depends_on_id":"war_rig-im1x","type":"blocks","created_at":"2026-01-18T08:03:36.395371-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-hwll","title":"Implement program skill generation from .doc.json files","description":"## Context\n\nEach War Rig .doc.json file contains comprehensive program documentation that needs to be converted into Agent Skills format with progressive disclosure: SKILL.md (instructions) and references/REFERENCE.md (detailed data).\n\n## Requirements\n\n1. Create `war_rig/skills/program_skill.py` with `ProgramSkillGenerator` class\n2. Parse .doc.json files and extract:\n   - Summary/purpose for description field (max 1024 chars)\n   - Program type, business context for SKILL.md body\n   - Business rules, data flow, paragraphs for REFERENCE.md\n3. Generate SKILL.md with YAML frontmatter:\n   ```yaml\n   ---\n   name: cbact01c\n   description: \u003cextracted summary, max 1024 chars\u003e\n   metadata:\n     author: war-rig\n     version: \"1.0\"\n     program_type: BATCH|ONLINE|COPYBOOK\n     file_type: COBOL|JCL|COPYBOOK\n   ---\n   \n   [Markdown body with key information]\n   ```\n4. Generate references/REFERENCE.md with detailed JSON data\n5. Keep SKILL.md body under 500 lines (~5000 tokens)\n\n## Acceptance Criteria\n\n- [ ] Parses .doc.json structure (header, purpose, inputs, outputs, etc.)\n- [ ] Extracts summary for description (truncates to 1024 chars if needed)\n- [ ] Generates valid YAML frontmatter\n- [ ] SKILL.md body includes: purpose, key business rules, inputs/outputs summary\n- [ ] REFERENCE.md contains full detailed data (paragraphs, data_flow, etc.)\n- [ ] Handles missing fields gracefully\n- [ ] Uses normalized skill name for directory and name field\n\n## Technical Notes\n\n- Input: .doc.json files from output/final/programs/ (see CBPAUP0C.cbl.doc.json for structure)\n- Key fields: header.program_id, purpose.summary, purpose.program_type, business_rules, data_flow, paragraphs\n- SKILL.md should be concise; detailed paragraph info goes to REFERENCE.md","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:32.468235291-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:52:15.069560856-07:00","closed_at":"2026-01-29T10:52:15.069564243-07:00","labels":["converter","programs","skills"],"dependencies":[{"issue_id":"war_rig-hwll","depends_on_id":"war_rig-3x8k","type":"blocks","created_at":"2026-01-29T10:41:32.473198302-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-hwll","depends_on_id":"war_rig-yele","type":"blocks","created_at":"2026-01-29T10:41:32.478102892-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-i70v","title":"Design architecture for embedding Atlas chunking into War Rig","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-18T08:03:07.320856-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.274049-07:00","closed_at":"2026-01-18T08:17:54.274049-07:00","close_reason":"Implemented in main branch"}
{"id":"war_rig-i743","title":"Integrate Atlas into TicketOrchestrator","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:29.131161-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:09:08.2043-07:00","closed_at":"2026-01-15T19:09:08.2043-07:00","close_reason":"Implemented in commit 39b9ff6","dependencies":[{"issue_id":"war_rig-i743","depends_on_id":"war_rig-6flu","type":"blocks","created_at":"2026-01-15T18:57:40.305425-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-i743","depends_on_id":"war_rig-n52r","type":"blocks","created_at":"2026-01-15T18:57:40.401775-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-i743","depends_on_id":"war_rig-kouk","type":"blocks","created_at":"2026-01-15T18:57:40.494678-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-i743","depends_on_id":"war_rig-b28n","type":"blocks","created_at":"2026-01-15T18:57:40.589765-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-i98","title":"[DOCUMENTATION] COBSWAIT: COBSWAIT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:03.96939-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.346343-07:00","closed_at":"2026-01-10T15:33:51.346343-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COBSWAIT.cbl","pm-type:documentation","program:COBSWAIT","worker:scribe-2"]}
{"id":"war_rig-ibq","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.854697-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:27.854697-07:00","labels":["cycle:1","file:CBACT03C.cbl","pm-state:created","pm-type:documentation","program:CBACT03C"]}
{"id":"war_rig-im1x","title":"Port splitter base classes and interfaces from Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.410755-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.281807-07:00","closed_at":"2026-01-18T08:17:54.281807-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-im1x","depends_on_id":"war_rig-i70v","type":"blocks","created_at":"2026-01-18T08:03:36.293346-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-j2gw","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:53.804717-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:16:50.309418-07:00","labels":["cycle:1","file:COTRN02C.cbl","pm-state:created","pm-type:documentation","program:COTRN02C","worker:scribe-2"]}
{"id":"war_rig-j4n5","title":"feature","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T11:41:21.146895-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:46:13.974133-07:00","closed_at":"2026-01-24T11:46:13.974133-07:00","close_reason":"duplicate - created with incorrect syntax"}
{"id":"war_rig-j9u","title":"[DOCUMENTATION] COACTVWC: COACTVWC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:03.679909-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.424341-07:00","closed_at":"2026-01-10T15:33:51.424341-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COACTVWC.cbl","pm-type:documentation","program:COACTVWC","worker:scribe-1"]}
{"id":"war_rig-jbd","title":"[DOCUMENTATION] COCRDLIC: COCRDLIC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.293826-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.376603-07:00","closed_at":"2026-01-18T09:28:01.376603-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COCRDLIC.cbl","pm-type:documentation","program:COCRDLIC"]}
{"id":"war_rig-jcnj","title":"Architecture: Design recursive directory processing with path preservation","description":"## Summary\nDesign the approach for recursive directory processing where files are represented by full relative paths (not just filenames) and output .json files mirror the input directory structure.\n\n## Requirements\n1. **Path Preservation**\n   - Files must be identified by their full relative path from the input directory root\n   - Example: `cbl/batch/CBACT04C.cbl` instead of just `CBACT04C.cbl`\n   - This enables handling files with the same name in different directories\n\n2. **Output Structure Mirroring**\n   - Output .json files should mirror the input directory structure\n   - Example: Input `cbl/batch/CBACT04C.cbl` -\u003e Output `output/cbl/batch/CBACT04C.doc.json`\n   - Parent directories must be created automatically\n\n3. **Affected Components**\n   - `SourceReader.discover_files()` in `/Users/andraslferenczi/war_rig/war_rig/io/reader.py`\n   - `ProgramManagerAgent` in `/Users/andraslferenczi/war_rig/war_rig/agents/program_manager.py`\n   - `ScribeWorkerPool` in `/Users/andraslferenczi/war_rig/war_rig/workers/scribe_pool.py`\n\n4. **Validation Target**\n   - Design must work correctly with `aws-mainframe-modernization-carddemo/samples` which has nested directories\n\n## Deliverables\n- Architecture decision document with approach\n- Identify all code locations that need changes\n- Define the data model changes (e.g., SourceFile, ProgramManagerTicket metadata)\n- Risk assessment and backward compatibility notes","status":"closed","priority":1,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-21T20:01:03.292592-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.480201-07:00","closed_at":"2026-01-21T20:11:36.480201-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["architecture","recursive-dirs"]}
{"id":"war_rig-jnxi","title":"Design formatting error recovery architecture","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.185067-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.280655-07:00","closed_at":"2026-01-18T08:17:54.280655-07:00","close_reason":"Implemented in main branch"}
{"id":"war_rig-jpq4","title":"Update ScribeWorkerPool to handle full paths correctly","description":"## Summary\nUpdate ScribeWorkerPool and ScribeWorker to handle relative paths for both reading source files and writing output documentation.\n\n## Current Behavior\n- `_get_doc_output_path()` uses only filename: `output_dir / f\"{base_name}.doc.json\"`\n- Source file loading assumes flat structure\n\n## Required Changes\nLocation: `/Users/andraslferenczi/war_rig/war_rig/workers/scribe_pool.py`\n\n1. **Update `_get_doc_output_path()` method**\n   ```python\n   def _get_doc_output_path(self, file_name: str, relative_path: str | None = None) -\u003e Path:\n       if relative_path:\n           # Mirror the directory structure\n           relative_dir = Path(relative_path).parent\n           base_name = Path(relative_path).stem\n           output_path = self.output_directory / relative_dir / f\"{base_name}.doc.json\"\n           # Ensure parent directories exist\n           output_path.parent.mkdir(parents=True, exist_ok=True)\n           return output_path\n       # Fallback for backward compatibility\n       base_name = Path(file_name).stem\n       return self.output_directory / f\"{base_name}.doc.json\"\n   ```\n\n2. **Update `_save_template()` method**\n   - Accept relative_path parameter\n   - Create parent directories as needed\n\n3. **Update `_load_previous_template()` method**\n   - Accept relative_path parameter\n   - Look in mirrored directory structure\n\n4. **Update ticket processing methods**\n   - `_process_documentation_ticket()`\n   - `_process_clarification_ticket()`\n   - `_process_chrome_ticket()`\n   - Extract relative_path from ticket metadata\n   - Pass to save/load methods\n\n## Acceptance Criteria\n- [ ] Output files mirror input directory structure\n- [ ] Parent directories created automatically\n- [ ] Previous template loading respects mirrored paths\n- [ ] Backward compatible with flat structure (when relative_path not provided)","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-21T20:01:36.509159-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.485222-07:00","closed_at":"2026-01-21T20:11:36.485222-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["development","recursive-dirs"],"dependencies":[{"issue_id":"war_rig-jpq4","depends_on_id":"war_rig-jcnj","type":"blocks","created_at":"2026-01-21T20:01:36.510489-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-jpq4","depends_on_id":"war_rig-ptkc","type":"blocks","created_at":"2026-01-21T20:01:36.511888-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-k323","title":"Fix Imperator to open tickets against caller, not callee","description":"When call relationship is XYZ --\u003e SOME_CALL, ticket should be for XYZ.cbl (the caller), not SOME_CALL.cbl (the callee). The caller is the file that needs documentation about its calls, not the callee. File: war_rig/agents/imperator.py or similar","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-22T20:04:17.124656-07:00","created_by":"andrasfe","updated_at":"2026-01-22T20:07:14.859089-07:00","closed_at":"2026-01-22T20:07:14.859089-07:00","close_reason":"Closed"}
{"id":"war_rig-kbcb","title":"Test and Verify CLI Status Utility for War Rig","description":"Write comprehensive tests and verify the CLI status utility implementation.\n\n## Test Coverage Required\n\n### Unit Tests\n- [ ] JSON parser correctly handles .war_rig_tickets.json format\n- [ ] Ticket counting by type (documentation, validation, chrome, clarification)\n- [ ] Ticket counting by state (created, in_progress, completed, blocked)\n- [ ] Blocked ticket detection logic\n- [ ] Command-line argument parsing\n\n### Integration Tests\n- [ ] Full tool execution with sample ticket files\n- [ ] File watching and refresh behavior\n- [ ] Error handling for missing files\n- [ ] Error handling for malformed JSON\n- [ ] Graceful exit on Ctrl+C\n\n### Manual Verification\n- [ ] In-place update behavior (no scrolling)\n- [ ] Display formatting and readability\n- [ ] Performance with large ticket files (1000+ tickets)\n- [ ] Cross-platform behavior (macOS, Linux)\n\n## Deliverables\n- pytest test suite with \u003e80% coverage\n- Test fixtures with sample ticket files\n- Verification report documenting manual testing results\n- Performance benchmark results","acceptance_criteria":"All unit tests pass, integration tests pass, manual verification complete with documented results","status":"closed","priority":1,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-11T20:24:55.625811-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T20:30:43.112418-07:00","closed_at":"2026-01-11T20:30:43.112418-07:00","close_reason":"Verification passed - all functions work correctly","labels":["testing","verification","war-rig-status"],"dependencies":[{"issue_id":"war_rig-kbcb","depends_on_id":"war_rig-8esj","type":"blocks","created_at":"2026-01-11T20:24:55.626884-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-kdl","title":"[DOCUMENTATION] COCRDLIC: COCRDLIC.cbl","status":"in_progress","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:52.723483-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:21:22.280874-07:00","labels":["cycle:1","file:COCRDLIC.cbl","pm-state:created","pm-type:documentation","program:COCRDLIC","worker:scribe-2"]}
{"id":"war_rig-kouk","title":"Implement ScribeWorkerAdapter for Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:26.486002-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:09:08.206533-07:00","closed_at":"2026-01-15T19:09:08.206533-07:00","close_reason":"Implemented in commit 39b9ff6","dependencies":[{"issue_id":"war_rig-kouk","depends_on_id":"war_rig-9pms","type":"blocks","created_at":"2026-01-15T18:57:40.116252-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-lae","title":"[DOCUMENTATION] CBACT02C: CBACT02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.025951-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.378086-07:00","closed_at":"2026-01-10T15:25:58.378086-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBACT02C.cbl","pm-type:documentation","program:CBACT02C","worker:scribe-1"]}
{"id":"war_rig-lfen","title":"Create document type validation criteria module","description":"Define ValidationCriterion dataclass and type-specific criteria for JCL, COBOL, Copybook, PLI, BMS, and PROC file types.\n\nCreate war_rig/validation/document_criteria.py with:\n- ValidationCriterion dataclass (criterion_id, section, description, guidance, priority)\n- DocumentTypeCriteria dataclass (file_type, criteria list)\n- JCL_CRITERIA with: JCL-EXEC, JCL-DD, JCL-FLOW, JCL-DEPS\n- COBOL_CRITERIA with: COBOL-PROC, COBOL-CALLS, COBOL-DATA, COBOL-COPY\n- COPYBOOK_CRITERIA with: COPY-FIELDS, COPY-CONTEXT, COPY-KEYS\n- PLI_CRITERIA, BMS_CRITERIA, PROC_CRITERIA\n- CRITERIA_REGISTRY mapping FileType to DocumentTypeCriteria\n- get_criteria_for_type() helper function","acceptance_criteria":"- war_rig/validation/document_criteria.py exists\n- ValidationCriterion and DocumentTypeCriteria dataclasses defined\n- Criteria defined for JCL, COBOL, COPYBOOK, PLI, BMS, PROC\n- CRITERIA_REGISTRY maps FileType enum to criteria\n- get_criteria_for_type(FileType) returns appropriate criteria","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T07:41:48.764236-07:00","created_by":"andrasfe","updated_at":"2026-01-24T07:41:48.764236-07:00","labels":["enhancement","imperator","validation"]}
{"id":"war_rig-lqz","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:03.82626-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.385204-07:00","closed_at":"2026-01-10T15:33:51.385204-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C","worker:scribe-3"]}
{"id":"war_rig-lyx","title":"[DOCUMENTATION] COACTVWC: COACTVWC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.836806-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.436745-07:00","closed_at":"2026-01-10T15:25:58.436745-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COACTVWC.cbl","pm-type:documentation","program:COACTVWC","worker:scribe-1"]}
{"id":"war_rig-m6t","title":"[DOCUMENTATION] CBTRN02C: CBTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:34:03.957376-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:59.166723-07:00","closed_at":"2026-01-10T15:36:59.166723-07:00","close_reason":"Closed from aborted run, testing prompt fix","labels":["cycle:1","file:CBTRN02C.cbl","pm-type:documentation","program:CBTRN02C","worker:scribe-1"]}
{"id":"war_rig-mbfn","title":"Add cycle limit configuration options (challenger=2, imperator=1)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.682731-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.278256-07:00","closed_at":"2026-01-18T08:17:54.278256-07:00","close_reason":"Implemented in main branch"}
{"id":"war_rig-med","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.167014-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:02.269117-07:00","closed_at":"2026-01-18T09:28:02.269117-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C"]}
{"id":"war_rig-mfiz","title":"Paragraph descriptions are too short - need 5-10 sentences minimum","description":"Paragraph/procedure descriptions in documentation are very short and vague (one-liners). Each paragraph should have a minimum of 5-10 sentences providing detailed explanation of what the paragraph does, its inputs, outputs, and business logic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T15:55:44.325865-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:10:52.001547-07:00","closed_at":"2026-01-25T16:10:52.001547-07:00","close_reason":"Implemented - LST files as prose, detailed paragraph descriptions, and call graph consistency"}
{"id":"war_rig-mio1","title":"[DOCUMENTATION] COTRN00C: COTRN00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:53.218195-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:20:06.679052-07:00","closed_at":"2026-01-11T08:20:06.679052-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COTRN00C.cbl","pm-state:created","pm-type:documentation","program:COTRN00C","worker:scribe-3"]}
{"id":"war_rig-mlht","title":"Write unit tests for skill name normalization","description":"## Context\n\nThe naming utilities are critical for ensuring valid skill names. Comprehensive tests ensure edge cases are handled correctly.\n\n## Requirements\n\n1. Create `tests/skills/test_naming.py`\n2. Test normalize_skill_name with various inputs:\n   - Standard program names (CBACT01C)\n   - Names with underscores (MY_PROGRAM)\n   - Names with special characters\n   - Names with multiple consecutive hyphens\n   - Names with leading/trailing hyphens\n   - Very long names (\u003e64 chars)\n   - Empty strings and None\n   - Already-valid names\n3. Test validate_skill_name:\n   - Valid names return True\n   - Invalid names return False\n   - Edge cases (empty, too long, invalid chars)\n\n## Acceptance Criteria\n\n- [ ] Tests for normalize_skill_name cover all edge cases\n- [ ] Tests for validate_skill_name cover all validation rules\n- [ ] Tests use pytest parameterize for multiple inputs\n- [ ] All tests pass: uv run pytest tests/skills/test_naming.py\n- [ ] Tests follow existing test patterns in tests/\n\n## Technical Notes\n\n- Use pytest.mark.parametrize for input variations\n- Reference tests/ for existing patterns\n- Test both functions independently","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:30.851867346-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:32:22.629546-07:00","closed_at":"2026-01-29T19:32:22.629546-07:00","close_reason":"Closed","labels":["naming","skills","testing"],"dependencies":[{"issue_id":"war_rig-mlht","depends_on_id":"war_rig-yele","type":"blocks","created_at":"2026-01-29T10:42:30.853872946-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-moc","title":"[DOCUMENTATION] COACTUPC: COACTUPC.cbl","status":"in_progress","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-11T08:12:52.847844-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:21:03.270585-07:00","labels":["cycle:1","file:COACTUPC.cbl","pm-state:created","pm-type:documentation","program:COACTUPC","worker:scribe-3"]}
{"id":"war_rig-mr90","title":"Add metadata display (file_type, size_bytes, file_path) to status","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:02:18.022238-07:00","created_by":"andrasfe","updated_at":"2026-01-18T09:06:02.890213-07:00","closed_at":"2026-01-18T09:06:02.890213-07:00","close_reason":"Implemented comprehensive ticket display with metadata, file types, sizes, and detailed ticket list","dependencies":[{"issue_id":"war_rig-mr90","depends_on_id":"war_rig-3ffb","type":"blocks","created_at":"2026-01-18T09:02:26.703024-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-n52r","title":"Implement FileArtifactAdapter for Atlas","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T18:57:25.238652-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:09:08.207498-07:00","closed_at":"2026-01-15T19:09:08.207498-07:00","close_reason":"Implemented in commit 39b9ff6","dependencies":[{"issue_id":"war_rig-n52r","depends_on_id":"war_rig-9pms","type":"blocks","created_at":"2026-01-15T18:57:40.018324-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-nhwq","title":"[DOCUMENTATION] COCRDSLC: COCRDSLC.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T08:12:53.873494-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:12:53.873494-07:00","labels":["cycle:1","file:COCRDSLC.cbl","pm-state:created","pm-type:documentation","program:COCRDSLC"]}
{"id":"war_rig-njaj","title":"Add program_id and cycle_number columns to ticket tables","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:02:18.680501-07:00","created_by":"andrasfe","updated_at":"2026-01-18T09:06:02.913859-07:00","closed_at":"2026-01-18T09:06:02.913859-07:00","close_reason":"Implemented comprehensive ticket display with metadata, file types, sizes, and detailed ticket list","dependencies":[{"issue_id":"war_rig-njaj","depends_on_id":"war_rig-3ffb","type":"blocks","created_at":"2026-01-18T09:02:26.805642-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-ntd","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.355229-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.355229-07:00","labels":["cycle:1","file:COTRN01C.cbl","pm-state:created","pm-type:documentation","program:COTRN01C"]}
{"id":"war_rig-nv9v","title":"Port work item models (DocChunkPayload, ChunkLocator) from Atlas","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.678878-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:07.678878-07:00","dependencies":[{"issue_id":"war_rig-nv9v","depends_on_id":"war_rig-i70v","type":"blocks","created_at":"2026-01-18T08:03:36.586075-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-nwvv","title":"Add tests for Challenger structural pre-check","description":"## Context\n\nThe existing test file tests/test_workers/test_challenger_pool.py covers ChallengerWorker and ChallengerWorkerPool. New tests must cover the structural pre-check feature end-to-end: Citadel context loading, comparison logic, and integration into the validation pipeline. Follow the existing test patterns (pytest fixtures, MagicMock/AsyncMock, patching).\n\n## Requirements\n\n1. Add tests in tests/test_workers/test_challenger_pool.py (or create a new file tests/test_workers/test_structural_precheck.py if the logic was extracted to a separate module).\n\n2. Test cases for _get_citadel_context():\n   - Test successful context loading (mock Citadel SDK analyze_file/get_functions/get_includes)\n   - Test graceful None return when Citadel unavailable (self._citadel is None)\n   - Test graceful None return on Citadel exception\n\n3. Test cases for _run_structural_precheck():\n   a. **Missing paragraphs**: Create a citadel_context with 5 paragraphs and a template with 3 paragraphs. Assert 2 BLOCKING ChallengerQuestion objects are returned with question_type=COMPLETENESS.\n   b. **No missing paragraphs**: citadel_context and template have the same paragraphs. Assert empty list returned.\n   c. **Dead code exclusion**: citadel_context has 5 paragraphs, 1 is dead code. Template has 3 paragraphs. Assert only 1 issue (not 2) -- dead code paragraph is excluded.\n   d. **PERFORM THRU exclusion**: Verify paragraphs in the THRU targets set are excluded from missing paragraph detection.\n   e. **Missing calls**: Citadel says paragraph X performs Y and Z, template paragraph X only lists Y. Assert 1 IMPORTANT issue about missing call to Z.\n   f. **Missing copybook**: Citadel includes [\"CPYBOOK1\", \"CPYBOOK2\"], template.copybooks_used has only CPYBOOK1. Assert 1 IMPORTANT issue.\n   g. **Empty sections**: Template has empty inputs list and None purpose.summary. Assert BLOCKING issue for purpose, IMPORTANT for inputs.\n   h. **Case insensitivity**: Citadel has \"MAIN-PROCESS\", template has \"main-process\". Assert no false positive.\n\n4. Test cases for integration into _validate_documentation():\n   a. **Structural issues prepended to LLM issues**: Mock both pre-check (returns 1 issue) and LLM (returns 1 issue). Assert final blocking_questions has 2 items, structural one first.\n   b. **LLM skipped on heavy structural blocking**: Pre-check returns 3+ BLOCKING issues. Assert ChallengerAgent.ainvoke() was NOT called.\n   c. **No Citadel available**: Ensure validation runs with LLM-only path when Citadel is None (backwards compatible).\n   d. **Discovery tickets bypass pre-check**: Verify _process_discovery_validation does not invoke pre-check.\n\n5. All tests must pass with: uv run pytest tests/test_workers/test_challenger_pool.py -x (or the new test file)\n\n## Acceptance Criteria\n\n- All test cases listed above are implemented and passing\n- Tests use mocking (do not require actual Citadel or source files)\n- Tests follow existing patterns in tests/test_workers/test_challenger_pool.py\n- No flaky tests (all deterministic, no timing dependencies)\n- ruff check passes on test files\n- mypy passes on test files\n\n## Files to Create/Modify\n\n- tests/test_workers/test_challenger_pool.py (extend) OR tests/test_workers/test_structural_precheck.py (new)\n\n## Dependencies\n\n- Depends on: war_rig-ylbu, war_rig-v8pf, war_rig-09jq (all implementation tickets)","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-27T15:17:16.474588155-07:00","created_by":"andrasfe","updated_at":"2026-01-27T15:27:26.609263429-07:00","closed_at":"2026-01-27T15:27:26.609267006-07:00"}
{"id":"war_rig-o2f","title":"[DOCUMENTATION] CBACT03C: CBACT03C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.22715-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.22715-07:00","labels":["cycle:1","file:CBACT03C.cbl","pm-state:created","pm-type:documentation","program:CBACT03C"]}
{"id":"war_rig-oa5","title":"[DOCUMENTATION] COACTUPC: COACTUPC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:03.30856-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.523209-07:00","closed_at":"2026-01-10T15:33:51.523209-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COACTUPC.cbl","pm-type:documentation","program:COACTUPC","worker:scribe-1"]}
{"id":"war_rig-oqfk","title":"M5: Mainframe Complete - Full Mainframe Artifact Support","description":"Epic for Milestone 5: Complete mainframe artifact support with full specs and testing. This includes JCL parsing, DB2 DDL parsing, CICS/BMS screen definitions, copybook-to-table binding logic, and comprehensive mainframe integration tests.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-24T11:41:42.855044-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:42.855044-07:00","dependencies":[{"issue_id":"war_rig-oqfk","depends_on_id":"war_rig-1ybm","type":"blocks","created_at":"2026-01-24T11:45:31.179672-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.1","title":"Create JCL spec and validation","description":"Create specs/builtin/jcl.yaml with full JCL support: JOB/PROC definitions, step extraction, EXEC PGM= and EXEC proc patterns, DD DSN= references, INCLUDE MEMBER= patterns. Test against realistic JCL samples. Handle //* comments and continuation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:14.622536-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:14.622536-07:00","dependencies":[{"issue_id":"war_rig-oqfk.1","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:14.623123-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.2","title":"Create DB2 DDL spec and validation","description":"Create specs/builtin/db2_ddl.yaml with CREATE TABLE/VIEW/INDEX patterns, column definitions, REFERENCES for foreign keys, view SELECT FROM patterns. Handle -- and /* */ comments. Test against realistic DDL samples including schema-qualified names.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:15.333811-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:15.333811-07:00","dependencies":[{"issue_id":"war_rig-oqfk.2","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:15.334293-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.3","title":"Create CICS BMS spec","description":"Create specs/builtin/cics_bms.yaml for BMS map definitions. Extract DFHMSD (mapset), DFHMDI (map), DFHMDF (field) definitions. Capture map names and field attributes. Test against realistic BMS samples.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:16.410009-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:16.410009-07:00","dependencies":[{"issue_id":"war_rig-oqfk.3","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:16.410457-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.4","title":"Create copybook spec and validation","description":"Create specs/builtin/copybook.yaml for COBOL copybook record layouts. Extract 01-level record names, field definitions with level numbers and PIC clauses. Handle nested COPY statements. Test against realistic copybook samples.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:17.527533-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:17.527533-07:00","dependencies":[{"issue_id":"war_rig-oqfk.4","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:17.528075-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.5","title":"Implement copybook-to-table binding","description":"Add bind_layouts_to_tables() to CrossReferenceResolver. Match copybook record_layout artifacts to table artifacts using field name similarity and naming conventions. Apply transformations (remove -REC suffix, etc.). Create maps_to and field_mappings on matched layouts.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:18.409873-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:18.409873-07:00","dependencies":[{"issue_id":"war_rig-oqfk.5","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:18.410314-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.6","title":"Handle COBOL COPY statement expansion","description":"Extend parser to process COPY/INCLUDE directives. Look up copybook content from registry. Inline copybook definitions into containing program's scope. Track transitive includes. Handle circular include detection.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:19.756043-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:19.756043-07:00","dependencies":[{"issue_id":"war_rig-oqfk.6","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:19.756524-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.7","title":"Create mainframe integration test suite","description":"Create comprehensive mainframe test with mixed repository: COBOL programs with EXEC SQL/CICS, JCL jobs calling programs, DB2 DDL for tables, copybooks for record layouts. Verify full dependency chain: JCL-\u003eCOBOL-\u003eTABLE-\u003eCOPYBOOK. Assert relationship types and artifact counts.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:20.976854-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:20.976854-07:00","dependencies":[{"issue_id":"war_rig-oqfk.7","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:20.977327-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oqfk.8","title":"Add mainframe sample files for testing","description":"Create tests/fixtures/samples/ with realistic mainframe examples: jcl/ (DAILYJOB.jcl with EXEC PGM and PROC), ddl/ (customer.sql with tables and views), copybook/ (CUSTREC.cpy with record layout), cobol/ (CUSTINQ.cbl with SQL and CICS). Include expected.json for each.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:22.644-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:22.644-07:00","dependencies":[{"issue_id":"war_rig-oqfk.8","depends_on_id":"war_rig-oqfk","type":"parent-child","created_at":"2026-01-24T11:44:22.644457-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-osn1","title":"Update output file naming to mirror input directory structure","description":"## Summary\nEnsure the output file naming consistently mirrors the input directory structure across all components that write documentation files.\n\n## Current Behavior\n- All output goes to flat `output_directory/`\n- Files named as `{stem}.doc.json` regardless of input location\n\n## Required Changes\n\n1. **DocumentationWriter** (if applicable)\n   Location: `/Users/andraslferenczi/war_rig/war_rig/io/writer.py`\n   - Update to accept relative_path\n   - Mirror directory structure in output\n\n2. **ScribeWorker output handling**\n   - Already covered in war_rig-jpq4\n   - Verify all code paths use mirrored structure\n\n3. **Validation ticket creation**\n   Location: `/Users/andraslferenczi/war_rig/war_rig/workers/scribe_pool.py` method `_create_validation_ticket()`\n   - Pass relative_path in metadata\n\n4. **Challenger worker output** (if exists)\n   - Ensure challenger respects mirrored paths when reading/writing\n\n## Example Structure\nInput:\n```\naws-mainframe-modernization-carddemo/samples/\n  cbl/\n    batch/\n      CBACT04C.cbl\n    online/\n      COSGN00C.cbl\n  cpy/\n    CVCRD01Y.cpy\n```\n\nOutput:\n```\noutput/\n  cbl/\n    batch/\n      CBACT04C.doc.json\n    online/\n      COSGN00C.doc.json\n  cpy/\n    CVCRD01Y.doc.json\n```\n\n## Acceptance Criteria\n- [ ] All output files maintain relative directory structure\n- [ ] No filename collisions for files with same name in different directories\n- [ ] Works correctly with aws-mainframe-modernization-carddemo/samples","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-21T20:01:48.203415-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.486709-07:00","closed_at":"2026-01-21T20:11:36.486709-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["development","recursive-dirs"],"dependencies":[{"issue_id":"war_rig-osn1","depends_on_id":"war_rig-jcnj","type":"blocks","created_at":"2026-01-21T20:01:48.205017-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-osn1","depends_on_id":"war_rig-jpq4","type":"blocks","created_at":"2026-01-21T20:01:48.205848-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol","title":"M6: Production Ready - Polish and Optimization","description":"Epic for Milestone 6: Production readiness including all exporters (DOT, Cypher, CSV), incremental analysis for changed files, performance optimization for large codebases, comprehensive test coverage, documentation, and War Rig integration helpers.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-24T11:41:43.490448-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:43.490448-07:00","dependencies":[{"issue_id":"war_rig-oxol","depends_on_id":"war_rig-2kr6","type":"blocks","created_at":"2026-01-24T11:45:32.062988-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-oxol","depends_on_id":"war_rig-57qx","type":"blocks","created_at":"2026-01-24T11:45:33.291858-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-oxol","depends_on_id":"war_rig-oqfk","type":"blocks","created_at":"2026-01-24T11:45:34.099691-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.1","title":"Implement DOT exporter for GraphViz","description":"Add export_dot() to GraphExporter. Generate GraphViz DOT format with nodes for artifacts and edges for relationships. Support cluster_by parameter (category, language, file). Use appropriate shapes and colors for artifact types. Include node labels and edge annotations.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:49.736196-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:49.736196-07:00","dependencies":[{"issue_id":"war_rig-oxol.1","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:49.736828-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.10","title":"Implement War Rig integration helpers","description":"Create helper functions for War Rig integration. Implement validate_program_documentation() to check documentation covers all dependencies. Export graph data in War Rig compatible format. Add examples for common integration patterns.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:45:00.045111-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:45:00.045111-07:00","dependencies":[{"issue_id":"war_rig-oxol.10","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:45:00.045597-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.11","title":"Finalize CLI with all features","description":"Complete CLI implementation with all commands working: analyze (full and incremental), spec (list/show/generate), export (all formats), stats. Add progress bars using rich. Add verbose logging mode. Add --no-llm flag. Ensure clean error messages.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:45:01.29743-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:45:01.29743-07:00","dependencies":[{"issue_id":"war_rig-oxol.11","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:45:01.298013-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.2","title":"Implement Cypher exporter for Neo4j","description":"Add export_cypher() to GraphExporter. Generate Cypher CREATE statements for Neo4j import. Create nodes with labels by artifact_type, properties from attributes. Create relationships with types and properties. Output as importable .cypher file.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:50.922581-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:50.922581-07:00","dependencies":[{"issue_id":"war_rig-oxol.2","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:50.923058-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.3","title":"Implement CSV exporter","description":"Add export_csv() to GraphExporter. Generate three CSV files: artifacts.csv (id, type, category, name, file, line), relationships.csv (from, to, type, location), unresolved.csv (reference, expected_type, location, reason). Suitable for spreadsheet analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:51.658971-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:51.658971-07:00","dependencies":[{"issue_id":"war_rig-oxol.3","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:51.659463-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.4","title":"Implement human-readable summary export","description":"Add export_summary() to GraphExporter. Generate formatted text summary with statistics, top artifact types, relationship counts, unresolved reference analysis, file coverage. Use rich formatting for CLI display.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:53.072496-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:53.072496-07:00","dependencies":[{"issue_id":"war_rig-oxol.4","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:53.072984-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.5","title":"Implement incremental analysis","description":"Add analyze_incremental() to Orchestrator. Accept changed_files list and existing_graph. Identify artifacts/relationships to remove from changed files. Re-parse only changed files. Merge new results with existing graph. Update statistics. Cache parse results by file content hash.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:53.819491-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:53.819491-07:00","dependencies":[{"issue_id":"war_rig-oxol.5","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:53.820005-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.6","title":"Implement parse result caching","description":"Add caching layer for FileParseResult. Cache by file content hash in cache/parse_results/. Load cached results when file unchanged. Invalidate on spec change (track specs_hashes). Support cache clearing command in CLI.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:54.90554-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:54.90554-07:00","dependencies":[{"issue_id":"war_rig-oxol.6","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:54.90607-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.7","title":"Performance optimization for large codebases","description":"Optimize for 10,000+ file repositories. Profile and optimize hotspots. Stream large files line-by-line. Use generators for artifact iteration. Implement parallel file parsing with configurable workers. Target 100+ files/second for deterministic parsing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:56.632715-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:56.632715-07:00","dependencies":[{"issue_id":"war_rig-oxol.7","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:56.633173-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.8","title":"Add comprehensive test coverage","description":"Ensure comprehensive test coverage across all modules. Add edge case tests: encoding errors, circular includes, malformed files, empty directories. Add performance regression tests. Target 80%+ code coverage. Add CI configuration for test runs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:58.213794-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:58.213794-07:00","dependencies":[{"issue_id":"war_rig-oxol.8","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:58.214246-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-oxol.9","title":"Write user documentation","description":"Create README.md with installation, quick start, usage examples. Document CLI commands and options. Document spec file format with examples. Document programmatic API. Add troubleshooting guide for common issues.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:44:58.860668-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:44:58.860668-07:00","dependencies":[{"issue_id":"war_rig-oxol.9","depends_on_id":"war_rig-oxol","type":"parent-child","created_at":"2026-01-24T11:44:58.861213-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-p10","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:03.384729-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.503481-07:00","closed_at":"2026-01-10T15:33:51.503481-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C","worker:scribe-3"]}
{"id":"war_rig-p5ui","title":"feature","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T11:41:24.473595-07:00","created_by":"andrasfe","updated_at":"2026-01-24T11:41:24.473595-07:00"}
{"id":"war_rig-p8kf","title":"Call graph MD differs from System Design mermaid and is often near-empty","description":"The CALL_GRAPH.md file does not reflect what is in the SYSTEM_DESIGN.md mermaid section. The call graph is often near-empty. Need to investigate how call graph is generated and why it differs from system design.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T15:55:45.410713-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:10:52.004111-07:00","closed_at":"2026-01-25T16:10:52.004111-07:00","close_reason":"Implemented - LST files as prose, detailed paragraph descriptions, and call graph consistency"}
{"id":"war_rig-pgm9","title":"Add tests for recursive directory handling and path preservation","description":"## Summary\nAdd comprehensive unit and integration tests for the recursive directory processing feature.\n\n## Test Locations\n- Unit tests: `/Users/andraslferenczi/war_rig/tests/`\n- Integration tests: `/Users/andraslferenczi/war_rig/tests/test_integration/`\n\n## Required Unit Tests\n\n### 1. SourceReader Tests\nFile: `/Users/andraslferenczi/war_rig/tests/test_io/test_reader.py` (create if needed)\n\n```python\nclass TestSourceReaderRecursive:\n    def test_discover_files_preserves_relative_paths(self, tmp_path):\n        \"\"\"Test that relative paths are correctly calculated.\"\"\"\n        \n    def test_discover_files_nested_directories(self, tmp_path):\n        \"\"\"Test discovery in deeply nested directory structures.\"\"\"\n        \n    def test_discover_files_same_filename_different_dirs(self, tmp_path):\n        \"\"\"Test handling of duplicate filenames in different directories.\"\"\"\n```\n\n### 2. ProgramManagerAgent Tests\nFile: `/Users/andraslferenczi/war_rig/tests/test_agents/test_program_manager.py`\n\n```python\nclass TestProgramManagerRecursive:\n    def test_initialize_batch_stores_relative_paths(self):\n        \"\"\"Test that tickets contain relative_path in metadata.\"\"\"\n        \n    def test_batch_handles_duplicate_filenames(self):\n        \"\"\"Test separate tickets for same filename in different dirs.\"\"\"\n```\n\n### 3. ScribeWorkerPool Tests\nFile: `/Users/andraslferenczi/war_rig/tests/test_workers/test_scribe_pool.py`\n\n```python\nclass TestScribeWorkerPoolRecursive:\n    def test_output_mirrors_input_structure(self):\n        \"\"\"Test that output directory mirrors input structure.\"\"\"\n        \n    def test_creates_parent_directories(self):\n        \"\"\"Test automatic creation of parent directories.\"\"\"\n```\n\n## Required Integration Test\n\n### CardDemo Integration Test\nFile: `/Users/andraslferenczi/war_rig/tests/test_integration/test_carddemo.py`\n\n```python\nclass TestRecursiveDirectoryProcessing:\n    def test_carddemo_samples_recursive(self, carddemo_available, tmp_path):\n        \"\"\"Test full recursive processing of aws-mainframe-modernization-carddemo/samples.\"\"\"\n        # Should process all nested files\n        # Should create mirrored output structure\n        # Should handle all file types (cbl, cpy, jcl, bms)\n```\n\n## Acceptance Criteria\n- [ ] Unit tests for SourceReader recursive discovery\n- [ ] Unit tests for ProgramManagerAgent path handling\n- [ ] Unit tests for ScribeWorkerPool output mirroring\n- [ ] Integration test against aws-mainframe-modernization-carddemo/samples\n- [ ] All existing tests continue to pass\n- [ ] Test coverage for edge cases (empty dirs, symlinks, permissions)","status":"closed","priority":1,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-21T20:02:02.324694-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.488362-07:00","closed_at":"2026-01-21T20:11:36.488362-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["recursive-dirs","testing"],"dependencies":[{"issue_id":"war_rig-pgm9","depends_on_id":"war_rig-ptkc","type":"blocks","created_at":"2026-01-21T20:02:02.325787-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-pgm9","depends_on_id":"war_rig-qoez","type":"blocks","created_at":"2026-01-21T20:02:02.32661-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-pgm9","depends_on_id":"war_rig-jpq4","type":"blocks","created_at":"2026-01-21T20:02:02.327271-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-pgm9","depends_on_id":"war_rig-osn1","type":"blocks","created_at":"2026-01-21T20:02:02.327913-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-psch","title":"Add Atlas integration tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T18:57:30.239913-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:09:08.209639-07:00","closed_at":"2026-01-15T19:09:08.209639-07:00","close_reason":"Implemented in commit 39b9ff6","dependencies":[{"issue_id":"war_rig-psch","depends_on_id":"war_rig-i743","type":"blocks","created_at":"2026-01-15T18:57:40.683699-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-ptkc","title":"Modify SourceReader.discover_files() to preserve relative paths","description":"## Summary\nUpdate the SourceReader class to store relative paths from the input directory root instead of just filenames.\n\n## Current Behavior\n- `SourceFile.name` stores only the filename (e.g., `CBACT04C.cbl`)\n- No relative path information is preserved\n\n## Required Changes\nLocation: `/Users/andraslferenczi/war_rig/war_rig/io/reader.py`\n\n1. **Add `relative_path` field to SourceFile**\n   ```python\n   class SourceFile(BaseModel):\n       path: Path  # Full absolute path (existing)\n       name: str   # Filename only (existing, for backwards compat)\n       relative_path: str  # NEW: Path relative to input directory\n       file_type: FileType\n       ...\n   ```\n\n2. **Update `discover_files()` method**\n   - Calculate relative path from the search directory\n   - Store in new `relative_path` field\n   - Example: For file at `/input/cbl/batch/CBACT04C.cbl` with directory `/input`:\n     - `path` = `/input/cbl/batch/CBACT04C.cbl`\n     - `name` = `CBACT04C.cbl`\n     - `relative_path` = `cbl/batch/CBACT04C.cbl`\n\n3. **Backward Compatibility**\n   - Keep `name` field for backward compatibility\n   - Ensure existing code using `name` still works\n\n## Acceptance Criteria\n- [ ] SourceFile has new `relative_path` field\n- [ ] discover_files() populates relative_path correctly\n- [ ] Existing tests pass (backward compatibility)\n- [ ] Works with nested directory structures","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-21T20:01:14.211763-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.482181-07:00","closed_at":"2026-01-21T20:11:36.482181-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["development","recursive-dirs"],"dependencies":[{"issue_id":"war_rig-ptkc","depends_on_id":"war_rig-jcnj","type":"blocks","created_at":"2026-01-21T20:01:14.212871-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-pvp","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:34:04.11154-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:36:49.02043-07:00","closed_at":"2026-01-10T15:36:49.02043-07:00","close_reason":"Closed due to schema validation errors, testing prompt fix","labels":["cycle:1","file:COADM01C.cbl","pm-type:documentation","program:COADM01C","worker:scribe-1"]}
{"id":"war_rig-pwq","title":"Enhance Imperator for holistic system review","description":"Update war_rig/agents/imperator.py:\n- Add holistic review mode (reviews all docs together)\n- Analyze cross-program dependencies\n- Create assumptions about system behavior\n- Open clarification tickets when understanding is incomplete\n- Identify missing integration documentation\n- Decision: SATISFIED (done) or NEEDS_CLARIFICATION (new cycle)\n- Track what was asked in previous cycles to avoid repetition","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:03:58.835236-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:14:07.732245-07:00","closed_at":"2026-01-10T13:14:07.732245-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-pwq","depends_on_id":"war_rig-9qk","type":"blocks","created_at":"2026-01-10T13:04:41.480424-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-q470","title":"Refactor Imperator to use FeedbackInjector for ticket feedback","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T08:19:18.84866-07:00","created_by":"andrasfe","updated_at":"2026-01-23T08:19:18.84866-07:00"}
{"id":"war_rig-q9y","title":"[DOCUMENTATION] CBACT02C: CBACT02C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.965792-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.110019-07:00","closed_at":"2026-01-18T09:28:00.110019-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT02C.cbl","pm-type:documentation","program:CBACT02C"]}
{"id":"war_rig-qci","title":"[DOCUMENTATION] COMEN01C: COMEN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.530075-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.631635-07:00","closed_at":"2026-01-18T09:28:01.631635-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COMEN01C.cbl","pm-type:documentation","program:COMEN01C"]}
{"id":"war_rig-qd1","title":"[DOCUMENTATION] CSUTLDTC: CSUTLDTC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:04.907789-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.088857-07:00","closed_at":"2026-01-10T15:33:51.088857-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CSUTLDTC.cbl","pm-type:documentation","program:CSUTLDTC","worker:scribe-3"]}
{"id":"war_rig-qoez","title":"Update ProgramManagerAgent to store full relative paths in tickets","description":"## Summary\nUpdate ProgramManagerAgent to use relative paths for file identification and ticket metadata.\n\n## Current Behavior\n- `ProgramManagerTicket.file_name` stores only the filename\n- Tickets created with `source_file.name` (filename only)\n\n## Required Changes\nLocation: `/Users/andraslferenczi/war_rig/war_rig/agents/program_manager.py`\n\n1. **Update `initialize_batch()` method**\n   - Use `source_file.relative_path` instead of `source_file.name` where appropriate\n   - Store relative path in ticket metadata for workers to resolve full path\n   - Example metadata:\n     ```python\n     metadata={\n         \"batch_id\": self.batch_id,\n         \"file_path\": str(source_file.path),  # Keep absolute for direct access\n         \"relative_path\": source_file.relative_path,  # NEW: For output mirroring\n         \"file_type\": source_file.file_type.value,\n         ...\n     }\n     ```\n\n2. **Update existing documentation check**\n   - Currently checks: `output_dir / f\"{source_file.stem}.doc.json\"`\n   - Must check mirrored path: `output_dir / relative_dir / f\"{source_file.stem}.doc.json\"`\n\n3. **Handle duplicate filenames**\n   - If two files have same name but different paths, they should create separate tickets\n   - Consider using relative_path as part of ticket identification\n\n## Acceptance Criteria\n- [ ] Tickets contain relative_path in metadata\n- [ ] Documentation existence check respects directory structure\n- [ ] Files with same name in different directories create separate tickets\n- [ ] ProgramManagerOutput.source_files reflects relative paths","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-21T20:01:25.178341-07:00","created_by":"andrasfe","updated_at":"2026-01-21T20:11:36.483696-07:00","closed_at":"2026-01-21T20:11:36.483696-07:00","close_reason":"Implemented recursive directory processing with path mirroring","labels":["development","recursive-dirs"],"dependencies":[{"issue_id":"war_rig-qoez","depends_on_id":"war_rig-jcnj","type":"blocks","created_at":"2026-01-21T20:01:25.179429-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-qoez","depends_on_id":"war_rig-ptkc","type":"blocks","created_at":"2026-01-21T20:01:25.18024-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-qpo","title":"[DOCUMENTATION] CSUTLDTC: CSUTLDTC.cbl","status":"blocked","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:37:15.894578-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:38:29.174472-07:00","labels":["cycle:1","file:CSUTLDTC.cbl","pm-type:documentation","program:CSUTLDTC","worker:scribe-1"]}
{"id":"war_rig-qxm","title":"[DOCUMENTATION] COACTUPC: COACTUPC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.422896-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.120134-07:00","closed_at":"2026-01-18T09:28:01.120134-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COACTUPC.cbl","pm-type:documentation","program:COACTUPC"]}
{"id":"war_rig-qxw9","title":"Implement file locking for concurrent Scribe workers","description":"When multiple Scribe workers run simultaneously, they may try to work on the same output file, causing race conditions and data corruption.\n\nRequirements:\n1. Implement file-level locking mechanism\n2. Before a worker starts processing a ticket, it must acquire a lock on the target file\n3. Lock should be held until ticket is completed or abandoned\n4. Other workers attempting to work on the same file should:\n   - Either wait for the lock to be released\n   - Or skip the ticket and move to another one\n5. Locks should be automatically released on worker crash/timeout\n6. Consider using file-based locks (.lock files) or in-memory locking with asyncio\n\nFiles likely involved:\n- war_rig/workers/scribe_pool.py\n- war_rig/workers/challenger_pool.py (may need same fix)\n- Possibly a new war_rig/utils/file_lock.py module","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-22T20:53:04.602651-07:00","created_by":"andrasfe","updated_at":"2026-01-22T21:02:44.499928-07:00","closed_at":"2026-01-22T21:02:44.499928-07:00","close_reason":"Closed"}
{"id":"war_rig-qyhv","title":"Create generate_skills.py CLI script","description":"## Context\n\nNeed a standalone script in scripts/ directory that can be run to convert War Rig output to Agent Skills format.\n\n## Requirements\n\n1. Create `scripts/generate_skills.py` with CLI interface\n2. Use argparse for argument parsing (consistent with other scripts)\n3. Arguments:\n   - `input_dir` (positional): Path to War Rig output directory\n   - `--output-dir, -o`: Override default output directory naming\n   - `--verbose, -v`: Enable verbose logging\n4. Validate input directory contains expected structure\n5. Call SkillsGenerator to perform conversion\n6. Report progress and results\n\n## Acceptance Criteria\n\n- [ ] Script is executable (shebang, chmod +x)\n- [ ] Validates input_dir exists and has expected files\n- [ ] Creates skills output at sibling level by default\n- [ ] Supports --output-dir override\n- [ ] Prints progress: programs found, skills generated\n- [ ] Returns exit code 0 on success, 1 on failure\n- [ ] Includes helpful error messages\n- [ ] Has usage docstring at top\n\n## Technical Notes\n\n- Pattern after scripts/generate_call_graph.py\n- Should work with: uv run python scripts/generate_skills.py output/\n- Consider progress reporting for large codebases","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:12.500167326-07:00","created_by":"andrasfe","updated_at":"2026-01-29T11:00:25.283601801-07:00","closed_at":"2026-01-29T11:00:25.283601801-07:00","close_reason":"Closed","labels":["cli","script","skills"],"dependencies":[{"issue_id":"war_rig-qyhv","depends_on_id":"war_rig-hwll","type":"blocks","created_at":"2026-01-29T10:42:12.502195499-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-qyhv","depends_on_id":"war_rig-z768","type":"blocks","created_at":"2026-01-29T10:42:12.506936682-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-qyhv","depends_on_id":"war_rig-4o78","type":"blocks","created_at":"2026-01-29T10:42:12.511850761-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-qyhv","depends_on_id":"war_rig-sr8q","type":"blocks","created_at":"2026-01-29T10:42:12.516871279-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-r5q6","title":"Create unit tests for document type validation","description":"Create comprehensive unit tests for the document type validation system.\n\nCreate tests/test_validation/test_document_validator.py with:\n\n1. TestDocumentValidator class with tests for:\n   - JCL validation: missing steps fails, with steps passes\n   - JCL validation: missing DD cards fails, with DD cards passes\n   - COBOL validation: missing paragraphs fails, with paragraphs passes\n   - COBOL validation: missing called_programs fails, with called_programs passes\n   - Copybook validation: missing record_layout fails, with fields passes\n   - Copybook validation: missing usage_context fails\n   - File type detection from extensions (.cbl, .cpy, .jcl, .bms, .pli, .proc)\n   - Unknown file type passes validation (no criteria)\n   - Ticket creation has correct priority and issue_type\n\n2. TestValidationCriteria class with tests for:\n   - get_criteria_for_type returns correct criteria for each FileType\n   - get_criteria_for_type returns None for FileType.OTHER\n   - All criteria have required fields (criterion_id, section, description, guidance, priority)\n\nAlso create tests/test_validation/__init__.py.","acceptance_criteria":"- tests/test_validation/test_document_validator.py exists\n- tests/test_validation/__init__.py exists\n- JCL, COBOL, Copybook validation tests pass\n- File type detection tests pass\n- Ticket creation tests verify priority and issue_type\n- Criteria tests verify CRITERIA_REGISTRY completeness\n- All tests pass with pytest","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T07:42:34.69164-07:00","created_by":"andrasfe","updated_at":"2026-01-24T07:42:34.69164-07:00","labels":["enhancement","testing","validation"],"dependencies":[{"issue_id":"war_rig-r5q6","depends_on_id":"war_rig-lfen","type":"blocks","created_at":"2026-01-24T07:42:34.69317-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-r5q6","depends_on_id":"war_rig-2kbj","type":"blocks","created_at":"2026-01-24T07:42:34.694133-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-rkx3","title":"Write integration tests for end-to-end skills generation","description":"## Context\n\nIntegration tests verify the complete workflow from War Rig output to valid Agent Skills directory structure.\n\n## Requirements\n\n1. Create `tests/skills/test_integration.py`\n2. Use example_output/ as test data (or subset)\n3. Test complete workflow:\n   - Generate skills from sample output\n   - Verify all expected directories created\n   - Verify all SKILL.md files have valid frontmatter\n   - Verify skill names match directory names\n   - Verify system-overview skill lists all programs\n4. Test CLI script invocation\n5. Test edge cases: empty input, partial output\n\n## Acceptance Criteria\n\n- [ ] Integration test runs full generation on example_output/\n- [ ] Verifies directory structure matches specification\n- [ ] Verifies SKILL.md files are valid YAML + Markdown\n- [ ] Verifies references/ directories contain REFERENCE.md\n- [ ] Tests CLI script returns correct exit codes\n- [ ] Cleanup after tests (tmp directories)\n- [ ] All tests pass: uv run pytest tests/skills/test_integration.py\n\n## Technical Notes\n\n- May need to copy example_output/ to tmp_path for isolation\n- Consider testing with subset for speed\n- Verify against Agent Skills specification requirements","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:42:48.768569894-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:32:22.634327-07:00","closed_at":"2026-01-29T19:32:22.634327-07:00","close_reason":"Closed","labels":["integration","skills","testing"],"dependencies":[{"issue_id":"war_rig-rkx3","depends_on_id":"war_rig-qyhv","type":"blocks","created_at":"2026-01-29T10:42:48.770637181-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-rvxy","title":"Test and Verify Super-Scribe Rescue Mode","description":"Test and verify Super-Scribe Rescue Mode implementation.\n\n## Testing Scope\n- Verify --rescue-blocked flag functionality\n- Test worker pool creation and management\n- Validate BLOCKED ticket detection\n- Confirm ticket state updates work correctly\n- Performance and stress testing\n\n## Test Cases\n- [ ] Flag is recognized and parsed correctly\n- [ ] Worker pool spawns correct number of Opus workers (1-2)\n- [ ] Only BLOCKED tickets are selected for processing\n- [ ] Non-BLOCKED tickets are ignored\n- [ ] State transitions work on successful rescue\n- [ ] Error conditions handled gracefully\n- [ ] Integration with existing workflow verified","status":"closed","priority":2,"issue_type":"feature","assignee":"devops-test-engineer","created_at":"2026-01-11T21:39:46.344026-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T21:47:22.391523-07:00","closed_at":"2026-01-11T21:47:22.391523-07:00","close_reason":"Verified and bug fixed","dependencies":[{"issue_id":"war_rig-rvxy","depends_on_id":"war_rig-h4nr","type":"blocks","created_at":"2026-01-11T21:39:55.884664-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-sm6","title":"[DOCUMENTATION] CBCUS01C: CBCUS01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:26:04.617802-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.167282-07:00","closed_at":"2026-01-10T15:33:51.167282-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBCUS01C.cbl","pm-type:documentation","program:CBCUS01C","worker:scribe-1"]}
{"id":"war_rig-sq9","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.46599-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.239168-07:00","closed_at":"2026-01-10T15:25:58.239168-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COTRN02C.cbl","pm-type:documentation","program:COTRN02C","worker:scribe-1"]}
{"id":"war_rig-sr8q","title":"Implement datacards skill generation (conditional)","description":"## Context\n\nDATACARDS.md is an optional file generated when datacard files (.dc) exist. It catalogs utility control cards (UNLOAD, REPRO, SORT, etc.). When present, it should be converted to a skill.\n\n## Requirements\n\n1. Create `war_rig/skills/datacard_skill.py` with `DatacardSkillGenerator` class\n2. Check if DATACARDS.md exists in input directory\n3. If exists, generate datacards/SKILL.md:\n   ```yaml\n   ---\n   name: datacards\n   description: Catalog of utility control cards (UNLOAD, REPRO, SORT) used in the system.\n   metadata:\n     author: war-rig\n     version: \"1.0\"\n   ---\n   ```\n4. SKILL.md body should include:\n   - Summary of datacard types present\n   - Table of datacards with utility type and purpose\n   - How to find related programs/jobs\n\n## Acceptance Criteria\n\n- [ ] Detects presence of DATACARDS.md\n- [ ] Skips generation if DATACARDS.md not present (no error)\n- [ ] Parses DATACARDS.md content\n- [ ] Groups datacards by utility type\n- [ ] Generates valid SKILL.md with frontmatter\n- [ ] Logs when skipping due to missing file\n\n## Technical Notes\n\n- This is optional - not all War Rig outputs have datacards\n- DATACARDS.md is generated by war-rig datacards command\n- Contains utility control statements for mainframe utilities","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:54.662598867-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:53:53.04593311-07:00","closed_at":"2026-01-29T10:53:53.045935765-07:00","labels":["datacards","optional","skills"],"dependencies":[{"issue_id":"war_rig-sr8q","depends_on_id":"war_rig-3x8k","type":"blocks","created_at":"2026-01-29T10:41:54.66484012-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-sv9r","title":"[DOCUMENTATION] CBSTM03B: CBSTM03B.CBL","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-11T08:12:54.37064-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:18:58.392214-07:00","closed_at":"2026-01-11T08:18:58.392214-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBSTM03B.CBL","pm-type:documentation","program:CBSTM03B","worker:scribe-2"]}
{"id":"war_rig-sza","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:18.096878-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:18.096878-07:00","labels":["cycle:1","file:CBTRN01C.cbl","pm-state:created","pm-type:documentation","program:CBTRN01C"]}
{"id":"war_rig-t6g","title":"[DOCUMENTATION] CBACT04C: CBACT04C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.644279-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.495112-07:00","closed_at":"2026-01-10T15:25:58.495112-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBACT04C.cbl","pm-type:documentation","program:CBACT04C","worker:scribe-1"]}
{"id":"war_rig-tcb","title":"[DOCUMENTATION] COTRN02C: COTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:04.401563-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.227525-07:00","closed_at":"2026-01-10T15:33:51.227525-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:COTRN02C.cbl","pm-type:documentation","program:COTRN02C","worker:scribe-3"]}
{"id":"war_rig-tepf","title":"Add file extensions config for new file types","description":"Add extension mappings for the new file types:\n- Add extension mappings in FileExtensionsConfig\n- Update SourceReader._build_extension_map() to handle new types\n\nFiles: war_rig/config.py, war_rig/io/reader.py","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T19:28:07.399007-07:00","created_by":"andrasfe","updated_at":"2026-01-22T19:29:37.954751-07:00","closed_at":"2026-01-22T19:29:37.954751-07:00","close_reason":"Closed"}
{"id":"war_rig-uhki","title":"Rename SYSTEM_DESIGN.md to README.md for GitHub directory rendering","description":"## Problem\n\nThe system design document is written to `output/SYSTEM_DESIGN.md`, but GitHub only auto-renders `README.md` files in directory views. When users browse the output directory on GitHub, they don't see the system design document content displayed automatically.\n\n## Solution\n\nRename the output file from `SYSTEM_DESIGN.md` to `README.md` so it displays nicely when browsing the output directory on GitHub.\n\n## Key Locations to Change\n\n### Production Code\n- `war_rig/agents/imperator.py:1647` - `system_design_path = output_directory / \"SYSTEM_DESIGN.md\"`\n- `war_rig/agents/imperator.py:2032` - `system_design_path = output_dir / \"SYSTEM_DESIGN.md\"` in `_read_existing_system_design()`\n- Various docstrings and log messages in `war_rig/agents/imperator.py` referencing SYSTEM_DESIGN.md\n- `war_rig/orchestration/ticket_engine.py` - comments referencing SYSTEM_DESIGN.md\n- `war_rig/analysis/call_graph.py` - if it references SYSTEM_DESIGN.md\n\n### Tests\n- `tests/test_agents/test_imperator.py:268` - assertion checking prompt content\n- `tests/test_agents/test_imperator.py:272` - assertion checking prompt content\n- `tests/test_agents/test_imperator.py:298` - assertion checking prompt content\n- `tests/test_agents/test_imperator.py:1225` - `system_design_path = tmp_path / \"SYSTEM_DESIGN.md\"`\n- `tests/test_analysis/test_call_graph.py:346-401` - test docstrings referencing SYSTEM_DESIGN.md\n\n### Example Output\n- `example_output/SYSTEM_DESIGN.md` - should be renamed to `example_output/README.md`\n\n## Acceptance Criteria\n\n- [ ] All file path references changed from SYSTEM_DESIGN.md to README.md\n- [ ] All docstrings and comments updated to reference README.md\n- [ ] All log messages updated to reference README.md\n- [ ] All tests updated and passing\n- [ ] Example output file renamed\n- [ ] Existing functionality preserved (file content/format unchanged)","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-28T11:48:05.823403386-07:00","created_by":"andrasfe","updated_at":"2026-01-28T11:58:36.306999968-07:00","closed_at":"2026-01-28T11:58:36.307002963-07:00"}
{"id":"war_rig-ujyb","title":"Implement Imperator cycle limiting logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.882116-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.275637-07:00","closed_at":"2026-01-18T08:17:54.275637-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-ujyb","depends_on_id":"war_rig-mbfn","type":"blocks","created_at":"2026-01-18T08:03:37.617669-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-upo","title":"[DOCUMENTATION] CBTRN03C: CBTRN03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:26:04.760126-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.128107-07:00","closed_at":"2026-01-10T15:33:51.128107-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBTRN03C.cbl","pm-type:documentation","program:CBTRN03C","worker:scribe-2"]}
{"id":"war_rig-urq","title":"Add unit tests for Program Manager workflow","description":"Create tests/test_program_manager/:\n- test_program_manager.py: PM agent unit tests\n- test_scribe_pool.py: Scribe worker pool tests\n- test_challenger_pool.py: Challenger worker pool tests\n- test_ticket_engine.py: Orchestration tests\n- Mock beads client for isolated testing\n- Test parallel execution scenarios\n- Test error handling and recovery","status":"closed","priority":2,"issue_type":"task","assignee":"devops-test-engineer","created_at":"2026-01-10T13:04:13.749913-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:31:44.287087-07:00","closed_at":"2026-01-10T13:31:44.287087-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-urq","depends_on_id":"war_rig-6l9","type":"blocks","created_at":"2026-01-10T13:04:49.285378-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-v8pf","title":"Implement structural pre-check comparison logic","description":"## Context\n\nThis ticket implements the core comparison logic that takes Citadel structural facts and the Scribe's DocumentationTemplate and produces a list of ChallengerQuestion objects for structural gaps. This is a pure function with no side effects -- it takes data in and returns issues out.\n\n## Requirements\n\n1. Create a new method _run_structural_precheck(self, citadel_context: dict, template: DocumentationTemplate, file_name: str) -\u003e list[ChallengerQuestion] on ChallengerWorker (or as a standalone function in a new module war_rig/workers/structural_precheck.py -- implementer's choice).\n\n2. The method must perform these comparisons:\n\n   a. **Missing paragraphs check**: Compare Citadel paragraph names (from citadel_context[\"paragraphs\"]) against template.paragraphs (list[Paragraph], model at war_rig/models/templates.py line 436). Match by paragraph_name field (case-insensitive). For any Citadel paragraph not found in the template, generate a ChallengerQuestion with:\n      - section = \"paragraphs\"\n      - question_type = QuestionType.COMPLETENESS (from war_rig/models/tickets.py line 55)\n      - severity = QuestionSeverity.BLOCKING (line 65)\n      - question = descriptive text naming the missing paragraph and its line range\n      - evidence = [line_start] from Citadel data\n      - Exclude paragraphs marked as dead code (is_dead_code=True or in citadel_context[\"dead_code\"]). Also exclude PERFORM THRU range endpoints.\n\n   b. **Missing calls check**: For each paragraph present in BOTH Citadel and the template, compare Citadel outgoing calls (callout.target where callout.relationship == \"performs\") against template paragraph's calls field (list[str]) AND outgoing_calls field (list[FunctionCall]). If Citadel says paragraph X performs Y but the template paragraph X does not list Y in calls or outgoing_calls, generate:\n      - section = \"paragraphs\"\n      - question_type = QuestionType.COMPLETENESS\n      - severity = QuestionSeverity.IMPORTANT\n      - question = text naming the missing call relationship\n      - evidence = [callout.line] if available\n\n   c. **Missing copybook references check**: Compare Citadel includes (citadel_context[\"includes\"]) against template.copybooks_used (list[CopybookReference], model at templates.py line 370). Match by copybook_name (case-insensitive). For any Citadel include not in the template, generate:\n      - section = \"copybooks_used\"\n      - question_type = QuestionType.COMPLETENESS\n      - severity = QuestionSeverity.IMPORTANT\n\n   d. **Empty critical sections check**: Check if these template sections are empty/null:\n      - template.inputs (list) -- empty list\n      - template.outputs (list) -- empty list\n      - template.business_rules (list) -- empty list\n      - template.purpose -- None or purpose.summary is None/empty\n      Generate QuestionType.COMPLETENESS with severity BLOCKING for empty purpose, IMPORTANT for others.\n\n3. Each generated ChallengerQuestion must have a unique question_id (use generate_question_id() from war_rig/models/tickets.py line 90) and iteration=1 (or accept iteration as parameter).\n\n4. Return the list sorted by severity (BLOCKING first, then IMPORTANT).\n\n## Acceptance Criteria\n\n- Function correctly identifies missing paragraphs (excluding dead code and THRU targets)\n- Function correctly identifies missing call relationships per-paragraph\n- Function correctly identifies missing copybook references\n- Function correctly identifies empty critical sections\n- All returned objects are valid ChallengerQuestion instances\n- Dead code paragraphs are excluded from the missing paragraphs check\n- Case-insensitive matching for paragraph and copybook names\n\n## Files to Create/Modify\n\n- war_rig/workers/challenger_pool.py (new method) OR war_rig/workers/structural_precheck.py (new module)\n- Imports from: war_rig/models/tickets.py (ChallengerQuestion, QuestionType, QuestionSeverity, generate_question_id)\n- Imports from: war_rig/models/templates.py (DocumentationTemplate, Paragraph, CopybookReference)\n\n## Dependencies\n\n- Depends on ticket: war_rig-ylbu (Citadel context loading -- defines the citadel_context dict structure)","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-27T15:16:16.018416425-07:00","created_by":"andrasfe","updated_at":"2026-01-27T15:24:07.95444183-07:00","closed_at":"2026-01-27T15:24:07.95444183-07:00","close_reason":"Closed"}
{"id":"war_rig-vdz","title":"[DOCUMENTATION] CBCUS01C: CBCUS01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-2","created_at":"2026-01-10T15:37:15.608165-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:39:06.355194-07:00","closed_at":"2026-01-10T15:39:06.355194-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBCUS01C.cbl","pm-type:documentation","program:CBCUS01C","worker:scribe-2"]}
{"id":"war_rig-vhd","title":"Implement parallel Scribe worker pool","description":"Create war_rig/workers/scribe_pool.py:\n- ScribeWorkerPool class managing N Scribe instances\n- Each worker polls for available tickets (status=open, type=documentation)\n- Worker claims ticket, processes file, marks ticket complete\n- Async/concurrent execution using asyncio\n- Graceful shutdown and error handling\n- Logging per worker for debugging","status":"closed","priority":1,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:03:56.530912-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:19:39.263874-07:00","closed_at":"2026-01-10T13:19:39.263874-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-vhd","depends_on_id":"war_rig-9qk","type":"blocks","created_at":"2026-01-10T13:04:38.599587-07:00","created_by":"andraslferenczi"},{"issue_id":"war_rig-vhd","depends_on_id":"war_rig-z74","type":"blocks","created_at":"2026-01-10T13:04:38.677566-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-vj2","title":"[DOCUMENTATION] CBACT02C: CBACT02C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.594362-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:01.505335-07:00","closed_at":"2026-01-18T09:28:01.505335-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:CBACT02C.cbl","pm-type:documentation","program:CBACT02C"]}
{"id":"war_rig-vkg","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T15:26:04.040781-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:33:51.326759-07:00","closed_at":"2026-01-10T15:33:51.326759-07:00","close_reason":"Closed due to Pydantic validation errors in failed PM run","labels":["cycle:1","file:CBTRN01C.cbl","pm-type:documentation","program:CBTRN01C","worker:scribe-3"]}
{"id":"war_rig-vllu","title":"Investigate Imperator call graph tickets and Scribe file existence handling","description":"Two related issues need investigation:\n\n1. **Imperator still creates tickets incorrectly**: Despite previous fix (74e8858), Imperator continues to:\n   - List the callee (called program) as the file_name instead of the caller\n   - Attach .cbl extension to called program names (e.g., \"SOME_CALL.cbl\" instead of the caller file)\n   - Need to investigate why the fix isn't working or if there's another code path\n\n2. **Scribe file existence and procedure search logic**: There should be existing logic where:\n   - Scribe checks if the source file exists\n   - If file doesn't exist, searches for procedure definition across output/ directory (including subdirectories)\n   - If found, documents it in the associated documentation file\n   - If not found, closes the ticket with findings\n   - This logic doesn't appear to be working - need to verify it exists and debug why\n\nFiles to investigate:\n- war_rig/orchestration/ticket_engine.py (Imperator ticket creation)\n- war_rig/workers/scribe_pool.py (file existence and procedure search logic)\n- war_rig/agents/program_manager.py (ticket creation)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-22T20:29:35.576803-07:00","created_by":"andrasfe","updated_at":"2026-01-22T20:46:34.003259-07:00","closed_at":"2026-01-22T20:46:34.003259-07:00","close_reason":"Fixed: ProgramManagerAgent validates file/doc existence before creating clarification tickets, ScribeWorker gracefully handles missing templates"}
{"id":"war_rig-vnuh","title":"Render enhanced sequence diagrams with data flow","description":"Update DocumentationWriter._render_sequence_diagram() to read template.call_semantics and generate Mermaid with input/output annotations on arrows. Show inputs on forward arrow (A-\u003e\u003eB: vars), outputs on return arrow (B--\u003e\u003eA: results).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:04:19.709419-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:12:09.130157-07:00","closed_at":"2026-01-29T19:12:09.130157-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-vnuh","depends_on_id":"war_rig-gp1v","type":"blocks","created_at":"2026-01-29T19:04:38.232635-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-vo0x","title":"Implement Challenger cycle limiting logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.783018-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.276918-07:00","closed_at":"2026-01-18T08:17:54.276918-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-vo0x","depends_on_id":"war_rig-mbfn","type":"blocks","created_at":"2026-01-18T08:03:37.522448-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-vr6e","title":"Design algorithm for finding longest call sequences from dependency graphs","description":"## Summary\nDesign an algorithm to find the longest call sequences from dependency graphs for generating Mermaid sequence diagrams.\n\n## Requirements\n- Brute-force approach trying various entry points to find longest call chains\n- Handle cycles in dependency graphs (detect and break gracefully)\n- Handle multiple valid sequences of equal length\n- Output: ordered list of calls forming the sequence\n\n## Acceptance Criteria\n- Algorithm correctly identifies the longest call sequence from any entry point\n- Cycles are detected and handled without infinite loops\n- When multiple sequences have equal length, algorithm returns all of them (or a deterministic selection)\n- Output format is an ordered list suitable for Mermaid sequence diagram generation\n- Algorithm complexity is documented\n- Edge cases documented: empty graphs, single-node graphs, disconnected components\n\n## Technical Notes\n- This is the core algorithmic component for the Sequence Diagram SDK feature\n- Output will be consumed by the SDK API implementation to generate Mermaid diagrams","status":"closed","priority":2,"issue_type":"task","assignee":"math-algorithm-engineer","created_at":"2026-01-25T16:06:20.71302-07:00","created_by":"andrasfe","updated_at":"2026-01-25T16:17:09.835549-07:00","closed_at":"2026-01-25T16:17:09.835549-07:00","close_reason":"Implementation complete and reviewed","labels":["algorithm","citadel","sdk","sequence-diagram"]}
{"id":"war_rig-vshg","title":"Unit tests for CallSemanticsAnalyzer","description":"Test CallSemanticsAnalyzer: mock LLM responses, verify correct parsing, test batching logic, test edge cases (no calls, missing bodies, LLM failures). Test CallSemantics model validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:04:22.242095-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:18:12.547309-07:00","closed_at":"2026-01-29T19:18:12.547309-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-vshg","depends_on_id":"war_rig-gp1v","type":"blocks","created_at":"2026-01-29T19:04:38.327824-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-vshg","depends_on_id":"war_rig-88r3","type":"blocks","created_at":"2026-01-29T19:04:38.422814-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-vxr","title":"[DOCUMENTATION] COSGN00C: COSGN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:14.602098-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.044142-07:00","closed_at":"2026-01-18T09:28:03.044142-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COSGN00C.cbl","pm-type:documentation","program:COSGN00C"]}
{"id":"war_rig-wcy","title":"[DOCUMENTATION] CBEXPORT: CBEXPORT.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-3","created_at":"2026-01-10T18:42:28.400677-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:44:27.6195-07:00","closed_at":"2026-01-10T18:44:27.6195-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:CBEXPORT.cbl","pm-state:created","pm-type:documentation","program:CBEXPORT","worker:scribe-3"]}
{"id":"war_rig-wfq","title":"[DOCUMENTATION] COCRDLIC: COCRDLIC.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.389306-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.573227-07:00","closed_at":"2026-01-10T15:25:58.573227-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COCRDLIC.cbl","pm-type:documentation","program:COCRDLIC","worker:scribe-1"]}
{"id":"war_rig-wt7s","title":"Add detailed ticket list panel showing all fields","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:02:19.372653-07:00","created_by":"andrasfe","updated_at":"2026-01-18T09:06:02.939233-07:00","closed_at":"2026-01-18T09:06:02.939233-07:00","close_reason":"Implemented comprehensive ticket display with metadata, file types, sizes, and detailed ticket list","dependencies":[{"issue_id":"war_rig-wt7s","depends_on_id":"war_rig-3ffb","type":"blocks","created_at":"2026-01-18T09:02:26.90787-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-wz6","title":"[DOCUMENTATION] COACTVWC: COACTVWC.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.764387-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.494976-07:00","closed_at":"2026-01-18T09:28:00.494976-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COACTVWC.cbl","pm-type:documentation","program:COACTVWC"]}
{"id":"war_rig-wza5","title":"[DOCUMENTATION] COUSR03C: COUSR03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T18:48:19.282287-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:48:52.289277-07:00","closed_at":"2026-01-10T18:48:52.289277-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COUSR03C.cbl","pm-type:documentation","program:COUSR03C","worker:scribe-1"]}
{"id":"war_rig-wzc","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.717544-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:27.717544-07:00","labels":["cycle:1","file:CBTRN01C.cbl","pm-state:created","pm-type:documentation","program:CBTRN01C"]}
{"id":"war_rig-x4r4","title":"Add sequence diagrams to SYSTEM_DESIGN.md using citadel.get_sequence_diagrams","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-25T17:14:59.144569-07:00","created_by":"andrasfe","updated_at":"2026-01-25T18:53:38.136224-07:00","closed_at":"2026-01-25T18:53:38.136226-07:00","close_reason":"Implemented - sequence diagrams now included in SYSTEM_DESIGN.md Flows section"}
{"id":"war_rig-x5p5","title":"Update adapters to use internal chunking components","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.766898-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:07.766898-07:00","dependencies":[{"issue_id":"war_rig-x5p5","depends_on_id":"war_rig-hjvp","type":"blocks","created_at":"2026-01-18T08:03:36.678752-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-x5p5","depends_on_id":"war_rig-61yo","type":"blocks","created_at":"2026-01-18T08:03:36.774274-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-x5p5","depends_on_id":"war_rig-nv9v","type":"blocks","created_at":"2026-01-18T08:03:36.868318-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-xcp","title":"[DOCUMENTATION] CBTRN02C: CBTRN02C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.592204-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.199223-07:00","closed_at":"2026-01-10T15:25:58.199223-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:CBTRN02C.cbl","pm-type:documentation","program:CBTRN02C","worker:scribe-1"]}
{"id":"war_rig-xk2","title":"Add NUM_SCRIBES and NUM_CHALLENGERS config","description":"Update config.py and .env.example:\n- NUM_SCRIBES (default=3) - Number of parallel Scribe workers\n- NUM_CHALLENGERS (default=2) - Number of parallel Challenger workers\n- PM_MAX_CYCLES (default=5) - Max Program Manager cycles before forced completion","status":"closed","priority":2,"issue_type":"task","assignee":"python-senior-dev","created_at":"2026-01-10T13:03:44.917693-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:06:54.195757-07:00","closed_at":"2026-01-10T13:06:54.195757-07:00","close_reason":"Closed"}
{"id":"war_rig-xmkv","title":"Add missing mainframe file types to FileType enum","description":"Add the following file types to the FileType enum:\n- ASM/HLASM (Assembler)\n- REXX (scripting)\n- CLIST (TSO command lists)\n- NATURAL (Software AG 4GL)\n- EASYTRIEVE (report generator)\n- SORT (DFSORT control cards)\n- DDL (DB2 database definitions)\n- IMS (IMS DBD/PSB definitions)\n\nFile: war_rig/models/templates.py","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T19:28:06.03149-07:00","created_by":"andrasfe","updated_at":"2026-01-22T19:29:32.43812-07:00","closed_at":"2026-01-22T19:29:32.43812-07:00","close_reason":"Closed"}
{"id":"war_rig-xqri","title":"Integration tests for call semantics pipeline","description":"End-to-end tests: ScribeWorker processes COBOL file with calls, call_semantics populated in template, DocumentationWriter renders enhanced sequence diagram with data flow annotations. Test backward compat with empty call_semantics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:04:24.496382-07:00","created_by":"andrasfe","updated_at":"2026-01-29T19:22:21.104431-07:00","closed_at":"2026-01-29T19:22:21.104431-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-xqri","depends_on_id":"war_rig-47dc","type":"blocks","created_at":"2026-01-29T19:04:38.523445-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-xqri","depends_on_id":"war_rig-vnuh","type":"blocks","created_at":"2026-01-29T19:04:38.620545-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-xyh","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T18:42:27.976251-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T18:42:27.976251-07:00","labels":["cycle:1","file:COTRN01C.cbl","pm-state:created","pm-type:documentation","program:COTRN01C"]}
{"id":"war_rig-y1c","title":"[DOCUMENTATION] COUSR00C: COUSR00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:14.385695-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:03.295643-07:00","closed_at":"2026-01-18T09:28:03.295643-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COUSR00C.cbl","pm-type:documentation","program:COUSR00C"]}
{"id":"war_rig-y1e","title":"[DOCUMENTATION] COUSR01C: COUSR01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:33.708893-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.475416-07:00","closed_at":"2026-01-10T15:25:58.475416-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COUSR01C.cbl","pm-type:documentation","program:COUSR01C","worker:scribe-1"]}
{"id":"war_rig-y9m","title":"[DOCUMENTATION] COTRN00C: COTRN00C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:48:17.83429-07:00","created_by":"andraslferenczi","updated_at":"2026-01-18T09:28:00.369615-07:00","closed_at":"2026-01-18T09:28:00.369615-07:00","close_reason":"Documentation exists","labels":["cycle:1","file:COTRN00C.cbl","pm-type:documentation","program:COTRN00C"]}
{"id":"war_rig-ydo","title":"[DOCUMENTATION] CBTRN01C: CBTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:37:15.025968-07:00","created_by":"andraslferenczi","updated_at":"2026-01-29T19:32:22.643029-07:00","closed_at":"2026-01-29T19:32:22.643029-07:00","close_reason":"Closed","labels":["cycle:1","file:CBTRN01C.cbl","pm-state:created","pm-type:documentation","program:CBTRN01C"]}
{"id":"war_rig-yele","title":"Implement skill name normalization utilities","description":"## Context\n\nAgent Skills names must follow strict validation rules: lowercase alphanumeric + hyphens, no consecutive hyphens, no leading/trailing hyphens, 1-64 characters. War Rig program names (CBACT01C, CBPAUP0C, etc.) need normalization.\n\n## Requirements\n\n1. Create `war_rig/skills/naming.py` with normalization utilities\n2. Implement `normalize_skill_name(filename: str) -\u003e str` function\n3. Implement `validate_skill_name(name: str) -\u003e bool` function\n4. Handle edge cases:\n   - Uppercase conversion to lowercase\n   - Underscores replaced with hyphens\n   - Numeric prefixes (prefix with 'n-' or similar)\n   - Special characters removed\n   - Consecutive hyphens collapsed\n   - Leading/trailing hyphens stripped\n   - Length truncation to 64 chars\n\n## Acceptance Criteria\n\n- [ ] normalize_skill_name(\"CBACT01C.cbl.doc.json\") -\u003e \"cbact01c\"\n- [ ] normalize_skill_name(\"MY_PROGRAM\") -\u003e \"my-program\"\n- [ ] normalize_skill_name(\"test__name\") -\u003e \"test-name\" (no consecutive hyphens)\n- [ ] normalize_skill_name(\"-test-\") -\u003e \"test\" (no leading/trailing hyphens)\n- [ ] validate_skill_name returns True only for valid names\n- [ ] Handles empty strings and None gracefully\n- [ ] All functions have type hints and Google docstrings\n\n## Technical Notes\n\n- Agent Skills spec: lowercase alphanumeric + hyphens, 1-64 chars\n- Parent directory name must match skill name field in SKILL.md frontmatter\n- Consider using regex for validation","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:07.897875504-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:49:13.332165199-07:00","closed_at":"2026-01-29T10:49:13.332165199-07:00","close_reason":"Implemented naming utilities with normalize_skill_name, validate_skill_name, create_skill_frontmatter, and truncate_description functions. All 75 tests pass.","labels":["skills","utilities","validation"]}
{"id":"war_rig-ylbu","title":"Add Citadel context loading to ChallengerWorker","description":"## Context\n\nThe ChallengerWorker (challenger_pool.py) currently does not use Citadel static analysis at all. The ScribeWorker already has a pattern for loading Citadel context -- see _get_citadel_context() at line 336 of scribe_pool.py, which calls citadel.get_functions() and citadel.get_includes(). We need an equivalent capability in the ChallengerWorker so the structural pre-check can access ground-truth paragraph names, call relationships, and copybook includes.\n\n## Requirements\n\n1. Add a Citadel SDK import and initialization to ChallengerWorker.__init__() (file: war_rig/workers/challenger_pool.py, line ~132-177). Follow the same pattern as ScribeWorker which initializes self._citadel in __init__ and gracefully handles the case where Citadel is unavailable (returns None).\n\n2. Add a _get_citadel_context(self, file_path: str) method to ChallengerWorker that:\n   - Calls self._citadel.analyze_file(file_path) to get a FileAnalysisResult (see citadel/src/citadel/sdk.py line 227)\n   - Extracts: list of paragraph/function names with line ranges (FileArtifact.name, line_start, line_end), per-paragraph outgoing callouts (FileArtifact.callouts -\u003e Callout.target, relationship, line), and preprocessor includes (FileAnalysisResult.preprocessor_includes)\n   - Returns a structured dict or dataclass with: paragraphs (list of {name, line_start, line_end, calls: [{target, type, line}]}), includes (list of str), dead_code (list of dict -- from cached dead code, same pattern as ScribeWorker)\n   - Returns None gracefully if Citadel unavailable or analysis fails (log at debug level)\n\n3. The file_path for Citadel must be resolved from ticket metadata. See _load_documentation_state() line 676-678 which reads metadata[\"file_path\"]. Alternatively, resolve from ticket.file_name + config input_directory, same as ScribeWorker line 658-661.\n\n4. Add _find_perform_thru_targets(self, file_path: str) -\u003e set[str] method (copy pattern from scribe_pool.py line 434-466) -- needed to filter false positive dead code from structural check.\n\n## Acceptance Criteria\n\n- ChallengerWorker has self._citadel attribute initialized in __init__ (None if Citadel unavailable)\n- _get_citadel_context returns structured data with paragraphs, includes, dead_code\n- Method handles errors gracefully (returns None, logs debug)\n- _find_perform_thru_targets reuses the PERFORM THRU regex pattern from ScribeWorker\n- No new external dependencies required (Citadel SDK is already in the project)\n\n## Files to Modify\n\n- war_rig/workers/challenger_pool.py (ChallengerWorker class)\n\n## Dependencies\n\nNone -- this is the foundational ticket.","status":"closed","priority":2,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-27T15:15:51.08794514-07:00","created_by":"andrasfe","updated_at":"2026-01-27T15:24:07.828196984-07:00","closed_at":"2026-01-27T15:24:07.828196984-07:00","close_reason":"Closed"}
{"id":"war_rig-ymw9","title":"Create unit tests for ported splitter components","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:07.952348-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:03:07.952348-07:00","dependencies":[{"issue_id":"war_rig-ymw9","depends_on_id":"war_rig-9758","type":"blocks","created_at":"2026-01-18T08:03:37.055953-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-z2z","title":"[DOCUMENTATION] COADM01C: COADM01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.72051-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.158322-07:00","closed_at":"2026-01-10T15:25:58.158322-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COADM01C.cbl","pm-type:documentation","program:COADM01C","worker:scribe-1"]}
{"id":"war_rig-z61v","title":"Add get_function_body SDK method","description":"Add a method to the Citadel SDK that takes a file path and function/artifact name, and returns only the text of the function body. Must parse start/end of functions correctly for COBOL paragraphs, Python functions, etc.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T12:57:09.372667-07:00","created_by":"andrasfe","updated_at":"2026-01-24T13:08:08.757537-07:00","closed_at":"2026-01-24T13:08:08.757537-07:00","close_reason":"Implemented get_function_body SDK method with tests"}
{"id":"war_rig-z74","title":"Define beads ticket types and states for workflow","description":"Design and document ticket schema:\n- Ticket types: SOURCE_DOC, CHALLENGER_REVIEW, CORRECTION_REQUEST, IMPERATOR_REVIEW, CLARIFICATION\n- States: open, claimed, scribe_complete, challenger_complete, closed\n- Metadata: file_name, program_id, cycle_number, worker_id, parent_ticket_id\n- Dependencies: CHALLENGER_REVIEW depends on SOURCE_DOC completion\n- Add ticket type support to war_rig/beads.py","status":"closed","priority":1,"issue_type":"task","assignee":"python-architect","created_at":"2026-01-10T13:04:12.942537-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T13:14:36.570846-07:00","closed_at":"2026-01-10T13:14:36.570846-07:00","close_reason":"Closed","dependencies":[{"issue_id":"war_rig-z74","depends_on_id":"war_rig-9qk","type":"blocks","created_at":"2026-01-10T13:04:36.297056-07:00","created_by":"andraslferenczi"}]}
{"id":"war_rig-z768","title":"Implement system overview skill generation","description":"## Context\n\nThe system overview skill serves as the index for progressive discovery. It should help agents find relevant programs by listing all documented programs with brief descriptions.\n\n## Requirements\n\n1. Create `war_rig/skills/overview_skill.py` with `OverviewSkillGenerator` class\n2. Generate system-overview/SKILL.md from:\n   - SYSTEM_OVERVIEW.md (if exists)\n   - Or synthesize from individual program docs\n3. SKILL.md frontmatter:\n   ```yaml\n   ---\n   name: system-overview\n   description: Index of documented programs in the system. Use this skill to find programs by business function or technical purpose.\n   metadata:\n     author: war-rig\n     version: \"1.0\"\n     total_programs: \u003ccount\u003e\n   ---\n   ```\n4. SKILL.md body should include:\n   - System summary/executive overview\n   - Program catalog (name, type, brief description)\n   - Instructions for using other skills\n   - How to navigate to specific program skills\n\n## Acceptance Criteria\n\n- [ ] Reads SYSTEM_OVERVIEW.md if available\n- [ ] Falls back to synthesizing from program docs if no overview\n- [ ] Lists all programs with: name, type, one-line description\n- [ ] Groups programs by type (BATCH, ONLINE, COPYBOOK)\n- [ ] Includes navigation instructions for finding specific program skills\n- [ ] Total programs count in metadata\n- [ ] Stays under 500 lines\n\n## Technical Notes\n\n- The system overview is the entry point for agents exploring the codebase\n- Should enable agents to quickly find relevant programs without loading all skills\n- Reference SYSTEM_OVERVIEW.md structure in example_output/README.md","status":"closed","priority":1,"issue_type":"task","owner":"andrasf94@gmail.com","created_at":"2026-01-29T10:41:34.674882543-07:00","created_by":"andrasfe","updated_at":"2026-01-29T10:52:59.001564242-07:00","closed_at":"2026-01-29T10:52:59.001566647-07:00","labels":["index","overview","skills"],"dependencies":[{"issue_id":"war_rig-z768","depends_on_id":"war_rig-3x8k","type":"blocks","created_at":"2026-01-29T10:41:34.677183038-07:00","created_by":"andrasfe"},{"issue_id":"war_rig-z768","depends_on_id":"war_rig-yele","type":"blocks","created_at":"2026-01-29T10:41:34.681777986-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-zpmu","title":"Process DOC_CHUNK items through ScribeWorkerAdapter","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T19:38:49.285412-07:00","created_by":"andrasfe","updated_at":"2026-01-15T19:41:13.801022-07:00","closed_at":"2026-01-15T19:41:13.801022-07:00","close_reason":"Implemented chunked processing workflow in ticket_engine.py","dependencies":[{"issue_id":"war_rig-zpmu","depends_on_id":"war_rig-e2wt","type":"blocks","created_at":"2026-01-15T19:38:57.709459-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-zq9","title":"[DOCUMENTATION] COTRN01C: COTRN01C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-10T15:16:34.403479-07:00","created_by":"andraslferenczi","updated_at":"2026-01-10T15:25:58.259704-07:00","closed_at":"2026-01-10T15:25:58.259704-07:00","close_reason":"Cleaning up for new run","labels":["cycle:1","file:COTRN01C.cbl","pm-type:documentation","program:COTRN01C","worker:scribe-1"]}
{"id":"war_rig-zrft","title":"Implement malformed output capture and storage","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T08:03:18.285344-07:00","created_by":"andrasfe","updated_at":"2026-01-18T08:17:54.279531-07:00","closed_at":"2026-01-18T08:17:54.279531-07:00","close_reason":"Implemented in main branch","dependencies":[{"issue_id":"war_rig-zrft","depends_on_id":"war_rig-jnxi","type":"blocks","created_at":"2026-01-18T08:03:37.242964-07:00","created_by":"andrasfe"}]}
{"id":"war_rig-zvkt","title":"[DOCUMENTATION] COUSR03C: COUSR03C.cbl","status":"closed","priority":2,"issue_type":"task","assignee":"scribe-1","created_at":"2026-01-11T08:12:54.616023-07:00","created_by":"andraslferenczi","updated_at":"2026-01-11T08:13:37.11022-07:00","closed_at":"2026-01-11T08:13:37.11022-07:00","close_reason":"Documentation completed successfully","labels":["cycle:1","file:COUSR03C.cbl","pm-type:documentation","program:COUSR03C","worker:scribe-1"]}
