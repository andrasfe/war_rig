flowchart LR
    subgraph code
        n_procedure_LOADPADB[LOADPADB]
        n_paragraph_STEP01[STEP01]
        n_procedure_DBPAUTP0[DBPAUTP0]
        n_paragraph_STEPDEL[STEPDEL]
        n_paragraph_UNLOAD[UNLOAD]
        n_procedure_UNLDGSAM[UNLDGSAM]
        n_procedure_CBPAUP0J[CBPAUP0J]
        n_procedure_UNLDPADB[UNLDPADB]
        n_paragraph_STEP0[STEP0]
        n_copybook_COPAU01[/COPAU01/]
        n_copybook_COPAU00[/COPAU00/]
        n_copybook_CCPAURLY[/CCPAURLY/]
        n_copybook_CIPAUSMY[/CIPAUSMY/]
        n_copybook_PASFLPCB[/PASFLPCB/]
        n_copybook_IMSFUNCS[/IMSFUNCS/]
        n_copybook_PAUTBPCB[/PAUTBPCB/]
        n_copybook_CIPAUDTY[/CIPAUDTY/]
        n_copybook_CCPAURQY[/CCPAURQY/]
        n_copybook_CCPAUERY[/CCPAUERY/]
        n_copybook_PADFLPCB[/PADFLPCB/]
        n_program_PAUDBLOD[PAUDBLOD]
        n_paragraph_PAUTBPCB[PAUTBPCB]
        n_paragraph_MAIN_PARA[MAIN-PARA]
        n_paragraph_GOBACK[GOBACK]
        n_paragraph_1000_INITIALIZE[1000-INITIALIZE]
        n_paragraph_01810026[01810026]
        n_paragraph_END_IF[END-IF]
        n_paragraph_1000_EXIT[1000-EXIT]
        n_paragraph_EXIT[EXIT]
        n_paragraph_2000_READ_ROOT_SEG_FILE[2000-READ-ROOT-SEG-FILE]
        n_paragraph_2000_EXIT[2000-EXIT]
        n_paragraph_2100_INSERT_ROOT_SEG[2100-INSERT-ROOT-SEG]
        n_paragraph_ROOT_UNQUAL_SSA[ROOT-UNQUAL-SSA]
        n_paragraph_2100_EXIT[2100-EXIT]
        n_paragraph_3000_READ_CHILD_SEG_FILE[3000-READ-CHILD-SEG-FILE]
        n_paragraph_3000_EXIT[3000-EXIT]
        n_paragraph_3100_INSERT_CHILD_SEG[3100-INSERT-CHILD-SEG]
        n_paragraph_ROOT_QUAL_SSA[ROOT-QUAL-SSA]
        n_paragraph_3100_EXIT[3100-EXIT]
        n_paragraph_3200_INSERT_IMS_CALL[3200-INSERT-IMS-CALL]
        n_paragraph_CHILD_UNQUAL_SSA[CHILD-UNQUAL-SSA]
        n_paragraph_3200_EXIT[3200-EXIT]
        n_paragraph_4000_FILE_CLOSE[4000-FILE-CLOSE]
        n_paragraph_4000_EXIT[4000-EXIT]
        n_paragraph_9999_ABEND[9999-ABEND]
        n_paragraph_9999_EXIT[9999-EXIT]
        n_program_COPAUS2C[COPAUS2C]
        n_paragraph_END_EXEC[END-EXEC]
        n_paragraph_FRAUD_UPDATE[FRAUD-UPDATE]
        n_program_COPAUA0C[COPAUA0C]
        n_paragraph_1100_OPEN_REQUEST_QUEUE[1100-OPEN-REQUEST-QUEUE]
        n_paragraph_1100_EXIT[1100-EXIT]
        n_paragraph_1200_SCHEDULE_PSB[1200-SCHEDULE-PSB]
        n_paragraph_1200_EXIT[1200-EXIT]
        n_paragraph_2000_MAIN_PROCESS[2000-MAIN-PROCESS]
        n_paragraph_END_PERFORM[END-PERFORM]
        n_paragraph_2100_EXTRACT_REQUEST_MSG[2100-EXTRACT-REQUEST-MSG]
        n_paragraph_3100_READ_REQUEST_MQ[3100-READ-REQUEST-MQ]
        n_paragraph_5000_PROCESS_AUTH[5000-PROCESS-AUTH]
        n_paragraph_5000_EXIT[5000-EXIT]
        n_paragraph_5100_READ_XREF_RECORD[5100-READ-XREF-RECORD]
        n_paragraph_END_EVALUATE[END-EVALUATE]
        n_paragraph_5100_EXIT[5100-EXIT]
        n_paragraph_5200_READ_ACCT_RECORD[5200-READ-ACCT-RECORD]
        n_paragraph_5200_EXIT[5200-EXIT]
        n_paragraph_5300_READ_CUST_RECORD[5300-READ-CUST-RECORD]
        n_paragraph_5300_EXIT[5300-EXIT]
        n_paragraph_5500_READ_AUTH_SUMMRY[5500-READ-AUTH-SUMMRY]
        n_paragraph_5500_EXIT[5500-EXIT]
        n_paragraph_5600_READ_PROFILE_DATA[5600-READ-PROFILE-DATA]
        n_paragraph_CONTINUE[CONTINUE]
        n_paragraph_5600_EXIT[5600-EXIT]
        n_paragraph_6000_MAKE_DECISION[6000-MAKE-DECISION]
        n_paragraph_END_STRING[END-STRING]
        n_paragraph_6000_EXIT[6000-EXIT]
        n_paragraph_7100_SEND_RESPONSE[7100-SEND-RESPONSE]
        n_paragraph_7100_EXIT[7100-EXIT]
        n_paragraph_8000_WRITE_AUTH_TO_DB[8000-WRITE-AUTH-TO-DB]
        n_paragraph_8000_EXIT[8000-EXIT]
        n_paragraph_8400_UPDATE_SUMMARY[8400-UPDATE-SUMMARY]
        n_paragraph_8400_EXIT[8400-EXIT]
        n_paragraph_8500_INSERT_AUTH[8500-INSERT-AUTH]
        n_paragraph_8500_EXIT[8500-EXIT]
        n_paragraph_9000_TERMINATE[9000-TERMINATE]
        n_paragraph_9000_EXIT[9000-EXIT]
        n_paragraph_9100_CLOSE_REQUEST_QUEUE[9100-CLOSE-REQUEST-QUEUE]
        n_paragraph_9100_EXIT[9100-EXIT]
        n_paragraph_9500_LOG_ERROR[9500-LOG-ERROR]
        n_paragraph_9500_EXIT[9500-EXIT]
        n_paragraph_9990_END_ROUTINE[9990-END-ROUTINE]
        n_paragraph_9990_EXIT[9990-EXIT]
        n_program_DBUNLDGS[DBUNLDGS]
        n_paragraph_PADFLPCB[PADFLPCB]
        n_paragraph_01680000[01680000]
        n_paragraph_2000_FIND_NEXT_AUTH_SUMMARY[2000-FIND-NEXT-AUTH-SUMMARY]
        n_paragraph_3000_FIND_NEXT_AUTH_DTL[3000-FIND-NEXT-AUTH-DTL]
        n_paragraph_3100_INSERT_PARENT_SEG_GSAM[3100-INSERT-PARENT-SEG-GSAM]
        n_paragraph_PENDING_AUTH_SUMMARY[PENDING-AUTH-SUMMARY]
        n_paragraph_3200_INSERT_CHILD_SEG_GSAM[3200-INSERT-CHILD-SEG-GSAM]
        n_paragraph_PENDING_AUTH_DETAILS[PENDING-AUTH-DETAILS]
        n_program_CBPAUP0C[CBPAUP0C]
        n_paragraph_PGM_PCB_MASK[PGM-PCB-MASK]
        n_paragraph_4000_CHECK_IF_EXPIRED[4000-CHECK-IF-EXPIRED]
        n_paragraph_5000_DELETE_AUTH_DTL[5000-DELETE-AUTH-DTL]
        n_paragraph_6000_DELETE_AUTH_SUMMARY[6000-DELETE-AUTH-SUMMARY]
        n_paragraph_9000_TAKE_CHECKPOINT[9000-TAKE-CHECKPOINT]
        n_program_PAUDBUNL[PAUDBUNL]
        n_program_COPAUS1C[COPAUS1C]
        n_paragraph_PROCESS_ENTER_KEY[PROCESS-ENTER-KEY]
        n_paragraph_MARK_AUTH_FRAUD[MARK-AUTH-FRAUD]
        n_paragraph_PROCESS_PF8_KEY[PROCESS-PF8-KEY]
        n_paragraph_POPULATE_AUTH_DETAILS[POPULATE-AUTH-DETAILS]
        n_paragraph_RETURN_TO_PREV_SCREEN[RETURN-TO-PREV-SCREEN]
        n_paragraph_SEND_AUTHVIEW_SCREEN[SEND-AUTHVIEW-SCREEN]
        n_paragraph_RECEIVE_AUTHVIEW_SCREEN[RECEIVE-AUTHVIEW-SCREEN]
        n_paragraph_POPULATE_HEADER_INFO[POPULATE-HEADER-INFO]
        n_paragraph_READ_AUTH_RECORD[READ-AUTH-RECORD]
        n_paragraph_READ_NEXT_AUTH_RECORD[READ-NEXT-AUTH-RECORD]
        n_paragraph_UPDATE_AUTH_DETAILS[UPDATE-AUTH-DETAILS]
        n_paragraph_TAKE_SYNCPOINT[TAKE-SYNCPOINT]
        n_paragraph_ROLL_BACK[ROLL-BACK]
        n_paragraph_SCHEDULE_PSB[SCHEDULE-PSB]
        n_program_COPAUS0C[COPAUS0C]
        n_paragraph_GATHER_DETAILS[GATHER-DETAILS]
        n_paragraph_PROCESS_PF7_KEY[PROCESS-PF7-KEY]
        n_paragraph_PROCESS_PAGE_FORWARD[PROCESS-PAGE-FORWARD]
        n_paragraph_GET_AUTHORIZATIONS[GET-AUTHORIZATIONS]
        n_paragraph_REPOSITION_AUTHORIZATIONS[REPOSITION-AUTHORIZATIONS]
        n_paragraph_POPULATE_AUTH_LIST[POPULATE-AUTH-LIST]
        n_paragraph_INITIALIZE_AUTH_DATA[INITIALIZE-AUTH-DATA]
        n_paragraph_SEND_PAULST_SCREEN[SEND-PAULST-SCREEN]
        n_paragraph_RECEIVE_PAULST_SCREEN[RECEIVE-PAULST-SCREEN]
        n_paragraph_GATHER_ACCOUNT_DETAILS[GATHER-ACCOUNT-DETAILS]
        n_paragraph_GETCARDXREF_BYACCT[GETCARDXREF-BYACCT]
        n_paragraph_GETACCTDATA_BYACCT[GETACCTDATA-BYACCT]
        n_paragraph_GETCUSTDATA_BYCUST[GETCUSTDATA-BYCUST]
        n_paragraph_GET_AUTH_SUMMARY[GET-AUTH-SUMMARY]
    end
    subgraph data
        n_record_layout_COPAU1AI[(COPAU1AI)]
        n_record_layout_COPAU0AI[(COPAU0AI)]
        n_column_05:PA_RL_CARD_NUM(05:PA-RL-CARD-NUM)
        n_column_05:PA_ACCT_ID(05:PA-ACCT-ID)
        n_record_layout_PASFLPCB[(PASFLPCB)]
        n_record_layout_FUNC_CODES[(FUNC-CODES)]
        n_record_layout_PAUTBPCB[(PAUTBPCB)]
        n_column_05:PA_RQ_AUTH_DATE(05:PA-RQ-AUTH-DATE)
        n_record_layout_ERROR_LOG_RECORD[(ERROR-LOG-RECORD)]
        n_record_layout_PADFLPCB[(PADFLPCB)]
        n_index_XAUTHFRD(XAUTHFRD)
        n_table_AUTHFRDS[(AUTHFRDS)]
    end
    subgraph interface
        n_map_COPAU00{{COPAU00}}
        n_screen_COPAU0A{{COPAU0A}}
        n_map_COPAU01{{COPAU01}}
        n_screen_COPAU1A{{COPAU1A}}
    end

    n_program_PAUDBLOD -->|includes| n_copybook_IMSFUNCS
    n_program_PAUDBLOD -->|includes| n_copybook_CIPAUSMY
    n_program_PAUDBLOD -->|includes| n_copybook_CIPAUDTY
    n_program_PAUDBLOD -->|includes| n_copybook_PAUTBPCB
    n_program_COPAUS2C -->|includes| n_copybook_CIPAUDTY
    n_program_COPAUA0C -->|includes| n_copybook_CCPAURQY
    n_program_COPAUA0C -->|includes| n_copybook_CCPAURLY
    n_program_COPAUA0C -->|includes| n_copybook_CCPAUERY
    n_program_COPAUA0C -->|includes| n_copybook_CIPAUSMY
    n_program_COPAUA0C -->|includes| n_copybook_CIPAUDTY
    n_program_DBUNLDGS -->|includes| n_copybook_IMSFUNCS
    n_program_DBUNLDGS -->|includes| n_copybook_CIPAUSMY
    n_program_DBUNLDGS -->|includes| n_copybook_CIPAUDTY
    n_program_DBUNLDGS -->|includes| n_copybook_PAUTBPCB
    n_program_DBUNLDGS -->|includes| n_copybook_PASFLPCB
    n_program_DBUNLDGS -->|includes| n_copybook_PADFLPCB
    n_program_CBPAUP0C -->|includes| n_copybook_CIPAUSMY
    n_program_CBPAUP0C -->|includes| n_copybook_CIPAUDTY
    n_program_PAUDBUNL -->|includes| n_copybook_IMSFUNCS
    n_program_PAUDBUNL -->|includes| n_copybook_CIPAUSMY
    n_program_PAUDBUNL -->|includes| n_copybook_CIPAUDTY
    n_program_PAUDBUNL -->|includes| n_copybook_PAUTBPCB
    n_program_COPAUS1C -->|includes| n_copybook_COPAU01
    n_program_COPAUS1C -->|includes| n_copybook_CIPAUSMY
    n_program_COPAUS1C -->|includes| n_copybook_CIPAUDTY
    n_program_COPAUS0C -->|includes| n_copybook_COPAU00
    n_program_COPAUS0C -->|includes| n_copybook_CIPAUSMY
    n_program_COPAUS0C -->|includes| n_copybook_CIPAUDTY